import{j as e,V as s,T as i,H as t,I as r,u as n,C as a,a as o,b as l,B as c,c as d,d as u,e as h,D as x,f as p,F as m,g,h as j,i as f,k as b,E as y,M as v,l as S,m as w,n as C,o as z,p as A,U as P,L as T,q as E,r as _,s as D,t as I,v as k,w as N,x as W,y as L,z as R,A as O,G as F,J as M,K as B,N as $,O as q,P as V,Q as H,R as U,S as Y,W as G,X,Y as J,Z as Q,_ as K,$ as Z,a0 as ee,a1 as se,a2 as ie,a3 as te,a4 as re,a5 as ne,a6 as ae,a7 as oe,a8 as le,a9 as ce,aa as de,ab as ue,ac as he,ad as xe,ae as pe,af as me,ag as ge,ah as je,ai as fe,aj as be,ak as ye,al as ve,am as Se,an as we,ao as Ce,ap as ze,aq as Ae,ar as Pe,as as Te,at as Ee,au as _e,av as De,aw as Ie,ax as ke,ay as Ne,az as We,aA as Le,aB as Re,aC as Oe,aD as Fe,aE as Me,aF as Be,aG as $e,aH as qe}from"./chakra-B6izE5xm.js";import{a as Ve,r as He,b as Ue}from"./vendor-CFOUl9e9.js";import{u as Ye,O as Ge,N as Xe,a as Je,b as Qe,R as Ke,c as Ze,d as es,B as ss}from"./router-BiMseHCo.js";import{a as is,c as ts}from"./utils-CQyXWVi_.js";import{G as rs}from"./icons-DbsIQYz2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var ns={},as=Ve;function os(e){var s,i,t="";if("string"==typeof e||"number"==typeof e)t+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(s=0;s<r;s++)e[s]&&(i=os(e[s]))&&(t&&(t+=" "),t+=i)}else for(i in e)e[i]&&(t&&(t+=" "),t+=i);return t}function ls(){for(var e,s,i=0,t="",r=arguments.length;i<r;i++)(e=arguments[i])&&(s=os(e))&&(t&&(t+=" "),t+=s);return t}ns.createRoot=as.createRoot,ns.hydrateRoot=as.hydrateRoot,function(e){if("undefined"==typeof document)return;let s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",s.firstChild?s.insertBefore(i,s.firstChild):s.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var cs=e=>"number"==typeof e&&!isNaN(e),ds=e=>"string"==typeof e,us=e=>"function"==typeof e,hs=e=>ds(e)||us(e)?e:null,xs=(e,s)=>!1===e||cs(e)&&e>0?e:s,ps=e=>He.isValidElement(e)||ds(e)||us(e)||cs(e);function ms(e,s){return{content:gs(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:s}}function gs(e,s,i=!1){return He.isValidElement(e)&&!ds(e.type)?He.cloneElement(e,{closeToast:s.closeToast,toastProps:s,data:s.data,isPaused:i}):us(e)?e({closeToast:s.closeToast,toastProps:s,data:s.data,isPaused:i}):e}function js({delay:e,isRunning:s,closeToast:i,type:t="default",hide:r,className:n,controlledProgress:a,progress:o,rtl:l,isIn:c,theme:d}){let u=r||a&&0===o,h={animationDuration:`${e}ms`,animationPlayState:s?"running":"paused"};a&&(h.transform=`scaleX(${o})`);let x=ls("Toastify__progress-bar",a?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${t}`,{"Toastify__progress-bar--rtl":l}),p=us(n)?n({rtl:l,type:t,defaultClassName:x}):ls(x,n),m={[a&&o>=1?"onTransitionEnd":"onAnimationEnd"]:a&&o<1?null:()=>{c&&i()}};return Ue.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":u},Ue.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${t}`}),Ue.createElement("div",{role:"progressbar","aria-hidden":u?"true":"false","aria-label":"notification timer",className:p,style:h,...m}))}var fs=1,bs=()=>""+fs++;function ys(e,s,i){let t=1,r=0,n=[],a=[],o=s,l=new Map,c=new Set,d=()=>{a=Array.from(l.values()),c.forEach(e=>e())},u=e=>{var s,i;null==(i=null==(s=e.props)?void 0:s.onClose)||i.call(s,e.removalReason),e.isActive=!1},h=e=>{if(null==e)l.forEach(u);else{let s=l.get(e);s&&u(s)}d()},x=e=>{var s,t;let{toastId:r,updateId:n}=e.props,a=null==n;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(r,e),d(),i(ms(e,a?"added":"updated")),a&&(null==(t=(s=e.props).onOpen)||t.call(s))};return{id:e,props:o,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,s)=>{l.forEach(i=>{var t;(null==s||s===i.props.toastId)&&(null==(t=i.toggle)||t.call(i,e))})},removeToast:h,toasts:l,clearQueue:()=>{r-=n.length,n=[]},buildToast:(s,a)=>{if((({containerId:s,toastId:i,updateId:t})=>{let r=s?s!==e:1!==e,n=l.has(i)&&null==t;return r||n})(a))return;let{toastId:c,updateId:u,data:p,staleId:m,delay:g}=a,j=null==u;j&&r++;let f={...o,style:o.toastStyle,key:t++,...Object.fromEntries(Object.entries(a).filter(([e,s])=>null!=s)),toastId:c,updateId:u,data:p,isIn:!1,className:hs(a.className||o.toastClassName),progressClassName:hs(a.progressClassName||o.progressClassName),autoClose:!a.isLoading&&xs(a.autoClose,o.autoClose),closeToast(e){l.get(c).removalReason=e,h(c)},deleteToast(){let e=l.get(c);if(null!=e){if(i(ms(e,"removed")),l.delete(c),r--,r<0&&(r=0),n.length>0)return void x(n.shift());d()}}};f.closeButton=o.closeButton,!1===a.closeButton||ps(a.closeButton)?f.closeButton=a.closeButton:!0===a.closeButton&&(f.closeButton=!ps(o.closeButton)||o.closeButton);let b={content:s,props:f,staleId:m};o.limit&&o.limit>0&&r>o.limit&&j?n.push(b):cs(g)?setTimeout(()=>{x(b)},g):x(b)},setProps(e){o=e},setToggle:(e,s)=>{let i=l.get(e);i&&(i.toggle=s)},isToastActive:e=>{var s;return null==(s=l.get(e))?void 0:s.isActive},getSnapshot:()=>a}}var vs=new Map,Ss=[],ws=new Set,Cs=e=>ws.forEach(s=>s(e)),zs=()=>vs.size>0;function As(e,s){var i;if(s)return!(null==(i=vs.get(s))||!i.isToastActive(e));let t=!1;return vs.forEach(s=>{s.isToastActive(e)&&(t=!0)}),t}function Ps(e){if(zs()){if(null==e||(e=>ds(e)||cs(e))(e))vs.forEach(s=>{s.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let s=vs.get(e.containerId);s?s.removeToast(e.id):vs.forEach(s=>{s.removeToast(e.id)})}}else Ss=Ss.filter(s=>null!=e&&s.options.toastId!==e)}function Ts(e,s){ps(e)&&(zs()||Ss.push({content:e,options:s}),vs.forEach(i=>{i.buildToast(e,s)}))}function Es(e,s){vs.forEach(i=>{(null==s||null==s||!s.containerId||(null==s?void 0:s.containerId)===i.id)&&i.toggle(e,null==s?void 0:s.id)})}function _s(e){let s=e.containerId||1;return{subscribe(i){let t=ys(s,e,Cs);vs.set(s,t);let r=t.observe(i);return Ss.forEach(e=>Ts(e.content,e.options)),Ss=[],()=>{r(),vs.delete(s)}},setProps(e){var i;null==(i=vs.get(s))||i.setProps(e)},getSnapshot(){var e;return null==(e=vs.get(s))?void 0:e.getSnapshot()}}}function Ds(e){return e&&(ds(e.toastId)||cs(e.toastId))?e.toastId:bs()}function Is(e,s){return Ts(e,s),s.toastId}function ks(e,s){return{...s,type:s&&s.type||e,toastId:Ds(s)}}function Ns(e){return(s,i)=>Is(s,ks(e,i))}function Ws(e,s){return Is(e,ks("default",s))}function Ls(e){let[s,i]=He.useState(!1),[t,r]=He.useState(!1),n=He.useRef(null),a=He.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:o,pauseOnHover:l,closeToast:c,onClick:d,closeOnClick:u}=e;function h(){i(!0)}function x(){i(!1)}function p(i){let t=n.current;if(a.canDrag&&t){a.didMove=!0,s&&x(),"x"===e.draggableDirection?a.delta=i.clientX-a.start:a.delta=i.clientY-a.start,a.start!==i.clientX&&(a.canCloseOnClick=!1);let r="x"===e.draggableDirection?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;t.style.transform=`translate3d(${r},0)`,t.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance))}}function m(){document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",m);let s=n.current;if(a.canDrag&&a.didMove&&s){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return r(!0),e.closeToast(!0),void e.collapseAll();s.style.transition="transform 0.2s, opacity 0.2s",s.style.removeProperty("transform"),s.style.removeProperty("opacity")}}(function(e){var s;null==(s=vs.get(e.containerId||1))||s.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:i}),He.useEffect(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||x(),window.addEventListener("focus",h),window.addEventListener("blur",x),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",x)}},[e.pauseOnFocusLoss]);let g={onPointerDown:function(s){if(!0===e.draggable||e.draggable===s.pointerType){a.didMove=!1,document.addEventListener("pointermove",p),document.addEventListener("pointerup",m);let i=n.current;a.canCloseOnClick=!0,a.canDrag=!0,i.style.transition="none","x"===e.draggableDirection?(a.start=s.clientX,a.removalDistance=i.offsetWidth*(e.draggablePercent/100)):(a.start=s.clientY,a.removalDistance=i.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(s){let{top:i,bottom:t,left:r,right:a}=n.current.getBoundingClientRect();"touchend"!==s.nativeEvent.type&&e.pauseOnHover&&s.clientX>=r&&s.clientX<=a&&s.clientY>=i&&s.clientY<=t?x():h()}};return o&&l&&(g.onMouseEnter=x,e.stacked||(g.onMouseLeave=h)),u&&(g.onClick=e=>{d&&d(e),a.canCloseOnClick&&c(!0)}),{playToast:h,pauseToast:x,isRunning:s,preventExitTransition:t,toastRef:n,eventHandlers:g}}Ws.loading=(e,s)=>Is(e,ks("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...s})),Ws.promise=function(e,{pending:s,error:i,success:t},r){let n;s&&(n=ds(s)?Ws.loading(s,r):Ws.loading(s.render,{...r,...s}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(e,s,i)=>{if(null==s)return void Ws.dismiss(n);let t={type:e,...a,...r,data:i},o=ds(s)?{render:s}:s;return n?Ws.update(n,{...t,...o}):Ws(o.render,{...t,...o}),i},l=us(e)?e():e;return l.then(e=>o("success",t,e)).catch(e=>o("error",i,e)),l},Ws.success=Ns("success"),Ws.info=Ns("info"),Ws.error=Ns("error"),Ws.warning=Ns("warning"),Ws.warn=Ws.warning,Ws.dark=(e,s)=>Is(e,ks("default",{theme:"dark",...s})),Ws.dismiss=function(e){Ps(e)},Ws.clearWaitingQueue=(e={})=>{vs.forEach(s=>{s.props.limit&&(!e.containerId||s.id===e.containerId)&&s.clearQueue()})},Ws.isActive=As,Ws.update=(e,s={})=>{let i=((e,{containerId:s})=>{var i;return null==(i=vs.get(s||1))?void 0:i.toasts.get(e)})(e,s);if(i){let{props:t,content:r}=i,n={delay:100,...t,...s,toastId:s.toastId||e,updateId:bs()};n.toastId!==e&&(n.staleId=e);let a=n.render||r;delete n.render,Is(a,n)}},Ws.done=e=>{Ws.update(e,{progress:1})},Ws.onChange=function(e){return ws.add(e),()=>{ws.delete(e)}},Ws.play=e=>Es(!0,e),Ws.pause=e=>Es(!1,e);var Rs="undefined"!=typeof window?He.useLayoutEffect:He.useEffect,Os=({theme:e,type:s,isLoading:i,...t})=>Ue.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===e?"currentColor":`var(--toastify-icon-color-${s})`,...t});var Fs={info:function(e){return Ue.createElement(Os,{...e},Ue.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return Ue.createElement(Os,{...e},Ue.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return Ue.createElement(Os,{...e},Ue.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return Ue.createElement(Os,{...e},Ue.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Ue.createElement("div",{className:"Toastify__spinner"})}};function Ms({theme:e,type:s,isLoading:i,icon:t}){let r=null,n={theme:e,type:s};return!1===t||(us(t)?r=t({...n,isLoading:i}):He.isValidElement(t)?r=He.cloneElement(t,n):i?r=Fs.spinner():(e=>e in Fs)(s)&&(r=Fs[s](n))),r}var Bs=e=>{let{isRunning:s,preventExitTransition:i,toastRef:t,eventHandlers:r,playToast:n}=Ls(e),{closeButton:a,children:o,autoClose:l,onClick:c,type:d,hideProgressBar:u,closeToast:h,transition:x,position:p,className:m,style:g,progressClassName:j,updateId:f,role:b,progress:y,rtl:v,toastId:S,deleteToast:w,isIn:C,isLoading:z,closeOnClick:A,theme:P,ariaLabel:T}=e,E=ls("Toastify__toast",`Toastify__toast-theme--${P}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":v},{"Toastify__toast--close-on-click":A}),_=us(m)?m({rtl:v,position:p,type:d,defaultClassName:E}):ls(E,m),D=Ms(e),I=!!y||!l,k={closeToast:h,type:d,theme:P},N=null;return!1===a||(N=us(a)?a(k):He.isValidElement(a)?He.cloneElement(a,k):function({closeToast:e,theme:s,ariaLabel:i="close"}){return Ue.createElement("button",{className:`Toastify__close-button Toastify__close-button--${s}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":i},Ue.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ue.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(k)),Ue.createElement(x,{isIn:C,done:w,position:p,preventExitTransition:i,nodeRef:t,playToast:n},Ue.createElement("div",{id:S,tabIndex:0,onClick:c,"data-in":C,className:_,...r,style:g,ref:t,...C&&{role:b,"aria-label":T}},null!=D&&Ue.createElement("div",{className:ls("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!z})},D),gs(o,e,!s),N,!e.customProgressBar&&Ue.createElement(js,{...f&&!I?{key:`p-${f}`}:{},rtl:v,theme:P,delay:l,isRunning:s,isIn:C,closeToast:h,hide:u,type:d,className:j,controlledProgress:I,progress:y||0})))},$s={position:"top-right",transition:function({enter:e,exit:s,appendPosition:i=!1,collapse:t=!0,collapseDuration:r=300}){return function({children:n,position:a,preventExitTransition:o,done:l,nodeRef:c,isIn:d,playToast:u}){let h=i?`${e}--${a}`:e,x=i?`${s}--${a}`:s,p=He.useRef(0);return He.useLayoutEffect(()=>{let e=c.current,s=h.split(" "),i=t=>{t.target===c.current&&(u(),e.removeEventListener("animationend",i),e.removeEventListener("animationcancel",i),0===p.current&&"animationcancel"!==t.type&&e.classList.remove(...s))};e.classList.add(...s),e.addEventListener("animationend",i),e.addEventListener("animationcancel",i)},[]),He.useEffect(()=>{let e=c.current,s=()=>{e.removeEventListener("animationend",s),t?function(e,s,i=300){let{scrollHeight:t,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=t+"px",r.transition=`all ${i}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(s,i)})})}(e,l,r):l()};d||(o?s():(p.current=1,e.className+=` ${x}`,e.addEventListener("animationend",s)))},[d]),Ue.createElement(Ue.Fragment,null,n)}}(((e,s=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:s}))("bounce",!0)),autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code};function qs(e){let s={...$s,...e},i=e.stacked,[t,r]=He.useState(!0),n=He.useRef(null),{getToastToRender:a,isToastActive:o,count:l}=function(e){var s;let{subscribe:i,getSnapshot:t,setProps:r}=He.useRef(_s(e)).current;r(e);let n=null==(s=He.useSyncExternalStore(i,t,t))?void 0:s.slice();return{getToastToRender:function(s){if(!n)return[];let i=new Map;return e.newestOnTop&&n.reverse(),n.forEach(e=>{let{position:s}=e.props;i.has(s)||i.set(s,[]),i.get(s).push(e)}),Array.from(i,e=>s(e[0],e[1]))},isToastActive:As,count:null==n?void 0:n.length}}(s),{className:c,style:d,rtl:u,containerId:h,hotKeys:x}=s;function p(e){let s=ls("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":u});return us(c)?c({position:e,rtl:u,defaultClassName:s}):ls(s,hs(c))}function m(){i&&(r(!0),Ws.play())}return Rs(()=>{var e;if(i){let i=n.current.querySelectorAll('[data-in="true"]'),r=12,a=null==(e=s.position)?void 0:e.includes("top"),o=0,l=0;Array.from(i).reverse().forEach((e,s)=>{let i=e;i.classList.add("Toastify__toast--stacked"),s>0&&(i.dataset.collapsed=`${t}`),i.dataset.pos||(i.dataset.pos=a?"top":"bot");let n=o*(t?.2:1)+(t?0:r*s);i.style.setProperty("--y",`${a?n:-1*n}px`),i.style.setProperty("--g",`${r}`),i.style.setProperty("--s",""+(1-(t?l:0))),o+=i.offsetHeight,l+=.025})}},[t,l,i]),He.useEffect(()=>{function e(e){var s;let i=n.current;x(e)&&(null==(s=i.querySelector('[tabIndex="0"]'))||s.focus(),r(!1),Ws.pause()),"Escape"===e.key&&(document.activeElement===i||null!=i&&i.contains(document.activeElement))&&(r(!0),Ws.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[x]),Ue.createElement("section",{ref:n,className:"Toastify",id:h,onMouseEnter:()=>{i&&(r(!1),Ws.pause())},onMouseLeave:m,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":s["aria-label"]},a((e,s)=>{let t=s.length?{...d}:{...d,pointerEvents:"none"};return Ue.createElement("div",{tabIndex:-1,className:p(e),"data-stacked":i,style:t,key:`c-${e}`},s.map(({content:e,props:s})=>Ue.createElement(Bs,{...s,stacked:i,collapseAll:m,isIn:o(s.toastId,s.containerId),key:`t-${s.key}`},e)))}))}const Vs=is.create({baseURL:"https://aquayara.onrender.com",headers:{"Content-Type":"application/json"},withCredentials:!0});Vs.interceptors.request.use(e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e)),Vs.interceptors.response.use(e=>e,async e=>{var s;const i=e.config,t=localStorage.getItem("token");if(e.response&&401===e.response.status&&!i._retry&&t&&!(null==(s=i.url)?void 0:s.includes("/auth/profile"))){i._retry=!0;try{const e=await is.post("https://aquayara.onrender.com/api/auth/refresh",{},{headers:{Authorization:`Bearer ${t}`}});if(e.data.success){const s=e.data.token;return localStorage.setItem("token",s),i.headers.Authorization=`Bearer ${s}`,Vs(i)}}catch(r){return localStorage.removeItem("token"),window.location.href="/login",Promise.reject(r)}}return e.response&&e.response.status,Promise.reject(e)});const Hs=ts((e,s)=>({token:localStorage.getItem("token")||null,user:null,loading:!1,error:null,login:async(s,i)=>{var t,r,n,a;e({loading:!0,error:null});try{let t;try{t=await Vs.post("/api/delivery/login",{username:s,password:i})}catch(o){t=await Vs.post("/api/auth/login",{username:s,password:i})}const{token:r,user:n}=t.data;localStorage.setItem("token",r),Vs.defaults.headers.common.Authorization=`Bearer ${r}`;try{const s=await Vs.get("/api/auth/profile");e({token:r,user:s.data,loading:!1})}catch(l){e({token:r,user:n,loading:!1})}return{success:!0}}catch(c){return e({error:(null==(r=null==(t=c.response)?void 0:t.data)?void 0:r.message)||"Error al iniciar sesión",loading:!1}),{success:!1,error:(null==(a=null==(n=c.response)?void 0:n.data)?void 0:a.message)||"Error al iniciar sesión"}}},register:async s=>{var i,t,r,n;e({loading:!0,error:null});try{const i=await Vs.post("/api/auth/register",s);return e({loading:!1}),{success:!0,data:i.data}}catch(a){return e({error:(null==(t=null==(i=a.response)?void 0:i.data)?void 0:t.message)||"Error al registrar usuario",loading:!1}),{success:!1,error:(null==(n=null==(r=a.response)?void 0:r.data)?void 0:n.message)||"Error al registrar usuario"}}},logout:()=>{localStorage.removeItem("token"),delete Vs.defaults.headers.common.Authorization,e({token:null,user:null})},checkAuth:async()=>{const s=localStorage.getItem("token");if(!s)return e({token:null,user:null}),!1;try{Vs.defaults.headers.common.Authorization=`Bearer ${s}`;const i=await Vs.get("/api/auth/profile");return e({user:i.data,token:s}),!0}catch(i){return localStorage.removeItem("token"),delete Vs.defaults.headers.common.Authorization,e({token:null,user:null}),!1}},clearError:()=>e({error:null})})),Us=new Date("2025-09-24"),Ys=()=>{const[e,s]=He.useState(!1),[i,t]=He.useState(0),[r,n]=He.useState(!0);return He.useEffect(()=>{const e=()=>{try{const e=new Date,i=new Date(Us);if(i.setMonth(i.getMonth()+2),e>=i)s(!0),t(0);else{const r=i.getTime()-e.getTime(),n=Math.ceil(r/864e5);s(!1),t(n)}}catch(e){s(!1),t(999)}finally{n(!1)}};e();const i=setInterval(e,36e5);return()=>clearInterval(i)},[]),{isExpired:e,daysRemaining:i,isLoading:r,expiryDate:new Date(new Date(Us).setMonth(new Date(Us).getMonth()+2))}};function Gs(e){return rs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(e)}function Xs(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(e)}function Js(e){return rs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(e)}function Qs(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function Ks(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function Zs(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(e)}function ei(e){return rs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(e)}function si(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.61 233.32L278.68 9.39c-12.52-12.52-32.83-12.52-45.36 0L9.39 233.32c-12.52 12.53-12.52 32.83 0 45.36l223.93 223.93c12.52 12.53 32.83 12.53 45.36 0l223.93-223.93c12.52-12.53 12.52-32.83 0-45.36zm-100.98 12.56l-84.21 77.73c-5.12 4.73-13.43 1.1-13.43-5.88V264h-96v64c0 4.42-3.58 8-8 8h-32c-4.42 0-8-3.58-8-8v-80c0-17.67 14.33-32 32-32h112v-53.73c0-6.97 8.3-10.61 13.43-5.88l84.21 77.73c3.43 3.17 3.43 8.59 0 11.76z"},child:[]}]})(e)}function ii(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function ti(e){return rs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function ri(e){return rs({attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z"},child:[]}]})(e)}function ni(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function ai(e){return rs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function oi(e){return rs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function li(e){return rs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function ci(e){return rs({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function di(e){return rs({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm192.81 248H304c8.84 0 16 7.16 16 16s-7.16 16-16 16h-47.19c-16.45 0-31.27-9.14-38.64-23.86-2.95-5.92-8.09-6.52-10.17-6.52s-7.22.59-10.02 6.19l-7.67 15.34a15.986 15.986 0 0 1-14.31 8.84c-.38 0-.75-.02-1.14-.05-6.45-.45-12-4.75-14.03-10.89L144 354.59l-10.61 31.88c-5.89 17.66-22.38 29.53-41 29.53H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h12.39c4.83 0 9.11-3.08 10.64-7.66l18.19-54.64c3.3-9.81 12.44-16.41 22.78-16.41s19.48 6.59 22.77 16.41l13.88 41.64c19.77-16.19 54.05-9.7 66 14.16 2.02 4.06 5.96 6.5 10.16 6.5zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(e)}function ui(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h160V320H32v128zm256 32h160c17.7 0 32-14.3 32-32V320H288v160zm192-320h-42.1c6.2-12.1 10.1-25.5 10.1-40 0-48.5-39.5-88-88-88-41.6 0-68.5 21.3-103 68.3-34.5-47-61.4-68.3-103-68.3-48.5 0-88 39.5-88 88 0 14.5 3.8 27.9 10.1 40H32c-17.7 0-32 14.3-32 32v80c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-80c0-17.7-14.3-32-32-32zm-326.1 0c-22.1 0-40-17.9-40-40s17.9-40 40-40c19.9 0 34.6 3.3 86.1 80h-86.1zm206.1 0h-86.1c51.4-76.5 65.7-80 86.1-80 22.1 0 40 17.9 40 40s-17.9 40-40 40z"},child:[]}]})(e)}function hi(e){return rs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function xi(e){return rs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 32H48C21.5 32 0 53.5 0 80v16h576V80c0-26.5-21.5-48-48-48zM0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V128H0v304zm352-232c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zM176 192c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zM67.1 396.2C75.5 370.5 99.6 352 128 352h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.9-5.2 19.8-15.6 19.8H82.7c-10.4 0-18.8-10-15.6-19.8z"},child:[]}]})(e)}function pi(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(e)}function mi(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(e)}function gi(e){return rs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(e)}function ji(e){return rs({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function fi(e){return rs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(e)}function bi(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(e)}function yi(e){return rs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(e)}function vi(e){return rs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Si(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function wi(e){return rs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"},child:[]}]})(e)}function Ci(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(e)}function zi(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function Ai(e){return rs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(e)}function Pi(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(e)}function Ti(e){return rs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(e)}function Ei(e){return rs({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function _i(e){return rs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function Di(e){return rs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"},child:[]}]})(e)}function Ii(e){return rs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(e)}function ki(e){return rs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function Ni(e){return rs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const Wi=({size:n="md",showText:a=!0,variant:o="horizontal",color:l="blue.500",textColor:c="blue.500",taglineColor:d="teal.400"})=>{const u={xs:{logo:"20px",text:"xs",tagline:"xs"},sm:{logo:"30px",text:"sm",tagline:"xs"},md:{logo:"40px",text:"md",tagline:"sm"},lg:{logo:"60px",text:"lg",tagline:"md"},xl:{logo:"80px",text:"xl",tagline:"lg"}},h=u[n]||u.md,x=()=>e.jsx(r,{src:"/assets/logo_aquayara2-iFhxOv8G.jpeg",alt:"AquaYara Logo",w:h.logo,h:h.logo,objectFit:"contain",borderRadius:"md",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"});return a?"vertical"===o?e.jsxs(s,{spacing:2,align:"center",children:[e.jsx(x,{}),e.jsxs(s,{spacing:0,align:"center",children:[e.jsxs(i,{fontSize:h.text,fontWeight:"bold",color:c,lineHeight:"1",children:["Aqua",e.jsx("span",{style:{color:"#38B2AC"},children:"Yara"})]}),e.jsx(i,{fontSize:h.tagline,color:d,fontStyle:"italic",lineHeight:"1",children:"Agua que encanta"})]})]}):e.jsxs(t,{spacing:3,align:"center",children:[e.jsx(x,{}),e.jsxs(s,{spacing:0,align:"start",children:[e.jsxs(i,{fontSize:h.text,fontWeight:"bold",color:c,lineHeight:"1",children:["Aqua",e.jsx("span",{style:{color:"#38B2AC"},children:"Yara"})]}),e.jsx(i,{fontSize:h.tagline,color:d,fontStyle:"italic",lineHeight:"1",children:"Agua que encanta"})]})]}):e.jsx(x,{})},Li=()=>{const t=n("white","gray.800"),r=n("red.200","red.600"),m=n("gray.700","gray.200");return e.jsx(a,{maxW:"md",centerContent:!0,children:e.jsxs(s,{spacing:6,py:8,children:[e.jsx(Wi,{size:"lg",variant:"horizontal",color:"red.500",textColor:"red.600",taglineColor:"red.400"}),e.jsx(o,{bg:t,borderColor:r,borderWidth:"2px",boxShadow:"xl",borderRadius:"xl",w:"100%",children:e.jsx(l,{p:8,children:e.jsxs(s,{spacing:6,textAlign:"center",children:[e.jsx(c,{display:"flex",alignItems:"center",justifyContent:"center",w:"80px",h:"80px",borderRadius:"full",bg:"red.100",color:"red.500",children:e.jsx(d,{as:gi,boxSize:10})}),e.jsxs(s,{spacing:2,children:[e.jsx(u,{size:"lg",color:"red.500",children:"Sistema Expirado"}),e.jsxs(h,{colorScheme:"red",variant:"solid",fontSize:"sm",px:3,py:1,children:[e.jsx(d,{as:ai,mr:1}),"Acceso Restringido"]})]}),e.jsxs(s,{spacing:4,children:[e.jsx(i,{fontSize:"md",color:m,lineHeight:"1.6",children:"El período de prueba del sistema ha expirado."}),e.jsx(i,{fontSize:"sm",color:"gray.500",lineHeight:"1.5",children:"Para continuar utilizando este sistema o resolver cualquier problema técnico, contacta con el programador."})]}),e.jsx(x,{}),e.jsxs(s,{spacing:4,w:"100%",children:[e.jsx(i,{fontSize:"sm",fontWeight:"bold",color:"gray.600",children:"📞 Contacto del Programador"}),e.jsx(o,{bg:"blue.50",borderColor:"blue.200",w:"100%",children:e.jsx(l,{p:4,children:e.jsxs(s,{spacing:3,children:[e.jsx(i,{fontSize:"lg",fontWeight:"bold",color:"blue.600",children:"987654321"}),e.jsx(i,{fontSize:"sm",color:"blue.500",children:"Disponible para soporte técnico y renovación del sistema"})]})})}),e.jsx(p,{colorScheme:"blue",size:"lg",w:"100%",leftIcon:e.jsx(d,{as:bi}),onClick:()=>{window.open("https://wa.me/51987654321?text=Hola, necesito soporte técnico para el sistema AquaYara","_blank")},_hover:{transform:"translateY(-2px)",boxShadow:"lg"},transition:"all 0.2s",children:"Contactar por WhatsApp"})]}),e.jsxs(s,{spacing:2,pt:4,children:[e.jsx(i,{fontSize:"xs",color:"gray.400",textAlign:"center",children:"Sistema desarrollado por: Programador de Software"}),e.jsx(i,{fontSize:"xs",color:"gray.400",children:"© 2024 AquaYara - Todos los derechos reservados"})]})]})})})]})})},Ri=({children:s})=>{const{isExpired:i,isLoading:t}=Ys();return t?null:i?e.jsx(Li,{}):s},Oi=({children:s})=>{const{isExpired:i,isLoading:t}=Ys();return t?null:i?e.jsx(Li,{}):s},Fi=({type:r="404",title:o="Página no encontrada",description:l="La página que buscas no existe",showRetry:h=!0})=>{const x=Ye(),m=n("gray.50","gray.900"),g=n("gray.700","gray.200"),j=(()=>{switch(r){case"404":return{icon:"🦕",title:"¡Ups! Página no encontrada",description:"La página que buscas se ha perdido en el desierto digital",action:"Volver al inicio",color:"blue"};case"offline":return{icon:"📡",title:"Sin conexión a internet",description:"Parece que te has desconectado del mundo digital",action:"Reintentar",color:"orange"};case"500":return{icon:"⚠️",title:"Error del servidor",description:"Algo salió mal en nuestro lado",action:"Reintentar",color:"red"};default:return{icon:"❌",title:o,description:l,action:"Volver al inicio",color:"gray"}}})();return e.jsx(c,{minH:"100vh",bg:m,display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(a,{maxW:"md",centerContent:!0,children:e.jsxs(s,{spacing:8,textAlign:"center",py:12,children:[e.jsx(c,{fontSize:"8xl",mb:4,children:j.icon}),e.jsx(u,{size:"xl",color:g,fontWeight:"bold",children:j.title}),e.jsx(i,{fontSize:"lg",color:"gray.500",maxW:"md",lineHeight:"1.6",children:j.description}),"404"===r&&e.jsxs(s,{spacing:2,children:[e.jsx(i,{fontSize:"6xl",fontWeight:"bold",color:"blue.500",children:"404"}),e.jsx(i,{fontSize:"sm",color:"gray.400",children:"ERROR"})]}),e.jsxs(s,{spacing:4,w:"full",maxW:"sm",children:[h&&e.jsx(p,{colorScheme:j.color,size:"lg",w:"full",leftIcon:e.jsx(d,{as:Ci}),onClick:()=>{"offline"===r?window.location.reload():x("/")},_hover:{transform:"translateY(-2px)",boxShadow:"lg"},transition:"all 0.2s",children:j.action}),e.jsx(p,{variant:"outline",size:"lg",w:"full",leftIcon:e.jsx(d,{as:hi}),onClick:()=>{x("/")},_hover:{transform:"translateY(-2px)",boxShadow:"md"},transition:"all 0.2s",children:"Ir al inicio"})]}),e.jsxs(s,{spacing:2,pt:4,children:[e.jsx(i,{fontSize:"sm",color:"gray.400",children:"Si el problema persiste, contacta al administrador"}),e.jsxs(t,{spacing:4,fontSize:"xs",color:"gray.400",children:[e.jsx(i,{children:"• Verifica tu conexión"}),e.jsx(i,{children:"• Intenta más tarde"}),e.jsx(i,{children:"• Contacta soporte"})]})]})]})})})},Mi=()=>e.jsx(m,{justify:"center",align:"center",minH:"100vh",bg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",children:e.jsxs(c,{w:"100%",maxW:"450px",p:8,bg:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",children:[e.jsxs(s,{spacing:4,mb:8,textAlign:"center",children:[e.jsx(u,{color:"blue.600",size:"lg",children:"Sistema de Gestión"}),e.jsx(i,{color:"gray.600",children:"Planta de Agua"})]}),e.jsx(Ge,{})]})}),Bi=({variant:r="button",size:n="sm"})=>{const a=g(),o="+51 961 606 183",l="aguademesaaquayara@gmail.com",u=()=>{const e=`https://wa.me/51961606183?text=${encodeURIComponent("Hola, necesito ayuda con el sistema de AquaYara")}`;window.open(e,"_blank")},h=()=>{window.open(`tel:${o}`,"_self")},x=(e,s)=>{navigator.clipboard.writeText(e).then(()=>{a({title:"Copiado",description:`${s} copiado al portapapeles`,status:"success",duration:2e3,isClosable:!0})})};return"badge"===r?e.jsxs(t,{spacing:2,children:[e.jsx(j,{label:"Contactar por WhatsApp",hasArrow:!0,children:e.jsx(p,{size:"xs",colorScheme:"green",leftIcon:e.jsx(d,{as:Gs}),onClick:u,children:"WhatsApp"})}),e.jsx(j,{label:"Llamar",hasArrow:!0,children:e.jsx(p,{size:"xs",variant:"outline",leftIcon:e.jsx(d,{as:bi}),onClick:h,children:o})})]}):"info"===r?e.jsxs(c,{p:3,bg:"blue.50",borderRadius:"md",border:"1px solid",borderColor:"blue.200",children:[e.jsx(i,{fontSize:"sm",fontWeight:"bold",color:"blue.700",mb:2,children:"📞 Soporte Técnico"}),e.jsxs(s,{spacing:2,align:"start",children:[e.jsxs(t,{spacing:2,children:[e.jsx(d,{as:Gs,color:"green.500"}),e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["WhatsApp: ",o]}),e.jsx(p,{size:"xs",variant:"ghost",onClick:()=>x(o,"Teléfono"),children:"Copiar"})]}),e.jsxs(t,{spacing:2,children:[e.jsx(d,{as:ni,color:"blue.500"}),e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["Email: ",l]}),e.jsx(p,{size:"xs",variant:"ghost",onClick:()=>x(l,"Email"),children:"Copiar"})]})]})]}):e.jsxs(t,{spacing:2,children:[e.jsx(j,{label:"Contactar por WhatsApp",hasArrow:!0,children:e.jsx(p,{size:n,colorScheme:"green",leftIcon:e.jsx(d,{as:Gs}),onClick:u,children:"WhatsApp"})}),e.jsx(j,{label:"Llamar",hasArrow:!0,children:e.jsx(p,{size:n,variant:"outline",leftIcon:e.jsx(d,{as:bi}),onClick:h,children:o})})]})},$i=({isOpen:t,onClose:r,showAcceptButton:n=!1,onAccept:a})=>{const[o,l]=He.useState(!1);return e.jsxs(v,{isOpen:t,onClose:r,size:"xl",scrollBehavior:"inside",children:[e.jsx(S,{}),e.jsxs(w,{maxH:"90vh",children:[e.jsx(C,{children:e.jsx(u,{size:"md",children:"Términos y Condiciones - AquaYara"})}),e.jsx(z,{}),e.jsx(A,{pb:6,children:e.jsxs(s,{spacing:4,align:"stretch",children:[e.jsxs(i,{fontSize:"sm",color:"gray.600",children:[e.jsx("strong",{children:"Fecha de última actualización:"})," 10 de enero de 2025"]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"1. Información General"}),e.jsxs(i,{fontSize:"sm",mb:2,children:[e.jsx("strong",{children:"AquaYara"})," es una empresa dedicada a la purificación y distribución de agua, con domicilio legal en Pucallpa, Perú."]}),e.jsx(i,{fontSize:"sm",children:"Proporcionamos servicios de purificación de agua, distribución, sistema de suscripciones, servicio de delivery y gestión de clientes frecuentes."})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"2. Aceptación de Términos"}),e.jsx(i,{fontSize:"sm",mb:2,children:"Al utilizar nuestros servicios, usted acepta estos términos y condiciones en su totalidad. Si no está de acuerdo con alguna parte de estos términos, no debe utilizar nuestros servicios."}),e.jsx(i,{fontSize:"sm",children:"Nos reservamos el derecho de modificar estos términos en cualquier momento. Las modificaciones entrarán en vigor inmediatamente después de su publicación."})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"3. Servicios Ofrecidos"}),e.jsxs(P,{fontSize:"sm",spacing:1,children:[e.jsx(T,{children:"Bidón de Agua 20L y Paquete de Botellas"}),e.jsx(T,{children:"Servicio de entrega a domicilio con tarifas según distrito"}),e.jsx(T,{children:"Horarios de entrega: Lunes a Sábado de 8:00 AM a 6:00 PM"}),e.jsx(T,{children:"Sistema de suscripciones con bonificaciones"}),e.jsx(T,{children:"Control de botellas restantes y pagos mensuales automáticos"})]})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"4. Precios y Pagos"}),e.jsx(i,{fontSize:"sm",mb:2,children:"Los precios están sujetos a cambios sin previo aviso. Aceptamos efectivo, tarjeta de crédito/débito, Yape y Plin."}),e.jsx(i,{fontSize:"sm",children:"Los pagos deben realizarse al momento de la entrega. Los pagos mensuales de suscripciones se procesan automáticamente."})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"5. Entregas y Devoluciones"}),e.jsx(i,{fontSize:"sm",mb:2,children:"Las entregas se realizan en el horario acordado. El cliente debe estar presente para recibir el pedido. En caso de ausencia, se reprogramará la entrega."}),e.jsx(i,{fontSize:"sm",children:"No se aceptan devoluciones de productos abiertos. Las devoluciones deben solicitarse dentro de las 24 horas posteriores a la entrega."})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"6. Responsabilidades del Cliente"}),e.jsxs(P,{fontSize:"sm",spacing:1,children:[e.jsx(T,{children:"Proporcionar información veraz y actualizada"}),e.jsx(T,{children:"No utilizar el sistema para fines ilegales"}),e.jsx(T,{children:"No compartir credenciales de acceso"}),e.jsx(T,{children:"Notificar cualquier uso no autorizado de su cuenta"})]})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"7. Privacidad y Protección de Datos"}),e.jsx(i,{fontSize:"sm",mb:2,children:"Recopilamos datos personales, de uso y técnicos para procesar pedidos, comunicarnos con usted y mejorar nuestros servicios."}),e.jsx(i,{fontSize:"sm",children:"Implementamos medidas de seguridad como encriptación de datos sensibles, acceso restringido y políticas de confidencialidad."})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"8. Sus Derechos"}),e.jsxs(P,{fontSize:"sm",spacing:1,children:[e.jsx(T,{children:"Derecho de acceso a sus datos"}),e.jsx(T,{children:"Derecho de rectificación de información inexacta"}),e.jsx(T,{children:"Derecho de eliminación de datos"}),e.jsx(T,{children:"Derecho de portabilidad de datos"}),e.jsx(T,{children:"Derecho de oposición al tratamiento"})]})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"9. Contacto"}),e.jsxs(i,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Teléfono:"})," +51 961 606 183"]}),e.jsxs(i,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Email:"})," aguademesaaquayara@gmail.com"]}),e.jsxs(i,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Dirección:"})," Pucallpa, Perú"]}),e.jsxs(i,{fontSize:"sm",children:[e.jsx("strong",{children:"Horario:"})," Lunes a Sábado 8:00 AM - 6:00 PM"]})]}),e.jsx(x,{}),e.jsx(i,{fontSize:"xs",color:"gray.500",textAlign:"center",children:"Al utilizar nuestros servicios, usted confirma que ha leído, entendido y aceptado estos términos y condiciones."}),n&&e.jsx(c,{textAlign:"center",pt:4,children:e.jsx(p,{colorScheme:"blue",onClick:()=>{l(!0),a&&a(),r()},isDisabled:o,size:"lg",width:"full",children:o?"Aceptado":"Acepto los Términos y Condiciones"})})]})})]})]})},qi=({onAccept:s,showAcceptButton:i=!1})=>{const{isOpen:t,onOpen:r,onClose:n}=f();return e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"link",size:"sm",color:"blue.500",onClick:r,leftIcon:e.jsx(b,{}),children:"Términos y Condiciones"}),e.jsx($i,{isOpen:t,onClose:n,showAcceptButton:i,onAccept:s})]})},Vi=()=>{const{isOpen:t,onOpen:r,onClose:n}=f();return e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"link",size:"sm",color:"blue.500",onClick:r,leftIcon:e.jsx(y,{}),children:"Política de Privacidad"}),e.jsxs(v,{isOpen:t,onClose:n,size:"xl",scrollBehavior:"inside",children:[e.jsx(S,{}),e.jsxs(w,{maxH:"90vh",children:[e.jsx(C,{children:e.jsx(u,{size:"md",children:"Política de Privacidad - AquaYara"})}),e.jsx(z,{}),e.jsx(A,{pb:6,children:e.jsxs(s,{spacing:4,align:"stretch",children:[e.jsxs(i,{fontSize:"sm",color:"gray.600",children:[e.jsx("strong",{children:"Fecha de última actualización:"})," 10 de enero de 2025"]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"1. Información General"}),e.jsxs(i,{fontSize:"sm",mb:2,children:[e.jsx("strong",{children:"AquaYara"})," es responsable del tratamiento de sus datos personales."]}),e.jsxs(i,{fontSize:"sm",children:[e.jsx("strong",{children:"Contacto:"})," aguademesaaquayara@gmail.com | +51 961 606 183"]})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"2. Datos que Recopilamos"}),e.jsxs(P,{fontSize:"sm",spacing:1,children:[e.jsxs(T,{children:[e.jsx("strong",{children:"Datos Personales:"})," Nombre, DNI/RUC, email, teléfono, dirección"]}),e.jsxs(T,{children:[e.jsx("strong",{children:"Datos de Uso:"})," Historial de pedidos, preferencias, patrones de compra"]}),e.jsxs(T,{children:[e.jsx("strong",{children:"Datos Técnicos:"})," IP, dispositivo, navegador, fecha y hora"]})]})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"3. Finalidades del Tratamiento"}),e.jsxs(P,{fontSize:"sm",spacing:1,children:[e.jsx(T,{children:"Procesar pedidos y gestionar entregas"}),e.jsx(T,{children:"Comunicarnos con usted"}),e.jsx(T,{children:"Procesar pagos y generar comprobantes"}),e.jsx(T,{children:"Mejorar nuestros servicios"}),e.jsx(T,{children:"Prevenir fraudes y proteger el sistema"})]})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"4. Sus Derechos"}),e.jsxs(P,{fontSize:"sm",spacing:1,children:[e.jsx(T,{children:"Derecho de acceso a sus datos"}),e.jsx(T,{children:"Derecho de rectificación"}),e.jsx(T,{children:"Derecho de eliminación"}),e.jsx(T,{children:"Derecho de portabilidad"}),e.jsx(T,{children:"Derecho de oposición"})]})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"5. Seguridad"}),e.jsx(i,{fontSize:"sm",children:"Implementamos medidas de seguridad como encriptación de datos sensibles, acceso restringido, monitoreo continuo y políticas de confidencialidad."})]}),e.jsxs(c,{children:[e.jsx(u,{size:"sm",mb:2,children:"6. Contacto"}),e.jsxs(i,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Email:"})," aguademesaaquayara@gmail.com"]}),e.jsxs(i,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Teléfono:"})," +51 961 606 183"]}),e.jsxs(i,{fontSize:"sm",children:[e.jsx("strong",{children:"Autoridad de Control:"})," proteccion.datos@minjus.gob.pe"]})]}),e.jsx(x,{}),e.jsx(i,{fontSize:"xs",color:"gray.500",textAlign:"center",children:"Esta política se rige por la Ley de Protección de Datos Personales del Perú (Ley N° 29733)."})]})})]})]})]})},Hi=()=>e.jsx(c,{bg:"gray.50",py:8,mt:"auto",children:e.jsx(a,{maxW:"container.xl",children:e.jsxs(s,{spacing:6,children:[e.jsxs(t,{spacing:8,wrap:"wrap",justify:"center",children:[e.jsxs(t,{spacing:2,children:[e.jsx(d,{as:bi,color:"blue.500"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"+51 961 606 183"})]}),e.jsxs(t,{spacing:2,children:[e.jsx(d,{as:ni,color:"blue.500"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"aguademesaaquayara@gmail.com"})]}),e.jsxs(t,{spacing:2,children:[e.jsx(d,{as:ji,color:"blue.500"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Pucallpa, Perú"})]})]}),e.jsx(x,{}),e.jsxs(t,{spacing:6,wrap:"wrap",justify:"center",children:[e.jsx(qi,{}),e.jsx(Vi,{}),e.jsx(E,{href:"mailto:aguademesaaquayara@gmail.com",color:"blue.500",fontSize:"sm",_hover:{textDecoration:"underline"},children:"Soporte Técnico"})]}),e.jsx(x,{}),e.jsxs(s,{spacing:2,children:[e.jsx(i,{fontSize:"sm",color:"gray.500",textAlign:"center",children:"© 2025 AquaYara - Agua Purificada de Calidad"}),e.jsx(i,{fontSize:"xs",color:"gray.400",textAlign:"center",children:"Todos los derechos reservados | Horario: Lunes a Sábado 8:00 AM - 6:00 PM"})]})]})})}),Ui=()=>{const{user:r,logout:n}=Hs(),{isAdmin:a,isDeliveryPerson:o}=(()=>{const{user:e}=Hs(),s=s=>!(!e||!e.role)&&(Array.isArray(s)?s.includes(e.role):e.role===s);return{user:e,hasRole:s,isAdmin:()=>s("admin"),isSeller:()=>s("vendedor"),isClient:()=>s("cliente"),isDeliveryPerson:()=>s("repartidor"),canAccess:e=>s(e)}})(),l=Ye();f();const[d,u]=He.useState(!1),[x,g]=He.useState(()=>{const e=localStorage.getItem("sidebarCollapsed");return!!e&&JSON.parse(e)});(()=>{const e=He.useRef(null),s=He.useRef(Date.now());He.useRef(null);const i=async()=>{try{const e=localStorage.getItem("token");if(!e)return;const s=JSON.parse(atob(e.split(".")[1])),i=Math.floor(Date.now()/1e3);if(s.exp-i<7200){const e=await Vs.post("/api/auth/refresh");e.data.token&&localStorage.setItem("token",e.data.token)}}catch(e){e.response&&401===e.response.status&&(localStorage.removeItem("token"),window.location.href="/")}},t=()=>{s.current=Date.now()},r=()=>{Date.now()-s.current>36e5&&(localStorage.removeItem("token"),window.location.href="/")};He.useEffect(()=>{e.current=setInterval(i,18e5);const s=setInterval(r,6e5),n=["mousedown","mousemove","keypress","scroll","touchstart","click"];return n.forEach(e=>{document.addEventListener(e,t,!0)}),()=>{e.current&&clearInterval(e.current),clearInterval(s),n.forEach(e=>{document.removeEventListener(e,t,!0)})}},[])})();const j=_({base:!0,lg:!1});He.useEffect(()=>{localStorage.setItem("sidebarCollapsed",JSON.stringify(x))},[x]);const b=[{to:"/dashboard",label:"Dashboard",icon:"🏠"},{to:"/dashboard/orders-management",label:"Gestión de Pedidos",icon:"📦",adminOnly:!0},{to:"/dashboard/clients",label:"Clientes",icon:"👥",adminOnly:!0},{to:"/dashboard/vales",label:"Gestión de Vales",icon:"🎫",adminOnly:!0},{to:"/dashboard/collection-report",label:"Reporte de Cobranza",icon:"💰",adminOnly:!0},{to:"/dashboard/subscriptions",label:"Suscripciones",icon:"📅",adminOnly:!0},{to:"/dashboard/delivery-fees",label:"Tarifas de Envío",icon:"🚚",adminOnly:!0},{to:"/dashboard/terms-and-conditions",label:"Términos y Condiciones",icon:"📄",adminOnly:!0},{to:"/dashboard/users-management",label:"Gestión de Usuarios",icon:"👥",adminOnly:!0}],y=[{to:"/delivery-dashboard",label:"Dashboard",icon:"🏠"},{to:"/delivery-dashboard#orders",label:"Mis Pedidos",icon:"📦"},{to:"/delivery-dashboard#stats",label:"Estadísticas",icon:"📊"},{to:"/delivery-dashboard#vouchers",label:"Vales",icon:"🎫"}],v=o()?y:b.filter(e=>!e.adminOnly||a()),w=()=>{u(!1)},P=({isCollapsed:t=!1})=>e.jsxs(s,{spacing:0,h:"full",align:"stretch",children:[e.jsx(c,{p:t?3:6,borderBottom:"1px solid",borderColor:"whiteAlpha.200",children:t?e.jsx(i,{fontSize:"2xl",textAlign:"center",color:"white",children:"🏠"}):e.jsx(Wi,{size:"md",variant:"vertical",color:"white",textColor:"white",taglineColor:"whiteAlpha.700"})}),e.jsx(s,{spacing:1,flex:1,align:"stretch",p:t?0:2,children:v.map(s=>e.jsx(p,{as:Xe,to:s.to,variant:"ghost",color:"white",justifyContent:t?"center":"flex-start",leftIcon:t?void 0:e.jsx(i,{children:s.icon}),_hover:{bg:"whiteAlpha.200"},_active:{bg:"whiteAlpha.300"},size:"sm",h:"40px",onClick:w,title:t?s.label:void 0,px:t?2:4,minW:t?"40px":"auto",w:t?"40px":"100%",children:t?e.jsx(i,{children:s.icon}):s.label},s.to))}),e.jsx(c,{p:t?1:4,borderTop:"1px solid",borderColor:"whiteAlpha.200",children:e.jsxs(R,{children:[e.jsx(O,{as:p,variant:"ghost",color:"white",w:"full",justifyContent:t?"center":"flex-start",leftIcon:e.jsx(M,{size:"sm",name:r&&r.username?r.username.charAt(0).toUpperCase():"?"}),rightIcon:t?void 0:e.jsx(F,{}),title:t?`${null==r?void 0:r.username} (${null==r?void 0:r.role})`:void 0,children:!t&&e.jsxs(s,{spacing:0,align:"flex-start",children:[e.jsx(i,{fontSize:"sm",fontWeight:"medium",children:null==r?void 0:r.username}),e.jsx(i,{fontSize:"xs",color:"whiteAlpha.700",children:null==r?void 0:r.role})]})}),e.jsx(B,{children:e.jsx($,{onClick:()=>{n(),l("/"),w()},color:"red.500",children:"Cerrar Sesión"})})]})})]});return e.jsxs(m,{minH:"100vh",bg:"gray.50",children:[!j&&e.jsxs(c,{w:x?"60px":"280px",bg:"purple.600",color:"white",position:"fixed",h:"100vh",overflowY:"auto",zIndex:1e3,left:0,top:0,transition:"width 0.3s ease",children:[e.jsx(P,{isCollapsed:x}),e.jsx(D,{icon:x?e.jsx(I,{}):e.jsx(k,{}),variant:"ghost",color:"white",size:"sm",position:"absolute",right:"-12px",top:"50%",transform:"translateY(-50%)",bg:"purple.600",border:"2px solid",borderColor:"purple.600",borderRadius:"full",_hover:{bg:"purple.700"},onClick:()=>g(!x),zIndex:1001})]}),e.jsxs(N,{isOpen:d,onClose:()=>u(!1),placement:"left",size:"xs",closeOnOverlayClick:!0,closeOnEsc:!0,children:[e.jsx(S,{}),e.jsxs(W,{children:[e.jsx(z,{}),e.jsx(C,{bg:"purple.600",color:"white",children:e.jsx(Wi,{size:"sm",variant:"horizontal",color:"white",textColor:"white",taglineColor:"whiteAlpha.700"})}),e.jsx(A,{p:0,children:e.jsx(c,{bg:"purple.600",color:"white",h:"full",children:e.jsx(P,{})})})]})]}),e.jsxs(c,{flex:1,ml:j?0:x?"60px":"280px",display:"flex",flexDirection:"column",transition:"margin-left 0.3s ease",children:[j||!x?e.jsx(c,{bg:"white",px:{base:4,md:6},py:4,boxShadow:"sm",borderBottom:"1px solid",borderColor:"gray.200",position:"sticky",top:0,zIndex:999,children:e.jsxs(m,{align:"center",justify:"space-between",children:[e.jsxs(t,{spacing:4,children:[j?e.jsx(D,{icon:e.jsx(L,{}),variant:"ghost",onClick:()=>u(!0),"aria-label":"Abrir menú"}):e.jsx(D,{icon:x?e.jsx(I,{}):e.jsx(k,{}),variant:"ghost",onClick:()=>g(!x),"aria-label":x?"Expandir sidebar":"Colapsar sidebar",size:"sm"}),!x&&e.jsxs(e.Fragment,{children:[e.jsx(Wi,{size:"sm",variant:"horizontal"}),e.jsx(i,{fontSize:"lg",fontWeight:"semibold",color:"gray.700",children:o()?"Panel de Repartidor":"Panel de Administración"})]})]}),e.jsxs(t,{spacing:4,children:[e.jsx(Bi,{variant:"badge"}),e.jsx(h,{colorScheme:"green",variant:"subtle",children:"En línea"})]})]})}):null,e.jsx(c,{flex:1,p:{base:4,md:6},overflowY:"auto",position:"relative",zIndex:1,children:e.jsx(Ge,{})}),e.jsx(Hi,{})]})]})},Yi=()=>{const[t,r]=He.useState({username:"",password:""}),[n,a]=He.useState(!1),d=Ye(),u=g(),{login:h,error:x,clearError:m}=Hs(),j=e=>{r({...t,[e.target.name]:e.target.value}),x&&m()};return e.jsx(q,{minH:"100vh",bg:"gray.50",children:e.jsx(c,{w:"full",maxW:"md",p:6,children:e.jsx(o,{children:e.jsx(l,{children:e.jsxs(s,{spacing:6,children:[e.jsxs(c,{textAlign:"center",children:[e.jsx(Wi,{size:"xl",variant:"vertical",color:"blue.500",textColor:"blue.600",taglineColor:"teal.500"}),e.jsx(i,{color:"gray.600",mt:2,children:"Sistema de Gestión"})]}),e.jsx(c,{w:"full",children:e.jsx("form",{onSubmit:async e=>{e.preventDefault(),a(!0);try{(await h(t.username,t.password)).success&&(u({title:"Éxito",description:"Inicio de sesión exitoso",status:"success",duration:3e3,isClosable:!0}),d("/dashboard"))}catch(s){}finally{a(!1)}},children:e.jsxs(s,{spacing:4,children:[x&&e.jsxs(V,{status:"error",borderRadius:"md",children:[e.jsx(H,{}),x]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Usuario"}),e.jsx(G,{name:"username",value:t.username,onChange:j,placeholder:"Ingresa tu usuario",size:"lg",autoComplete:"username"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Contraseña"}),e.jsx(G,{name:"password",type:"password",value:t.password,onChange:j,placeholder:"Ingresa tu contraseña",size:"lg",autoComplete:"current-password"})]}),e.jsx(p,{type:"submit",colorScheme:"blue",size:"lg",w:"full",isLoading:n,loadingText:"Iniciando sesión...",children:"Iniciar Sesión"})]})})}),e.jsx(c,{textAlign:"center",children:e.jsx(i,{fontSize:"sm",color:"gray.500",children:"Sistema de gestión para planta de agua"})})]})})})})})},Gi=ts((e,s)=>({products:[],loading:!1,error:null,fetchProducts:async()=>{e({loading:!0,error:null});try{const s=await Vs.get("/api/products");e({products:s.data,loading:!1})}catch(s){e({error:s.message,loading:!1})}},createProduct:async s=>{e({loading:!0,error:null});try{const i=(await Vs.post("/api/products",s)).data;return e(e=>({products:[...e.products,i],loading:!1})),{success:!0,data:i}}catch(i){return e({error:i.message,loading:!1}),{success:!1,error:i.message}}},updateProduct:async(s,i)=>{e({loading:!0,error:null});try{const t=(await Vs.put(`/api/products/${s}`,i)).data;return e(e=>({products:e.products.map(e=>e.id===s?t:e),loading:!1})),{success:!0,data:t}}catch(t){return e({error:t.message,loading:!1}),{success:!1,error:t.message}}},deleteProduct:async s=>{e({loading:!0,error:null});try{return await Vs.delete(`/api/products/${s}`),e(e=>({products:e.products.filter(e=>e.id!==s),loading:!1})),{success:!0}}catch(i){return e({error:i.message,loading:!1}),{success:!1,error:i.message}}},calculatePrice:async(e,s)=>{try{return{success:!0,data:(await Vs.post(`/api/products/${e}/calculate-price`,{quantity:s})).data.data.pricing}}catch(i){return{success:!1,error:i.message}}},getPricingInfo:async e=>{try{return{success:!0,data:(await Vs.get(`/api/products/${e}/pricing-info`)).data.data.pricingInfo}}catch(s){return{success:!1,error:s.message}}},getFilteredProducts:e=>{const{products:i}=s();return i.filter(s=>{const i=s.name.toLowerCase(),t=s.description?s.description.toLowerCase():"",r=s.type?s.type.toLowerCase():"";return i.includes(e.toLowerCase())||t.includes(e.toLowerCase())||r.includes(e.toLowerCase())})},getProductById:e=>{const{products:i}=s();return i.find(s=>s.id===e)},clearError:()=>e({error:null}),reset:()=>e({products:[],loading:!1,error:null})})),Xi=ts((e,s)=>({clients:[],loading:!1,error:null,fetchClients:async()=>{e({loading:!0,error:null});try{const s=await Vs.get("/api/clients"),i=s.data.success?s.data.data:s.data;e({clients:i||[],loading:!1})}catch(s){e({error:s.message,loading:!1})}},createClient:async s=>{e({loading:!0,error:null});try{const i=(await Vs.post("/api/clients",s)).data;return e(e=>({clients:[...e.clients,i],loading:!1})),{success:!0,data:i}}catch(i){return e({error:i.message,loading:!1}),{success:!1,error:i.message}}},updateClient:async(s,i)=>{e({loading:!0,error:null});try{const t=(await Vs.put(`/api/clients/${s}`,i)).data;return e(e=>({clients:e.clients.map(e=>e.id===s?t:e),loading:!1})),{success:!0,data:t}}catch(t){return e({error:t.message,loading:!1}),{success:!1,error:t.message}}},deleteClient:async s=>{e({loading:!0,error:null});try{return await Vs.delete(`/api/clients/${s}`),e(e=>({clients:e.clients.filter(e=>e.id!==s),loading:!1})),{success:!0}}catch(i){return e({error:i.message,loading:!1}),{success:!1,error:i.message}}},getFilteredClients:e=>{const{clients:i}=s();return i.filter(s=>{const i=s.name.toLowerCase(),t=s.documentNumber.toLowerCase(),r=s.email?s.email.toLowerCase():"";return i.includes(e.toLowerCase())||t.includes(e.toLowerCase())||r.includes(e.toLowerCase())})},getClientById:e=>{const{clients:i}=s();return i.find(s=>s.id===e)},fetchClientById:async e=>{try{return(await Vs.get(`/api/clients/${e}`)).data}catch(s){return null}},clearError:()=>e({error:null}),reset:()=>e({clients:[],loading:!1,error:null})})),Ji=ts((e,s)=>({deliveryFees:[],deliveryPersons:[],loading:!1,error:null,fetchDeliveryFees:async()=>{var s,i,t,r;e({loading:!0,error:null});try{const s=await Vs.get("/api/delivery-fees"),i=s.data.success?s.data.data:s.data;return e({deliveryFees:i,loading:!1}),{success:!0,data:i}}catch(n){return e({error:(null==(i=null==(s=n.response)?void 0:s.data)?void 0:i.message)||"Error al cargar tarifas",loading:!1}),{success:!1,error:(null==(r=null==(t=n.response)?void 0:t.data)?void 0:r.message)||"Error al cargar tarifas"}}},createDeliveryFee:async s=>{var i,t,r,n;try{const i=await Vs.post("/api/delivery-fees",s);return e(e=>({deliveryFees:[...Array.isArray(e.deliveryFees)?e.deliveryFees:[],i.data]})),{success:!0,data:i.data}}catch(a){return e({error:(null==(t=null==(i=a.response)?void 0:i.data)?void 0:t.message)||"Error al crear tarifa"}),{success:!1,error:(null==(n=null==(r=a.response)?void 0:r.data)?void 0:n.message)||"Error al crear tarifa"}}},updateDeliveryFee:async(s,i)=>{var t,r,n,a;try{const t=await Vs.put(`/api/delivery-fees/${s}`,i);return e(e=>({deliveryFees:Array.isArray(e.deliveryFees)?e.deliveryFees.map(e=>e.id===s?t.data:e):[]})),{success:!0,data:t.data}}catch(o){return e({error:(null==(r=null==(t=o.response)?void 0:t.data)?void 0:r.message)||"Error al actualizar tarifa"}),{success:!1,error:(null==(a=null==(n=o.response)?void 0:n.data)?void 0:a.message)||"Error al actualizar tarifa"}}},deleteDeliveryFee:async s=>{var i,t,r,n;try{return await Vs.delete(`/api/delivery-fees/${s}`),e(e=>({deliveryFees:Array.isArray(e.deliveryFees)?e.deliveryFees.filter(e=>e.id!==s):[]})),{success:!0}}catch(a){return e({error:(null==(t=null==(i=a.response)?void 0:i.data)?void 0:t.message)||"Error al eliminar tarifa"}),{success:!1,error:(null==(n=null==(r=a.response)?void 0:r.data)?void 0:n.message)||"Error al eliminar tarifa"}}},fetchDeliveryPersons:async()=>{var s,i,t,r;e({loading:!0,error:null});try{const s=await Vs.get("/api/user-management"),i=(s.data.success?s.data.data:s.data).filter(e=>"repartidor"===e.role);return e({deliveryPersons:i,loading:!1}),{success:!0,data:i}}catch(n){return e({error:(null==(i=null==(s=n.response)?void 0:s.data)?void 0:i.message)||"Error al cargar repartidores",loading:!1}),{success:!1,error:(null==(r=null==(t=n.response)?void 0:t.data)?void 0:r.message)||"Error al cargar repartidores"}}},createDeliveryPerson:async s=>{var i,t,r,n;try{const i=await Vs.post("/api/user-management",s);return e(e=>({deliveryPersons:[...Array.isArray(e.deliveryPersons)?e.deliveryPersons:[],i.data.data]})),{success:!0,data:i.data.data}}catch(a){return e({error:(null==(t=null==(i=a.response)?void 0:i.data)?void 0:t.message)||"Error al crear repartidor"}),{success:!1,error:(null==(n=null==(r=a.response)?void 0:r.data)?void 0:n.message)||"Error al crear repartidor"}}},updateDeliveryPerson:async(s,i)=>{var t,r,n,a;try{const t=await Vs.put(`/api/user-management/${s}`,i);return e(e=>({deliveryPersons:Array.isArray(e.deliveryPersons)?e.deliveryPersons.map(e=>e.id===s?t.data.data:e):[]})),{success:!0,data:t.data.data}}catch(o){return e({error:(null==(r=null==(t=o.response)?void 0:t.data)?void 0:r.message)||"Error al actualizar repartidor"}),{success:!1,error:(null==(a=null==(n=o.response)?void 0:n.data)?void 0:a.message)||"Error al actualizar repartidor"}}},updateDeliveryPersonStatus:async(s,i)=>{var t,r,n,a;try{return await Vs.patch(`/api/user-management/${s}/toggle-status`,{isActive:"available"===i}),e(e=>({deliveryPersons:Array.isArray(e.deliveryPersons)?e.deliveryPersons.map(e=>e.id===s?{...e,isActive:"available"===i}:e):[]})),{success:!0}}catch(o){return e({error:(null==(r=null==(t=o.response)?void 0:t.data)?void 0:r.message)||"Error al actualizar estado"}),{success:!1,error:(null==(a=null==(n=o.response)?void 0:n.data)?void 0:a.message)||"Error al actualizar estado"}}},deleteDeliveryPerson:async s=>{var i,t,r,n;try{return await Vs.delete(`/api/user-management/${s}`),e(e=>({deliveryPersons:Array.isArray(e.deliveryPersons)?e.deliveryPersons.filter(e=>e.id!==s):[]})),{success:!0}}catch(a){return e({error:(null==(t=null==(i=a.response)?void 0:i.data)?void 0:t.message)||"Error al eliminar repartidor"}),{success:!1,error:(null==(n=null==(r=a.response)?void 0:r.data)?void 0:n.message)||"Error al eliminar repartidor"}}},getAvailableDeliveryPersons:()=>{const{deliveryPersons:e}=s();return Array.isArray(e)?e.filter(e=>!0===e.isActive):[]},getDeliveryStats:()=>{const{deliveryPersons:e,deliveryFees:i}=s(),t=Array.isArray(e)?e:[],r=Array.isArray(i)?i:[];return{totalPersons:t.length,availablePersons:t.filter(e=>!0===e.isActive).length,inactivePersons:t.filter(e=>!1===e.isActive).length,totalFees:r.length,activeFees:r.filter(e=>e.isActive).length}},clearError:()=>e({error:null})})),Qi=ts((e,s)=>({orders:[],loading:!1,error:null,createGuestOrder:async s=>{var i,t,r,n;e({loading:!0,error:null});try{const i=(await Vs.post("/api/guest-orders",s)).data.data;return e(e=>({orders:Array.isArray(e.orders)?[...e.orders,i]:[i],loading:!1})),{success:!0,data:i}}catch(a){return e({error:(null==(t=null==(i=a.response)?void 0:i.data)?void 0:t.message)||"Error al crear pedido",loading:!1}),{success:!1,error:(null==(n=null==(r=a.response)?void 0:r.data)?void 0:n.message)||"Error al crear pedido"}}},fetchOrders:async()=>{var s,i,t,r;e({loading:!0,error:null});try{const s=await Vs.get("/api/guest-orders?limit=1000"),i=s.data.success?s.data.data:s.data;return e({orders:Array.isArray(i)?i:[],loading:!1}),{success:!0,data:i}}catch(n){return e({error:(null==(i=null==(s=n.response)?void 0:s.data)?void 0:i.message)||"Error al cargar pedidos",loading:!1}),{success:!1,error:(null==(r=null==(t=n.response)?void 0:t.data)?void 0:r.message)||"Error al cargar pedidos"}}},fetchOrdersSilently:async()=>{var s,i;try{const s=await Vs.get("/api/guest-orders?limit=1000"),i=s.data.success?s.data.data:s.data;return e({orders:Array.isArray(i)?i:[]}),{success:!0,data:i}}catch(t){return{success:!1,error:(null==(i=null==(s=t.response)?void 0:s.data)?void 0:i.message)||"Error al actualizar pedidos"}}},updateOrderStatus:async(s,i)=>{var t,r,n,a;try{return await Vs.put(`/api/guest-orders/${s}/status`,{status:i}),e(e=>({orders:Array.isArray(e.orders)?e.orders.map(e=>e.id===s?{...e,status:i}:e):[]})),{success:!0}}catch(o){return e({error:(null==(r=null==(t=o.response)?void 0:t.data)?void 0:r.message)||"Error al actualizar estado"}),{success:!1,error:(null==(a=null==(n=o.response)?void 0:n.data)?void 0:a.message)||"Error al actualizar estado"}}},updateGuestOrder:async(s,i)=>{var t,r,n,a;e({loading:!0,error:null});try{if(i.deliveryPersonId){const t=(await Vs.put(`/api/guest-orders/${s}/assign-delivery`,{deliveryPersonId:i.deliveryPersonId})).data.data;return e(e=>({orders:Array.isArray(e.orders)?e.orders.map(e=>e.id===s?{...e,...t}:e):[],loading:!1})),{success:!0,data:t}}{const t=(await Vs.put(`/api/guest-orders/${s}`,i)).data;return e(e=>({orders:Array.isArray(e.orders)?e.orders.map(e=>e.id===s?{...e,...t}:e):[],loading:!1})),{success:!0,data:t}}}catch(o){return e({error:(null==(r=null==(t=o.response)?void 0:t.data)?void 0:r.message)||"Error al actualizar pedido",loading:!1}),{success:!1,error:(null==(a=null==(n=o.response)?void 0:n.data)?void 0:a.message)||"Error al actualizar pedido"}}},getOrderById:e=>{const{orders:i}=s();return Array.isArray(i)?i.find(s=>s.id===e):null},getOrdersByStatus:e=>{const{orders:i}=s();return Array.isArray(i)?i.filter(s=>s.status===e):[]},getOrderStats:()=>{const{orders:e}=s();return Array.isArray(e)?{total:e.length,pending:e.filter(e=>"pendiente"===e.status).length,inProgress:e.filter(e=>"en_camino"===e.status).length,delivered:e.filter(e=>"entregado"===e.status).length,cancelled:e.filter(e=>"cancelado"===e.status).length}:{total:0,pending:0,inProgress:0,delivered:0,cancelled:0}},clearError:()=>e({error:null})})),Ki=()=>{var t,r,a,d,x,g,j,f,b,y,v,S;const w=Ye(),C=n("white","gray.800"),z=n("gray.200","gray.600");_({base:!0,md:!1});const[A,P]=He.useState(new Date),{isExpired:T,isLoading:E}=Ys();if(!E&&T)return e.jsx(Li,{});const{products:D,fetchProducts:I}=Gi(),{clients:k,fetchClients:N}=Xi(),{getDeliveryStats:W,fetchDeliveryPersons:L,fetchDeliveryFees:R}=Ji(),{orders:O,fetchOrders:F,getOrderStats:M}=Qi(),B=async()=>{try{const e=await Vs.get("/api/vouchers/stats");e.data.success&&le(e.data.data)}catch(e){}},$=async()=>{try{const e=await Vs.get("/api/subscriptions");if(e.data.success){const s=e.data.data||[];de({total:s.length,active:s.filter(e=>"active"===e.status).length})}}catch(e){}};He.useEffect(()=>{(async()=>{try{await new Promise(e=>setTimeout(e,100)),I(),N(),R(),F(),B(),$()}catch(e){}})();const e=setInterval(()=>{F(),N(),B(),$(),P(new Date)},3e4);return()=>clearInterval(e)},[I,N,R,F]),M(),W();const q=(null==O?void 0:O.length)||0,V=(null==(t=null==O?void 0:O.filter(e=>"pending"===e.status))?void 0:t.length)||0,H=(null==(r=null==O?void 0:O.filter(e=>"delivered"===e.status))?void 0:r.length)||0,U=(null==(a=null==O?void 0:O.filter(e=>"confirmed"===e.status))?void 0:a.length)||0,Y=(null==(d=null==O?void 0:O.filter(e=>"preparing"===e.status))?void 0:d.length)||0,G=(null==(x=null==O?void 0:O.filter(e=>"ready"===e.status))?void 0:x.length)||0,ee=(null==(g=null==O?void 0:O.filter(e=>"contraentrega"===e.paymentMethod))?void 0:g.length)||0,se=(null==(j=null==O?void 0:O.filter(e=>"vale"===e.paymentMethod))?void 0:j.length)||0,ie=(null==(f=null==O?void 0:O.filter(e=>"suscripcion"===e.paymentMethod))?void 0:f.length)||0,te=(null==(b=null==O?void 0:O.filter(e=>"plin"===e.paymentType))?void 0:b.length)||0,re=(null==(y=null==O?void 0:O.filter(e=>"efectivo"===e.paymentType||"cash"===e.paymentType))?void 0:y.length)||0,ne=(null==(v=null==O?void 0:O.filter(e=>"plin"===e.paymentType))?void 0:v.reduce((e,s)=>e+(s.totalAmount||0),0))||0,ae=(null==(S=null==O?void 0:O.filter(e=>"efectivo"===e.paymentType||"cash"===e.paymentType))?void 0:S.reduce((e,s)=>e+(s.totalAmount||0),0))||0,[oe,le]=He.useState({total:0,pending:0}),[ce,de]=He.useState({total:0,active:0}),ue=(null==k?void 0:k.length)||0,he=(null==O?void 0:O.reduce((e,s)=>e+(parseFloat(s.totalAmount)||0),0))||0,xe=(null==O?void 0:O.filter(e=>{const s=new Date(e.createdAt),i=new Date;return s.toDateString()===i.toDateString()}).reduce((e,s)=>e+(parseFloat(s.totalAmount)||0),0))||0,pe=[{title:"Pedidos",icon:Di,color:"orange",onClick:()=>w("/dashboard/orders-management"),count:q,description:"Gestionar pedidos"},{title:"Clientes",icon:Ni,color:"green",onClick:()=>w("/dashboard/clients"),count:ue,description:"Base de clientes"},{title:"Suscripciones",icon:Js,color:"purple",onClick:()=>w("/dashboard/subscriptions"),count:ce.active,description:`${ce.total} total, ${ce.active} activas`},{title:"Vales",icon:ei,color:"blue",onClick:()=>w("/dashboard/vales"),count:oe.pending,description:`${oe.total} total, ${oe.pending} pendientes`},{title:"Cobranza",icon:ci,color:"red",onClick:()=>w("/dashboard/collection-report"),count:oe.pending,description:"Vales por cobrar"},{title:"Términos",icon:di,color:"teal",onClick:()=>w("/dashboard/terms-and-conditions"),count:0,description:"Términos y condiciones"},{title:"Usuarios",icon:Ii,color:"cyan",onClick:()=>w("/dashboard/users-management"),count:0,description:"Gestión de usuarios"}];return e.jsxs(c,{p:{base:1,sm:2,md:4},maxW:"100%",overflow:"hidden",children:[e.jsxs(m,{direction:{base:"column",sm:"row"},align:{base:"center",sm:"flex-start"},justify:"space-between",mb:{base:4,md:6},wrap:"wrap",gap:2,children:[e.jsxs(s,{align:{base:"center",sm:"flex-start"},spacing:{base:1,md:2},maxW:{base:"100%",sm:"70%"},children:[e.jsx(Wi,{size:{base:"sm",md:"md"},variant:"horizontal",color:"blue.500",textColor:"blue.600",taglineColor:"teal.500"}),e.jsx(u,{size:{base:"md",md:"lg"},color:"gray.700",textAlign:{base:"center",sm:"left"},children:"Dashboard Administrativo"}),e.jsxs(i,{color:"gray.400",fontSize:"xs",textAlign:{base:"center",sm:"left"},children:["Última actualización: ",A.toLocaleTimeString()]})]}),e.jsxs(s,{spacing:1,align:{base:"center",sm:"flex-end"},children:[e.jsx(h,{colorScheme:"green",variant:"subtle",fontSize:"xs",children:"Sistema Activo"}),e.jsx(p,{size:"xs",colorScheme:"blue",variant:"outline",onClick:()=>{F(),N(),L(),B(),$(),P(new Date)},children:"Actualizar"})]})]}),e.jsxs(X,{columns:{base:1,sm:2,lg:5},spacing:{base:2,md:4},mb:{base:4,md:8},maxW:"100%",children:[e.jsx(o,{bg:C,borderColor:z,boxShadow:"sm",children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(J,{children:[e.jsx(Q,{color:"orange.600",fontSize:{base:"xs",md:"sm"},children:"📦 Pedidos Pendientes"}),e.jsx(K,{color:"orange.500",fontSize:{base:"xl",md:"2xl"},children:V}),e.jsxs(Z,{fontSize:{base:"xs",md:"sm"},children:[U," confirmados"]})]})})}),e.jsx(o,{bg:C,borderColor:z,boxShadow:"sm",children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(J,{children:[e.jsx(Q,{color:"green.600",fontSize:{base:"xs",md:"sm"},children:"💰 Ingresos Hoy"}),e.jsxs(K,{color:"green.500",fontSize:{base:"xl",md:"2xl"},children:["S/ ",xe.toFixed(2)]}),e.jsxs(Z,{fontSize:{base:"xs",md:"sm"},children:["Total: S/ ",he.toFixed(2)]})]})})}),e.jsx(o,{bg:C,borderColor:z,boxShadow:"sm",children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(J,{children:[e.jsx(Q,{color:"blue.600",fontSize:{base:"xs",md:"sm"},children:"👥 Clientes"}),e.jsx(K,{color:"blue.500",fontSize:{base:"xl",md:"2xl"},children:k.length}),e.jsx(Z,{fontSize:{base:"xs",md:"sm"},children:"Clientes registrados"})]})})}),e.jsx(o,{bg:C,borderColor:z,boxShadow:"sm",children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(J,{children:[e.jsx(Q,{color:"purple.600",fontSize:{base:"xs",md:"sm"},children:"✅ Entregados"}),e.jsx(K,{color:"purple.500",fontSize:{base:"xl",md:"2xl"},children:H}),e.jsxs(Z,{fontSize:{base:"xs",md:"sm"},children:[G," listos para entregar"]})]})})}),e.jsx(o,{bg:C,borderColor:z,boxShadow:"sm",children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(J,{children:[e.jsx(Q,{color:"yellow.600",fontSize:{base:"xs",md:"sm"},children:"📊 Total Pedidos"}),e.jsx(K,{color:"yellow.500",fontSize:{base:"xl",md:"2xl"},children:q}),e.jsxs(Z,{fontSize:{base:"xs",md:"sm"},children:[Y," en preparación"]})]})})})]}),e.jsxs(X,{columns:{base:2,sm:2,lg:4},spacing:{base:2,md:4},mb:{base:4,md:8},maxW:"100%",children:[e.jsx(o,{bg:C,borderColor:z,boxShadow:"sm",children:e.jsx(l,{p:{base:2,md:4},children:e.jsxs(J,{children:[e.jsx(Q,{color:"blue.600",fontSize:{base:"xs",md:"sm"},children:"💵 Contraentrega"}),e.jsx(K,{color:"blue.500",fontSize:{base:"lg",md:"xl"},children:ee}),e.jsx(Z,{fontSize:{base:"xs",md:"sm"},children:"Pago al recibir"})]})})}),e.jsx(o,{bg:C,borderColor:z,boxShadow:"sm",children:e.jsx(l,{p:{base:2,md:4},children:e.jsxs(J,{children:[e.jsx(Q,{color:"orange.600",fontSize:{base:"xs",md:"sm"},children:"🎫 Vales"}),e.jsx(K,{color:"orange.500",fontSize:{base:"lg",md:"xl"},children:se}),e.jsx(Z,{fontSize:{base:"xs",md:"sm"},children:"Pago a crédito"})]})})}),e.jsx(o,{bg:C,borderColor:z,boxShadow:"sm",children:e.jsx(l,{p:{base:2,md:4},children:e.jsxs(J,{children:[e.jsx(Q,{color:"purple.600",fontSize:{base:"xs",md:"sm"},children:"📅 Suscripciones"}),e.jsx(K,{color:"purple.500",fontSize:{base:"lg",md:"xl"},children:ie}),e.jsx(Z,{fontSize:{base:"xs",md:"sm"},children:"Pago mensual"})]})})}),e.jsx(o,{bg:C,borderColor:z,boxShadow:"sm",children:e.jsx(l,{p:{base:2,md:4},children:e.jsxs(J,{children:[e.jsx(Q,{color:"green.600",fontSize:{base:"xs",md:"sm"},children:"💧 Productos"}),e.jsx(K,{color:"green.500",fontSize:{base:"lg",md:"xl"},children:D.length}),e.jsx(Z,{fontSize:{base:"xs",md:"sm"},children:"En inventario"})]})})})]}),e.jsxs(X,{columns:{base:1,sm:2,lg:2},spacing:{base:2,md:4},mb:{base:4,md:8},maxW:"100%",children:[e.jsx(o,{bg:C,borderColor:z,boxShadow:"sm",children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(J,{children:[e.jsx(Q,{color:"blue.600",fontSize:{base:"sm",md:"md"},children:"📱 PLIN"}),e.jsx(K,{color:"blue.500",fontSize:{base:"xl",md:"2xl"},children:te}),e.jsxs(Z,{fontSize:{base:"xs",md:"sm"},children:["S/ ",ne.toFixed(2)," en total"]})]})})}),e.jsx(o,{bg:C,borderColor:z,boxShadow:"sm",children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(J,{children:[e.jsx(Q,{color:"green.600",fontSize:{base:"sm",md:"md"},children:"💵 Efectivo"}),e.jsx(K,{color:"green.500",fontSize:{base:"xl",md:"2xl"},children:re}),e.jsxs(Z,{fontSize:{base:"xs",md:"sm"},children:["S/ ",ae.toFixed(2)," en total"]})]})})})]}),e.jsx(o,{bg:C,borderColor:z,boxShadow:"sm",maxW:"100%",children:e.jsxs(l,{p:{base:3,md:4},children:[e.jsx(u,{size:{base:"sm",md:"md"},mb:{base:3,md:4},color:"gray.700",children:"🚀 Acciones Rápidas"}),e.jsx(X,{columns:{base:2,sm:3,md:4,lg:7},spacing:{base:2,md:3},maxW:"100%",children:pe.map((t,r)=>e.jsx(o,{borderColor:`${t.color}.200`,borderWidth:"2px",cursor:"pointer",onClick:t.onClick,_hover:{transform:"translateY(-2px)",boxShadow:"lg",borderColor:`${t.color}.300`,bg:`${t.color}.50`},transition:"all 0.2s",borderRadius:"lg",bg:"white",h:{base:"100px",md:"110px"},children:e.jsx(l,{p:{base:2,md:3},h:"100%",children:e.jsxs(s,{spacing:{base:1,md:2},h:"100%",justify:"space-between",align:"center",children:[e.jsx(c,{display:"flex",alignItems:"center",justifyContent:"center",h:{base:"24px",md:"28px"},w:{base:"24px",md:"28px"},borderRadius:"full",bg:`${t.color}.100`,flexShrink:0,children:e.jsx(t.icon,{size:{base:14,md:16},color:`${t.color}.600`})}),e.jsxs(s,{spacing:1,flex:1,w:"100%",textAlign:"center",children:[e.jsx(i,{fontSize:{base:"2xs",md:"xs"},fontWeight:"bold",color:"gray.700",noOfLines:2,lineHeight:"1.1",minH:{base:"20px",md:"24px"},display:"flex",alignItems:"center",justifyContent:"center",children:t.title}),e.jsx(i,{fontSize:{base:"3xs",md:"2xs"},color:"gray.500",noOfLines:2,lineHeight:"1.0",minH:{base:"16px",md:"18px"},children:t.description})]}),e.jsxs(c,{position:"relative",display:"inline-block",children:[e.jsx(c,{bg:`${t.color}.500`,color:"white",borderRadius:"full",px:{base:2,md:3},py:{base:1,md:1.5},fontSize:{base:"sm",md:"md"},fontWeight:"900",minW:{base:"28px",md:"32px"},h:{base:"28px",md:"32px"},display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"lg",border:"4px solid white",_hover:{transform:"scale(1.1)",boxShadow:"xl",bg:`${t.color}.600`},transition:"all 0.3s ease",cursor:"pointer",children:t.count}),e.jsx(c,{position:"absolute",top:"-2px",right:"-2px",w:"8px",h:"8px",bg:"white",borderRadius:"full",opacity:.8,className:"pulse-animation"})]})]})})},r))})]})})]})},Zi=()=>{const{orders:r,loading:n,fetchOrders:a,fetchOrdersSilently:x,updateGuestOrder:b}=Qi(),{deliveryPersons:y,fetchDeliveryPersons:P}=Ji(),[T,E]=He.useState(""),[_,I]=He.useState("all"),[k,N]=He.useState("all"),[W,L]=He.useState(null),[R,O]=He.useState(""),[F,M]=He.useState(new Date),[B,$]=He.useState(!1),[J,Q]=He.useState(""),{isOpen:K,onOpen:Z,onClose:de}=f(),{isOpen:ue,onOpen:he,onClose:xe}=f(),{isOpen:pe,onOpen:me,onClose:ge}=f(),je=g();He.useEffect(()=>{a(),P();const e=setInterval(async()=>{$(!0),await x(),M(new Date),$(!1)},3e4);return()=>clearInterval(e)},[a,P]);const fe=r.map(e=>({...e,type:"guest",orderNumber:e.orderNumber||`PED-${e.id}`,clientName:e.clientName||e.customerName,clientPhone:e.clientPhone||e.customerPhone,clientAddress:e.clientAddress||e.deliveryAddress,clientDistrict:e.clientDistrict||e.deliveryDistrict})).sort((e,s)=>new Date(s.createdAt)-new Date(e.createdAt));fe.filter(e=>e.deliveryPersonId).forEach(e=>{}),fe.forEach((e,s)=>{});const be=(fe||[]).filter(e=>{var s,i,t,r;const n=(null==(s=e.orderNumber)?void 0:s.toLowerCase().includes(T.toLowerCase()))||(null==(i=e.clientName)?void 0:i.toLowerCase().includes(T.toLowerCase()))||(null==(r=null==(t=e.client)?void 0:t.name)?void 0:r.toLowerCase().includes(T.toLowerCase())),a="all"===_||e.status===_,o="all"===k||"efectivo"===k&&"efectivo"===e.paymentType||"plin"===k&&"plin"===e.paymentType||"vale"===k&&"vale"===e.paymentMethod||"suscripcion"===k&&"suscripcion"===e.paymentMethod||"contraentrega"===k&&"contraentrega"===e.paymentMethod;return n&&a&&o}),ye={pending:be.filter(e=>"pending"===e.status)||[],confirmed:be.filter(e=>"confirmed"===e.status)||[],preparing:be.filter(e=>"preparing"===e.status)||[],ready:be.filter(e=>"ready"===e.status)||[],delivered:be.filter(e=>"delivered"===e.status)||[],cancelled:be.filter(e=>"cancelled"===e.status)||[]},ve=e=>{switch(e){case"pending":case"pendiente":return"orange";case"confirmed":case"asignado":return"blue";case"preparing":return"yellow";case"ready":case"en_camino":return"purple";case"delivered":case"entregado":return"green";case"cancelled":case"cancelado":return"red";default:return"gray"}},Se=e=>{switch(e){case"pending":case"pendiente":return"Pendiente";case"confirmed":case"asignado":return"Asignado";case"preparing":return"Preparando";case"ready":return"Listo";case"delivered":case"entregado":return"Entregado";case"cancelled":case"cancelado":return"Cancelado";case"en_camino":return"En Camino";default:return e}},we=(e,s)=>{if("suscripcion"===s)return Js;switch(e){case"cash":case"efectivo":default:return fi;case"plin":case"yape":return wi;case"transfer":return FaCreditCard}},Ce=r=>{let n=[];return"regular"===r.type&&r.orderDetails&&(n=r.orderDetails.map(e=>{var s,i;return{name:(null==(s=e.product)?void 0:s.name)||(null==(i=e.Product)?void 0:i.name)||"Producto",quantity:e.quantity||0,price:e.unitPrice||e.price||0}})),"guest"===r.type&&r.products&&(n=r.products.map(e=>{var s;return{name:(null==(s=e.product)?void 0:s.name)||e.name||"Producto",quantity:e.quantity||0,price:e.price||e.unitPrice||0}})),0===n.length?e.jsx(i,{fontSize:"xs",color:"gray.500",fontStyle:"italic",children:"Sin productos"}):e.jsx(s,{spacing:1,align:"start",w:"full",children:n.map((s,r)=>e.jsxs(t,{justify:"space-between",w:"full",fontSize:"xs",children:[e.jsx(i,{noOfLines:1,flex:1,children:s.name}),e.jsxs(i,{color:"gray.600",minW:"fit-content",children:["x",s.quantity]}),e.jsxs(i,{color:"green.600",fontWeight:"medium",minW:"fit-content",children:["S/ ",(s.price*s.quantity).toFixed(2)]})]},r))})},ze=async()=>{if(W&&R){if("cancelled"===W.status)return je({title:"Acción no permitida",description:"No se puede asignar repartidor a un pedido cancelado",status:"error",duration:3e3,isClosable:!0}),void de();try{const e={status:"confirmed",deliveryPersonId:R,notes:J};await b(W.id,e);je({title:"Repartidor asignado",description:"El pedido ha sido asignado exitosamente",status:"success",duration:3e3,isClosable:!0}),a(),de(),L(null),O(""),Q("")}catch(e){je({title:"Error",description:"No se pudo asignar el repartidor",status:"error",duration:3e3,isClosable:!0})}}else je({title:"Datos incompletos",description:"Selecciona un repartidor",status:"warning",duration:3e3,isClosable:!0})},Ae=async()=>{if(W)try{const e={status:"cancelled"};await b(W.id,e),je({title:"Pedido anulado",description:`El pedido #${W.id} ha sido anulado exitosamente`,status:"success",duration:3e3,isClosable:!0}),ge(),L(null),a()}catch(e){je({title:"Error",description:"No se pudo anular el pedido",status:"error",duration:3e3,isClosable:!0})}},Pe=async(e,s)=>{try{const i={status:s};await b(e.id,i),je({title:"Estado actualizado",description:`El pedido ahora está ${Se(s).toLowerCase()}`,status:"success",duration:3e3,isClosable:!0})}catch(i){je({title:"Error",description:"No se pudo actualizar el estado",status:"error",duration:3e3,isClosable:!0})}};return n?e.jsx(q,{h:"400px",children:e.jsx(ee,{size:"xl"})}):e.jsxs(c,{p:6,children:[e.jsxs(s,{spacing:6,align:"stretch",children:[e.jsxs(m,{justify:"space-between",align:"center",children:[e.jsxs(c,{children:[e.jsx(u,{size:"lg",mb:2,children:"Gestión de Pedidos"}),e.jsx(i,{color:"gray.600",children:"Administra y asigna repartidores a los pedidos"}),e.jsxs(t,{spacing:2,children:[e.jsxs(i,{color:"gray.400",fontSize:"xs",children:["Última actualización: ",F.toLocaleTimeString()]}),B&&e.jsx(c,{w:"8px",h:"8px",bg:"blue.400",borderRadius:"full",animation:"pulse 1s infinite"})]})]}),e.jsx(p,{size:"sm",colorScheme:"blue",variant:"outline",onClick:async()=>{$(!0),await x(),M(new Date),$(!1)},isLoading:B,children:"Actualizar"})]}),e.jsx(o,{children:e.jsx(l,{children:e.jsxs(X,{columns:{base:1,md:4},spacing:4,children:[e.jsxs(U,{children:[e.jsx(Y,{children:"Buscar"}),e.jsxs(se,{children:[e.jsx(ie,{children:e.jsx(te,{})}),e.jsx(G,{placeholder:"Buscar por pedido o cliente...",value:T,onChange:e=>E(e.target.value)})]})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Estado"}),e.jsxs(re,{value:_,onChange:e=>I(e.target.value),children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"pending",children:"Pendiente"}),e.jsx("option",{value:"confirmed",children:"Asignado"}),e.jsx("option",{value:"preparing",children:"Preparando"}),e.jsx("option",{value:"ready",children:"Listo"}),e.jsx("option",{value:"delivered",children:"Entregado"}),e.jsx("option",{value:"cancelled",children:"Cancelado"})]})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Pago"}),e.jsxs(re,{value:k,onChange:e=>N(e.target.value),children:[e.jsx("option",{value:"all",children:"Todos los pagos"}),e.jsx("option",{value:"contraentrega",children:"Contraentrega"}),e.jsx("option",{value:"vale",children:"A Crédito (Vale)"}),e.jsx("option",{value:"suscripcion",children:"Suscripción"}),e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"plin",children:"PLIN"})]})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Estadísticas"}),e.jsxs(s,{spacing:1,children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontSize:"sm",children:"Total:"}),e.jsx(h,{colorScheme:"blue",children:be.length})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontSize:"sm",children:"Pendientes:"}),e.jsx(h,{colorScheme:"orange",children:ye.pending.length})]})]})]})]})})}),e.jsx(X,{columns:{base:1,md:2,lg:3},spacing:4,children:be.map(r=>e.jsx(o,{variant:"outline",size:"sm",children:e.jsx(l,{children:e.jsxs(s,{spacing:3,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",fontSize:"sm",children:r.orderNumber}),e.jsx(i,{fontSize:"xs",color:"gray.500",children:"regular"===r.type?"Cliente Frecuente":"Cliente Visitante"}),e.jsx(i,{fontSize:"2xs",color:"gray.400",children:r.createdAt?new Date(r.createdAt).toLocaleString("es-PE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"Sin fecha"})]}),e.jsx(h,{colorScheme:ve(r.status),children:Se(r.status)})]}),e.jsxs(s,{spacing:2,align:"stretch",children:[e.jsxs(t,{spacing:2,children:[e.jsx(ki,{size:12,color:"#718096"}),e.jsx(i,{fontSize:"sm",fontWeight:"medium",children:r.clientName||"Sin nombre"})]}),e.jsxs(t,{spacing:2,children:[e.jsx(bi,{size:12,color:"#718096"}),e.jsx(i,{fontSize:"sm",children:r.clientPhone||"Sin teléfono"})]}),e.jsxs(t,{spacing:2,children:[e.jsx(ji,{size:12,color:"#718096"}),e.jsxs(s,{align:"start",spacing:0,children:[e.jsx(i,{fontSize:"sm",noOfLines:2,children:r.clientAddress||r.deliveryAddress||"Sin dirección"}),r.clientDistrict&&e.jsxs(i,{fontSize:"xs",color:"gray.500",children:["📍 ",r.clientDistrict]}),r.deliveryReference&&e.jsxs(i,{fontSize:"xs",color:"gray.500",children:["🔗 ",r.deliveryReference]})]})]})]}),e.jsxs(s,{spacing:2,align:"stretch",children:[e.jsx(i,{fontSize:"sm",fontWeight:"medium",color:"gray.700",children:"🛒 Productos:"}),Ce(r)]}),e.jsxs(s,{spacing:2,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsxs(t,{spacing:2,children:[e.jsx(d,{as:we(r.paymentType,r.paymentMethod),size:14}),e.jsx(i,{fontSize:"sm",children:"vale"===r.paymentMethod?"A Crédito (Vale)":"suscripcion"===r.paymentMethod?"Suscripción":"contraentrega"===r.paymentMethod?"plin"===r.paymentType?"Contraentrega - PLIN":"yape"===r.paymentType?"Contraentrega - Yape":"cash"===r.paymentType?"Contraentrega - Efectivo":"Contraentrega":"plin"===r.paymentType?"PLIN":"yape"===r.paymentType?"Yape":(r.paymentType,"Efectivo")})]}),e.jsxs(i,{fontWeight:"bold",fontSize:"sm",color:"green.600",children:["S/ ",parseFloat(r.total||r.totalAmount||0).toFixed(2)]})]}),"suscripcion"===r.paymentMethod&&r.subscriptionId&&e.jsx(t,{spacing:2,bg:"purple.50",p:2,borderRadius:"md",children:e.jsxs(i,{fontSize:"xs",color:"purple.600",fontWeight:"medium",children:["📅 Suscripción ID: ",r.subscriptionId]})}),"vale"===r.paymentMethod&&e.jsx(t,{spacing:2,bg:"orange.50",p:2,borderRadius:"md",children:e.jsx(i,{fontSize:"xs",color:"orange.600",fontWeight:"medium",children:"🎫 Pago a crédito - Se cobrará al final del mes"})})]}),r.deliveryPersonId&&e.jsxs(t,{spacing:2,children:[e.jsx(Di,{size:12,color:"#3182CE"}),e.jsx(i,{fontSize:"sm",children:(()=>{const e=y.find(e=>e.id===r.deliveryPersonId);return(null==e?void 0:e.name)||"Repartidor asignado"})()})]}),e.jsxs(t,{spacing:2,justify:"center",children:[e.jsx(j,{label:"Ver detalles",children:e.jsx(D,{size:"sm",icon:e.jsx(le,{}),onClick:()=>(e=>{L(e),he()})(r),"aria-label":"Ver detalles"})}),e.jsx(j,{label:"Descargar boleta",children:e.jsx(D,{size:"sm",icon:e.jsx(ii,{}),colorScheme:"green",onClick:()=>(async e=>{var s;try{const i=await fetch("/api/admin/generate-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({orderData:{id:e.id,customerName:e.clientName||e.customerName,customerPhone:e.clientPhone||e.customerPhone,customerEmail:e.customerEmail||(null==(s=e.client)?void 0:s.email),deliveryAddress:e.clientAddress||e.deliveryAddress,deliveryDistrict:e.clientDistrict||e.deliveryDistrict,subtotal:e.subtotal||e.total||e.totalAmount,deliveryFee:e.deliveryFee||0,total:e.total||e.totalAmount,paymentMethod:e.paymentMethod,paymentType:e.paymentType,items:(e.products||e.orderDetails||[]).map(e=>{var s;return{name:(null==(s=e.product)?void 0:s.name)||e.name||"Producto",quantity:e.quantity||1,price:e.price||e.unitPrice||0,subtotal:e.subtotal||(e.price||e.unitPrice||0)*(e.quantity||1)}}),products:(e.products||e.orderDetails||[]).map(e=>{var s;return{name:(null==(s=e.product)?void 0:s.name)||e.name||"Producto",quantity:e.quantity||1,price:e.price||e.unitPrice||0,subtotal:e.subtotal||(e.price||e.unitPrice||0)*(e.quantity||1)}}),originalProducts:e.products,originalOrderDetails:e.orderDetails},documentType:"boleta"})});if(!i.ok)throw await i.text(),new Error(`Error al generar la boleta: ${i.status} ${i.statusText}`);const t=await i.blob(),r=window.URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=`boleta_${e.orderNumber||e.id}.pdf`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n),je({title:"Boleta descargada",description:"La boleta se ha descargado correctamente",status:"success",duration:3e3,isClosable:!0})}catch(i){je({title:"Error",description:"No se pudo descargar la boleta",status:"error",duration:3e3,isClosable:!0})}})(r),"aria-label":"Descargar boleta"})}),(!r.deliveryPersonId||"pending"===r.status)&&"cancelled"!==r.status&&e.jsx(j,{label:"Asignar repartidor",children:e.jsx(D,{size:"sm",icon:e.jsx(ce,{}),colorScheme:"blue",onClick:()=>(e=>{"cancelled"!==e.status?(L(e),O(e.deliveryPersonId||""),Q(e.notes||""),Z()):je({title:"Acción no permitida",description:"No se puede asignar repartidor a un pedido cancelado",status:"warning",duration:3e3,isClosable:!0})})(r),"aria-label":"Asignar repartidor"})}),"confirmed"===r.status&&e.jsx(p,{size:"sm",colorScheme:"purple",onClick:()=>Pe(r,"preparing"),children:"Enviar"}),("preparing"===r.status||"ready"===r.status)&&e.jsx(p,{size:"sm",colorScheme:"green",onClick:()=>Pe(r,"delivered"),children:"Entregado"}),("pending"===r.status||"confirmed"===r.status||"preparing"===r.status||"ready"===r.status)&&e.jsx(p,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>(e=>{L(e),me()})(r),children:"Anular"})]})]})})},`${r.type}-${r.id}`))}),0===be.length&&e.jsx(q,{h:"200px",children:e.jsxs(s,{spacing:4,children:[e.jsx(i,{color:"gray.500",fontSize:"lg",children:"No hay pedidos que coincidan con los filtros"}),e.jsx(p,{variant:"outline",onClick:()=>{E(""),I("all"),N("all")},children:"Limpiar filtros"})]})})]}),e.jsxs(v,{isOpen:K,onClose:de,size:"md",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Asignar Repartidor"}),e.jsx(z,{}),e.jsx(A,{children:e.jsxs(s,{spacing:4,children:[W&&e.jsxs(V,{status:"info",children:[e.jsx(H,{}),e.jsxs(s,{align:"start",spacing:1,children:[e.jsxs(i,{fontWeight:"bold",children:["Pedido: ",W.orderNumber]}),e.jsxs(i,{fontSize:"sm",children:["Cliente: ",W.clientName||(null==(Te=W.client)?void 0:Te.name)]}),e.jsxs(i,{fontSize:"sm",children:["Total: S/ ",parseFloat(W.total||W.totalAmount||0).toFixed(2)]})]})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Repartidor"}),e.jsx(re,{value:R,onChange:e=>O(e.target.value),placeholder:"Selecciona un repartidor",children:y.map(s=>e.jsxs("option",{value:s.id,children:[s.firstName," ",s.lastName]},s.id))})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Notas adicionales"}),e.jsx(ne,{value:J,onChange:e=>Q(e.target.value),placeholder:"Instrucciones especiales para el repartidor...",rows:3})]})]})}),e.jsxs(ae,{children:[e.jsx(p,{variant:"outline",mr:3,onClick:de,children:"Cancelar"}),e.jsx(p,{colorScheme:"blue",onClick:ze,children:"Asignar Repartidor"})]})]})]}),(()=>{var r,n,a,c;return e.jsxs(v,{isOpen:ue,onClose:xe,size:"lg",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Detalles del Pedido"}),e.jsx(z,{}),e.jsx(A,{children:W&&e.jsxs(s,{spacing:4,align:"stretch",children:[e.jsx(o,{variant:"outline",children:e.jsx(l,{children:e.jsxs(s,{spacing:3,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Pedido:"}),e.jsx(i,{children:W.orderNumber})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Estado:"}),e.jsx(h,{colorScheme:ve(W.status),children:Se(W.status)})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Tipo:"}),e.jsx(i,{children:"regular"===W.type?"Cliente Frecuente":"Cliente Visitante"})]})]})})}),e.jsxs(o,{variant:"outline",children:[e.jsx(oe,{children:e.jsx(u,{size:"sm",children:"Cliente"})}),e.jsx(l,{children:e.jsxs(s,{spacing:2,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Nombre:"}),e.jsx(i,{children:W.clientName||(null==(r=W.client)?void 0:r.name)})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Teléfono:"}),e.jsx(i,{children:W.clientPhone||(null==(n=W.client)?void 0:n.phone)})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Dirección:"}),e.jsx(i,{children:W.clientAddress||(null==(a=W.client)?void 0:a.address)})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Distrito:"}),e.jsx(i,{children:W.clientDistrict||(null==(c=W.client)?void 0:c.district)})]})]})})]}),e.jsxs(o,{variant:"outline",children:[e.jsx(oe,{children:e.jsx(u,{size:"sm",children:"Pago"})}),e.jsx(l,{children:e.jsxs(s,{spacing:2,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Método:"}),e.jsxs(t,{children:[e.jsx(d,{as:we(W.paymentType,W.paymentMethod),size:16}),e.jsx(i,{children:"vale"===W.paymentMethod?"A Crédito (Vale)":"suscripcion"===W.paymentMethod?"Suscripción":"contraentrega"===W.paymentMethod?"plin"===W.paymentType?"Contraentrega - PLIN":"yape"===W.paymentType?"Contraentrega - Yape":"cash"===W.paymentType?"Contraentrega - Efectivo":"Contraentrega":"plin"===W.paymentType?"PLIN":"yape"===W.paymentType?"Yape":(W.paymentType,"Efectivo")})]})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Total:"}),e.jsxs(i,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(W.total||W.totalAmount||0).toFixed(2)]})]})]})})]}),e.jsxs(o,{variant:"outline",children:[e.jsx(oe,{children:e.jsx(u,{size:"sm",children:"Repartidor"})}),e.jsx(l,{children:e.jsxs(s,{spacing:2,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Nombre:"}),e.jsx(i,{children:W.deliveryPerson?W.deliveryPerson.username:"No asignado"})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Teléfono:"}),e.jsx(i,{children:W.deliveryPerson?W.deliveryPerson.phone:"N/A"})]})]})})]}),W.notes&&e.jsxs(o,{variant:"outline",children:[e.jsx(oe,{children:e.jsx(u,{size:"sm",children:"Notas"})}),e.jsx(l,{children:e.jsx(i,{children:W.notes})})]})]})}),e.jsx(ae,{children:e.jsx(p,{onClick:xe,children:"Cerrar"})})]})]})})(),e.jsxs(v,{isOpen:pe,onClose:ge,size:"md",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Confirmar Anulación"}),e.jsx(z,{}),e.jsx(A,{children:W&&e.jsxs(s,{spacing:4,align:"stretch",children:[e.jsxs(V,{status:"warning",borderRadius:"md",children:[e.jsx(H,{}),e.jsxs(s,{align:"start",spacing:2,children:[e.jsx(i,{fontWeight:"bold",children:"¿Estás seguro de que deseas anular este pedido?"}),e.jsx(i,{fontSize:"sm",children:"Esta acción no se puede deshacer."})]})]}),e.jsx(o,{variant:"outline",p:3,children:e.jsxs(s,{spacing:2,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Pedido:"}),e.jsxs(i,{children:["#",W.id]})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Cliente:"}),e.jsx(i,{children:W.clientName||"Sin nombre"})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Estado actual:"}),e.jsx(h,{colorScheme:ve(W.status),children:Se(W.status)})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Total:"}),e.jsxs(i,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(W.total||W.totalAmount||0).toFixed(2)]})]})]})})]})}),e.jsxs(ae,{children:[e.jsx(p,{variant:"outline",mr:3,onClick:ge,children:"Cancelar"}),e.jsx(p,{colorScheme:"red",onClick:Ae,children:"Sí, Anular Pedido"})]})]})]})]});var Te},et=({isOpen:r,onClose:a,onAccept:o,onReject:l,title:d="Términos y Condiciones",showAcceptance:u=!0})=>{const[m,g]=He.useState(null),[j,f]=He.useState(!1),[b,y]=He.useState(!1),[z,P]=He.useState(!1),[T,E]=He.useState(null),_=n("white","gray.800"),D=n("gray.700","gray.200"),I=n("gray.50","gray.700"),k=n("gray.200","gray.600");He.useEffect(()=>{r&&(y(!1),P(!1),(async()=>{try{f(!0),E(null);const e=await is.get("/api/terms-and-conditions/active");g(e.data.data)}catch(e){E("No se pudieron cargar los términos y condiciones")}finally{f(!1)}})())},[r]);return e.jsxs(v,{isOpen:r,onClose:a,size:"xl",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{maxW:"800px",maxH:"90vh",bg:_,children:[e.jsx(C,{children:e.jsxs(s,{align:"stretch",spacing:2,children:[e.jsx(i,{fontSize:"xl",fontWeight:"bold",color:"blue.600",children:d}),m&&e.jsxs(t,{justify:"space-between",children:[e.jsxs(h,{colorScheme:"blue",variant:"subtle",children:["Versión ",m.version]}),e.jsxs(i,{fontSize:"sm",color:"gray.500",children:["Vigente desde: ",(N=m.effectiveDate,new Date(N).toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric"}))]})]})]})}),e.jsxs(A,{overflowY:"auto",pb:4,children:[j&&e.jsx(q,{py:8,children:e.jsx(ee,{size:"xl"})}),T&&e.jsxs(V,{status:"error",borderRadius:"md",children:[e.jsx(H,{}),e.jsx(i,{children:T})]}),m&&!j&&e.jsxs(c,{children:[e.jsx(i,{fontSize:"lg",fontWeight:"semibold",mb:4,color:D,children:m.title}),e.jsx(x,{mb:4}),e.jsx(c,{whiteSpace:"pre-wrap",fontSize:"sm",lineHeight:"1.6",color:D,maxH:"400px",overflowY:"auto",p:4,bg:I,borderRadius:"md",border:"1px solid",borderColor:k,children:m.content})]})]}),u&&m&&!j&&e.jsx(ae,{children:e.jsxs(s,{w:"full",spacing:4,children:[e.jsx(de,{isChecked:b,onChange:e=>{y(e.target.checked)},colorScheme:"blue",size:"lg",children:e.jsx(i,{fontSize:"sm",children:"He leído y acepto los términos y condiciones"})}),e.jsxs(t,{w:"full",justify:"space-between",children:[e.jsx(p,{variant:"outline",onClick:()=>{l?l():a()},colorScheme:"red",children:"Rechazar"}),e.jsx(p,{colorScheme:"blue",onClick:()=>{z||b&&o&&(P(!0),o(m))},isDisabled:!b||z,isLoading:z,loadingText:"Procesando...",children:"Aceptar"})]})]})}),!u&&e.jsx(ae,{children:e.jsx(p,{onClick:a,colorScheme:"blue",children:"Cerrar"})})]})]});var N},st=ts((e,s)=>({districts:[],loading:!1,error:null,fetchDistricts:async()=>{var s,i,t,r;e({loading:!0,error:null});try{const s=await Vs.get("/api/districts"),i=s.data.success?s.data.data:s.data;return e({districts:i,loading:!1}),{success:!0,data:i}}catch(n){return e({error:(null==(i=null==(s=n.response)?void 0:s.data)?void 0:i.message)||"Error al cargar distritos",loading:!1}),{success:!1,error:(null==(r=null==(t=n.response)?void 0:t.data)?void 0:r.message)||"Error al cargar distritos"}}},getDistrictById:e=>{const{districts:i}=s();return Array.isArray(i)?i.find(s=>s.id===e):null},getDistrictsByFee:e=>{const{districts:i}=s();return Array.isArray(i)?i.filter(s=>s.deliveryFee<=e):[]},updateDistrict:async(s,i)=>{var t,r,n,a;try{const t=await Vs.put(`/api/districts/${s}`,i),r=t.data.data||t.data;return e(e=>({districts:Array.isArray(e.districts)?e.districts.map(e=>e.id===s?r:e):[]})),{success:!0,data:r}}catch(o){return e({error:(null==(r=null==(t=o.response)?void 0:t.data)?void 0:r.message)||"Error al actualizar distrito"}),{success:!1,error:(null==(a=null==(n=o.response)?void 0:n.data)?void 0:a.message)||"Error al actualizar distrito"}}},createDistrict:async s=>{var i,t,r,n;try{const i=await Vs.post("/api/districts",s),t=i.data.data||i.data;return e(e=>({districts:[...Array.isArray(e.districts)?e.districts:[],t]})),{success:!0,data:t}}catch(a){return e({error:(null==(t=null==(i=a.response)?void 0:i.data)?void 0:t.message)||"Error al crear distrito"}),{success:!1,error:(null==(n=null==(r=a.response)?void 0:r.data)?void 0:n.message)||"Error al crear distrito"}}},clearError:()=>e({error:null})})),it="/assets/img_buyon-CC-6ZbJa.jpeg",tt=()=>{const n=Ye(),a=g();_({base:!0,md:!1});const{isOpen:m,onOpen:j,onClose:b}=f(),y=()=>{b(),Oe(!1),Me(!1)},{products:P,fetchProducts:T,calculatePrice:E}=Gi(),{deliveryFees:D,fetchDeliveryFees:I}=Ji(),{districts:k,fetchDistricts:N}=st(),[W,L]=He.useState(1),[R,O]=He.useState(!1),[F,M]=He.useState(!1),[B,$]=He.useState([]),[J,Q]=He.useState(!1),[K,Z]=He.useState(null),[se,ie]=He.useState(null),[te,ae]=He.useState(!1),[le,ce]=He.useState(!1),[me,ge]=He.useState(!1),[je,fe]=He.useState([]),[be,ye]=He.useState(!1),[ve,Se]=He.useState(null),[we,Ce]=He.useState(""),[ze,Ae]=He.useState(null),[Pe,Te]=He.useState({name:"",phone:"",email:"",address:"",district:"",reference:"",notes:""}),[Ee,_e]=He.useState([]),[De,Ie]=He.useState(new Set),[ke,Ne]=He.useState("contraentrega"),[We,Le]=He.useState("efectivo"),[Re,Oe]=He.useState(!1),[Fe,Me]=He.useState(!1),[Be,$e]=He.useState(!1),[qe,Ve]=He.useState(!1),Ue=e=>{const s=e.toLowerCase();return s.includes("bidón")||s.includes("bidon")||s.includes("garrafa")?it:s.includes("paquete")||s.includes("pack")||s.includes("botellas")?"/assets/img_paquete_botellas-nUXaTVFq.jpeg":it};He.useEffect(()=>{T(),I(),N(),Ge()},[T,I,N]);const Ge=async()=>{try{ye(!0);const e=await Vs.get("/api/subscription-plans");if(e.data.success){const s=e.data.data.map(e=>({id:e.id,name:e.name,bottles:e.totalBottles,price:parseFloat(e.monthlyPrice),bonus:e.bonusBottles,description:e.description,color:["blue","green","purple","orange","pink","teal","red"][e.sortOrder%7],popular:2===e.sortOrder,pricePerBottle:parseFloat(e.pricePerBottle),maxDailyDelivery:e.maxDailyDelivery}));fe(s)}}catch(e){a({title:"Error",description:"No se pudieron cargar los planes de suscripción",status:"error",duration:3e3,isClosable:!0})}finally{ye(!1)}};He.useEffect(()=>{if(ve&&je.length>0){const e=je.find(e=>e.id===ve);e&&(ie(e),Q(!0),Ne("suscripcion"),Se(null))}},[ve,je]);const Xe=async e=>{var s;M(!0);try{const s=await Vs.get(`/api/clients/document/${e}`);if(s.data.success){const t=s.data.data;Ae(t.id),Te({...Pe,name:t.name,phone:t.phone,email:t.email||"",address:t.address,district:t.district,reference:"",notes:""});const r=(await(async e=>{try{const s=await Vs.get(`/api/subscriptions/client/${e}`);return s.data.success?($(s.data.data),s.data.data):[]}catch(s){return[]}})(e)).filter(e=>"active"===e.status&&e.remainingBottles>0);if(r.length>0)Ne("suscripcion"),Q(!0),Z(r[0]),$e(!0),Ve(!1),a({title:"Suscripción activa encontrada",description:`Tienes ${r[0].remainingBottles} bidones disponibles de tu suscripción`,status:"success",duration:5e3,isClosable:!0});else try{const s=await Vs.get(`/api/client-preferences/dni/${e}`);if(s.data.success&&s.data.data){const e=s.data.data;Ne(e.preferredPaymentMethod),$e(!0);const i=new Date,t=new Date(e.validUntil);if(t>i)if(Ve(!1),"suscripcion"===e.preferredPaymentMethod){if(e.subscriptionPlanId){const s=je.find(s=>s.id===e.subscriptionPlanId);s?(ie(s),Q(!0)):Se(e.subscriptionPlanId)}a({title:"Preferencia de suscripción activa",description:"Puedes comprar una nueva suscripción",status:"info",duration:5e3,isClosable:!0})}else a({title:"Modalidad activa encontrada",description:`Tu modalidad de ${"vale"===e.preferredPaymentMethod?"vale":"suscripción"} está activa hasta ${t.toLocaleDateString()}`,status:"info",duration:5e3,isClosable:!0});else $e(!1),Ve(!1),a({title:"Modalidad expirada",description:"Tu modalidad anterior expiró. Elige una nueva modalidad de pago.",status:"warning",duration:5e3,isClosable:!0})}}catch(i){}a({title:"Cliente encontrado",description:`Datos de ${t.name} cargados automáticamente`,status:"success",duration:3e3,isClosable:!0}),L(3)}else a({title:"Cliente no encontrado",description:"Completa tus datos para registrarte automáticamente",status:"info",duration:5e3,isClosable:!0}),L(2)}catch(t){404===(null==(s=t.response)?void 0:s.status)?(a({title:"Cliente no encontrado",description:"Completa tus datos para registrarte automáticamente",status:"info",duration:5e3,isClosable:!0}),L(2)):(a({title:"Error al buscar cliente",description:"Intenta nuevamente o regístrate como nuevo cliente",status:"error",duration:5e3,isClosable:!0}),L(2))}finally{M(!1)}},Je=e=>{e.preventDefault(),8===we.length||11===we.length?Xe(we):a({title:"Documento inválido",description:"El DNI debe tener 8 dígitos o el RUC debe tener 11 dígitos",status:"warning",duration:3e3,isClosable:!0})},Qe=async()=>{var e,s;try{if(O(!0),!we||""===we.trim())return void a({title:"DNI requerido",description:"Debes ingresar tu DNI para registrarte",status:"warning",duration:3e3,isClosable:!0});const e={name:Pe.name,document:we,phone:Pe.phone,email:Pe.email||"",address:Pe.address,district:Pe.district,reference:Pe.reference||"",notes:Pe.notes||"",status:"active"},s=await Vs.post("/api/clients",e);if(!s.data.success)throw new Error(s.data.message||"Error al registrar");{const e=s.data.data.id;Ae(e),a({title:"¡Registro exitoso!",description:"Te has registrado automáticamente. Ahora puedes elegir productos y modalidades de pago",status:"success",duration:5e3,isClosable:!0}),L(3),setTimeout(()=>{},100)}}catch(i){a({title:"Error al registrar",description:(null==(s=null==(e=i.response)?void 0:e.data)?void 0:s.message)||"No se pudo completar el registro",status:"error",duration:5e3,isClosable:!0})}finally{O(!1)}},Ke=async(e,s)=>{if(s<=0)_e(Ee.filter(s=>s.id!==e));else try{const i=Ee.find(s=>s.id===e);if(!i)return;let t;if(J&&K){const e=je.find(e=>e.name===K.subscriptionType),i=e?parseFloat(e.pricePerBottle):5;t={unitPrice:i,totalPrice:i*s,originalPrice:i,discountApplied:0,priceLevel:"subscription"}}else{const e=await E(i.productId,s);if(!e.success)throw new Error("Error al calcular precio");t=e.data}_e(Ee.map(i=>i.id===e?{...i,quantity:s,unitPrice:parseFloat(t.unitPrice),subtotal:parseFloat(t.unitPrice)*s,pricing:t}:i))}catch(i){}},Ze=()=>{if(!Pe.district)return 0;const e=k.find(e=>e.name===Pe.district);return e?parseFloat(e.deliveryFee):0},es=()=>Ee.reduce((e,s)=>e+s.subtotal,0),ss=()=>es()+Ze(),is=async()=>{if(!ze)return a({title:"Cliente no registrado",description:"Debes registrarte como cliente para continuar",status:"error",duration:5e3,isClosable:!0}),void L(2);"suscripcion"===ke||0!==Ee.length?"suscripcion"!==ke||se?Pe.name&&Pe.phone&&Pe.address&&Pe.district?await ts():a({title:"Datos incompletos",description:"Completa todos los campos obligatorios",status:"warning",duration:3e3,isClosable:!0}):a({title:"Plan no seleccionado",description:"Selecciona un plan de suscripción",status:"warning",duration:3e3,isClosable:!0}):a({title:"Carrito vacío",description:"Agrega al menos un producto al carrito",status:"warning",duration:3e3,isClosable:!0})},ts=async()=>{var e,s,i,t,r,o;if(!le&&"suscripcion"!==ke)return a({title:"Términos y Condiciones",description:"Debes aceptar los términos y condiciones para continuar",status:"warning",duration:3e3,isClosable:!0}),void ge(!0);O(!0);try{if(J&&K){const i=Ee.reduce((e,s)=>{const i=P.find(e=>e.id===s.productId);return i&&"bidon"===i.type?e+s.quantity:e},0);if(K.remainingBottles<i)return void a({title:"Bidones insuficientes",description:`Solo tienes ${K.remainingBottles} bidones disponibles. Necesitas ${i} bidones.`,status:"error",duration:5e3,isClosable:!0});const t={customerName:Pe.name,customerPhone:Pe.phone,customerEmail:Pe.email||"",deliveryAddress:Pe.address,deliveryDistrict:Pe.district,deliveryReference:Pe.reference||"",deliveryNotes:Pe.notes||"",products:Ee.map(e=>({productId:e.productId,quantity:e.quantity,price:e.unitPrice})),subtotal:es(),deliveryFee:Ze(),totalAmount:ss(),paymentMethod:"suscripcion",paymentType:"cash",clientId:ze,subscriptionId:K.id},r=await Vs.post("/api/guest-orders",t);if(!r.data.success)throw new Error(r.data.message||"Error al crear el pedido");{const t=(null==(e=r.data.data)?void 0:e.id)||r.data.id||"Sin ID";a({title:"¡Pedido creado exitosamente!",description:`Pedido #${t} registrado. Se usaron ${i} bidones de tu suscripción.`,status:"success",duration:5e3,isClosable:!0});const o=(null==(s=r.data.data)?void 0:s.accessToken)||r.data.accessToken;o&&n(`/receipt/${o}`)}}else if("suscripcion"===ke&&se)try{if(!ze)throw new Error("ClientId es requerido para crear suscripción");const e={clientId:ze,clientDni:we,subscriptionType:se.id,totalBottles:se.bottles+se.bonus,totalAmount:se.price,paidAmount:se.price,expiryDate:null,notes:`Suscripción ${se.name} comprada`},s=await Vs.post("/api/subscriptions",e);if(s.data.success){const e=s.data.data;try{const e=new Date;e.setMonth(e.getMonth()+1);const s={dni:we,clientId:ze,preferredPaymentMethod:"suscripcion",subscriptionPlanId:se.id,subscriptionAmount:se.price,subscriptionQuantity:se.bottles+se.bonus,validUntil:e.toISOString()};await Vs.post("/api/client-preferences",s),a({title:"Modalidad guardada",description:`Tu modalidad de suscripción estará activa hasta ${e.toLocaleDateString()}`,status:"success",duration:4e3,isClosable:!0})}catch(l){}a({title:"🎉 ¡Suscripción activada!",description:`Tu suscripción ${se.name} está lista. Ahora puedes hacer pedidos usando tus ${se.bottles+se.bonus} bidones disponibles (sin costo adicional).`,status:"success",duration:8e3,isClosable:!0}),Q(!0),Z({id:e.id,subscriptionType:se.name,totalBottles:se.bottles+se.bonus,remainingBottles:se.bottles+se.bonus,totalAmount:se.price,status:"active"}),"plin"===We?(L(5),Oe(!0),Me(!1),j()):(_e([]),L(3),a({title:"¡Ahora puedes hacer pedidos!",description:`Tienes ${se.bottles+se.bonus} bidones disponibles. Agrega productos al carrito.`,status:"info",duration:6e3,isClosable:!0}))}}catch(c){throw c}else{const e={customerName:Pe.name,customerPhone:Pe.phone,customerEmail:Pe.email||"",deliveryAddress:Pe.address,deliveryDistrict:Pe.district,deliveryReference:Pe.reference||"",deliveryNotes:Pe.notes||"",products:Ee.map(e=>({productId:e.productId,quantity:e.quantity,price:e.unitPrice})),subtotal:es(),deliveryFee:Ze(),totalAmount:ss(),paymentMethod:ke,paymentType:"efectivo"===We?"cash":We,clientId:ze},s=await Vs.post("/api/guest-orders",e);if(!s.data.success)throw new Error(s.data.message||"Error al crear el pedido");{if("vale"===ke||"suscripcion"===ke)try{if(ze){const e=new Date;e.setMonth(e.getMonth()+1);const s={dni:we,clientId:ze,preferredPaymentMethod:ke,subscriptionPlanId:"suscripcion"===ke?null==se?void 0:se.id:null,subscriptionAmount:"suscripcion"===ke?ss():null,subscriptionQuantity:"suscripcion"===ke?Ee.reduce((e,s)=>e+s.quantity,0):null,validUntil:e.toISOString()};await Vs.post("/api/client-preferences",s),a({title:"Modalidad guardada",description:`Tu modalidad de ${"vale"===ke?"vale":"suscripción"} estará activa hasta ${e.toLocaleDateString()}`,status:"success",duration:4e3,isClosable:!0})}}catch(l){}const e=(null==(i=s.data.data)?void 0:i.id)||s.data.id||"Sin ID";a({title:"¡Pedido creado exitosamente!",description:`Pedido #${e} registrado correctamente`,status:"success",duration:5e3,isClosable:!0});const r=(null==(t=s.data.data)?void 0:t.accessToken)||s.data.accessToken;r&&n(`/receipt/${r}`)}}}catch(d){a({title:"Error al crear pedido",description:(null==(o=null==(r=d.response)?void 0:r.data)?void 0:o.message)||"Error interno del servidor",status:"error",duration:5e3,isClosable:!0})}finally{O(!1)}},rs=()=>{Oe(!0),Me(!1),j()},ns=async e=>{var s,i;try{if(!se||!ze||!we)throw new Error("Plan de suscripción, cliente o DNI no seleccionado");const e={clientDni:we,subscriptionType:se.name,totalBottles:se.bottles+se.bonus,totalAmount:se.price,paidAmount:se.price,notes:`Plan ${se.name} - ${se.bottles+se.bonus} bidones`},s=await Vs.post("/api/subscriptions",e);if(s.data.success){const e=s.data.data;Z({id:e.id,subscriptionType:se.name,totalBottles:se.bottles+se.bonus,remainingBottles:se.bottles+se.bonus,totalAmount:se.price,status:"active"}),Q(!0),Ne("suscripcion"),ce(!1),_e([]),L(3),b(),Oe(!1),Me(!1),a({title:"¡Suscripción creada exitosamente!",description:`Tienes ${se.bottles+se.bonus} bidones disponibles. Agrega productos al carrito.`,status:"success",duration:6e3,isClosable:!0})}}catch(t){throw a({title:"Error al crear suscripción",description:(null==(i=null==(s=t.response)?void 0:s.data)?void 0:i.message)||"No se pudo crear la suscripción. Inténtalo de nuevo.",status:"error",duration:5e3,isClosable:!0}),t}},as=async()=>{try{"suscripcion"===ke&&se?(_e([]),L(3),b(),Oe(!1),Me(!1),a({title:"¡Pago confirmado!",description:`Tu suscripción ${se.name} está activa. Ahora puedes hacer pedidos usando tus ${se.bottles+se.bonus} bidones disponibles.`,status:"success",duration:8e3,isClosable:!0})):(await ts(),b(),Oe(!1),Me(!1))}catch(e){a({title:"Error",description:"Hubo un problema al confirmar el pago",status:"error",duration:5e3,isClosable:!0})}},os=()=>{let e=`🧾 *COMPROBANTE DE PAGO PLIN*\n    \n👤 Cliente: ${Pe.name}\n📱 Teléfono: ${Pe.phone}\n🏠 Dirección: ${Pe.address}\n📍 Distrito: ${Pe.district}\n\n`;e+="suscripcion"===ke&&se?`🎯 *SUSCRIPCIÓN:*\n📦 Plan: ${se.name}\n💰 Precio: S/ ${se.price}\n🔢 Bidones: ${se.bottles} + ${se.bonus} extra\n📊 Total bidones: ${se.bottles+se.bonus}\n\n✅ *PAGO REALIZADO VÍA PLIN*`:`🛒 *PEDIDO:*\n${Ee.map(e=>`• ${e.name} x${e.quantity} = S/ ${e.subtotal.toFixed(2)}`).join("\n")}\n\n💰 *TOTAL: S/ ${ss().toFixed(2)}*\n📦 Flete: S/ ${Ze().toFixed(2)}\n\n✅ *PAGO REALIZADO VÍA PLIN*`;const s=`https://wa.me/51961606183?text=${encodeURIComponent(e)}`;window.open(s,"_blank"),Me(!0),a({title:"WhatsApp abierto",description:"Envía el comprobante y luego confirma el pago",status:"info",duration:3e3,isClosable:!0})},ls=e=>{switch(e){case"bidon":return"blue";case"botella":return"green";default:return"gray"}},cs=e=>{switch(e){case"bidon":return"Bidón";case"botella":return"Botella";default:return e}};return e.jsxs(c,{minH:"100vh",bg:"gray.50",py:{base:4,md:8},children:[e.jsx(c,{maxW:"1200px",mx:"auto",px:{base:2,sm:4},children:e.jsxs(s,{spacing:{base:4,md:8},children:[e.jsxs(c,{textAlign:"center",w:"100%",children:[e.jsx(u,{size:{base:"lg",md:"xl"},color:"blue.600",mb:2,children:"Pedido Rápido de Agua"}),e.jsx(i,{color:"gray.600",fontSize:{base:"md",md:"lg"},children:"Proceso simplificado en 5 pasos"})]}),e.jsx(c,{w:"100%",overflowX:"auto",pb:2,px:{base:2,md:0},children:e.jsx(t,{spacing:{base:.5,sm:1,md:2},justify:"center",minW:"max-content",w:"100%",children:[1,2,3,4,5,6].map(t=>e.jsxs(s,{spacing:.5,minW:{base:"50px",sm:"60px"},flex:1,children:[e.jsx(c,{w:{base:6,sm:8,md:10},h:{base:6,sm:8,md:10},borderRadius:"full",bg:t<=W?"blue.500":"gray.200",color:t<=W?"white":"gray.500",display:"flex",alignItems:"center",justifyContent:"center",fontSize:{base:"2xs",sm:"xs",md:"sm"},fontWeight:"bold",flexShrink:0,children:t}),e.jsx(i,{fontSize:{base:"3xs",sm:"2xs",md:"xs"},color:t<=W?"blue.600":"gray.500",textAlign:"center",whiteSpace:"nowrap",noOfLines:1,maxW:"100%",children:1===t?"DNI":2===t?"Datos":3===t?"Productos":4===t?"Modalidad":5===t?"Confirmar":6===t?"Pago":t})]},t))})}),1===W&&e.jsxs(o,{maxW:{base:"100%",sm:"md"},mx:"auto",w:"100%",children:[e.jsx(oe,{textAlign:"center",p:{base:4,md:6},children:e.jsxs(s,{spacing:{base:3,md:4},children:[e.jsx(d,{as:xi,boxSize:{base:8,md:12},color:"blue.500"}),e.jsx(u,{size:{base:"md",md:"lg"},children:"Ingresa tu DNI"}),e.jsx(i,{color:"gray.600",fontSize:{base:"sm",md:"md"},textAlign:"center",children:"Buscaremos tus datos automáticamente para agilizar tu pedido"})]})}),e.jsx(l,{p:{base:4,md:6},children:e.jsx("form",{onSubmit:Je,children:e.jsxs(s,{spacing:{base:3,md:4},children:[e.jsxs(U,{children:[e.jsx(Y,{fontSize:{base:"sm",md:"md"},children:"Número de Documento (DNI o RUC)"}),e.jsx(G,{value:we,onChange:e=>Ce(e.target.value),placeholder:"12345678 (DNI) o 12345678901 (RUC)",size:{base:"md",md:"lg"},textAlign:"center",fontSize:{base:"md",md:"xl"},fontWeight:"bold",maxLength:11})]}),e.jsx(p,{type:"submit",colorScheme:"blue",size:{base:"md",md:"lg"},w:"full",isLoading:F,loadingText:"Buscando...",leftIcon:e.jsx(ki,{}),children:"Buscar Cliente"}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>L(2),children:"Completar datos manualmente"})]})})})]}),2===W&&e.jsxs(o,{maxW:"lg",mx:"auto",children:[e.jsx(oe,{children:e.jsxs(u,{size:"md",children:[e.jsx(ki,{style:{display:"inline",marginRight:"8px"}}),"Datos del Cliente"]})}),e.jsx(l,{children:e.jsxs(s,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Documento"}),e.jsx(G,{value:we,isDisabled:!0,placeholder:"Tu documento",bg:"gray.100"}),e.jsx(ue,{children:"Documento ingresado en el paso anterior"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Nombre Completo"}),e.jsx(G,{value:Pe.name,onChange:e=>Te({...Pe,name:e.target.value}),placeholder:"Tu nombre completo"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Teléfono"}),e.jsx(G,{value:Pe.phone,onChange:e=>Te({...Pe,phone:e.target.value}),placeholder:"Tu número de teléfono"})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Email (opcional)"}),e.jsx(G,{type:"email",value:Pe.email,onChange:e=>Te({...Pe,email:e.target.value}),placeholder:"Tu correo electrónico"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Dirección"}),e.jsx(ne,{value:Pe.address,onChange:e=>Te({...Pe,address:e.target.value}),placeholder:"Dirección completa de entrega",rows:3})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Distrito"}),e.jsx(re,{value:Pe.district,onChange:e=>Te({...Pe,district:e.target.value}),placeholder:"Selecciona tu distrito",children:Array.isArray(k)?k.map(s=>e.jsxs("option",{value:s.name,children:[s.name," - S/ ",parseFloat(s.deliveryFee).toFixed(2)]},s.id)):null})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Referencia"}),e.jsx(G,{value:Pe.reference,onChange:e=>Te({...Pe,reference:e.target.value}),placeholder:"Referencia del lugar (opcional)"})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Notas Adicionales"}),e.jsx(ne,{value:Pe.notes,onChange:e=>Te({...Pe,notes:e.target.value}),placeholder:"Información adicional, preferencias especiales, etc. (opcional)",rows:3})]}),e.jsxs(s,{spacing:3,w:"full",children:[e.jsx(p,{colorScheme:"blue",size:"lg",w:"full",onClick:Qe,isDisabled:!(Pe.name&&Pe.phone&&Pe.address&&Pe.district),children:"Registrarme y Continuar"}),e.jsxs(V,{status:"info",borderRadius:"md",children:[e.jsx(H,{}),e.jsxs(s,{align:"start",spacing:2,children:[e.jsx(i,{fontSize:"sm",fontWeight:"bold",children:"Registro Automático"}),e.jsx(i,{fontSize:"xs",children:"Al continuar, te registrarás automáticamente como cliente para acceder a beneficios especiales como vales y suscripciones."})]})]})]})]})})]}),3===W&&e.jsxs(s,{spacing:6,w:"full",children:[e.jsxs(o,{w:"full",children:[e.jsxs(oe,{children:[e.jsxs(u,{size:"md",children:[e.jsx(Ai,{style:{display:"inline",marginRight:"8px"}}),J?"Bidones Disponibles (Suscripción)":"Productos Disponibles"]}),J&&e.jsxs(V,{status:"info",size:"sm",borderRadius:"md",mt:2,children:[e.jsx(H,{}),e.jsxs(i,{fontSize:"sm",children:[e.jsx("strong",{children:"Modo Suscripción:"})," Solo puedes pedir bidones de agua. Los bidones se descontarán de tu suscripción sin costo adicional."]})]}),0===Ee.length&&e.jsxs(V,{status:"warning",size:"sm",borderRadius:"md",mt:2,children:[e.jsx(H,{}),e.jsxs(i,{fontSize:"sm",children:[e.jsx("strong",{children:"¡Recuerda!"})," Debes seleccionar al menos un producto para continuar con tu pedido."]})]})]}),e.jsx(l,{children:e.jsx(X,{columns:{base:1,md:2},spacing:4,children:P.filter(e=>!J||"bidon"===e.type).map(n=>e.jsx(o,{variant:"outline",children:e.jsx(l,{children:e.jsxs(s,{align:"start",spacing:3,children:[e.jsxs(t,{spacing:4,align:"start",w:"full",children:[e.jsx(c,{flexShrink:0,children:e.jsx(r,{src:Ue(n.name),alt:n.name,boxSize:"80px",objectFit:"cover",borderRadius:"md",border:"2px solid #e2e8f0"})}),e.jsx(s,{align:"start",spacing:1,flex:1,children:e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:n.name}),e.jsx(i,{color:"gray.600",fontSize:"sm",children:n.description}),"Paquete de Botellas de Agua"===n.name&&e.jsx(h,{colorScheme:"green",size:"sm",fontSize:"xs",whiteSpace:"nowrap",children:"¡50+ = S/ 9.00 c/u!"})]}),e.jsx(h,{colorScheme:ls(n.type),children:cs(n.type)})]})})]}),e.jsxs(t,{spacing:4,children:[e.jsxs(i,{fontWeight:"bold",color:"blue.600",fontSize:"lg",children:["S/ ",parseFloat(n.unitPrice).toFixed(2)]}),e.jsxs(i,{color:"gray.500",fontSize:"sm",children:["Stock: ",n.stock]})]}),e.jsx(p,{colorScheme:"blue",size:"sm",leftIcon:e.jsx(Ai,{}),onClick:()=>(async e=>{if(!De.has(e.id))if(J&&"bidon"!==e.type)a({title:"Solo bidones en suscripción",description:"Con tu suscripción solo puedes pedir bidones de agua",status:"warning",duration:3e3,isClosable:!0});else{Ie(s=>new Set(s).add(e.id));try{let s;if(J&&K){const e=je.find(e=>e.name===K.subscriptionType),i=e?parseFloat(e.pricePerBottle):5;s={unitPrice:i,totalPrice:i,originalPrice:i,discountApplied:0,priceLevel:"subscription"}}else{const i=await E(e.id,1);if(!i.success)throw new Error("Error al calcular precio");s=i.data}const i=Ee.findIndex(s=>s.productId===e.id);if(-1!==i){const s=[...Ee],t=s[i].quantity+1;if(J&&K){const e=je.find(e=>e.name===K.subscriptionType),r=e?parseFloat(e.pricePerBottle):5;s[i].quantity=t,s[i].unitPrice=r,s[i].subtotal=r*t,s[i].pricing={unitPrice:r,totalPrice:r*t,originalPrice:r,discountApplied:0,priceLevel:"subscription"},_e(s)}else{const r=await E(e.id,t);if(r.success){const e=r.data;s[i].quantity=t,s[i].unitPrice=parseFloat(e.unitPrice),s[i].subtotal=parseFloat(e.unitPrice)*t,s[i].pricing=e,_e(s)}}}else{const i={id:`${e.id}-${Date.now()}`,productId:e.id,name:e.name,type:e.type,unitPrice:parseFloat(s.unitPrice),quantity:1,subtotal:parseFloat(s.unitPrice),pricing:s};_e([...Ee,i])}a({title:"Producto agregado",description:`${e.name} agregado al carrito`,status:"success",duration:2e3,isClosable:!0})}catch(s){}finally{Ie(s=>{const i=new Set(s);return i.delete(e.id),i})}}})(n),isLoading:De.has(n.id),loadingText:"Agregando...",w:"full",children:"Agregar al Carrito"})]})})},n.id))})})]}),Ee.length>0&&e.jsxs(o,{w:"full",children:[e.jsx(oe,{children:e.jsxs(u,{size:"md",children:[e.jsx(Ai,{style:{display:"inline",marginRight:"8px"}}),"Tu Carrito (",Ee.length," ",1===Ee.length?"producto":"productos",")"]})}),e.jsx(l,{children:e.jsxs(s,{spacing:4,children:[Ee.map(n=>{var a;return e.jsx(c,{w:"full",p:3,border:"1px",borderColor:"gray.200",borderRadius:"md",children:e.jsxs(t,{spacing:3,align:"start",children:[e.jsx(r,{src:Ue(n.name),alt:n.name,boxSize:"50px",objectFit:"cover",borderRadius:"md",border:"1px solid #e2e8f0"}),e.jsxs(s,{spacing:2,flex:1,children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontWeight:"bold",children:n.name}),e.jsx(h,{colorScheme:ls(n.type),children:cs(n.type)})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsxs(s,{align:"start",spacing:0,children:[e.jsxs(i,{color:"gray.600",fontSize:"sm",children:["S/ ",parseFloat(n.unitPrice).toFixed(2)," c/u"]}),"especial50"===(null==(a=n.pricing)?void 0:a.priceLevel)&&e.jsx(h,{colorScheme:"green",size:"sm",children:"¡Descuento 50+ unidades!"})]}),e.jsxs(t,{spacing:2,children:[e.jsx(p,{size:"sm",onClick:()=>Ke(n.id,n.quantity-1),children:"-"}),e.jsx(G,{value:n.quantity,onChange:e=>((e,s)=>{const i=parseInt(s)||0;i>0?Ke(e,i):""!==s&&"0"!==s||_e(Ee.map(s=>s.id===e?{...s,quantity:0}:s))})(n.id,e.target.value),onBlur:e=>((e,s)=>{const i=parseInt(s)||0;i<=0?_e(Ee.filter(s=>s.id!==e)):Ke(e,i)})(n.id,e.target.value),size:"sm",w:"60px",textAlign:"center",type:"number",min:"0",placeholder:"0"}),e.jsx(p,{size:"sm",onClick:()=>Ke(n.id,n.quantity+1),children:"+"})]})]}),e.jsx(t,{justify:"space-between",w:"full",children:e.jsxs(i,{fontWeight:"bold",color:"blue.600",children:["Subtotal: S/ ",parseFloat(n.subtotal).toFixed(2)]})})]})]})},n.id)}),e.jsx(x,{}),e.jsxs(s,{spacing:2,w:"full",children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Subtotal:"}),e.jsxs(i,{fontWeight:"bold",children:["S/ ",parseFloat(es()).toFixed(2)]})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Flete:"}),e.jsxs(i,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(Ze()).toFixed(2)]})]}),e.jsx(x,{}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:"Total:"}),e.jsxs(i,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(ss()).toFixed(2)]})]})]}),e.jsx(p,{colorScheme:"green",size:"lg",w:"full",onClick:()=>{L(J&&K?5:4)},leftIcon:e.jsx(Di,{}),children:J&&K?"Continuar con Confirmación":"Continuar con Modalidad"})]})})]})]}),4===W&&(J&&K?e.jsxs(o,{maxW:"lg",mx:"auto",children:[e.jsx(oe,{textAlign:"center",children:e.jsxs(s,{spacing:4,children:[e.jsx(d,{as:Js,boxSize:12,color:"purple.500"}),e.jsx(u,{size:"lg",children:"Usar Suscripción"}),e.jsxs(i,{color:"gray.600",textAlign:"center",children:["Tienes ",K.remainingBottles," bidones disponibles de tu suscripción"]}),e.jsxs(V,{status:"success",size:"sm",borderRadius:"md",children:[e.jsx(H,{}),e.jsxs(i,{fontSize:"sm",children:[e.jsx("strong",{children:"Suscripción activa:"})," ",K.remainingBottles," bidones disponibles"]})]})]})}),e.jsx(l,{children:e.jsxs(s,{spacing:6,children:[e.jsx(o,{variant:"filled",borderColor:"purple.500",bg:"purple.50",children:e.jsx(l,{children:e.jsxs(s,{spacing:3,children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontWeight:"bold",children:"Tipo de Suscripción:"}),e.jsx(i,{children:K.subscriptionType||"N/A"})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontWeight:"bold",children:"Bidones Totales:"}),e.jsx(i,{children:K.totalBottles||0})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontWeight:"bold",children:"Bidones Restantes:"}),e.jsx(i,{color:"green.600",fontWeight:"bold",children:K.remainingBottles||0})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontWeight:"bold",children:"Total Pagado:"}),e.jsxs(i,{children:["S/ ",K.totalAmount?parseFloat(K.totalAmount).toFixed(2):"0.00"]})]})]})})}),e.jsx(o,{variant:"outline",w:"full",children:e.jsx(l,{children:e.jsxs(s,{spacing:3,children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(s,{spacing:2,w:"full",children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Cliente:"}),e.jsx(i,{fontWeight:"bold",children:Pe.name})]}),e.jsxs(s,{spacing:1,w:"full",align:"stretch",children:[e.jsx(i,{children:"Productos:"}),Ee.map((s,r)=>e.jsxs(t,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["• ",s.name," x",s.quantity]}),e.jsxs(i,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(s.subtotal).toFixed(2)]})]},r))]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Total Bidones:"}),e.jsxs(i,{fontWeight:"bold",color:"purple.600",children:[Ee.reduce((e,s)=>e+s.quantity,0)," bidones"]})]})]})]})})}),e.jsx(p,{colorScheme:"purple",size:"lg",w:"full",onClick:()=>L(5),leftIcon:e.jsx(Qs,{}),children:"Usar Suscripción (Sin Pago)"})]})})]}):Be&&!qe?e.jsxs(o,{maxW:"lg",mx:"auto",children:[e.jsx(oe,{textAlign:"center",children:e.jsxs(s,{spacing:4,children:[e.jsx(d,{as:fi,boxSize:12,color:"green.500"}),e.jsx(u,{size:"lg",children:"Modalidad de Pago"}),e.jsx(i,{color:"gray.600",textAlign:"center",children:"Tu modalidad de pago está activa este mes"}),e.jsxs(V,{status:"success",size:"sm",borderRadius:"md",children:[e.jsx(H,{}),e.jsxs(i,{fontSize:"sm",children:[e.jsx("strong",{children:"Modalidad activa:"})," ","vale"===ke?"A Crédito (Vale)":"suscripcion"===ke?"Suscripción Mensual":"Contraentrega"]})]})]})}),e.jsx(l,{children:e.jsxs(s,{spacing:6,children:[e.jsx(o,{variant:"filled",borderColor:"blue.500",bg:"blue.50",children:e.jsx(l,{children:e.jsxs(t,{spacing:4,children:[e.jsx(he,{value:ke,isChecked:!0}),e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",children:"vale"===ke?"A Crédito (Vale)":"suscripcion"===ke?"Suscripción con Beneficios":"Contraentrega"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"vale"===ke?"Paga al final del mes - Se anota en tu vale":"suscripcion"===ke?"Pedido recurrente mensual con bidones extra":"Pagas en efectivo o PLIN cuando recibes tu pedido"})]})]})})}),e.jsx(p,{colorScheme:"blue",size:"lg",w:"full",onClick:()=>{"suscripcion"===ke?(Q(!0),L(3)):L(5)},leftIcon:e.jsx(ei,{}),children:"vale"===ke?"Continuar (Sin Pago Inmediato)":"Continuar con Forma de Pago"})]})})]}):"suscripcion"!==ke||se?e.jsxs(o,{maxW:{base:"100%",sm:"lg"},mx:"auto",w:"100%",children:[e.jsx(oe,{textAlign:"center",p:{base:4,md:6},children:e.jsxs(s,{spacing:{base:3,md:4},children:[e.jsx(d,{as:fi,boxSize:{base:10,md:12},color:"green.500"}),e.jsx(u,{size:{base:"md",md:"lg"},children:"Modalidad de Pago"}),e.jsx(i,{color:"gray.600",textAlign:"center",fontSize:{base:"sm",md:"md"},children:Be?"Tu modalidad anterior expiró. Elige una nueva modalidad:":"Selecciona cómo deseas pagar tu pedido"}),e.jsxs(V,{status:Be?"warning":"info",size:"sm",borderRadius:"md",w:"100%",children:[e.jsx(H,{}),e.jsx(i,{fontSize:{base:"xs",md:"sm"},children:Be?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Modalidad expirada:"})," Tu modalidad anterior ya no está activa. Elige una nueva modalidad de pago para este mes."]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Contraentrega:"})," Pagas cuando recibes el pedido",e.jsx("br",{}),e.jsx("strong",{children:"A Crédito:"})," Se anota en tu vale y pagas al final del mes",e.jsx("br",{}),e.jsx("strong",{children:"Suscripción:"})," Pedido recurrente mensual"]})})]})]})}),e.jsx(l,{p:{base:4,md:6},children:e.jsxs(s,{spacing:{base:4,md:6},w:"100%",children:[e.jsx(xe,{value:ke,onChange:e=>{Ne(e),"suscripcion"===e?K?Q(!0):(Q(!1),L(4)):Q(!1)},w:"100%",children:e.jsxs(pe,{spacing:{base:3,md:4},w:"100%",children:[e.jsx(o,{variant:"contraentrega"===ke?"filled":"outline",borderColor:"contraentrega"===ke?"blue.500":"gray.200",cursor:"pointer",onClick:()=>{Ne("contraentrega"),Q(!1)},w:"100%",children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(t,{spacing:{base:3,md:4},w:"100%",children:[e.jsx(he,{value:"contraentrega",flexShrink:0}),e.jsxs(s,{align:"start",spacing:1,flex:1,minW:0,children:[e.jsx(i,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:"Contraentrega"}),e.jsx(i,{fontSize:{base:"xs",md:"sm"},color:"gray.600",noOfLines:2,children:"Pagas en efectivo o PLIN cuando recibes tu pedido"})]})]})})}),e.jsx(o,{variant:"vale"===ke?"filled":"outline",borderColor:"vale"===ke?"blue.500":"gray.200",cursor:"pointer",onClick:()=>{Ne("vale"),Q(!1)},w:"100%",children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(t,{spacing:{base:3,md:4},w:"100%",children:[e.jsx(he,{value:"vale",flexShrink:0}),e.jsxs(s,{align:"start",spacing:1,flex:1,minW:0,children:[e.jsx(i,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:"A Crédito (Vale)"}),e.jsx(i,{fontSize:{base:"xs",md:"sm"},color:"gray.600",noOfLines:2,children:"Paga al final del mes - Se anota en tu vale"})]})]})})}),e.jsx(o,{variant:"suscripcion"===ke?"filled":"outline",borderColor:"suscripcion"===ke?"blue.500":"gray.200",cursor:"pointer",onClick:()=>{Ne("suscripcion"),K?Q(!0):(Q(!1),L(4))},w:"100%",children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(t,{spacing:{base:3,md:4},w:"100%",align:"start",children:[e.jsx(he,{value:"suscripcion",flexShrink:0,mt:1}),e.jsx(s,{align:"start",spacing:1,flex:1,minW:0,children:e.jsx(i,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:"Suscripción con Beneficios"})})]})})})]})}),e.jsx(p,{colorScheme:"blue",size:"lg",w:"full",onClick:()=>L(5),leftIcon:e.jsx(ei,{}),children:"vale"===ke?"Continuar (Sin Pago Inmediato)":"Continuar con Forma de Pago"})]})})]}):(J||Q(!0),ze?e.jsxs(o,{maxW:"4xl",mx:"auto",children:[e.jsx(oe,{textAlign:"center",children:e.jsxs(s,{spacing:4,children:[e.jsx(d,{as:Js,boxSize:12,color:"purple.500"}),e.jsx(u,{size:"lg",children:"Elige tu Plan de Suscripción"}),e.jsx(i,{color:"gray.600",textAlign:"center",children:"Selecciona el plan que mejor se adapte a tus necesidades"}),e.jsxs(V,{status:"info",size:"sm",borderRadius:"md",children:[e.jsx(H,{}),e.jsxs(i,{fontSize:"sm",children:[e.jsx("strong",{children:"Beneficios de la suscripción:"})," Paga una vez al mes y recibe bidones extra gratis. Después solo pides la cantidad que necesites sin pagar nada más."]})]})]})}),e.jsxs(l,{children:[be?e.jsx(q,{py:8,children:e.jsxs(s,{spacing:4,children:[e.jsx(ee,{size:"xl",color:"blue.500"}),e.jsx(i,{color:"gray.500",children:"Cargando planes de suscripción..."})]})}):e.jsx(X,{columns:{base:1,md:3},spacing:6,children:je.map(r=>e.jsxs(o,{variant:(null==se?void 0:se.id)===r.id?"filled":"outline",borderColor:(null==se?void 0:se.id)===r.id?`${r.color}.500`:"gray.200",cursor:"pointer",onClick:()=>ie(r),position:"relative",_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:[r.popular&&e.jsx(h,{position:"absolute",top:-2,right:4,colorScheme:r.color,variant:"solid",borderRadius:"full",px:3,py:1,children:"Más Popular"}),e.jsx(l,{textAlign:"center",children:e.jsxs(s,{spacing:4,children:[e.jsxs(s,{spacing:2,children:[e.jsx(i,{fontWeight:"bold",fontSize:"xl",color:`${r.color}.600`,children:r.name}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:r.description})]}),e.jsxs(s,{spacing:1,children:[e.jsxs(i,{fontSize:"3xl",fontWeight:"bold",color:`${r.color}.500`,children:["S/ ",r.price]}),e.jsx(i,{fontSize:"sm",color:"gray.500",children:"por mes"})]}),e.jsxs(s,{spacing:2,w:"full",children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontSize:"sm",children:"Bidones incluidos:"}),e.jsx(i,{fontWeight:"bold",children:r.bottles})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontSize:"sm",children:"Bidones extra:"}),e.jsxs(i,{fontWeight:"bold",color:"green.600",children:["+",r.bonus]})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontSize:"sm",children:"Total bidones:"}),e.jsx(i,{fontWeight:"bold",color:`${r.color}.600`,children:r.bottles+r.bonus})]})]}),e.jsx(p,{colorScheme:r.color,variant:(null==se?void 0:se.id)===r.id?"solid":"outline",w:"full",size:"sm",children:(null==se?void 0:se.id)===r.id?"Seleccionado":"Seleccionar"})]})})]},r.id))}),e.jsxs(s,{spacing:4,mt:6,children:[e.jsx(p,{colorScheme:"purple",size:"lg",w:"full",onClick:async()=>{if(se)try{await ns()}catch(e){a({title:"Error",description:"No se pudo crear la suscripción. Inténtalo de nuevo.",status:"error",duration:5e3,isClosable:!0})}else L(5)},leftIcon:e.jsx(ei,{}),isDisabled:!se,children:"Continuar con Forma de Pago"}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>{Ne("contraentrega"),Q(!1)},children:"Cambiar a Contraentrega"})]})]})]}):e.jsx(o,{maxW:"lg",mx:"auto",children:e.jsx(oe,{textAlign:"center",children:e.jsxs(s,{spacing:4,children:[e.jsx(d,{as:ai,boxSize:12,color:"red.500"}),e.jsx(u,{size:"lg",color:"red.500",children:"Error de Cliente"}),e.jsx(i,{color:"gray.600",textAlign:"center",children:"No se pudo identificar al cliente. Por favor, regístrate nuevamente."}),e.jsx(p,{colorScheme:"blue",onClick:()=>L(2),children:"Volver al Registro"})]})})}))),5===W&&("suscripcion"===ke&&se&&!K?e.jsxs(o,{maxW:"lg",mx:"auto",children:[e.jsx(oe,{textAlign:"center",children:e.jsxs(s,{spacing:4,children:[e.jsx(d,{as:ui,boxSize:12,color:"purple.500"}),e.jsx(u,{size:"lg",children:"Confirmar Suscripción"}),e.jsx(i,{color:"gray.600",children:"Revisa los detalles de tu plan de suscripción"})]})}),e.jsx(l,{children:e.jsxs(s,{spacing:6,children:[e.jsx(o,{variant:"outline",w:"full",borderColor:"purple.200",children:e.jsx(l,{children:e.jsxs(s,{spacing:4,children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:se.name}),e.jsx(i,{fontSize:"sm",color:"gray.600",textAlign:"center",children:se.description}),e.jsxs(s,{spacing:2,w:"full",children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Bidones incluidos:"}),e.jsx(i,{fontWeight:"bold",children:se.bottles})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Bidones extra:"}),e.jsxs(i,{fontWeight:"bold",color:"green.600",children:["+",se.bonus]})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Total bidones:"}),e.jsx(i,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:se.bottles+se.bonus})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Precio por bidón:"}),e.jsxs(i,{fontWeight:"bold",children:["S/ ",parseFloat(se.pricePerBottle).toFixed(2)]})]}),e.jsx(x,{}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontSize:"lg",fontWeight:"bold",children:"Total a pagar:"}),e.jsxs(i,{fontSize:"xl",fontWeight:"bold",color:"purple.600",children:["S/ ",parseFloat(se.price).toFixed(2)]})]})]})]})})}),e.jsx(o,{variant:"outline",w:"full",children:e.jsx(l,{children:e.jsxs(s,{spacing:3,children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:"Datos del Cliente"}),e.jsxs(s,{spacing:2,w:"full",children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Nombre:"}),e.jsx(i,{fontWeight:"bold",children:Pe.name})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"DNI:"}),e.jsx(i,{fontWeight:"bold",children:we})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Teléfono:"}),e.jsx(i,{fontWeight:"bold",children:Pe.phone})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Email:"}),e.jsx(i,{fontWeight:"bold",children:Pe.email})]})]})]})})}),e.jsxs(V,{status:"info",borderRadius:"md",children:[e.jsx(H,{}),e.jsxs(s,{align:"start",spacing:2,children:[e.jsx(i,{fontWeight:"bold",children:"Cómo funciona la suscripción:"}),e.jsxs(i,{fontSize:"sm",children:["• Pagas una vez al mes por adelantado",e.jsx("br",{}),"• Recibes ",se.bottles+se.bonus," bidones inmediatamente",e.jsx("br",{}),"• Después solo pides la cantidad que necesites sin pagar",e.jsx("br",{}),"• Los bidones se descuentan de tu suscripción"]})]})]}),e.jsx(p,{colorScheme:"purple",size:"lg",w:"full",onClick:()=>L(6),leftIcon:e.jsx(ei,{}),children:"Proceder al Pago"})]})})]}):J&&K?e.jsxs(o,{maxW:"lg",mx:"auto",children:[e.jsx(oe,{textAlign:"center",children:e.jsxs(s,{spacing:4,children:[e.jsx(d,{as:Js,boxSize:12,color:"purple.500"}),e.jsx(u,{size:"lg",children:"Confirmar Pedido con Suscripción"}),e.jsx(i,{color:"gray.600",children:"Usarás bidones de tu suscripción existente"})]})}),e.jsx(l,{children:e.jsxs(s,{spacing:6,children:[e.jsxs(V,{status:"info",borderRadius:"md",children:[e.jsx(H,{}),e.jsxs(s,{align:"start",spacing:2,children:[e.jsx(i,{fontWeight:"bold",children:"Cómo funciona con suscripción:"}),e.jsxs(i,{fontSize:"sm",children:["• Se descontarán ",Ee.reduce((e,s)=>{const i=P.find(e=>e.id===s.productId);return i&&"bidon"===i.type?e+s.quantity:e},0)," bidones de tu suscripción",e.jsx("br",{}),"• El repartidor NO cobrará nada en la entrega",e.jsx("br",{}),"• Los bidones se descontarán automáticamente",e.jsx("br",{}),"• Quedarán ",K.remainingBottles-Ee.reduce((e,s)=>{const i=P.find(e=>e.id===s.productId);return i&&"bidon"===i.type?e+s.quantity:e},0)," bidones disponibles"]})]})]}),e.jsx(o,{variant:"outline",w:"full",children:e.jsx(l,{children:e.jsxs(s,{spacing:3,children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(s,{spacing:2,w:"full",children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Cliente:"}),e.jsx(i,{fontWeight:"bold",children:Pe.name})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Modalidad:"}),e.jsx(h,{colorScheme:"purple",children:"Suscripción (Sin Pago)"})]}),e.jsxs(s,{spacing:1,w:"full",align:"stretch",children:[e.jsx(i,{children:"Productos:"}),Ee.map((s,r)=>e.jsxs(t,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["• ",s.name," x",s.quantity]}),e.jsxs(i,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(s.subtotal).toFixed(2)]})]},r))]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Bidones a usar:"}),e.jsxs(i,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:[Ee.reduce((e,s)=>e+s.quantity,0)," bidones"]})]})]})]})})}),e.jsx(p,{colorScheme:"purple",size:"lg",w:"full",onClick:ts,leftIcon:e.jsx(Qs,{}),isLoading:R,loadingText:"Creando pedido...",children:"Confirmar Pedido con Suscripción"})]})})]}):"vale"===ke?e.jsxs(o,{maxW:"lg",mx:"auto",children:[e.jsx(oe,{textAlign:"center",children:e.jsxs(s,{spacing:4,children:[e.jsx(d,{as:fi,boxSize:12,color:"orange.500"}),e.jsx(u,{size:"lg",children:"Pago a Crédito"}),e.jsx(i,{color:"gray.600",children:"Tu pedido se anotará en tu vale de crédito"})]})}),e.jsx(l,{children:e.jsxs(s,{spacing:6,children:[e.jsxs(V,{status:"info",borderRadius:"md",children:[e.jsx(H,{}),e.jsxs(s,{align:"start",spacing:2,children:[e.jsx(i,{fontWeight:"bold",children:"Cómo funciona el pago a crédito:"}),e.jsxs(i,{fontSize:"sm",children:["• Tu pedido se anotará automáticamente en tu vale",e.jsx("br",{}),"• El repartidor NO cobrará nada en la entrega",e.jsx("br",{}),"• Debes pagar todos tus vales al final del mes",e.jsx("br",{}),"• Puedes pagar en efectivo o PLIN cuando sea el momento"]})]})]}),e.jsx(o,{variant:"outline",w:"full",children:e.jsx(l,{children:e.jsxs(s,{spacing:3,children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(s,{spacing:2,w:"full",children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Cliente:"}),e.jsx(i,{fontWeight:"bold",children:Pe.name})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Modalidad:"}),e.jsx(h,{colorScheme:"orange",children:"A Crédito (Vale)"})]}),e.jsxs(s,{spacing:1,w:"full",align:"stretch",children:[e.jsx(i,{children:"Productos:"}),Ee.map((s,r)=>e.jsxs(t,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["• ",s.name," x",s.quantity]}),e.jsxs(i,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(s.subtotal).toFixed(2)]})]},r))]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Total:"}),e.jsxs(i,{fontWeight:"bold",fontSize:"lg",color:"orange.600",children:["S/ ",parseFloat(ss()).toFixed(2)," (A Crédito)"]})]})]})]})})}),e.jsx(p,{colorScheme:"orange",size:"lg",w:"full",onClick:is,leftIcon:e.jsx(Qs,{}),isLoading:R,loadingText:"Creando pedido...",children:"Confirmar Pedido a Crédito"})]})})]}):"suscripcion"===ke&&se?e.jsxs(o,{maxW:"lg",mx:"auto",children:[e.jsx(oe,{textAlign:"center",children:e.jsxs(s,{spacing:4,children:[e.jsx(d,{as:Js,boxSize:12,color:"purple.500"}),e.jsx(u,{size:"lg",children:"Confirmar Suscripción"}),e.jsxs(i,{color:"gray.600",children:["Plan ",se.name," seleccionado"]})]})}),e.jsx(l,{children:e.jsxs(s,{spacing:6,children:[e.jsxs(V,{status:"info",borderRadius:"md",children:[e.jsx(H,{}),e.jsxs(s,{align:"start",spacing:2,children:[e.jsx(i,{fontWeight:"bold",children:"Cómo funciona la suscripción:"}),e.jsxs(i,{fontSize:"sm",children:["• Pagas una vez al mes por adelantado",e.jsx("br",{}),"• Recibes ",se.bottles+se.bonus," bidones inmediatamente",e.jsx("br",{}),"• Después solo pides la cantidad que necesites sin pagar",e.jsx("br",{}),"• Los bidones se descuentan de tu suscripción"]})]})]}),e.jsx(o,{variant:"outline",w:"full",borderColor:"purple.200",children:e.jsx(l,{children:e.jsxs(s,{spacing:3,children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:se.name}),e.jsxs(s,{spacing:2,w:"full",children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Precio del plan:"}),e.jsxs(i,{fontWeight:"bold",color:"purple.600",children:["S/ ",se.price]})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Bidones incluidos:"}),e.jsx(i,{fontWeight:"bold",children:se.bottles})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Bidones extra:"}),e.jsxs(i,{fontWeight:"bold",color:"green.600",children:["+",se.bonus]})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Total bidones:"}),e.jsx(i,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:se.bottles+se.bonus})]})]})]})})}),e.jsx(o,{variant:"outline",w:"full",children:e.jsx(l,{children:e.jsxs(s,{spacing:3,children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(s,{spacing:2,w:"full",children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Cliente:"}),e.jsx(i,{fontWeight:"bold",children:Pe.name})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Modalidad:"}),e.jsxs(h,{colorScheme:"purple",children:["Suscripción ",se.name]})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Total a pagar:"}),e.jsxs(i,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:["S/ ",se.monthlyPrice]})]})]})]})})}),e.jsxs(s,{spacing:4,w:"full",children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:"¿Cómo deseas pagar?"}),e.jsx(xe,{value:We,onChange:Le,children:e.jsxs(pe,{spacing:4,w:"full",children:[e.jsx(o,{variant:"efectivo"===We?"filled":"outline",borderColor:"efectivo"===We?"blue.500":"gray.200",cursor:"pointer",onClick:()=>Le("efectivo"),children:e.jsx(l,{children:e.jsxs(t,{spacing:4,children:[e.jsx(he,{value:"efectivo"}),e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",children:"Efectivo"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Paga en efectivo al repartidor"})]})]})})}),e.jsx(o,{variant:"plin"===We?"filled":"outline",borderColor:"plin"===We?"blue.500":"gray.200",cursor:"pointer",onClick:()=>Le("plin"),children:e.jsx(l,{children:e.jsxs(t,{spacing:4,children:[e.jsx(he,{value:"plin"}),e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",children:"PLIN"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Paga con PLIN"})]})]})})})]})}),e.jsx(p,{colorScheme:"purple",size:"lg",w:"full",onClick:"efectivo"===We?is:rs,leftIcon:e.jsx(Qs,{}),isLoading:R,loadingText:"Creando suscripción...",children:"efectivo"===We?"Confirmar Suscripción":"Pagar con PLIN"})]})]})})]}):e.jsxs(o,{maxW:"lg",mx:"auto",children:[e.jsx(oe,{textAlign:"center",children:e.jsxs(s,{spacing:4,children:[e.jsx(d,{as:ei,boxSize:12,color:"purple.500"}),e.jsx(u,{size:"lg",children:"Forma de Pago"}),e.jsx(i,{color:"gray.600",children:"¿Cómo deseas pagar?"})]})}),e.jsx(l,{children:e.jsxs(s,{spacing:6,children:[e.jsx(xe,{value:We,onChange:Le,children:e.jsxs(pe,{spacing:4,children:[e.jsx(o,{variant:"efectivo"===We?"filled":"outline",borderColor:"efectivo"===We?"blue.500":"gray.200",cursor:"pointer",onClick:()=>Le("efectivo"),children:e.jsx(l,{children:e.jsxs(t,{spacing:4,children:[e.jsx(he,{value:"efectivo"}),e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",children:"Efectivo"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Paga en efectivo al repartidor"})]})]})})}),e.jsx(o,{variant:"plin"===We?"filled":"outline",borderColor:"plin"===We?"blue.500":"gray.200",cursor:"pointer",onClick:()=>Le("plin"),children:e.jsx(l,{children:e.jsxs(t,{spacing:4,children:[e.jsx(he,{value:"plin"}),e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",children:"PLIN"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Pago digital con QR"})]})]})})})]})}),e.jsx(o,{variant:"outline",w:"full",children:e.jsx(l,{children:e.jsxs(s,{spacing:3,children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(s,{spacing:2,w:"full",children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Cliente:"}),e.jsx(i,{fontWeight:"bold",children:Pe.name})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Modalidad:"}),e.jsx(h,{colorScheme:"blue",children:"contraentrega"===ke?"Contraentrega":"vale"===ke?"A Crédito (Vale)":"Suscripción"})]}),e.jsxs(s,{spacing:1,w:"full",align:"stretch",children:[e.jsx(i,{children:"Productos:"}),Ee.map((s,r)=>e.jsxs(t,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["• ",s.name," x",s.quantity]}),e.jsxs(i,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(s.subtotal).toFixed(2)]})]},r))]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Total:"}),e.jsxs(i,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(ss()).toFixed(2)]})]})]})]})})}),e.jsx(o,{variant:"outline",w:"full",children:e.jsx(l,{children:e.jsxs(s,{spacing:4,children:[e.jsxs(t,{w:"full",justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Términos y Condiciones"}),e.jsx(p,{size:"sm",variant:"outline",colorScheme:"blue",onClick:()=>ge(!0),children:"Ver Términos"})]}),e.jsxs(t,{w:"full",spacing:3,children:[e.jsx(de,{isChecked:le,onChange:e=>ce(e.target.checked),colorScheme:"blue",size:"lg"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"He leído y acepto los términos y condiciones del servicio"})]})]})})}),e.jsx(p,{colorScheme:"green",size:"lg",w:"full",onClick:"efectivo"===We?is:rs,leftIcon:e.jsx(Qs,{}),isLoading:R,loadingText:"Creando pedido...",isDisabled:!le,children:"efectivo"===We?"Confirmar Pedido":"Pagar con PLIN"})]})})]})),6===W&&e.jsxs(o,{maxW:"lg",mx:"auto",children:[e.jsx(oe,{textAlign:"center",children:e.jsxs(s,{spacing:4,children:[e.jsx(d,{as:ei,boxSize:12,color:"purple.500"}),e.jsx(u,{size:"lg",children:"Pago de Suscripción"}),e.jsx(i,{color:"gray.600",children:"Selecciona tu método de pago para la suscripción"})]})}),e.jsx(l,{children:e.jsxs(s,{spacing:6,children:[e.jsx(o,{variant:"outline",w:"full",borderColor:"purple.200",children:e.jsx(l,{children:e.jsxs(s,{spacing:3,children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:se.name}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Total bidones:"}),e.jsx(i,{fontWeight:"bold",children:se.bottles+se.bonus})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Precio por bidón:"}),e.jsxs(i,{fontWeight:"bold",children:["S/ ",parseFloat(se.pricePerBottle).toFixed(2)]})]}),e.jsx(x,{}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontSize:"lg",fontWeight:"bold",children:"Total a pagar:"}),e.jsxs(i,{fontSize:"xl",fontWeight:"bold",color:"purple.600",children:["S/ ",parseFloat(se.price).toFixed(2)]})]})]})})}),e.jsxs(s,{spacing:4,w:"full",children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:"Método de Pago"}),e.jsx(o,{variant:"efectivo"===We?"filled":"outline",borderColor:"efectivo"===We?"green.500":"gray.200",cursor:"pointer",onClick:()=>Le("efectivo"),_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:e.jsx(l,{children:e.jsxs(t,{spacing:4,children:[e.jsx(d,{as:fi,boxSize:8,color:"green.500"}),e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",children:"Pago en Efectivo"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Paga cuando recibas tu suscripción"})]})]})})}),e.jsx(o,{variant:"plin"===We?"filled":"outline",borderColor:"plin"===We?"purple.500":"gray.200",cursor:"pointer",onClick:()=>Le("plin"),_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:e.jsx(l,{children:e.jsxs(t,{spacing:4,children:[e.jsx(d,{as:wi,boxSize:8,color:"purple.500"}),e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",children:"Pago con Plin"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Paga con QR de Plin"})]})]})})})]}),e.jsxs(t,{spacing:4,w:"full",children:[e.jsx(p,{variant:"outline",flex:1,onClick:()=>L(5),children:"← Anterior"}),e.jsx(p,{colorScheme:"purple",flex:1,onClick:()=>{"efectivo"===We?ns():"plin"===We&&j()},leftIcon:"efectivo"===We?e.jsx(Qs,{}):e.jsx(wi,{}),isLoading:R,loadingText:"efectivo"===We?"Creando suscripción...":"Preparando pago...",children:"efectivo"===We?"Confirmar Suscripción":"Pagar con Plin"})]})]})})]}),W>1&&e.jsxs(t,{spacing:4,children:[e.jsx(p,{variant:"outline",onClick:()=>L(W-1),children:"← Anterior"}),W<6&&5!==W&&e.jsx(p,{colorScheme:"blue",isDisabled:3===W&&0===Ee.length,onClick:()=>{3!==W||0!==Ee.length?L(J&&K&&3===W?5:W+1):a({title:"¡Productos requeridos!",description:"Por favor, selecciona al menos un producto para continuar con tu pedido.",status:"warning",duration:4e3,isClosable:!0})},children:3===W&&0===Ee.length?"Selecciona productos →":"Siguiente →"})]})]})}),e.jsxs(v,{isOpen:m,onClose:y,size:{base:"full",sm:"md"},isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{mx:{base:0,sm:4},my:{base:0,sm:4},maxH:{base:"100vh",sm:"90vh"},maxW:{base:"100vw",sm:"500px"},w:{base:"100%",sm:"auto"},children:[e.jsx(C,{textAlign:"center",p:{base:3,md:4},children:e.jsxs(s,{spacing:2,children:[e.jsx(d,{as:wi,boxSize:{base:6,md:8},color:"purple.500"}),e.jsx(i,{fontSize:{base:"md",md:"lg"},children:"Pago con PLIN"})]})}),e.jsx(z,{}),e.jsx(A,{pb:{base:3,md:4},px:{base:3,md:4},overflowY:"auto",children:e.jsxs(s,{spacing:{base:3,md:4},w:"100%",children:[e.jsxs(V,{status:"info",fontSize:{base:"xs",md:"sm"},w:"100%",children:[e.jsx(H,{}),e.jsx(i,{children:"Escanea el código QR con tu app PLIN"})]}),e.jsx(c,{textAlign:"center",w:"100%",maxW:"250px",mx:"auto",children:e.jsx(r,{src:"/assets/plin_qr-Mn7UEP9b.jpeg",alt:"QR PLIN",w:"100%",h:"auto",borderRadius:"md"})}),e.jsxs(s,{spacing:2,w:"100%",children:[e.jsxs(i,{fontWeight:"bold",fontSize:{base:"md",md:"lg"},textAlign:"center",children:["Total a pagar: S/ ","suscripcion"===ke&&se?parseFloat(se.price).toFixed(2):parseFloat(ss()).toFixed(2)]}),e.jsx(i,{fontSize:{base:"xs",md:"sm"},color:"gray.600",textAlign:"center",children:"suscripcion"===ke&&se?`Plan ${se.name} - ${se.bottles+se.bonus} bidones`:"Incluye productos + flete de envío"})]}),e.jsxs(V,{status:Fe?"success":"warning",fontSize:{base:"xs",md:"sm"},children:[e.jsx(H,{}),e.jsx(i,{children:Fe?"✅ Comprobante enviado por WhatsApp. Ahora puedes confirmar el pago.":"Después de pagar, envía el comprobante por WhatsApp"})]}),"suscripcion"===ke&&se&&e.jsxs(V,{status:"info",fontSize:{base:"xs",md:"sm"},children:[e.jsx(H,{}),e.jsxs(i,{children:[e.jsx("strong",{children:"Importante:"})," Una vez pagada la suscripción, podrás hacer pedidos usando tus bidones sin costo adicional."]})]}),e.jsxs(s,{spacing:{base:2,md:3},w:"full",children:[e.jsx(p,{colorScheme:"green",size:{base:"md",md:"lg"},w:"full",leftIcon:e.jsx(Gs,{}),onClick:os,fontSize:{base:"sm",md:"md"},children:"Enviar Comprobante por WhatsApp"}),e.jsx(p,{colorScheme:"purple",size:{base:"md",md:"lg"},w:"full",leftIcon:e.jsx(Qs,{}),onClick:async()=>{if("suscripcion"===ke&&se)try{O(!0),await ns()}catch(e){}finally{O(!1)}else await as()},isLoading:R,loadingText:"suscripcion"===ke?"Creando suscripción...":"Creando pedido...",isDisabled:!Fe||R,opacity:Fe?1:.5,fontSize:{base:"sm",md:"md"},children:Fe?"Confirmar Pago y Crear Pedido":"Primero envía el comprobante por WhatsApp"})]})]})})]})]}),e.jsx(et,{isOpen:me,onClose:()=>ge(!1),onAccept:async e=>{try{ce(!0),ge(!1),as&&await as(),a({title:"Términos aceptados",description:"Has aceptado los términos y condiciones",status:"success",duration:2e3,isClosable:!0})}catch(s){a({title:"Error",description:"Hubo un problema al crear el pedido",status:"error",duration:5e3,isClosable:!0})}},onReject:()=>{ce(!1),ge(!1),a({title:"Términos rechazados",description:"Debes aceptar los términos y condiciones para continuar",status:"error",duration:3e3,isClosable:!0})},title:"Términos y Condiciones - Planta de Agua Aquayara",showAcceptance:!0})]})},rt=()=>{const[r,n]=He.useState(null),{isOpen:a,onOpen:d,onClose:x}=f(),j=g();_({base:!0,md:!1});const b=(e,s=2)=>{if(null==e||""===e)return"0.00";const i=parseFloat(e);return isNaN(i)?"0.00":i.toFixed(s)},{deliveryFees:y,loading:P,error:T,fetchDeliveryFees:E,createDeliveryFee:I,updateDeliveryFee:k,deleteDeliveryFee:N,clearError:W}=Ji(),{districts:L,loading:R,error:O,fetchDistricts:F,updateDistrict:M,createDistrict:B,clearError:$}=st(),[J,Q]=He.useState({name:"",price:0});He.useEffect(()=>{E().then(e=>{}),F().then(e=>{})},[E,F]),He.useEffect(()=>{T&&(j({title:"Error",description:T,status:"error",duration:3e3,isClosable:!0}),W())},[T,j,W]);const K=()=>{Q({name:"",price:0}),n(null)};return P?e.jsx(q,{h:"400px",children:e.jsx(ee,{size:"xl"})}):e.jsxs(c,{p:6,children:[e.jsxs(m,{justify:"space-between",align:"center",mb:6,children:[e.jsx(u,{size:"lg",color:"gray.700",children:"Gestión de Distritos y Fletes"}),e.jsx(p,{colorScheme:"blue",leftIcon:e.jsx(me,{}),onClick:()=>{K(),d()},children:"Nuevo Distrito"})]}),0===L.length?e.jsxs(V,{status:"info",children:[e.jsx(H,{}),"No hay distritos configurados."]}):e.jsx(X,{columns:{base:1,md:2,lg:3},spacing:6,children:Array.isArray(L)?L.map((r,a)=>e.jsxs(o,{variant:"outline",children:[e.jsx(oe,{children:e.jsxs(m,{justify:"space-between",align:"center",children:[e.jsx(u,{size:"md",children:r.name||"Sin nombre"}),e.jsx(h,{colorScheme:"green",children:"Activo"})]})}),e.jsx(l,{children:e.jsxs(s,{spacing:3,align:"start",children:[e.jsxs(t,{children:[e.jsx(fi,{color:"gray.500"}),e.jsxs(i,{fontSize:"lg",fontWeight:"bold",color:"blue.600",children:["S/ ",b(r.deliveryFee||0)]})]}),e.jsxs(t,{spacing:2,w:"full",justify:"end",children:[e.jsx(D,{size:"sm",icon:e.jsx(ce,{}),onClick:()=>(e=>{n(e),Q({name:e.name,price:e.deliveryFee||0}),d()})(r),colorScheme:"blue",variant:"outline"}),e.jsx(D,{size:"sm",icon:e.jsx(ge,{}),onClick:()=>(async()=>{window.confirm("¿Estás seguro de que quieres eliminar este distrito?")&&j({title:"Función no disponible",description:"La eliminación de distritos no está disponible por el momento",status:"warning",duration:2e3,isClosable:!0})})(r.id),colorScheme:"red",variant:"outline"})]})]})})]},r.id||`district-${a}`)):null}),e.jsxs(v,{isOpen:a,onClose:x,size:"lg",isCentered:!0,children:[e.jsx(S,{}),e.jsx(w,{children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault();(r?await M(r.id,{name:J.name,deliveryFee:J.price}):await B({name:J.name,deliveryFee:J.price})).success&&(j({title:r?"Distrito actualizado":"Distrito creado",description:"El distrito ha sido "+(r?"actualizado":"creado"),status:"success",duration:2e3,isClosable:!0}),K(),x())},children:[e.jsx(C,{children:r?"Editar Distrito":"Nuevo Distrito"}),e.jsx(z,{}),e.jsx(A,{children:e.jsxs(s,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Nombre del Distrito/Ciudad"}),e.jsx(G,{value:J.name,onChange:e=>Q({...J,name:e.target.value}),placeholder:"Ej: San Isidro, Miraflores, Lima Centro"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Precio de Flete por Distrito (S/)"}),e.jsx(je,{value:J.price,onChange:e=>Q({...J,price:parseFloat(e)||0}),min:0,precision:2,children:e.jsx(fe,{})})]})]})}),e.jsxs(ae,{children:[e.jsx(p,{variant:"ghost",mr:3,onClick:x,children:"Cancelar"}),e.jsx(p,{colorScheme:"blue",type:"submit",children:r?"Actualizar":"Crear"})]})]})})]})]})},nt=()=>{const r=Ye(),{id:n}=Je(),a=g(),d=_({base:!0,md:!1}),[j,f]=He.useState(null),[b,y]=He.useState(!0),[v,S]=He.useState("boleta");He.useEffect(()=>{(async()=>{var e;try{if(n){try{const s=await Vs.get(`/api/guest-orders/token/${n}`);if(s.data.success){const i=s.data.data;return void f({id:i.id,client:{name:i.customerName,phone:i.customerPhone,email:i.customerEmail,address:i.deliveryAddress,district:i.deliveryDistrict,reference:i.deliveryNotes,notes:i.deliveryNotes},items:(null==(e=i.products)?void 0:e.map(e=>{var s;return{name:(null==(s=e.product)?void 0:s.name)||"Producto",quantity:e.quantity,unitPrice:e.price,subtotal:e.subtotal}}))||[],paymentMethod:i.paymentMethod,paymentType:i.paymentType,subtotal:i.totalAmount-i.deliveryFee,deliveryFee:i.deliveryFee,total:i.totalAmount,status:"pending"===i.status?"pendiente":i.status,createdAt:i.createdAt})}}catch(s){}const i=localStorage.getItem("guestOrderData");if(i){const e=JSON.parse(i);f({id:n,...e,status:"pendiente",createdAt:(new Date).toISOString()})}}else{const e=localStorage.getItem("guestOrderData");if(e){const s=JSON.parse(e);f({id:"temp",...s,status:"pendiente",createdAt:(new Date).toISOString()})}}}catch(i){a({title:"Error",description:"No se pudo cargar el pedido",status:"error",duration:3e3,isClosable:!0})}finally{y(!1)}})()},[n,a]);return b?e.jsx(q,{h:"400px",children:e.jsx(ee,{size:"xl"})}):j?e.jsx(c,{minH:"100vh",bg:"gray.50",py:8,children:e.jsx(c,{maxW:"800px",mx:"auto",px:4,children:e.jsxs(s,{spacing:8,children:[e.jsxs(c,{textAlign:"center",children:[e.jsx(u,{size:"xl",color:"blue.600",mb:2,children:"Recibo de Pedido"}),e.jsx(i,{color:"gray.600",fontSize:"lg",children:"Comprobante de tu pedido de agua"})]}),e.jsxs(o,{w:"full",children:[e.jsx(oe,{children:e.jsxs(m,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(s,{align:"start",spacing:1,children:[e.jsxs(u,{size:"md",color:"gray.700",children:["Pedido #",j.id]}),e.jsx(i,{fontSize:"sm",color:"gray.500",children:new Date(j.createdAt).toLocaleString()})]}),e.jsx(h,{colorScheme:(e=>{switch(e){case"pendiente":return"yellow";case"confirmado":return"blue";case"en_preparacion":return"orange";case"en_camino":return"purple";case"entregado":return"green";case"cancelado":return"red";default:return"gray"}})(j.status),size:"lg",children:(e=>{switch(e){case"pendiente":return"Pendiente";case"confirmado":return"Confirmado";case"en_preparacion":return"En Preparación";case"en_camino":return"En Camino";case"entregado":return"Entregado";case"cancelado":return"Cancelado";default:return e}})(j.status)})]})}),e.jsx(l,{children:e.jsxs(s,{spacing:6,children:[e.jsxs(c,{w:"full",p:4,bg:"gray.50",borderRadius:"md",children:[e.jsxs(i,{fontWeight:"bold",mb:3,color:"gray.700",children:[e.jsx(hi,{style:{display:"inline",marginRight:"8px"}}),"Información del Cliente"]}),e.jsxs(X,{columns:{base:1,md:2},spacing:3,children:[e.jsxs(c,{children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Nombre:"}),e.jsx(i,{fontWeight:"bold",children:j.client.name})]}),e.jsxs(c,{children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Teléfono:"}),e.jsx(i,{fontWeight:"bold",children:j.client.phone})]}),j.client.email&&e.jsxs(c,{children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Email:"}),e.jsx(i,{fontWeight:"bold",children:j.client.email})]}),e.jsxs(c,{children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Distrito:"}),e.jsx(i,{fontWeight:"bold",children:j.client.district})]})]}),e.jsxs(c,{mt:3,children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Dirección:"}),e.jsx(i,{fontWeight:"bold",children:j.client.address})]}),j.client.reference&&e.jsxs(c,{mt:2,children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Referencia:"}),e.jsx(i,{fontWeight:"bold",children:j.client.reference})]})]}),e.jsxs(c,{w:"full",children:[e.jsxs(i,{fontWeight:"bold",mb:3,color:"gray.700",children:[e.jsx(Di,{style:{display:"inline",marginRight:"8px"}}),"Productos Solicitados"]}),d?e.jsx(s,{spacing:3,children:j.items.map((r,n)=>e.jsx(o,{variant:"outline",w:"full",children:e.jsx(l,{children:e.jsxs(s,{align:"start",spacing:2,children:[e.jsx(i,{fontWeight:"bold",children:r.name}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["Cantidad: ",r.quantity]}),e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["S/ ",parseFloat(r.unitPrice).toFixed(2)," c/u"]})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontWeight:"bold",children:"Subtotal:"}),e.jsxs(i,{fontWeight:"bold",color:"blue.600",children:["S/ ",parseFloat(r.subtotal).toFixed(2)]})]})]})})},n))}):e.jsxs(be,{variant:"simple",children:[e.jsx(ye,{children:e.jsxs(ve,{children:[e.jsx(Se,{children:"Producto"}),e.jsx(Se,{isNumeric:!0,children:"Cantidad"}),e.jsx(Se,{isNumeric:!0,children:"Precio Unit."}),e.jsx(Se,{isNumeric:!0,children:"Subtotal"})]})}),e.jsx(we,{children:j.items.map((t,r)=>e.jsxs(ve,{children:[e.jsx(Ce,{children:e.jsx(s,{align:"start",spacing:1,children:e.jsx(i,{fontWeight:"bold",children:t.name})})}),e.jsx(Ce,{isNumeric:!0,children:t.quantity}),e.jsxs(Ce,{isNumeric:!0,children:["S/ ",parseFloat(t.unitPrice).toFixed(2)]}),e.jsxs(Ce,{isNumeric:!0,fontWeight:"bold",color:"blue.600",children:["S/ ",parseFloat(t.subtotal).toFixed(2)]})]},r))})]})]}),e.jsx(c,{w:"full",p:4,border:"1px",borderColor:"gray.200",borderRadius:"md",children:e.jsxs(s,{spacing:2,children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Subtotal:"}),e.jsxs(i,{fontWeight:"bold",children:["S/ ",parseFloat(j.subtotal).toFixed(2)]})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{children:"Flete:"}),e.jsxs(i,{fontWeight:"bold",children:["S/ ",parseFloat(j.deliveryFee).toFixed(2)]})]}),e.jsx(x,{}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:"Total:"}),e.jsxs(i,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(j.total).toFixed(2)]})]})]})}),j.client.notes&&e.jsxs(c,{w:"full",p:4,bg:"yellow.50",borderRadius:"md",children:[e.jsx(i,{fontWeight:"bold",mb:2,color:"gray.700",children:"Notas Adicionales:"}),e.jsx(i,{fontSize:"sm",children:j.client.notes})]}),e.jsx(c,{w:"full",maxW:"300px",children:e.jsxs(U,{children:[e.jsx(Y,{children:"Tipo de Documento"}),e.jsxs(re,{value:v,onChange:e=>S(e.target.value),children:[e.jsx("option",{value:"boleta",children:"Boleta"}),e.jsx("option",{value:"factura",children:"Factura"})]})]})}),e.jsxs(X,{columns:{base:1,md:2,lg:4},spacing:4,w:"full",children:[e.jsx(p,{leftIcon:e.jsx(ii,{}),colorScheme:"blue",variant:"outline",onClick:async()=>{if(j)try{a({title:"Generando PDF",description:"Preparando el documento...",status:"info",duration:2e3,isClosable:!0});const e={};j.items.forEach((s,i)=>{const t=`${s.name}-${s.unitPrice}`;e[t]=(e[t]||0)+1});Object.entries(e).filter(([e,s])=>s>1).length;const s={id:j.id,customerName:j.client.name,customerPhone:j.client.phone,customerEmail:j.client.email||null,deliveryAddress:j.client.address,deliveryDistrict:j.client.district,deliveryNotes:j.client.reference||null,paymentMethod:j.paymentMethod||"contraentrega",paymentType:j.paymentType||"cash",orderDetails:j.items.map(e=>({product:{name:e.name},productName:e.name,quantity:parseInt(e.quantity),unitPrice:parseFloat(e.unitPrice),subtotal:parseFloat(e.subtotal)})),items:[],subtotal:parseFloat(j.subtotal),deliveryFee:parseFloat(j.deliveryFee),total:parseFloat(j.total),status:j.status,createdAt:j.createdAt},i=await Vs.post("/api/guest-payments/generate-pdf",{orderData:s,documentType:v},{responseType:"blob"}),t=new Blob([i.data],{type:"application/pdf"}),r=window.URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=`${v}_${j.id}.pdf`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r),a({title:"PDF Generado",description:"El documento se ha descargado exitosamente",status:"success",duration:3e3,isClosable:!0})}catch(e){a({title:"Error",description:"Error al generar el PDF",status:"error",duration:3e3,isClosable:!0})}},children:"Descargar PDF"}),e.jsx(p,{leftIcon:e.jsx(Si,{}),colorScheme:"gray",variant:"outline",onClick:()=>{window.print()},children:"Imprimir"}),e.jsx(p,{leftIcon:e.jsx(Gs,{}),colorScheme:"green",variant:"outline",onClick:()=>{const e=`Hola, tengo una consulta sobre mi pedido #${null==j?void 0:j.id}`,s=`https://wa.me/51961606183?text=${encodeURIComponent(e)}`;window.open(s,"_blank")},children:"WhatsApp"}),e.jsx(p,{leftIcon:e.jsx(hi,{}),colorScheme:"purple",onClick:()=>{localStorage.removeItem("guestOrderData"),r("/guest-order")},children:"Nuevo Pedido"})]})]})})]})]})})}):e.jsx(q,{h:"400px",children:e.jsxs(V,{status:"error",children:[e.jsx(H,{}),"No se encontró el pedido"]})})},at=()=>{var r;const n=Ye(),{id:a}=Je(),d=g();_({base:!0,md:!1});const[x,j]=He.useState(null),[f,b]=He.useState(!1),[y,v]=He.useState(a||""),[S,w]=He.useState(!1);He.useEffect(()=>{a&&C(a)},[a]);const C=async e=>{b(!0),w(!1);try{const s=await axios.get(`/api/guest-orders/${e}`),i=s.data.success?s.data.data:s.data;i?j(i):w(!0)}catch(s){w(!0)}finally{b(!1)}},z=()=>{y.trim()?C(y.trim()):d({title:"ID requerido",description:"Ingresa un número de pedido",status:"warning",duration:3e3,isClosable:!0})},A=e=>{switch(e){case"pendiente":return{color:"yellow",text:"Pendiente",icon:Zs,description:"Tu pedido está siendo procesado"};case"confirmado":return{color:"blue",text:"Confirmado",icon:Ks,description:"Tu pedido ha sido confirmado"};case"en_preparacion":return{color:"orange",text:"En Preparación",icon:Di,description:"Tu pedido está siendo preparado"};case"en_camino":return{color:"purple",text:"En Camino",icon:Di,description:"Tu pedido está en camino"};case"entregado":return{color:"green",text:"Entregado",icon:Ks,description:"Tu pedido ha sido entregado"};case"cancelado":return{color:"red",text:"Cancelado",icon:Ei,description:"Tu pedido ha sido cancelado"};default:return{color:"gray",text:e,icon:Zs,description:"Estado desconocido"}}},P=e=>{switch(e){case"pendiente":return 20;case"confirmado":return 40;case"en_preparacion":return 60;case"en_camino":return 80;case"entregado":return 100;default:return 0}};return f?e.jsx(q,{h:"400px",children:e.jsx(ee,{size:"xl"})}):e.jsx(c,{minH:"100vh",bg:"gray.50",py:8,children:e.jsx(c,{maxW:"800px",mx:"auto",px:4,children:e.jsxs(s,{spacing:8,children:[e.jsxs(c,{textAlign:"center",children:[e.jsx(u,{size:"xl",color:"blue.600",mb:2,children:"Seguimiento de Pedido"}),e.jsx(i,{color:"gray.600",fontSize:"lg",children:"Consulta el estado de tu pedido"})]}),e.jsxs(o,{w:"full",children:[e.jsx(oe,{children:e.jsx(u,{size:"md",color:"gray.700",children:"Buscar Pedido"})}),e.jsx(l,{children:e.jsxs(t,{spacing:4,children:[e.jsxs(se,{flex:1,children:[e.jsx(ie,{pointerEvents:"none",children:e.jsx(zi,{color:"gray.300"})}),e.jsx(G,{placeholder:"Ingresa el número de pedido",value:y,onChange:e=>v(e.target.value),onKeyPress:e=>"Enter"===e.key&&z()})]}),e.jsx(p,{colorScheme:"blue",onClick:z,isLoading:f,loadingText:"Buscando...",children:"Buscar"})]})})]}),S&&e.jsxs(V,{status:"error",borderRadius:"md",children:[e.jsx(H,{}),e.jsxs(c,{children:[e.jsx(i,{fontWeight:"bold",children:"Pedido no encontrado"}),e.jsx(i,{fontSize:"sm",children:"Verifica que el número de pedido sea correcto"})]})]}),x&&e.jsxs(o,{w:"full",children:[e.jsx(oe,{children:e.jsxs(m,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(s,{align:"start",spacing:1,children:[e.jsxs(u,{size:"md",color:"gray.700",children:["Pedido #",x.id]}),e.jsx(i,{fontSize:"sm",color:"gray.500",children:new Date(x.createdAt).toLocaleString()})]}),e.jsx(h,{colorScheme:A(x.status).color,size:"lg",children:A(x.status).text})]})}),e.jsx(l,{children:e.jsxs(s,{spacing:6,children:[e.jsxs(c,{w:"full",p:4,bg:`${A(x.status).color}.50`,borderRadius:"md",children:[e.jsxs(t,{spacing:3,mb:3,children:[Ue.createElement(A(x.status).icon,{color:`${A(x.status).color}.500`,size:"24px"}),e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:A(x.status).text})]}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:A(x.status).description}),e.jsx(ze,{value:P(x.status),colorScheme:A(x.status).color,size:"sm",mt:3})]}),e.jsxs(c,{w:"full",children:[e.jsx(i,{fontWeight:"bold",mb:4,color:"gray.700",children:"Progreso del Pedido"}),e.jsx(s,{spacing:3,children:[{key:"pendiente",label:"Pendiente",description:"Pedido recibido"},{key:"confirmado",label:"Confirmado",description:"Pedido confirmado"},{key:"en_preparacion",label:"En Preparación",description:"Preparando pedido"},{key:"en_camino",label:"En Camino",description:"Enviando pedido"},{key:"entregado",label:"Entregado",description:"Pedido entregado"}].map((r,n)=>{const a=P(x.status)>P(r.key),o=x.status===r.key;return e.jsxs(t,{w:"full",spacing:4,children:[e.jsx(c,{w:"8",h:"8",borderRadius:"full",bg:a?"green.500":o?`${A(x.status).color}.500`:"gray.300",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"sm",children:a?e.jsx(Ks,{}):n+1}),e.jsxs(s,{align:"start",spacing:1,flex:1,children:[e.jsx(i,{fontWeight:o?"bold":"normal",children:r.label}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:r.description})]})]},r.key)})})]}),e.jsxs(c,{w:"full",p:4,bg:"gray.50",borderRadius:"md",children:[e.jsx(i,{fontWeight:"bold",mb:3,color:"gray.700",children:"Información de Entrega"}),e.jsxs(X,{columns:{base:1,md:2},spacing:3,children:[e.jsxs(c,{children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Cliente:"}),e.jsx(i,{fontWeight:"bold",children:x.clientName||"N/A"})]}),e.jsxs(c,{children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Teléfono:"}),e.jsx(i,{fontWeight:"bold",children:x.clientPhone||"N/A"})]}),e.jsxs(c,{colSpan:{base:1,md:2},children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Dirección:"}),e.jsx(i,{fontWeight:"bold",children:x.deliveryAddress||"N/A"})]})]})]}),e.jsxs(c,{w:"full",children:[e.jsx(i,{fontWeight:"bold",mb:3,color:"gray.700",children:"Productos Solicitados"}),e.jsx(s,{spacing:2,children:(null==(r=x.items)?void 0:r.map((s,r)=>e.jsxs(t,{justify:"space-between",w:"full",p:2,bg:"gray.50",borderRadius:"md",children:[e.jsxs(i,{fontSize:"sm",children:[s.name," x ",s.quantity]}),e.jsxs(i,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(s.subtotal).toFixed(2)]})]},r)))||e.jsx(i,{fontSize:"sm",color:"gray.500",children:"No hay información de productos"})})]}),e.jsx(c,{w:"full",p:4,border:"1px",borderColor:"gray.200",borderRadius:"md",children:e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",fontSize:"lg",children:"Total:"}),e.jsxs(i,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(x.total||0).toFixed(2)]})]})}),e.jsxs(t,{spacing:4,w:"full",children:[e.jsx(p,{leftIcon:e.jsx(hi,{}),colorScheme:"blue",onClick:()=>n("/guest-order"),flex:1,children:"Nuevo Pedido"}),e.jsx(p,{leftIcon:e.jsx(Di,{}),colorScheme:"green",variant:"outline",onClick:()=>n(`/receipt/${x.id}`),flex:1,children:"Ver Recibo"})]})]})})]})]})})})},ot=()=>{const{user:r}=Hs(),{updateGuestOrder:n}=Qi(),a=g(),[m,b]=He.useState(!0),[y,P]=He.useState([]),[T,E]=He.useState([]),[_,I]=He.useState([]),[k,N]=He.useState([]),[W,L]=He.useState("orders"),[R,O]=He.useState("all"),[F,M]=He.useState(null),[B,$]=He.useState(null),{isOpen:J,onOpen:Q,onClose:K}=f(),{isOpen:Z,onOpen:se,onClose:ie}=f(),{isOpen:te,onOpen:oe,onClose:le}=f(),[ce,de]=He.useState({clientId:"",productId:"",quantity:1,notes:""});He.useEffect(()=>{ue(),he(),xe(),pe();const e=setInterval(ue,3e4);return()=>clearInterval(e)},[]);const ue=async()=>{try{const e=await Vs.get("/api/delivery/orders");if(e.data.success){const s=e.data.data||[];P(Array.isArray(s)?s:[])}else P([])}catch(e){P([]),a({title:"Error",description:"No se pudieron cargar los pedidos",status:"error",duration:3e3,isClosable:!0})}finally{b(!1)}},he=async()=>{try{const e=await Vs.get(`/api/vouchers/delivery-person/${null==r?void 0:r.id}`);if(e.data.success){const s=e.data.data||[];E(Array.isArray(s)?s:[])}else E([])}catch(e){E([])}},xe=async()=>{try{const e=await Vs.get("/api/clients");e.data.success&&Array.isArray(e.data.data)?I(e.data.data):I([])}catch(e){I([])}},pe=async()=>{try{const e=await Vs.get("/api/products");e.data.success&&Array.isArray(e.data.data)?N(e.data.data):N([])}catch(e){N([])}},me=e=>{switch(e){case"confirmed":return"blue";case"preparing":return"yellow";case"ready":return"purple";case"delivered":return"green";case"cancelled":return"red";default:return"gray"}},ge=e=>{switch(e){case"confirmed":return"Confirmado";case"preparing":return"Preparando";case"ready":return"Listo";case"delivered":return"Entregado";case"cancelled":return"Cancelado";default:return"Desconocido"}},je=(e,s)=>{if("suscripcion"===s)return Js;switch(e){case"cash":case"efectivo":default:return fi;case"plin":case"yape":return wi;case"transfer":return ei}},fe={total:y.length,confirmed:y.filter(e=>"confirmed"===e.status).length,preparing:y.filter(e=>"preparing"===e.status).length,ready:y.filter(e=>"ready"===e.status).length,delivered:y.filter(e=>"delivered"===e.status).length,cancelled:y.filter(e=>"cancelled"===e.status).length},be=y.filter(e=>"all"===R||("asignado"===R?"confirmed"===e.status:"en_camino"===R?"preparing"===e.status||"ready"===e.status:"entregado"!==R||"delivered"===e.status)),ye=(e,s)=>{M({...e,newStatus:s}),Q()},ve=async()=>{if(F)try{const e={status:F.newStatus};await n(F.id,e),a({title:"Estado actualizado",description:`El pedido ahora está ${ge(F.newStatus).toLowerCase()}`,status:"success",duration:3e3,isClosable:!0}),K(),M(null),ue()}catch(e){a({title:"Error",description:"No se pudo actualizar el estado",status:"error",duration:3e3,isClosable:!0})}};return m?e.jsx(q,{h:"400px",children:e.jsx(ee,{size:"xl"})}):e.jsx(c,{p:{base:2,sm:3,md:6},minH:"100vh",bg:"gray.50",children:e.jsxs(s,{spacing:{base:3,md:6},align:"stretch",children:[e.jsx(c,{bg:"white",p:{base:3,md:4},borderRadius:"lg",shadow:"sm",children:e.jsxs(s,{spacing:2,align:"start",children:[e.jsx(u,{size:{base:"sm",md:"lg"},color:"gray.800",children:"Panel de Repartidor"}),e.jsxs(i,{color:"gray.600",fontSize:{base:"xs",md:"md"},children:["Bienvenido, ",(null==r?void 0:r.firstName)&&(null==r?void 0:r.lastName)?`${r.firstName} ${r.lastName}`:(null==r?void 0:r.username)||"Repartidor",". Gestiona tus entregas asignadas."]})]})}),e.jsxs(X,{columns:{base:2,sm:4},spacing:{base:2,md:4},children:[e.jsx(o,{shadow:"sm",borderRadius:"lg",children:e.jsxs(l,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(i,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"blue.600",children:fe.total}),e.jsx(i,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"Total Pedidos"})]})}),e.jsx(o,{shadow:"sm",borderRadius:"lg",children:e.jsxs(l,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(i,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"orange.600",children:fe.confirmed+fe.preparing+fe.ready}),e.jsx(i,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"En Proceso"})]})}),e.jsx(o,{shadow:"sm",borderRadius:"lg",children:e.jsxs(l,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(i,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"green.600",children:fe.delivered}),e.jsx(i,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"Entregados"})]})}),e.jsx(o,{shadow:"sm",borderRadius:"lg",children:e.jsxs(l,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(i,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"red.600",children:fe.cancelled}),e.jsx(i,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"Cancelados"})]})})]}),e.jsx(c,{bg:"white",borderRadius:"lg",shadow:"sm",overflow:"hidden",children:e.jsxs(Ae,{index:"orders"===W?0:1,onChange:e=>L(0===e?"orders":"vouchers"),children:[e.jsxs(Pe,{bg:"gray.50",p:1,children:[e.jsx(Te,{fontSize:{base:"xs",md:"sm"},px:{base:2,md:4},py:{base:2,md:3},_selected:{bg:"white",shadow:"sm"},flex:1,minW:0,children:e.jsxs(s,{spacing:1,children:[e.jsx(Xs,{size:12}),e.jsxs(i,{fontSize:{base:"2xs",md:"xs"},noOfLines:1,children:["Pedidos (",y.length,")"]})]})}),e.jsx(Te,{fontSize:{base:"xs",md:"sm"},px:{base:2,md:4},py:{base:2,md:3},_selected:{bg:"white",shadow:"sm"},flex:1,minW:0,children:e.jsxs(s,{spacing:1,children:[e.jsx(fi,{size:12}),e.jsxs(i,{fontSize:{base:"2xs",md:"xs"},noOfLines:1,children:["Vales (",T.length,")"]})]})})]}),e.jsxs(Ee,{children:[e.jsxs(_e,{px:{base:2,md:4},py:{base:3,md:4},children:[e.jsx(o,{shadow:"sm",mb:4,children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(s,{spacing:{base:3,md:4},align:"stretch",children:[e.jsxs(U,{children:[e.jsx(Y,{fontSize:{base:"sm",md:"md"},children:"Filtrar por Estado"}),e.jsxs(re,{value:R,onChange:e=>O(e.target.value),size:{base:"sm",md:"md"},children:[e.jsx("option",{value:"all",children:"Todos los pedidos"}),e.jsx("option",{value:"asignado",children:"Asignados"}),e.jsx("option",{value:"en_camino",children:"En Camino"}),e.jsx("option",{value:"entregado",children:"Entregados"})]})]}),e.jsxs(i,{fontSize:{base:"xs",md:"sm"},color:"gray.600",textAlign:"center",children:["Mostrando ",be.length," de ",y.length," pedidos"]})]})})}),be.length>0?e.jsx(s,{spacing:{base:3,md:4},align:"stretch",children:be.map(r=>{var n,a,c,u;return e.jsx(o,{variant:"outline",shadow:"sm",borderRadius:"lg",children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(s,{spacing:{base:2,md:3},align:"stretch",children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsxs(s,{align:"start",spacing:.5,flex:1,minW:0,children:[e.jsx(i,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},noOfLines:1,children:r.orderNumber||`#${r.id}`}),e.jsx(i,{fontSize:{base:"2xs",md:"xs"},color:"gray.500",noOfLines:1,children:"regular"===r.type?"Cliente Frecuente":"Cliente Visitante"})]}),e.jsx(h,{colorScheme:me(r.status),fontSize:{base:"2xs",md:"xs"},px:{base:1,md:2},py:.5,children:ge(r.status)})]}),e.jsxs(s,{spacing:{base:1.5,md:2},align:"stretch",children:[e.jsxs(t,{spacing:2,w:"full",children:[e.jsx(ki,{size:12,color:"#718096"}),e.jsx(i,{fontSize:{base:"xs",md:"sm"},fontWeight:"medium",noOfLines:1,flex:1,children:r.clientName||(null==(n=r.client)?void 0:n.name)||"Sin nombre"})]}),e.jsxs(t,{spacing:2,w:"full",children:[e.jsx(bi,{size:12,color:"#718096"}),e.jsx(i,{fontSize:{base:"xs",md:"sm"},noOfLines:1,flex:1,children:r.clientPhone||(null==(a=r.client)?void 0:a.phone)||"Sin teléfono"}),e.jsx(j,{label:"Enviar WhatsApp",children:e.jsx(D,{size:"sm",icon:e.jsx(Gs,{}),colorScheme:"green",variant:"ghost",onClick:()=>{var e;return((e,s)=>{const i=encodeURIComponent(s);window.open(`https://wa.me/51${e}?text=${i}`,"_blank")})(r.clientPhone||(null==(e=r.client)?void 0:e.phone),`Hola! Soy el repartidor de AquaYara. Estoy en camino con tu pedido ${r.orderNumber||`#${r.id}`}. ¿Te parece bien?`)}})})]}),e.jsxs(t,{spacing:2,w:"full",children:[e.jsx(ji,{size:12,color:"#718096"}),e.jsx(i,{fontSize:{base:"xs",md:"sm"},noOfLines:2,flex:1,children:r.clientAddress||(null==(c=r.client)?void 0:c.address)||"Sin dirección"}),e.jsx(j,{label:"Abrir en Google Maps",children:e.jsx(D,{size:"sm",icon:e.jsx(si,{}),colorScheme:"blue",variant:"ghost",onClick:()=>{var e;return(e=>{const s=encodeURIComponent(e);window.open(`https://www.google.com/maps/search/?api=1&query=${s}`,"_blank")})(r.clientAddress||(null==(e=r.client)?void 0:e.address))}})})]}),e.jsxs(t,{spacing:2,w:"full",children:[e.jsx(ji,{size:12,color:"#718096"}),e.jsxs(i,{fontSize:{base:"xs",md:"sm"},noOfLines:1,flex:1,children:["Distrito: ",r.clientDistrict||(null==(u=r.client)?void 0:u.district)||r.deliveryDistrict||"Sin distrito"]})]})]}),e.jsxs(s,{spacing:2,align:"stretch",w:"full",children:[!1,e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsxs(t,{spacing:2,flex:1,minW:0,children:[e.jsx(d,{as:je(r.paymentType,r.paymentMethod),size:14}),e.jsx(i,{fontSize:{base:"xs",md:"sm"},noOfLines:1,children:"vale"===r.paymentMethod?"A Crédito (Vale)":"suscripcion"===r.paymentMethod?"Suscripción":"contraentrega"===r.paymentMethod?"plin"===r.paymentType?"Contraentrega - PLIN":"yape"===r.paymentType?"Contraentrega - Yape":"cash"===r.paymentType?"Contraentrega - Efectivo":"Contraentrega":"plin"===r.paymentType?"PLIN":"yape"===r.paymentType?"Yape":(r.paymentType,"Efectivo")})]}),e.jsx(i,{fontWeight:"bold",fontSize:{base:"xs",md:"sm"},color:"vale"===r.paymentMethod?"orange.600":"green.600",children:"vale"===r.paymentMethod?"Sin cobro":`S/ ${parseFloat(r.total||r.totalAmount||0).toFixed(2)}`})]}),e.jsx(h,{colorScheme:"vale"===r.paymentMethod?"orange":"suscripcion"===r.paymentMethod?"purple":"plin"===r.paymentType||"yape"===r.paymentType?"blue":"green",fontSize:{base:"2xs",md:"xs"},px:2,py:1,borderRadius:"md",children:"vale"===r.paymentMethod?"💳 NO COBRAR - A Crédito":"suscripcion"===r.paymentMethod?"📅 NO COBRAR - Suscripción":"plin"===r.paymentType||"yape"===r.paymentType?"📱 NO COBRAR - Pago Digital":"💰 COBRAR - Efectivo"})]}),r.products&&r.products.length>0&&e.jsxs(s,{spacing:{base:1,md:1.5},align:"stretch",children:[e.jsx(i,{fontSize:{base:"2xs",md:"xs"},fontWeight:"bold",color:"gray.600",children:"Productos:"}),Array.isArray(r.products)&&r.products.map((s,r)=>e.jsxs(t,{justify:"space-between",fontSize:{base:"2xs",md:"xs"},w:"full",children:[e.jsx(i,{noOfLines:1,flex:1,minW:0,children:s.name||s.productName}),e.jsxs(i,{fontWeight:"bold",color:"blue.600",flexShrink:0,px:1,children:["x",s.quantity]}),e.jsxs(i,{color:"green.600",minW:"fit-content",textAlign:"right",flexShrink:0,children:["S/ ",parseFloat(s.unitPrice||s.price||0).toFixed(2)]})]},r))]}),"vale"===r.paymentMethod&&e.jsxs(V,{status:"warning",size:"sm",borderRadius:"md",children:[e.jsx(H,{}),e.jsx(i,{fontSize:{base:"2xs",md:"xs"},fontWeight:"bold",noOfLines:1,children:"⚠️ PEDIDO A CRÉDITO - NO COBRAR NADA"})]}),r.notes&&e.jsxs(V,{status:"info",size:"sm",borderRadius:"md",children:[e.jsx(H,{}),e.jsx(i,{fontSize:{base:"2xs",md:"xs"},noOfLines:2,children:r.notes})]}),e.jsxs(s,{spacing:{base:2,md:3},align:"stretch",children:[e.jsx(t,{spacing:2,justify:"center",children:e.jsx(j,{label:"Ver detalles",children:e.jsx(D,{size:{base:"sm",md:"md"},icon:e.jsx(li,{}),onClick:()=>(e=>{M(e),se()})(r),"aria-label":"Ver detalles",colorScheme:"blue",variant:"outline"})})}),"confirmed"===r.status&&e.jsx(p,{size:{base:"sm",md:"md"},colorScheme:"purple",leftIcon:e.jsx(yi,{}),onClick:()=>ye(r,"preparing"),w:"full",fontSize:{base:"xs",md:"sm"},children:"Iniciar Preparación"}),"preparing"===r.status&&e.jsx(p,{size:{base:"sm",md:"md"},colorScheme:"blue",leftIcon:e.jsx(Di,{}),onClick:()=>ye(r,"ready"),w:"full",fontSize:{base:"xs",md:"sm"},children:"Listo para Entrega"}),"ready"===r.status&&e.jsx(p,{size:{base:"sm",md:"md"},colorScheme:"green",leftIcon:e.jsx(Qs,{}),onClick:()=>ye(r,"delivered"),w:"full",fontSize:{base:"xs",md:"sm"},children:"Marcar Entregado"})]})]})})},`${r.type}-${r.id}`)})}):e.jsx(q,{h:"200px",bg:"white",borderRadius:"lg",shadow:"sm",children:e.jsxs(s,{spacing:4,children:[e.jsx(d,{as:Xs,boxSize:12,color:"gray.400"}),e.jsxs(i,{color:"gray.500",fontSize:{base:"sm",md:"lg"},textAlign:"center",children:["No hay pedidos ","all"===R?"":`con estado ${ge(R).toLowerCase()}`]}),e.jsx(p,{variant:"outline",size:{base:"sm",md:"md"},onClick:()=>O("all"),children:"Ver todos los pedidos"})]})})]}),e.jsx(_e,{px:{base:2,md:4},py:{base:3,md:4},children:e.jsxs(s,{spacing:{base:4,md:6},align:"stretch",children:[e.jsx(c,{bg:"white",p:{base:3,md:4},borderRadius:"lg",shadow:"sm",children:e.jsxs(s,{spacing:2,align:"start",children:[e.jsx(u,{size:{base:"sm",md:"md"},color:"gray.800",children:"Mis Vales"}),e.jsx(i,{color:"gray.600",fontSize:{base:"xs",md:"sm"},children:"Gestiona los vales que has creado"})]})}),e.jsx(c,{children:e.jsx(p,{colorScheme:"blue",leftIcon:e.jsx(vi,{}),onClick:oe,size:{base:"sm",md:"md"},w:"full",children:"Crear Nuevo Vale"})}),T.length>0?e.jsx(s,{spacing:{base:3,md:4},align:"stretch",children:T.map(r=>{var n,a;return e.jsx(o,{variant:"outline",shadow:"sm",borderRadius:"lg",children:e.jsx(l,{p:{base:3,md:4},children:e.jsxs(s,{spacing:{base:2,md:3},align:"stretch",children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsxs(i,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:["Vale #",r.id]}),e.jsx(h,{colorScheme:"pending"===r.status?"orange":"delivered"===r.status?"blue":"green",fontSize:{base:"2xs",md:"xs"},children:"pending"===r.status?"Pendiente":"delivered"===r.status?"Entregado":"Pagado"})]}),e.jsxs(s,{spacing:{base:1,md:2},align:"stretch",children:[e.jsxs(t,{spacing:2,children:[e.jsx(ki,{size:12,color:"#718096"}),e.jsx(i,{fontSize:{base:"xs",md:"sm"},noOfLines:1,children:(null==(n=r.Client)?void 0:n.name)||"Cliente no encontrado"})]}),e.jsxs(t,{spacing:2,children:[e.jsx(Xs,{size:12,color:"#718096"}),e.jsx(i,{fontSize:{base:"xs",md:"sm"},noOfLines:1,children:(null==(a=r.product)?void 0:a.name)||"Producto no especificado"})]}),e.jsxs(t,{spacing:2,children:[e.jsx(i,{fontSize:{base:"xs",md:"sm"},children:"Cantidad:"}),e.jsx(i,{fontWeight:"bold",fontSize:{base:"xs",md:"sm"},children:r.quantity})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontSize:{base:"xs",md:"sm"},children:"Total:"}),e.jsxs(i,{fontWeight:"bold",color:"green.600",fontSize:{base:"xs",md:"sm"},children:["S/ ",parseFloat(r.totalAmount||0).toFixed(2)]})]})]})]})})},r.id)})}):e.jsx(q,{h:"200px",children:e.jsxs(s,{spacing:4,children:[e.jsx(d,{as:fi,boxSize:12,color:"gray.400"}),e.jsx(i,{color:"gray.500",fontSize:"lg",children:"No has creado ningún vale aún"}),e.jsx(p,{colorScheme:"blue",leftIcon:e.jsx(vi,{}),onClick:oe,children:"Crear tu primer vale"})]})})]})})]})]})}),e.jsxs(v,{isOpen:J,onClose:K,size:"md",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Actualizar Estado del Pedido"}),e.jsx(z,{}),e.jsx(A,{children:e.jsx(s,{spacing:4,children:F&&e.jsxs(e.Fragment,{children:[e.jsxs(i,{children:["¿Confirmar cambio de estado del pedido #",F.id,"?"]}),e.jsxs(i,{fontWeight:"bold",children:["preparing"===F.newStatus&&"Iniciar Preparación","ready"===F.newStatus&&"Marcar como Listo","delivered"===F.newStatus&&"Marcar como Entregado"]})]})})}),e.jsxs(ae,{children:[e.jsx(p,{variant:"ghost",mr:3,onClick:K,children:"Cancelar"}),e.jsx(p,{colorScheme:"blue",onClick:ve,children:"Confirmar"})]})]})]}),e.jsxs(v,{isOpen:Z,onClose:ie,size:"lg",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Detalles del Pedido"}),e.jsx(z,{}),e.jsx(A,{children:F&&e.jsxs(s,{spacing:4,align:"stretch",children:[e.jsxs(i,{fontWeight:"bold",fontSize:"lg",children:["Pedido #",F.id]}),e.jsx(x,{}),e.jsxs(s,{spacing:3,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Cliente:"}),e.jsx(i,{children:F.clientName||(null==(Se=F.client)?void 0:Se.name)||"Sin nombre"})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Teléfono:"}),e.jsx(i,{children:F.clientPhone||(null==(we=F.client)?void 0:we.phone)||"Sin teléfono"})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Dirección:"}),e.jsx(i,{children:F.clientAddress||(null==(Ce=F.client)?void 0:Ce.address)||"Sin dirección"})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Distrito:"}),e.jsx(i,{children:F.clientDistrict||(null==(ze=F.client)?void 0:ze.district)||F.deliveryDistrict||"Sin distrito"})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Estado:"}),e.jsx(h,{colorScheme:me(F.status),children:ge(F.status)})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Método de pago:"}),e.jsxs(t,{children:[e.jsx(d,{as:je(F.paymentType,F.paymentMethod),size:16}),e.jsx(i,{children:"vale"===F.paymentMethod?"A Crédito (Vale)":"suscripcion"===F.paymentMethod?"Suscripción":"contraentrega"===F.paymentMethod?"plin"===F.paymentType?"Contraentrega - PLIN":"yape"===F.paymentType?"Contraentrega - Yape":"cash"===F.paymentType?"Contraentrega - Efectivo":"Contraentrega":"plin"===F.paymentType?"PLIN":"yape"===F.paymentType?"Yape":(F.paymentType,"Efectivo")})]})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Total:"}),e.jsx(i,{fontWeight:"bold",color:"vale"===F.paymentMethod?"orange.600":"green.600",children:"vale"===F.paymentMethod?"Sin cobro":`S/ ${parseFloat(F.total||F.totalAmount||0).toFixed(2)}`})]}),e.jsxs(V,{status:"vale"===F.paymentMethod?"warning":"suscripcion"===F.paymentMethod||"plin"===F.paymentType||"yape"===F.paymentType?"info":"success",borderRadius:"md",children:[e.jsx(H,{}),e.jsx(i,{fontSize:"sm",fontWeight:"bold",children:"vale"===F.paymentMethod?"💳 NO COBRAR - Este pedido es a crédito":"suscripcion"===F.paymentMethod?"📅 NO COBRAR - Este pedido es por suscripción":"plin"===F.paymentType?"📱 NO COBRAR - El cliente pagará por PLIN":"yape"===F.paymentType?"📱 NO COBRAR - El cliente pagará por Yape":"💰 COBRAR - El cliente pagará en efectivo"})]})]}),F.products&&F.products.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsxs(s,{spacing:2,align:"stretch",children:[e.jsx(i,{fontWeight:"bold",children:"Productos:"}),Array.isArray(F.products)&&F.products.map((s,r)=>{var n;return e.jsxs(t,{justify:"space-between",fontSize:"sm",children:[e.jsx(i,{flex:1,children:(null==(n=s.product)?void 0:n.name)||s.name||"Producto desconocido"}),e.jsxs(i,{fontWeight:"bold",children:[s.quantity," x S/ ",parseFloat(s.price||s.unitPrice||0).toFixed(2)]})]},r)})]})]})]})}),e.jsx(ae,{children:e.jsx(p,{onClick:ie,children:"Cerrar"})})]})]}),e.jsxs(v,{isOpen:te,onClose:le,size:"md",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Crear Nuevo Vale"}),e.jsx(z,{}),e.jsx(A,{children:e.jsxs(s,{spacing:4,children:[e.jsxs(U,{children:[e.jsx(Y,{children:"Cliente"}),e.jsx(re,{placeholder:"Seleccionar cliente",children:_.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Producto"}),e.jsx(re,{placeholder:"Seleccionar producto",children:k.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Cantidad"}),e.jsx(G,{type:"number",min:"1",defaultValue:"1"})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Notas"}),e.jsx(ne,{placeholder:"Notas adicionales..."})]})]})}),e.jsxs(ae,{children:[e.jsx(p,{variant:"ghost",mr:3,onClick:le,children:"Cancelar"}),e.jsx(p,{colorScheme:"blue",onClick:le,children:"Crear Vale"})]})]})]})]})});var Se,we,Ce,ze},lt=()=>{const[r,n]=He.useState({username:"",password:""}),[a,d]=He.useState(!1),[h,m]=He.useState(!1),{login:j,error:f}=Hs(),b=Ye(),y=g(),v=e=>{n({...r,[e.target.name]:e.target.value})};return e.jsx(c,{minH:"100vh",bg:"gray.50",display:"flex",alignItems:"center",justifyContent:"center",p:4,children:e.jsxs(o,{maxW:"md",w:"full",boxShadow:"xl",children:[e.jsx(oe,{textAlign:"center",pb:2,children:e.jsxs(s,{spacing:4,children:[e.jsx(c,{color:"purple.600",fontSize:"4xl",children:e.jsx(Di,{})}),e.jsx(u,{size:"lg",color:"gray.700",children:"Panel de Repartidor"}),e.jsx(i,{color:"gray.600",fontSize:"sm",children:"Inicia sesión para gestionar tus pedidos asignados"})]})}),e.jsx(l,{pt:0,children:e.jsx("form",{onSubmit:async e=>{e.preventDefault(),m(!0);try{if((await j(r.username,r.password)).success){const e=Hs.getState().user;e&&"repartidor"===e.role?(y({title:"Bienvenido",description:`Hola ${e.username}, bienvenido al panel de repartidor`,status:"success",duration:3e3,isClosable:!0}),b("/delivery-dashboard")):(y({title:"Acceso Denegado",description:"Esta cuenta no es de un repartidor",status:"error",duration:3e3,isClosable:!0}),Hs.getState().logout())}}catch(s){}finally{m(!1)}},children:e.jsxs(s,{spacing:4,children:[f&&e.jsxs(V,{status:"error",borderRadius:"md",children:[e.jsx(H,{}),f]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Usuario"}),e.jsx(G,{name:"username",value:r.username,onChange:v,placeholder:"Ingresa tu usuario",size:"lg",autoComplete:"username"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Contraseña"}),e.jsxs(se,{size:"lg",children:[e.jsx(G,{name:"password",type:a?"text":"password",value:r.password,onChange:v,placeholder:"Ingresa tu contraseña"}),e.jsx(De,{children:e.jsx(D,{"aria-label":a?"Ocultar contraseña":"Mostrar contraseña",icon:a?e.jsx(oi,{}):e.jsx(li,{}),variant:"ghost",onClick:()=>d(!a)})})]})]}),e.jsx(p,{type:"submit",colorScheme:"purple",size:"lg",w:"full",isLoading:h,loadingText:"Iniciando sesión...",leftIcon:e.jsx(Di,{}),children:"Iniciar Sesión"}),e.jsx(x,{}),e.jsxs(s,{spacing:2,textAlign:"center",children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"¿No eres repartidor?"}),e.jsxs(t,{spacing:4,children:[e.jsx(E,{color:"blue.500",onClick:()=>b("/"),_hover:{textDecoration:"underline"},children:"Panel de Administración"}),e.jsx(i,{color:"gray.400",children:"|"}),e.jsx(E,{color:"green.500",onClick:()=>b("/client-login"),_hover:{textDecoration:"underline"},children:"Área de Clientes"})]})]})]})})})]})})},ct=()=>{const[r,a]=He.useState([]),[m,j]=He.useState(!0),f=g(),b=n("white","gray.800"),y=n("gray.200","gray.600"),v=n("gray.700","gray.200"),S=n("blue.50","blue.900"),w=n("green.500","green.300"),C=n("blue.600","blue.300");He.useEffect(()=>{z()},[]);const z=async()=>{try{j(!0);const e=await Vs.get("/api/subscription-plans");a(e.data.data||[])}catch(e){f({title:"Error",description:"No se pudieron cargar los planes de suscripción",status:"error",duration:3e3,isClosable:!0})}finally{j(!1)}},A=e=>{const s=["blue","green","purple","orange","pink","teal","red"];return s[e%s.length]};return m?e.jsx(q,{py:10,children:e.jsxs(s,{spacing:4,children:[e.jsx(ee,{size:"xl",color:"blue.500"}),e.jsx(i,{color:"gray.500",children:"Cargando planes de suscripción..."})]})}):e.jsxs(c,{children:[e.jsx(o,{bg:S,borderColor:y,mb:6,children:e.jsx(l,{children:e.jsxs(s,{spacing:4,textAlign:"center",children:[e.jsx(u,{size:"lg",color:v,children:"🚰 Cartilla de Suscripciones AquaYara"}),e.jsx(i,{color:v,fontSize:"lg",children:"Por el pago mensual de cierta cantidad de bidones, recibe bonificaciones por ser un buen cliente"}),e.jsxs(t,{spacing:4,wrap:"wrap",justify:"center",children:[e.jsxs(t,{children:[e.jsx(d,{as:Qs,color:"green.500"}),e.jsx(i,{fontSize:"sm",children:"Válido solo para clientes que pagan adelantado una mensualidad"})]}),e.jsxs(t,{children:[e.jsx(d,{as:Di,color:"blue.500"}),e.jsx(i,{fontSize:"sm",children:"Control con sistema y cuaderno con firma"})]}),e.jsxs(t,{children:[e.jsx(d,{as:pi,color:"purple.500"}),e.jsx(i,{fontSize:"sm",children:"Contrato y factura mensual"})]})]})]})})}),e.jsx(X,{columns:{base:1,md:2,lg:3},spacing:6,children:r.map(r=>{return e.jsxs(o,{bg:b,borderColor:y,borderWidth:"2px",_hover:{transform:"translateY(-4px)",shadow:"lg",borderColor:A(r.sortOrder)+".300"},transition:"all 0.3s ease",position:"relative",children:[r.bonusBottles>0&&e.jsx(c,{position:"absolute",top:-2,right:4,children:e.jsxs(h,{colorScheme:"green",fontSize:"xs",px:3,py:1,borderRadius:"full",transform:"rotate(15deg)",children:[e.jsx(d,{as:ui,mr:1}),parseFloat(r.bonusPercentage).toFixed(1),"% BONUS"]})}),e.jsx(oe,{pb:2,children:e.jsxs(s,{spacing:2,align:"stretch",children:[e.jsx(u,{size:"md",color:v,textAlign:"center",children:r.name}),e.jsx(i,{fontSize:"sm",color:"gray.500",textAlign:"center",children:r.description})]})}),e.jsx(l,{pt:0,children:e.jsxs(s,{spacing:4,align:"stretch",children:[e.jsxs(c,{textAlign:"center",children:[e.jsxs(i,{fontSize:"2xl",fontWeight:"bold",color:C,children:[r.totalBottles," Bidones"]}),r.bonusBottles>0&&e.jsxs(i,{fontSize:"sm",color:w,fontWeight:"semibold",children:["+ ",r.bonusBottles," bonus"]})]}),e.jsx(x,{}),e.jsxs(s,{spacing:2,children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Pago mensual:"}),e.jsxs(i,{fontSize:"lg",fontWeight:"bold",color:C,children:["S/ ",parseFloat(r.monthlyPrice).toFixed(2)]})]}),e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Precio por bidón:"}),e.jsxs(i,{fontSize:"md",fontWeight:"semibold",color:v,children:["S/ ",parseFloat(r.pricePerBottle).toFixed(2)]})]})]}),e.jsx(x,{}),e.jsxs(c,{textAlign:"center",children:[e.jsx(i,{fontSize:"sm",color:"gray.600",mb:1,children:"Bonificación:"}),e.jsx(i,{fontSize:"md",fontWeight:"semibold",color:w,children:(n=r.bonusBottles,0===n?"Sin bonificación":1===n?"1 recarga mensual gratis":`${n} recargas mensual gratis`)})]}),e.jsx(c,{textAlign:"center",children:e.jsxs(t,{justify:"center",spacing:2,children:[e.jsx(d,{as:Di,color:"blue.500"}),e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["Máx. ",r.maxDailyDelivery," entregas diarias"]})]})}),e.jsx(p,{colorScheme:A(r.sortOrder),size:"md",w:"full",mt:2,_hover:{transform:"scale(1.02)",shadow:"md"},transition:"all 0.2s ease",children:"Seleccionar Plan"})]})})]},r.id);var n})}),e.jsx(o,{bg:b,borderColor:y,mt:6,children:e.jsx(l,{children:e.jsxs(s,{spacing:4,textAlign:"center",children:[e.jsx(u,{size:"md",color:v,children:"Información Importante"}),e.jsxs(X,{columns:{base:1,md:2},spacing:4,w:"full",children:[e.jsxs(c,{children:[e.jsx(i,{fontWeight:"semibold",color:v,mb:2,children:"Condiciones del Servicio:"}),e.jsxs(s,{spacing:1,align:"start",children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"• Servicio para clientes domésticos y empresariales"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"• Válido solo para clientes que pagan adelantado una mensualidad"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"• Control con sistema y cuaderno con firma, fecha, hora y nombre de recepción"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"• Contrato y factura mensual"})]})]}),e.jsxs(c,{children:[e.jsx(i,{fontWeight:"semibold",color:v,mb:2,children:"Beneficios:"}),e.jsxs(s,{spacing:1,align:"start",children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"• Descuentos progresivos según cantidad"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"• Bonificaciones en bidones adicionales"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"• Entregas programadas y controladas"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:"• Atención prioritaria al cliente"})]})]})]})]})})})]})},dt=()=>{var r,a;const[x,j]=He.useState([]),[b,y]=He.useState([]),[P,T]=He.useState([]),[E,D]=He.useState(!0),[I,k]=He.useState(""),[N,W]=He.useState("all"),[L,F]=He.useState(null),[M,V]=He.useState("management"),{isOpen:H,onOpen:te,onClose:le}=f(),{isOpen:ce,onOpen:de,onClose:ue}=f(),{isOpen:he,onOpen:xe,onClose:pe}=f(),[me,ge]=He.useState({clientId:"",planId:"",startDate:"",notes:""}),[ze,Ae]=He.useState({id:"",status:"",remainingBottles:"",notes:""}),Pe=g();_({base:!0,md:!1});const Te=n("white","gray.800"),Ee=n("gray.200","gray.600");He.useEffect(()=>{_e()},[]);const _e=async()=>{D(!0);try{const[e,s]=await Promise.all([Vs.get("/api/clients"),Vs.get("/api/subscriptions")]);j(s.data.data||[]),y(e.data.data||[]),T([{id:1,name:"Plan Básico",bottles:20,bonus:2,price:100,description:"20 bidones + 2 extra"},{id:2,name:"Plan Intermedio",bottles:30,bonus:5,price:150,description:"30 bidones + 5 extra"},{id:3,name:"Plan Premium",bottles:50,bonus:10,price:250,description:"50 bidones + 10 extra"}])}catch(e){Pe({title:"Error",description:"No se pudieron cargar los datos",status:"error",duration:3e3,isClosable:!0})}finally{D(!1)}},De=(Array.isArray(x)?x:[]).filter(e=>{var s,i,t,r;const n=(null==(i=null==(s=e.client)?void 0:s.name)?void 0:i.toLowerCase().includes(I.toLowerCase()))||(null==(r=null==(t=e.client)?void 0:t.email)?void 0:r.toLowerCase().includes(I.toLowerCase())),a="all"===N||e.status===N;return n&&a}),Re=e=>{switch(e){case"active":return"green";case"paused":return"yellow";case"cancelled":return"red";default:return"gray"}},Oe=e=>{switch(e){case"active":return"Activa";case"paused":return"Pausada";case"cancelled":return"Cancelada";case"expired":return"Expirada";default:return"Desconocido"}},Fe=e=>new Date(e).toLocaleDateString("es-ES"),Me=x.filter(e=>"active"===e.status).length,Be=x.filter(e=>"active"===e.status).reduce((e,s)=>{var i;return e+((null==(i=s.plan)?void 0:i.price)||0)},0);return E?e.jsx(q,{h:"400px",children:e.jsx(ee,{size:"xl"})}):e.jsx(c,{p:6,children:e.jsxs(s,{spacing:6,align:"stretch",children:[e.jsxs(m,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(s,{align:"start",spacing:1,children:[e.jsxs(u,{size:"lg",children:[e.jsx(d,{as:Js,mr:2}),"Gestión de Suscripciones"]}),e.jsx(i,{color:"gray.600",children:"Administra las suscripciones de clientes frecuentes"})]}),e.jsxs(t,{spacing:4,children:[e.jsx(p,{leftIcon:e.jsx(mi,{}),colorScheme:"management"===M?"blue":"gray",variant:"management"===M?"solid":"outline",onClick:()=>V("management"),children:"Gestión"}),e.jsx(p,{leftIcon:e.jsx(ui,{}),colorScheme:"plans"===M?"blue":"gray",variant:"plans"===M?"solid":"outline",onClick:()=>V("plans"),children:"Cartilla de Planes"}),"management"===M&&e.jsx(p,{leftIcon:e.jsx(vi,{}),colorScheme:"blue",onClick:te,size:"lg",children:"Nueva Suscripción"})]})]}),"plans"===M?e.jsx(ct,{}):e.jsxs(e.Fragment,{children:[e.jsxs(X,{columns:{base:1,md:3},spacing:4,children:[e.jsx(o,{bg:Te,borderColor:Ee,children:e.jsx(l,{children:e.jsxs(J,{children:[e.jsx(Q,{children:"Total Suscripciones"}),e.jsx(K,{children:x.length}),e.jsxs(Z,{children:[e.jsx(Ie,{type:"increase"}),Me," activas"]})]})})}),e.jsx(o,{bg:Te,borderColor:Ee,children:e.jsx(l,{children:e.jsxs(J,{children:[e.jsx(Q,{children:"Ingresos Mensuales"}),e.jsxs(K,{children:["S/ ",Be.toFixed(2)]}),e.jsx(Z,{children:"De suscripciones activas"})]})})}),e.jsx(o,{bg:Te,borderColor:Ee,children:e.jsx(l,{children:e.jsxs(J,{children:[e.jsx(Q,{children:"Planes Disponibles"}),e.jsx(K,{children:P.length}),e.jsx(Z,{children:"Planes de suscripción"})]})})})]}),e.jsx(o,{bg:Te,borderColor:Ee,children:e.jsx(l,{children:e.jsxs(t,{spacing:4,wrap:"wrap",children:[e.jsxs(se,{maxW:"300px",children:[e.jsx(ie,{pointerEvents:"none",children:e.jsx(d,{as:zi,color:"gray.300"})}),e.jsx(G,{placeholder:"Buscar por cliente...",value:I,onChange:e=>k(e.target.value)})]}),e.jsxs(re,{value:N,onChange:e=>W(e.target.value),maxW:"200px",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"active",children:"Activas"}),e.jsx("option",{value:"paused",children:"Pausadas"}),e.jsx("option",{value:"cancelled",children:"Canceladas"}),e.jsx("option",{value:"expired",children:"Expiradas"})]})]})})}),e.jsxs(o,{bg:Te,borderColor:Ee,children:[e.jsx(oe,{children:e.jsx(u,{size:"md",children:"Suscripciones"})}),e.jsx(l,{children:0===De.length?e.jsx(q,{py:10,children:e.jsx(i,{color:"gray.500",fontSize:"lg",children:"No hay suscripciones registradas"})}):e.jsx(ke,{children:e.jsxs(be,{variant:"simple",children:[e.jsx(ye,{children:e.jsxs(ve,{children:[e.jsx(Se,{children:"Cliente"}),e.jsx(Se,{children:"Plan"}),e.jsx(Se,{children:"Estado"}),e.jsx(Se,{children:"Bidones Restantes"}),e.jsx(Se,{children:"Fecha Inicio"}),e.jsx(Se,{children:"Duración"}),e.jsx(Se,{children:"Acciones"})]})}),e.jsx(we,{children:(Array.isArray(De)?De:[]).map(t=>{var r,n;return e.jsxs(ve,{children:[e.jsx(Ce,{children:e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",children:(null==(r=t.client)?void 0:r.name)||"N/A"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:(null==(n=t.client)?void 0:n.email)||"N/A"})]})}),e.jsx(Ce,{children:e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",children:t.subscriptionType||"N/A"}),e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["S/ ",t.totalAmount||0]})]})}),e.jsx(Ce,{children:e.jsx(h,{colorScheme:Re(t.status),children:Oe(t.status)})}),e.jsx(Ce,{children:e.jsx(i,{fontWeight:"bold",color:"blue.600",children:t.remainingBottles||0})}),e.jsx(Ce,{children:Fe(t.purchaseDate)}),e.jsx(Ce,{children:e.jsx(i,{color:"green.600",fontWeight:"bold",children:"Hasta agotar bidones"})}),e.jsx(Ce,{children:e.jsxs(R,{children:[e.jsx(O,{as:p,size:"sm",variant:"ghost",children:e.jsx(d,{as:ri})}),e.jsxs(B,{children:[e.jsx($,{icon:e.jsx(li,{}),onClick:()=>(e=>{F(e),xe()})(t),children:"Ver Detalles"}),e.jsx($,{icon:e.jsx(ti,{}),onClick:()=>(e=>{Ae({id:e.id,status:e.status,remainingBottles:e.remainingBottles,notes:e.notes||""}),de()})(t),children:"Editar"})]})]})})]},t.id)})})]})})})]}),e.jsxs(v,{isOpen:H,onClose:le,size:"lg",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Nueva Suscripción"}),e.jsx(z,{}),e.jsx(A,{pb:6,children:e.jsxs(s,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Cliente"}),e.jsx(re,{placeholder:"Seleccionar cliente",value:me.clientId,onChange:e=>ge({...me,clientId:e.target.value}),children:(Array.isArray(b)?b:[]).map(s=>e.jsxs("option",{value:s.id,children:[s.name," - ",s.email]},s.id))})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Plan de Suscripción"}),e.jsx(re,{placeholder:"Seleccionar plan",value:me.planId,onChange:e=>ge({...me,planId:e.target.value}),children:(Array.isArray(P)?P:[]).map(s=>e.jsxs("option",{value:s.id,children:[s.name," - S/ ",s.price," (",s.bottles+s.bonus," bidones)"]},s.id))})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Fecha de Inicio"}),e.jsx(G,{type:"date",value:me.startDate,onChange:e=>ge({...me,startDate:e.target.value})})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Notas"}),e.jsx(ne,{placeholder:"Notas adicionales...",value:me.notes,onChange:e=>ge({...me,notes:e.target.value})})]})]})}),e.jsxs(ae,{children:[e.jsx(p,{variant:"ghost",mr:3,onClick:le,children:"Cancelar"}),e.jsx(p,{colorScheme:"blue",onClick:async()=>{try{const e=b.find(e=>e.id===parseInt(me.clientId)),s=P.find(e=>e.id===parseInt(me.planId));if(!e||!s)return void Pe({title:"Error",description:"Cliente o plan no encontrado",status:"error",duration:3e3,isClosable:!0});const i={clientId:e.id,clientDni:e.documentNumber,subscriptionType:s.name,totalBottles:s.bottles+s.bonus,totalAmount:s.price,paidAmount:s.price,expiryDate:null,notes:me.notes};await Vs.post("/api/subscriptions",i),Pe({title:"Suscripción creada",description:"La suscripción se ha creado correctamente",status:"success",duration:3e3,isClosable:!0}),le(),ge({clientId:"",planId:"",startDate:"",notes:""}),_e()}catch(e){Pe({title:"Error",description:"No se pudo crear la suscripción",status:"error",duration:3e3,isClosable:!0})}},children:"Crear Suscripción"})]})]})]}),e.jsxs(v,{isOpen:ce,onClose:ue,size:"lg",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Editar Suscripción"}),e.jsx(z,{}),e.jsx(A,{pb:6,children:e.jsxs(s,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Estado"}),e.jsxs(re,{value:ze.status,onChange:e=>Ae({...ze,status:e.target.value}),children:[e.jsx("option",{value:"active",children:"Activa"}),e.jsx("option",{value:"paused",children:"Pausada"}),e.jsx("option",{value:"cancelled",children:"Cancelada"}),e.jsx("option",{value:"expired",children:"Expirada"})]})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Bidones Restantes"}),e.jsxs(je,{value:ze.remainingBottles,onChange:e=>Ae({...ze,remainingBottles:e}),min:0,children:[e.jsx(fe,{}),e.jsxs(Ne,{children:[e.jsx(We,{}),e.jsx(Le,{})]})]})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Notas"}),e.jsx(ne,{placeholder:"Notas adicionales...",value:ze.notes,onChange:e=>Ae({...ze,notes:e.target.value})})]})]})}),e.jsxs(ae,{children:[e.jsx(p,{variant:"ghost",mr:3,onClick:ue,children:"Cancelar"}),e.jsx(p,{colorScheme:"blue",onClick:async()=>{try{await Vs.put(`/api/subscriptions/${ze.id}`,ze),Pe({title:"Suscripción actualizada",description:"La suscripción se ha actualizado correctamente",status:"success",duration:3e3,isClosable:!0}),ue(),Ae({id:"",status:"",remainingBottles:"",notes:""}),_e()}catch(e){Pe({title:"Error",description:"No se pudo actualizar la suscripción",status:"error",duration:3e3,isClosable:!0})}},children:"Actualizar Suscripción"})]})]})]}),e.jsxs(v,{isOpen:he,onClose:pe,size:"lg",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Detalles de la Suscripción"}),e.jsx(z,{}),e.jsx(A,{pb:6,children:L&&e.jsxs(s,{spacing:4,align:"stretch",children:[e.jsxs(X,{columns:2,spacing:4,children:[e.jsxs(c,{children:[e.jsx(i,{fontWeight:"bold",color:"gray.600",children:"Cliente:"}),e.jsx(i,{children:(null==(r=L.client)?void 0:r.name)||"N/A"})]}),e.jsxs(c,{children:[e.jsx(i,{fontWeight:"bold",color:"gray.600",children:"Email:"}),e.jsx(i,{children:(null==(a=L.client)?void 0:a.email)||"N/A"})]}),e.jsxs(c,{children:[e.jsx(i,{fontWeight:"bold",color:"gray.600",children:"Tipo de Suscripción:"}),e.jsx(i,{children:L.subscriptionType||"N/A"})]}),e.jsxs(c,{children:[e.jsx(i,{fontWeight:"bold",color:"gray.600",children:"Total Pagado:"}),e.jsxs(i,{children:["S/ ",L.totalAmount||0]})]}),e.jsxs(c,{children:[e.jsx(i,{fontWeight:"bold",color:"gray.600",children:"Estado:"}),e.jsx(h,{colorScheme:Re(L.status),children:Oe(L.status)})]}),e.jsxs(c,{children:[e.jsx(i,{fontWeight:"bold",color:"gray.600",children:"Bidones Restantes:"}),e.jsx(i,{fontWeight:"bold",color:"blue.600",children:L.remainingBottles||0})]}),e.jsxs(c,{children:[e.jsx(i,{fontWeight:"bold",color:"gray.600",children:"Fecha de Compra:"}),e.jsx(i,{children:Fe(L.purchaseDate)})]}),e.jsxs(c,{children:[e.jsx(i,{fontWeight:"bold",color:"gray.600",children:"Duración:"}),e.jsx(i,{color:"green.600",fontWeight:"bold",children:"Hasta agotar bidones"})]})]}),L.notes&&e.jsxs(c,{children:[e.jsx(i,{fontWeight:"bold",color:"gray.600",children:"Notas:"}),e.jsx(i,{children:L.notes})]})]})})]})]})]}),e.jsx(Bi,{})]})})},ut=()=>{var r;const[n,a]=He.useState([]),[d,h]=He.useState(!1),[x,b]=He.useState(null),[y,P]=He.useState(new Date),{isOpen:T,onOpen:E,onClose:_}=f(),{isOpen:I,onOpen:k,onClose:N}=f();f();const W=g(),[L,R]=He.useState({clientId:"",amount:"",description:"",dueDate:"",status:"active"}),[O,F]=He.useState([]);He.useEffect(()=>{B(),M();const e=setInterval(()=>{B(),P(new Date)},3e4);return()=>clearInterval(e)},[]);const M=async()=>{try{const e=await Vs.get("/api/clients");e.data.success&&F(e.data.data||[])}catch(e){}},B=async()=>{try{h(!0);const e=await Vs.get("/api/vouchers/by-order");e.data.success&&a(e.data.data||[])}catch(e){W({title:"Error",description:"No se pudieron cargar los vales",status:"error",duration:3e3,isClosable:!0})}finally{h(!1)}},$=e=>{switch(e){case"pending":return"yellow";case"delivered":return"green";case"paid":return"blue";case"cancelled":return"red";default:return"gray"}},q=e=>{switch(e){case"pending":return"Pendiente";case"delivered":return"Entregado";case"paid":return"Pagado";case"cancelled":return"Cancelado";default:return e}},ee=e=>{switch(e){case"pending":return Js;case"delivered":default:return Qs;case"paid":return fi;case"cancelled":return Ti}},se={total:n.length,pending:n.filter(e=>"pending"===e.status).length,delivered:n.filter(e=>"delivered"===e.status).length,paid:n.filter(e=>"paid"===e.status).length,totalAmount:n.reduce((e,s)=>e+parseFloat(s.totalAmount||0),0),pendingAmount:n.filter(e=>"pending"===e.status).reduce((e,s)=>e+parseFloat(s.totalAmount||0),0),deliveredAmount:n.filter(e=>"delivered"===e.status).reduce((e,s)=>e+parseFloat(s.totalAmount||0),0)};return e.jsxs(c,{p:6,children:[e.jsxs(s,{spacing:6,align:"stretch",children:[e.jsxs(m,{justify:"space-between",align:"center",children:[e.jsxs(c,{children:[e.jsx(u,{size:"lg",mb:2,children:"Gestión de Vales"}),e.jsx(i,{color:"gray.600",children:"Administra los vales de crédito de los clientes"}),e.jsxs(i,{color:"gray.400",fontSize:"xs",children:["Última actualización: ",y.toLocaleTimeString()]})]}),e.jsx(p,{size:"sm",colorScheme:"blue",variant:"outline",onClick:()=>{B(),P(new Date)},isLoading:d,children:"Actualizar"})]}),e.jsxs(X,{columns:{base:1,sm:2,lg:4},spacing:4,children:[e.jsx(o,{children:e.jsx(l,{children:e.jsxs(J,{children:[e.jsx(Q,{children:"Total Vales"}),e.jsx(K,{color:"blue.500",children:se.total}),e.jsx(Z,{children:"Vales creados"})]})})}),e.jsx(o,{children:e.jsx(l,{children:e.jsxs(J,{children:[e.jsx(Q,{children:"Pendientes"}),e.jsx(K,{color:"yellow.500",children:se.pending}),e.jsx(Z,{children:"Por entregar"})]})})}),e.jsx(o,{children:e.jsx(l,{children:e.jsxs(J,{children:[e.jsx(Q,{children:"Entregados"}),e.jsx(K,{color:"green.500",children:se.delivered}),e.jsx(Z,{children:"Completados"})]})})}),e.jsx(o,{children:e.jsx(l,{children:e.jsxs(J,{children:[e.jsx(Q,{children:"Pagados"}),e.jsx(K,{color:"blue.500",children:se.paid}),e.jsx(Z,{children:"Cobrados"})]})})}),e.jsx(o,{children:e.jsx(l,{children:e.jsxs(J,{children:[e.jsx(Q,{children:"Monto Total"}),e.jsxs(K,{color:"purple.500",children:["S/ ",se.totalAmount.toFixed(2)]}),e.jsx(Z,{children:"En vales"})]})})}),e.jsx(o,{children:e.jsx(l,{children:e.jsxs(J,{children:[e.jsx(Q,{children:"Pendiente"}),e.jsxs(K,{color:"yellow.500",children:["S/ ",se.pendingAmount.toFixed(2)]}),e.jsx(Z,{children:"Por entregar"})]})})})]}),e.jsxs(o,{children:[e.jsx(oe,{children:e.jsxs(m,{justify:"space-between",align:"center",children:[e.jsx(u,{size:"md",children:"Lista de Vales"}),e.jsx(p,{leftIcon:e.jsx(vi,{}),colorScheme:"green",onClick:E,children:"Nuevo Vale"})]})}),e.jsx(l,{children:0===n.length?e.jsxs(V,{status:"info",children:[e.jsx(H,{}),e.jsxs(s,{align:"start",spacing:2,children:[e.jsx(i,{fontWeight:"bold",children:"No hay vales registrados"}),e.jsxs(i,{fontSize:"sm",children:['Los vales se crean automáticamente cuando los clientes eligen la modalidad "vale" en sus pedidos.',e.jsx("br",{}),'Puedes crear vales manualmente usando el botón "Crear Vale" arriba.']})]})]}):e.jsxs(be,{variant:"simple",children:[e.jsx(ye,{children:e.jsxs(ve,{children:[e.jsx(Se,{children:"Cliente"}),e.jsx(Se,{children:"Productos del Pedido"}),e.jsx(Se,{children:"Total del Pedido"}),e.jsx(Se,{children:"Estado"}),e.jsx(Se,{children:"Fecha Creación"}),e.jsx(Se,{children:"Fecha Vencimiento"}),e.jsx(Se,{children:"Acciones"})]})}),e.jsx(we,{children:n.map(r=>{var n,a;return e.jsxs(ve,{children:[e.jsx(Ce,{children:e.jsxs(s,{spacing:1,align:"start",children:[e.jsxs(t,{children:[e.jsx(ki,{size:14,color:"#718096"}),e.jsx(i,{fontWeight:"medium",children:(null==(n=r.client)?void 0:n.name)||"Cliente no encontrado"})]}),e.jsxs(i,{fontSize:"xs",color:"gray.500",children:["DNI: ",(null==(a=r.client)?void 0:a.documentNumber)||"N/A"]})]})}),e.jsx(Ce,{children:e.jsxs(s,{spacing:1,align:"start",children:[(r.products||[]).map((s,t)=>e.jsxs(i,{fontSize:"sm",children:[s.name," x",s.quantity]},t)),(!r.products||0===r.products.length)&&e.jsx(i,{fontSize:"sm",color:"gray.500",children:"Sin productos"})]})}),e.jsxs(Ce,{children:[e.jsxs(i,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(r.totalAmount||0).toFixed(2)]}),e.jsxs(i,{fontSize:"xs",color:"gray.500",children:["Pedido #",r.guestOrderId||"Individual"]})]}),e.jsx(Ce,{children:e.jsxs(Re,{colorScheme:$(r.status),children:[e.jsx(Oe,{as:ee(r.status)}),e.jsx(Fe,{children:q(r.status)})]})}),e.jsxs(Ce,{children:[e.jsx(i,{fontSize:"sm",children:r.createdAt?new Date(r.createdAt).toLocaleDateString():"Sin fecha"}),e.jsx(i,{fontSize:"xs",color:"gray.500",children:r.createdAt?new Date(r.createdAt).toLocaleTimeString():""})]}),e.jsxs(Ce,{children:[e.jsx(i,{fontSize:"sm",color:r.dueDate&&new Date(r.dueDate)<new Date?"red.500":"gray.700",children:r.dueDate?new Date(r.dueDate).toLocaleDateString():"Sin vencimiento"}),r.dueDate&&new Date(r.dueDate)<new Date&&e.jsx(i,{fontSize:"xs",color:"red.500",fontWeight:"bold",children:"VENCIDO"})]}),e.jsx(Ce,{children:e.jsx(t,{spacing:2,children:e.jsx(j,{label:"Ver detalles",children:e.jsx(D,{size:"sm",icon:e.jsx(li,{}),onClick:()=>{b(r),k()}})})})})]},r.id)})})]})})]})]}),e.jsxs(v,{isOpen:T,onClose:_,size:"md",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Crear Nuevo Vale"}),e.jsx(z,{}),e.jsx(A,{pb:6,children:e.jsxs(s,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Cliente"}),e.jsx(re,{value:L.clientId,onChange:e=>R({...L,clientId:e.target.value}),placeholder:"Selecciona un cliente",children:O.map(s=>e.jsxs("option",{value:s.id,children:[s.name," - ",s.email]},s.id))})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Monto"}),e.jsx(G,{type:"number",value:L.amount,onChange:e=>R({...L,amount:e.target.value}),placeholder:"0.00"})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Descripción"}),e.jsx(ne,{value:L.description,onChange:e=>R({...L,description:e.target.value}),placeholder:"Descripción del vale"})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Fecha de Vencimiento"}),e.jsx(G,{type:"date",value:L.dueDate,onChange:e=>R({...L,dueDate:e.target.value})})]}),e.jsx(p,{colorScheme:"green",w:"full",onClick:async()=>{try{(await Vs.post("/api/vouchers",L)).data.success&&(W({title:"Vale creado",description:"El vale se ha creado exitosamente",status:"success",duration:3e3,isClosable:!0}),B(),_(),R({clientId:"",amount:"",description:"",dueDate:"",status:"active"}))}catch(e){W({title:"Error",description:"No se pudo crear el vale",status:"error",duration:3e3,isClosable:!0})}},leftIcon:e.jsx(vi,{}),children:"Crear Vale"})]})})]})]}),e.jsxs(v,{isOpen:I,onClose:N,size:"md",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Detalles del Vale"}),e.jsx(z,{}),e.jsx(A,{pb:6,children:x&&e.jsxs(s,{spacing:4,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Cliente:"}),e.jsx(i,{children:(null==(r=x.client)?void 0:r.name)||"Cliente no encontrado"})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Monto:"}),e.jsxs(i,{color:"green.600",fontWeight:"bold",children:["S/ ",parseFloat(x.amount||0).toFixed(2)]})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Estado:"}),e.jsxs(Re,{colorScheme:$(x.status),children:[e.jsx(Oe,{as:ee(x.status)}),e.jsx(Fe,{children:q(x.status)})]})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Fecha de Vencimiento:"}),e.jsx(i,{children:x.dueDate?new Date(x.dueDate).toLocaleDateString():"Sin fecha"})]}),x.description&&e.jsxs(c,{children:[e.jsx(i,{fontWeight:"bold",mb:2,children:"Descripción:"}),e.jsx(i,{children:x.description})]})]})})]})]})]})},ht=()=>{const[r,a]=He.useState(null),[d,h]=He.useState(!1),[b,y]=He.useState((new Date).getFullYear()),[P,T]=He.useState((new Date).getMonth()+1),[E,_]=He.useState(null),{isOpen:I,onOpen:k,onClose:N}=f(),W=g(),L=n("white","gray.800"),R=n("gray.200","gray.600");He.useEffect(()=>{O()},[b,P]);const O=async()=>{try{h(!0);const e=await Vs.get(`/api/reports/collection?year=${b}&month=${P}`);e.data.success&&(e.data.data.clients&&e.data.data.clients.length,a(e.data.data))}catch(e){W({title:"Error",description:"No se pudo cargar el reporte de cobranza",status:"error",duration:3e3,isClosable:!0})}finally{h(!1)}},F=e=>{const s=parseFloat(e)||0;return new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN"}).format(s)};return d?e.jsx(q,{h:"400px",children:e.jsx(ee,{size:"xl"})}):e.jsx(c,{p:6,children:e.jsxs(s,{spacing:6,align:"stretch",children:[e.jsxs(m,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(c,{children:[e.jsx(u,{size:"lg",mb:2,children:e.jsxs(t,{children:[e.jsx(ci,{}),e.jsx(i,{children:"Reporte de Cobranza Mensual"})]})}),e.jsx(i,{color:"gray.600",children:"Total de deudas por cliente en vales pendientes de pago"})]}),e.jsx(p,{leftIcon:e.jsx(ii,{}),colorScheme:"blue",variant:"outline",onClick:O,isLoading:d,children:"Actualizar"})]}),e.jsx(o,{bg:L,borderColor:R,children:e.jsx(l,{children:e.jsxs(t,{spacing:4,wrap:"wrap",children:[e.jsx(re,{value:b,onChange:e=>y(parseInt(e.target.value)),maxW:"150px",children:(()=>{const e=(new Date).getFullYear(),s=[];for(let i=e;i>=e-2;i--)s.push(i);return s})().map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx(re,{value:P,onChange:e=>T(parseInt(e.target.value)),maxW:"200px",children:[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}].map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})})}),r?e.jsxs(e.Fragment,{children:[e.jsxs(X,{columns:{base:1,md:3},spacing:4,children:[e.jsx(o,{bg:L,borderColor:R,children:e.jsx(l,{children:e.jsxs(J,{children:[e.jsx(Q,{children:"Período"}),e.jsxs(K,{fontSize:"lg",children:[(M=r.period.month,["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][M-1])," ",r.period.year]}),e.jsxs(Z,{children:[e.jsx(Js,{style:{display:"inline",marginRight:"4px"}}),"Reporte mensual"]})]})})}),e.jsx(o,{bg:L,borderColor:R,children:e.jsx(l,{children:e.jsxs(J,{children:[e.jsx(Q,{children:"Clientes con Deuda"}),e.jsx(K,{color:"orange.500",children:r.summary.totalClients}),e.jsxs(Z,{children:[e.jsx(Ni,{style:{display:"inline",marginRight:"4px"}}),"Clientes pendientes"]})]})})}),e.jsx(o,{bg:L,borderColor:R,children:e.jsx(l,{children:e.jsxs(J,{children:[e.jsx(Q,{children:"Total a Cobrar"}),e.jsx(K,{color:"red.500",children:F(r.summary.totalDebt)}),e.jsxs(Z,{children:[e.jsx(fi,{style:{display:"inline",marginRight:"4px"}}),"Monto total"]})]})})})]}),e.jsxs(o,{bg:L,borderColor:R,children:[e.jsx(oe,{children:e.jsx(u,{size:"md",children:"Clientes con Deuda Pendiente"})}),e.jsx(l,{children:0===r.clients.length?e.jsxs(V,{status:"success",children:[e.jsx(H,{}),e.jsx(i,{children:"¡Excelente! No hay deudas pendientes para este período."})]}):e.jsxs(be,{variant:"simple",children:[e.jsx(ye,{children:e.jsxs(ve,{children:[e.jsx(Se,{children:"Cliente"}),e.jsx(Se,{children:"Contacto"}),e.jsx(Se,{children:"Total Deuda"}),e.jsx(Se,{children:"Vales"}),e.jsx(Se,{children:"Acciones"})]})}),e.jsx(we,{children:(r.clients||[]).map(r=>e.jsxs(ve,{children:[e.jsx(Ce,{children:e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",children:r.client.name}),e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["DNI: ",r.client.documentNumber]})]})}),e.jsx(Ce,{children:e.jsxs(s,{align:"start",spacing:1,children:[e.jsxs(t,{children:[e.jsx(bi,{size:12,color:"#718096"}),e.jsx(i,{fontSize:"sm",children:r.client.phone})]}),e.jsxs(t,{children:[e.jsx(ni,{size:12,color:"#718096"}),e.jsx(i,{fontSize:"sm",children:r.client.email})]})]})}),e.jsx(Ce,{children:e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",color:"red.600",fontSize:"lg",children:F(r.remainingAmount||0)}),e.jsxs(i,{fontSize:"xs",color:"gray.500",children:["De ",F(r.totalAmount||0)," total"]})]})}),e.jsx(Ce,{children:e.jsx(Re,{colorScheme:"blue",children:e.jsxs(Fe,{children:[r.valesCount||0," vales"]})})}),e.jsx(Ce,{children:e.jsx(j,{label:"Ver detalles de vales",children:e.jsx(D,{size:"sm",icon:e.jsx(li,{}),onClick:()=>(_(r),void k())})})})]},r.client.id))})]})})]})]}):e.jsxs(V,{status:"info",children:[e.jsx(H,{}),e.jsx(i,{children:"Selecciona un período para generar el reporte de cobranza."})]}),e.jsxs(v,{isOpen:I,onClose:N,size:"lg",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsxs(C,{children:["Detalles de Vales - ",null==E?void 0:E.client.name]}),e.jsx(z,{}),e.jsx(A,{pb:6,children:E&&e.jsxs(s,{spacing:4,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Cliente:"}),e.jsx(i,{children:E.client.name})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Total Deuda:"}),e.jsx(i,{color:"red.600",fontWeight:"bold",fontSize:"lg",children:F(E.remainingAmount)})]}),e.jsx(x,{}),e.jsx(i,{fontWeight:"bold",children:"Detalle de Vales:"}),(E.vouchers||E.vales||[]).map((r,n)=>{return e.jsx(o,{variant:"outline",size:"sm",children:e.jsx(l,{children:e.jsxs(s,{spacing:2,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsxs(i,{fontWeight:"bold",children:["Vale #",r.id]}),e.jsx(i,{fontSize:"sm",color:"gray.500",children:(a=r.createdAt,new Date(a).toLocaleDateString("es-ES"))})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Monto Original:"}),e.jsx(i,{fontSize:"sm",children:F(r.amount)})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Usado:"}),e.jsx(i,{fontSize:"sm",color:"green.600",children:F(r.usedAmount)})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",fontWeight:"bold",children:"Pendiente:"}),e.jsx(i,{fontSize:"sm",fontWeight:"bold",color:"red.600",children:F(r.remainingAmount)})]}),r.description&&e.jsx(i,{fontSize:"xs",color:"gray.500",children:r.description})]})})},r.id);var a})]})})]})]})]})});var M},xt=()=>{const r=g(),n=_({base:!0,md:!1}),{isOpen:a,onOpen:d,onClose:x}=f(),{isOpen:b,onOpen:y,onClose:P}=f(),{isOpen:T,onOpen:E,onClose:I}=f(),{districts:k,fetchDistricts:N}=st(),[W,L]=He.useState([]),[R,O]=He.useState(!0),[F,M]=He.useState(!1),[B,$]=He.useState(new Date),[V,H]=He.useState(null),[J,Q]=He.useState(""),[K,Z]=He.useState("all"),[se,ie]=He.useState("all"),[te,ae]=He.useState({name:"",document:"",phone:"",email:"",address:"",district:"",reference:"",notes:""}),le=async()=>{try{O(!0);const e=await Vs.get("/api/clients");e.data.success&&(L(e.data.data),$(new Date))}catch(e){r({title:"Error",description:"No se pudieron cargar los clientes",status:"error",duration:3e3,isClosable:!0})}finally{O(!1)}},ce=async()=>{try{M(!0);const e=await Vs.get("/api/clients");e.data.success&&(L(e.data.data),$(new Date))}catch(e){}finally{M(!1)}};He.useEffect(()=>{le(),N();const e=setInterval(ce,3e4);return()=>clearInterval(e)},[]);const de=async e=>{if(window.confirm("¿Estás seguro de que quieres eliminar este cliente?"))try{(await Vs.delete(`/api/clients/${e}`)).data.success&&(r({title:"Cliente eliminado",description:"El cliente ha sido eliminado exitosamente",status:"success",duration:3e3,isClosable:!0}),le())}catch(s){r({title:"Error",description:"No se pudo eliminar el cliente",status:"error",duration:3e3,isClosable:!0})}},ue=e=>{H(e),ae({name:e.name||"",document:e.documentNumber||"",phone:e.phone||"",email:e.email||"",address:e.address||"",district:e.district||"",reference:e.reference||"",notes:e.notes||""}),y()},he=e=>{H(e),E()},xe=()=>{ae({name:"",document:"",phone:"",email:"",address:"",district:"",reference:"",notes:""}),H(null)},pe=W.filter(e=>{const s=e.name.toLowerCase().includes(J.toLowerCase())||e.documentNumber.includes(J)||e.phone.includes(J),i="all"===K||e.status===K,t="all"===se||e.district===se;return s&&i&&t}),me=W.length,ge=W.filter(e=>"active"===e.status).length;return R?e.jsx(q,{h:"400px",children:e.jsx(ee,{size:"xl"})}):e.jsxs(c,{p:6,children:[e.jsxs(s,{spacing:6,align:"stretch",children:[e.jsxs(m,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(s,{align:"start",spacing:2,children:[e.jsx(u,{size:"lg",color:"blue.600",children:"Gestión de Clientes"}),e.jsx(i,{color:"gray.600",children:"Administra la información de tus clientes"})]}),e.jsxs(t,{spacing:4,children:[e.jsx(p,{leftIcon:e.jsx(Pi,{}),onClick:ce,variant:"outline",isLoading:F,children:"Actualizar"}),e.jsx(p,{leftIcon:e.jsx(vi,{}),onClick:d,colorScheme:"blue",children:"Nuevo Cliente"})]})]}),e.jsxs(X,{columns:{base:1,md:3},spacing:4,children:[e.jsx(o,{children:e.jsx(l,{children:e.jsxs(t,{justify:"space-between",children:[e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Total Clientes"}),e.jsx(i,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:me})]}),e.jsx(ki,{size:24,color:"#3182CE"})]})})}),e.jsx(o,{children:e.jsx(l,{children:e.jsxs(t,{justify:"space-between",children:[e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Clientes Activos"}),e.jsx(i,{fontSize:"2xl",fontWeight:"bold",color:"green.600",children:ge})]}),e.jsx(ki,{size:24,color:"#38A169"})]})})}),e.jsx(o,{children:e.jsx(l,{children:e.jsxs(t,{justify:"space-between",children:[e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontSize:"sm",color:"gray.600",children:"Última Actualización"}),e.jsxs(t,{spacing:2,children:[e.jsx(i,{fontSize:"sm",fontWeight:"bold",color:"gray.600",children:B.toLocaleTimeString()}),F&&e.jsx(c,{w:"8px",h:"8px",bg:"blue.500",borderRadius:"50%",animation:"pulse 1.5s ease-in-out infinite"})]})]}),e.jsx(Pi,{size:20,color:"#718096"})]})})})]}),e.jsx(o,{children:e.jsx(l,{children:e.jsxs(t,{spacing:4,wrap:"wrap",children:[e.jsx(G,{placeholder:"Buscar por nombre, DNI o teléfono...",value:J,onChange:e=>Q(e.target.value),maxW:"300px"}),e.jsxs(re,{value:K,onChange:e=>Z(e.target.value),maxW:"200px",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"inactive",children:"Inactivos"})]}),e.jsxs(re,{value:se,onChange:e=>ie(e.target.value),maxW:"200px",placeholder:"Seleccionar distrito",children:[e.jsx("option",{value:"all",children:"Todos los distritos"}),k.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>{Q(""),Z("all"),ie("all")},children:"Limpiar Filtros"})]})})}),e.jsxs(o,{children:[e.jsx(oe,{children:e.jsxs(t,{justify:"space-between",children:[e.jsx(u,{size:"md",children:"Lista de Clientes"}),e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["Mostrando ",pe.length," de ",me," clientes","all"!==se&&` en ${se}`,"all"!==K&&` (${"active"===K?"Activos":"Inactivos"})`]})]})}),e.jsx(l,{children:n?e.jsx(s,{spacing:4,children:pe.map(r=>e.jsx(o,{w:"full",variant:"outline",children:e.jsx(l,{children:e.jsxs(s,{align:"start",spacing:3,children:[e.jsxs(t,{justify:"space-between",w:"full",children:[e.jsx(i,{fontWeight:"bold",children:r.name}),e.jsx(h,{colorScheme:"active"===r.status?"green":"gray",children:"active"===r.status?"Activo":"Inactivo"})]}),e.jsxs(s,{align:"start",spacing:1,w:"full",children:[e.jsxs(t,{children:[e.jsx(xi,{size:14,color:"#718096"}),e.jsxs(i,{fontSize:"sm",color:"gray.600",children:["DNI: ",r.documentNumber]})]}),e.jsxs(t,{children:[e.jsx(bi,{size:14,color:"#718096"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:r.phone})]}),e.jsxs(t,{children:[e.jsx(ji,{size:14,color:"#718096"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:r.district})]})]}),e.jsxs(t,{spacing:2,children:[e.jsx(j,{label:"Ver detalles",children:e.jsx(D,{icon:e.jsx(li,{}),size:"sm",onClick:()=>he(r)})}),e.jsx(j,{label:"Editar",children:e.jsx(D,{icon:e.jsx(ti,{}),size:"sm",colorScheme:"blue",onClick:()=>ue(r)})}),e.jsx(j,{label:"Eliminar",children:e.jsx(D,{icon:e.jsx(_i,{}),size:"sm",colorScheme:"red",onClick:()=>de(r.id)})})]})]})})},r.id))}):e.jsxs(be,{variant:"simple",children:[e.jsx(ye,{children:e.jsxs(ve,{children:[e.jsx(Se,{children:"Cliente"}),e.jsx(Se,{children:"DNI"}),e.jsx(Se,{children:"Teléfono"}),e.jsx(Se,{children:"Distrito"}),e.jsx(Se,{children:"Estado"}),e.jsx(Se,{children:"Acciones"})]})}),e.jsx(we,{children:pe.map(r=>e.jsxs(ve,{children:[e.jsx(Ce,{children:e.jsxs(s,{align:"start",spacing:1,children:[e.jsx(i,{fontWeight:"bold",children:r.name}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:r.email})]})}),e.jsx(Ce,{children:r.documentNumber}),e.jsx(Ce,{children:r.phone}),e.jsx(Ce,{children:r.district}),e.jsx(Ce,{children:e.jsx(h,{colorScheme:"active"===r.status?"green":"gray",children:"active"===r.status?"Activo":"Inactivo"})}),e.jsx(Ce,{children:e.jsxs(t,{spacing:2,children:[e.jsx(j,{label:"Ver detalles",children:e.jsx(D,{icon:e.jsx(li,{}),size:"sm",onClick:()=>he(r)})}),e.jsx(j,{label:"Editar",children:e.jsx(D,{icon:e.jsx(ti,{}),size:"sm",colorScheme:"blue",onClick:()=>ue(r)})}),e.jsx(j,{label:"Eliminar",children:e.jsx(D,{icon:e.jsx(_i,{}),size:"sm",colorScheme:"red",onClick:()=>de(r.id)})})]})})]},r.id))})]})})]})]}),e.jsxs(v,{isOpen:a,onClose:x,size:"lg",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Nuevo Cliente"}),e.jsx(z,{}),e.jsx(A,{pb:6,children:e.jsxs(s,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Nombre Completo"}),e.jsx(G,{value:te.name,onChange:e=>ae({...te,name:e.target.value}),placeholder:"Ingresa el nombre completo"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"DNI"}),e.jsx(G,{value:te.document,onChange:e=>ae({...te,document:e.target.value}),placeholder:"Ingresa el DNI"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Teléfono"}),e.jsx(G,{value:te.phone,onChange:e=>ae({...te,phone:e.target.value}),placeholder:"Ingresa el teléfono"})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Email"}),e.jsx(G,{type:"email",value:te.email,onChange:e=>ae({...te,email:e.target.value}),placeholder:"Ingresa el email"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Dirección"}),e.jsx(G,{value:te.address,onChange:e=>ae({...te,address:e.target.value}),placeholder:"Ingresa la dirección"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Distrito"}),e.jsx(G,{value:te.district,onChange:e=>ae({...te,district:e.target.value}),placeholder:"Ingresa el distrito"})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Referencia"}),e.jsx(G,{value:te.reference,onChange:e=>ae({...te,reference:e.target.value}),placeholder:"Referencia de la dirección"})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Notas"}),e.jsx(ne,{value:te.notes,onChange:e=>ae({...te,notes:e.target.value}),placeholder:"Notas adicionales"})]}),e.jsx(p,{colorScheme:"blue",onClick:async()=>{var e,s;try{(await Vs.post("/api/clients",te)).data.success&&(r({title:"Cliente creado",description:"El cliente se ha registrado exitosamente",status:"success",duration:3e3,isClosable:!0}),le(),x(),xe())}catch(i){r({title:"Error",description:(null==(s=null==(e=i.response)?void 0:e.data)?void 0:s.message)||"No se pudo crear el cliente",status:"error",duration:3e3,isClosable:!0})}},w:"full",children:"Crear Cliente"})]})})]})]}),e.jsxs(v,{isOpen:b,onClose:P,size:"lg",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Editar Cliente"}),e.jsx(z,{}),e.jsx(A,{pb:6,children:e.jsxs(s,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Nombre Completo"}),e.jsx(G,{value:te.name,onChange:e=>ae({...te,name:e.target.value}),placeholder:"Ingresa el nombre completo"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"DNI"}),e.jsx(G,{value:te.document,onChange:e=>ae({...te,document:e.target.value}),placeholder:"Ingresa el DNI"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Teléfono"}),e.jsx(G,{value:te.phone,onChange:e=>ae({...te,phone:e.target.value}),placeholder:"Ingresa el teléfono"})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Email"}),e.jsx(G,{type:"email",value:te.email,onChange:e=>ae({...te,email:e.target.value}),placeholder:"Ingresa el email"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Dirección"}),e.jsx(G,{value:te.address,onChange:e=>ae({...te,address:e.target.value}),placeholder:"Ingresa la dirección"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Distrito"}),e.jsx(G,{value:te.district,onChange:e=>ae({...te,district:e.target.value}),placeholder:"Ingresa el distrito"})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Referencia"}),e.jsx(G,{value:te.reference,onChange:e=>ae({...te,reference:e.target.value}),placeholder:"Referencia de la dirección"})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Notas"}),e.jsx(ne,{value:te.notes,onChange:e=>ae({...te,notes:e.target.value}),placeholder:"Notas adicionales"})]}),e.jsx(p,{colorScheme:"blue",onClick:async()=>{var e,s;try{(await Vs.put(`/api/clients/${V.id}`,te)).data.success&&(r({title:"Cliente actualizado",description:"Los datos del cliente se han actualizado",status:"success",duration:3e3,isClosable:!0}),le(),P(),xe())}catch(i){r({title:"Error",description:(null==(s=null==(e=i.response)?void 0:e.data)?void 0:s.message)||"No se pudo actualizar el cliente",status:"error",duration:3e3,isClosable:!0})}},w:"full",children:"Actualizar Cliente"})]})})]})]}),e.jsxs(v,{isOpen:T,onClose:I,size:"md",isCentered:!0,children:[e.jsx(S,{}),e.jsxs(w,{children:[e.jsx(C,{children:"Detalles del Cliente"}),e.jsx(z,{}),e.jsx(A,{pb:6,children:V&&e.jsx(s,{spacing:4,align:"stretch",children:e.jsx(o,{children:e.jsx(l,{children:e.jsxs(s,{spacing:3,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Nombre:"}),e.jsx(i,{children:V.name})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"DNI:"}),e.jsx(i,{children:V.documentNumber})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Teléfono:"}),e.jsx(i,{children:V.phone})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Email:"}),e.jsx(i,{children:V.email||"No especificado"})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Dirección:"}),e.jsx(i,{children:V.address})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Distrito:"}),e.jsx(i,{children:V.district})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Referencia:"}),e.jsx(i,{children:V.reference||"No especificada"})]}),e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontWeight:"bold",children:"Estado:"}),e.jsx(h,{colorScheme:"active"===V.status?"green":"gray",children:"active"===V.status?"Activo":"Inactivo"})]}),V.notes&&e.jsxs(s,{align:"stretch",children:[e.jsx(i,{fontWeight:"bold",children:"Notas:"}),e.jsx(i,{fontSize:"sm",color:"gray.600",children:V.notes})]})]})})})})})]})]})]})},pt=()=>{const[r,a]=He.useState([]),[o,l]=He.useState(!0),[d,u]=He.useState(null),[x,m]=He.useState(!1),[b,y]=He.useState({version:"",title:"",content:"",effectiveDate:""}),[P,T]=He.useState({page:1,limit:10,total:0,pages:0}),[E,_]=He.useState("all"),{isOpen:I,onOpen:k,onClose:N}=f(),W=g(),L=n("white","gray.800");n("gray.200","gray.600"),He.useEffect(()=>{R()},[P.page,E]);const R=async()=>{try{l(!0);localStorage.getItem("token");const e=new URLSearchParams({page:P.page,limit:P.limit});"all"!==E&&e.append("status",E);const s=await is.get(`/api/terms-and-conditions?${e}`);a(s.data.data||[]),T(e=>{var i,t;return{...e,total:(null==(i=s.data.pagination)?void 0:i.total)||0,pages:(null==(t=s.data.pagination)?void 0:t.pages)||1}})}catch(e){W({title:"Error",description:"Error al cargar términos y condiciones",status:"error",duration:3e3,isClosable:!0})}finally{l(!1)}},O=e=>new Date(e).toLocaleDateString("es-PE");return o?e.jsx(q,{h:"400px",children:e.jsx(ee,{size:"xl"})}):e.jsxs(c,{p:6,bg:L,borderRadius:"lg",boxShadow:"sm",children:[e.jsxs(s,{spacing:6,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:"Gestión de Términos y Condiciones"}),e.jsx(p,{leftIcon:e.jsx(me,{}),colorScheme:"blue",onClick:()=>{u(null),m(!0),y({version:"",title:"",content:"",effectiveDate:(new Date).toISOString().split("T")[0]}),k()},children:"Crear Nuevos Términos"})]}),e.jsx(t,{spacing:4,children:e.jsxs(U,{maxW:"200px",children:[e.jsx(Y,{children:"Estado"}),e.jsxs(re,{value:E,onChange:e=>_(e.target.value),children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"inactive",children:"Inactivos"})]})]})}),e.jsx(c,{overflowX:"auto",children:e.jsxs(be,{variant:"simple",children:[e.jsx(ye,{children:e.jsxs(ve,{children:[e.jsx(Se,{children:"Versión"}),e.jsx(Se,{children:"Título"}),e.jsx(Se,{children:"Estado"}),e.jsx(Se,{children:"Fecha Vigencia"}),e.jsx(Se,{children:"Creado"}),e.jsx(Se,{children:"Acciones"})]})}),e.jsx(we,{children:r.map(s=>e.jsxs(ve,{children:[e.jsx(Ce,{fontWeight:"bold",children:s.version}),e.jsx(Ce,{maxW:"300px",isTruncated:!0,children:s.title}),e.jsx(Ce,{children:e.jsx(h,{colorScheme:s.isActive?"green":"red",variant:"subtle",children:s.isActive?"Activo":"Inactivo"})}),e.jsx(Ce,{children:O(s.effectiveDate)}),e.jsx(Ce,{children:O(s.createdAt)}),e.jsx(Ce,{children:e.jsxs(t,{spacing:2,children:[e.jsx(j,{label:"Ver",children:e.jsx(D,{icon:e.jsx(le,{}),size:"sm",variant:"ghost",onClick:()=>(e=>{u(e),m(!1),y({version:e.version,title:e.title,content:e.content,effectiveDate:e.effectiveDate.split("T")[0]}),k()})(s)})}),e.jsx(j,{label:"Editar",children:e.jsx(D,{icon:e.jsx(ce,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:()=>(e=>{u(e),m(!0),y({version:e.version,title:e.title,content:e.content,effectiveDate:e.effectiveDate.split("T")[0]}),k()})(s)})}),e.jsx(j,{label:s.isActive?"Desactivar":"Activar",children:e.jsx(Me,{isChecked:s.isActive,onChange:()=>(async e=>{try{localStorage.getItem("token"),await is.patch(`/api/terms-and-conditions/${e.id}/toggle`,{}),W({title:"Éxito",description:"Términos "+(e.isActive?"desactivados":"activados"),status:"success",duration:3e3,isClosable:!0}),R()}catch(s){W({title:"Error",description:"Error al cambiar estado",status:"error",duration:3e3,isClosable:!0})}})(s),colorScheme:"green"})}),!s.isActive&&e.jsx(j,{label:"Eliminar",children:e.jsx(D,{icon:e.jsx(ge,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>(async e=>{var s,i;if(window.confirm("¿Estás seguro de eliminar estos términos y condiciones?"))try{localStorage.getItem("token"),await is.delete(`/api/terms-and-conditions/${e.id}`),W({title:"Éxito",description:"Términos y condiciones eliminados",status:"success",duration:3e3,isClosable:!0}),R()}catch(t){W({title:"Error",description:(null==(i=null==(s=t.response)?void 0:s.data)?void 0:i.message)||"Error al eliminar términos",status:"error",duration:3e3,isClosable:!0})}})(s)})})]})})]},s.id))})]})}),P.pages>1&&e.jsxs(t,{justify:"center",spacing:4,children:[e.jsx(p,{isDisabled:1===P.page,onClick:()=>T(e=>({...e,page:e.page-1})),children:"Anterior"}),e.jsxs(i,{children:["Página ",P.page," de ",P.pages]}),e.jsx(p,{isDisabled:P.page===P.pages,onClick:()=>T(e=>({...e,page:e.page+1})),children:"Siguiente"})]})]}),e.jsxs(v,{isOpen:I,onClose:N,size:"xl",children:[e.jsx(S,{}),e.jsxs(w,{maxW:"800px",children:[e.jsx(C,{children:x?"Editar Términos y Condiciones":"Ver Términos y Condiciones"}),e.jsx(z,{}),e.jsx(A,{pb:6,children:e.jsx("form",{onSubmit:async e=>{var s,i;e.preventDefault();try{localStorage.getItem("token");d?(await is.put(`/api/terms-and-conditions/${d.id}`,b),W({title:"Éxito",description:"Términos y condiciones actualizados",status:"success",duration:3e3,isClosable:!0})):(await is.post("/api/terms-and-conditions",b),W({title:"Éxito",description:"Términos y condiciones creados",status:"success",duration:3e3,isClosable:!0})),N(),R()}catch(t){W({title:"Error",description:(null==(i=null==(s=t.response)?void 0:s.data)?void 0:i.message)||"Error al guardar términos",status:"error",duration:3e3,isClosable:!0})}},children:e.jsxs(s,{spacing:4,align:"stretch",children:[e.jsxs(t,{children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Versión"}),e.jsx(G,{value:b.version,onChange:e=>y(s=>({...s,version:e.target.value})),placeholder:"ej: 1.0, 2.0",isDisabled:!x})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Fecha de Vigencia"}),e.jsx(G,{type:"date",value:b.effectiveDate,onChange:e=>y(s=>({...s,effectiveDate:e.target.value})),isDisabled:!x})]})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Título"}),e.jsx(G,{value:b.title,onChange:e=>y(s=>({...s,title:e.target.value})),placeholder:"Título de los términos y condiciones",isDisabled:!x})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Contenido"}),e.jsx(ne,{value:b.content,onChange:e=>y(s=>({...s,content:e.target.value})),placeholder:"Contenido completo de los términos y condiciones...",rows:15,isDisabled:!x})]}),x&&e.jsxs(t,{justify:"flex-end",children:[e.jsx(p,{variant:"ghost",onClick:N,children:"Cancelar"}),e.jsx(p,{type:"submit",colorScheme:"blue",children:d?"Actualizar":"Crear"})]}),!x&&e.jsx(t,{justify:"flex-end",children:e.jsx(p,{onClick:N,children:"Cerrar"})})]})})})]})]})]})},mt=()=>{const[r,a]=Qe(),[o,l]=He.useState([]),[d,u]=He.useState(!0),{user:x}=Hs(),[m,b]=He.useState(null),[y,P]=He.useState(!1),[T,E]=He.useState(!1),[_,I]=He.useState({username:"",email:"",password:"",role:"repartidor",isActive:!0,firstName:"",lastName:"",documentNumber:"",phone:"",address:"",district:"",reference:"",vehicleType:"",vehiclePlate:"",licenseNumber:"",insuranceNumber:"",emergencyContact:"",emergencyPhone:""}),[k,N]=He.useState(!1),[W,L]=He.useState({page:1,limit:10,total:0,pages:0}),[R,O]=He.useState("all"),{isOpen:F,onOpen:M,onClose:B}=f(),$=g(),V=n("white","gray.800");n("gray.200","gray.600"),He.useEffect(()=>{const e=r.get("role");e&&"all"!==e&&O(e)},[r]),He.useEffect(()=>{H()},[W.page,R]);const H=async()=>{try{u(!0);const e=localStorage.getItem("token");let s;if(e&&!is.defaults.headers.common.Authorization&&(is.defaults.headers.common.Authorization=`Bearer ${e}`),"all"===R){const[e,i,t]=await Promise.all([is.get("/api/users/role?role=admin"),is.get("/api/users/role?role=vendedor"),is.get("/api/users/role?role=repartidor")]),r=[...e.data.success?e.data.data:[],...i.data.success?i.data.data:[],...t.data.success?t.data.data:[]];s={data:{success:!0,data:r}}}else s=await is.get(`/api/users/role?role=${R}`);s.data.success?(l(s.data.data||[]),L(e=>{var i;return{...e,total:(null==(i=s.data.data)?void 0:i.length)||0,pages:1}})):(l([]),L(e=>({...e,total:0,pages:1})))}catch(e){$({title:"Error",description:"Error al cargar usuarios",status:"error",duration:3e3,isClosable:!0}),l([])}finally{u(!1)}},X=e=>{switch(e){case"admin":return"red";case"vendedor":return"blue";case"repartidor":return"green";default:return"gray"}},J=e=>{switch(e){case"admin":return"Administrador";case"vendedor":return"Vendedor";case"repartidor":return"Repartidor";default:return e}};return d?e.jsx(q,{h:"400px",children:e.jsx(ee,{size:"xl"})}):e.jsxs(c,{p:6,bg:V,borderRadius:"lg",boxShadow:"sm",children:[e.jsxs(s,{spacing:6,align:"stretch",children:[e.jsxs(t,{justify:"space-between",children:[e.jsx(i,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:"Gestión de Usuarios"}),e.jsx(p,{leftIcon:e.jsx(me,{}),colorScheme:"blue",onClick:()=>{b(null),E(!0),P(!0),I({username:"",email:"",password:"",role:"repartidor",isActive:!0,firstName:"",lastName:"",documentNumber:"",phone:"",address:"",district:"",reference:"",vehicleType:"",vehiclePlate:"",licenseNumber:"",insuranceNumber:"",emergencyContact:"",emergencyPhone:""}),M()},children:"Crear Usuario"})]}),e.jsx(t,{spacing:4,children:e.jsxs(U,{maxW:"200px",children:[e.jsx(Y,{children:"Rol"}),e.jsxs(re,{value:R,onChange:e=>O(e.target.value),children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"admin",children:"Administrador"}),e.jsx("option",{value:"vendedor",children:"Vendedor"}),e.jsx("option",{value:"repartidor",children:"Repartidor"})]})]})}),e.jsx(c,{overflowX:"auto",children:e.jsxs(be,{variant:"simple",children:[e.jsx(ye,{children:e.jsxs(ve,{children:[e.jsx(Se,{children:"Usuario"}),e.jsx(Se,{children:"Nombre"}),e.jsx(Se,{children:"Email"}),e.jsx(Se,{children:"Rol"}),e.jsx(Se,{children:"Estado"}),e.jsx(Se,{children:"Creado"}),e.jsx(Se,{children:"Acciones"})]})}),e.jsx(we,{children:o.map(s=>e.jsxs(ve,{children:[e.jsx(Ce,{fontWeight:"bold",children:s.username}),e.jsx(Ce,{children:s.firstName&&s.lastName?`${s.firstName} ${s.lastName}`:s.firstName||s.lastName||"-"}),e.jsx(Ce,{children:s.email}),e.jsx(Ce,{children:e.jsx(h,{colorScheme:X(s.role),variant:"subtle",children:J(s.role)})}),e.jsx(Ce,{children:e.jsx(h,{colorScheme:s.isActive?"green":"red",variant:"subtle",children:s.isActive?"Activo":"Inactivo"})}),e.jsx(Ce,{children:new Date(s.createdAt).toLocaleDateString("es-PE")}),e.jsx(Ce,{children:e.jsxs(t,{spacing:2,children:[e.jsx(j,{label:"Ver",children:e.jsx(D,{icon:e.jsx(le,{}),size:"sm",variant:"ghost",onClick:()=>(e=>{b(e),E(!1),P(!1),I({username:e.username,email:e.email,password:"",role:e.role,isActive:e.isActive,firstName:e.firstName||"",lastName:e.lastName||"",documentNumber:e.documentNumber||"",phone:e.phone||"",address:e.address||"",district:e.district||"",reference:e.reference||"",vehicleType:e.vehicleType||"",vehiclePlate:e.vehiclePlate||"",licenseNumber:e.licenseNumber||"",insuranceNumber:e.insuranceNumber||"",emergencyContact:e.emergencyContact||"",emergencyPhone:e.emergencyPhone||""}),M()})(s)})}),e.jsx(j,{label:"Editar",children:e.jsx(D,{icon:e.jsx(ce,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:()=>(e=>{b(e),E(!1),P(!0),I({username:e.username,email:e.email,password:"",role:e.role,isActive:e.isActive,firstName:e.firstName||"",lastName:e.lastName||"",documentNumber:e.documentNumber||"",phone:e.phone||"",address:e.address||"",district:e.district||"",reference:e.reference||"",vehicleType:e.vehicleType||"",vehiclePlate:e.vehiclePlate||"",licenseNumber:e.licenseNumber||"",insuranceNumber:e.insuranceNumber||"",emergencyContact:e.emergencyContact||"",emergencyPhone:e.emergencyPhone||""}),M()})(s)})}),e.jsx(j,{label:s.isActive?"Desactivar":"Activar",children:e.jsx(Me,{isChecked:s.isActive,onChange:()=>(async e=>{try{localStorage.getItem("token"),await is.patch(`/api/users/${e.id}/toggle-status`,{}),$({title:"Éxito",description:"Usuario "+(e.isActive?"desactivado":"activado"),status:"success",duration:3e3,isClosable:!0}),H()}catch(s){$({title:"Error",description:"Error al cambiar estado del usuario",status:"error",duration:3e3,isClosable:!0})}})(s),colorScheme:"green"})}),e.jsx(j,{label:x&&x.id===s.id?"No puedes eliminarte a ti mismo":"Eliminar",children:e.jsx(D,{icon:e.jsx(ge,{}),size:"sm",variant:"ghost",colorScheme:"red",isDisabled:x&&x.id===s.id,onClick:()=>(async e=>{var s,i;if(x&&x.id===e.id)$({title:"Error",description:"No puedes eliminarte a ti mismo",status:"error",duration:3e3,isClosable:!0});else if(window.confirm(`¿Estás seguro de eliminar al usuario "${e.username}"?`))try{localStorage.getItem("token"),await is.delete(`/api/users/${e.id}`),$({title:"Éxito",description:"Usuario eliminado exitosamente",status:"success",duration:3e3,isClosable:!0}),H()}catch(t){$({title:"Error",description:(null==(i=null==(s=t.response)?void 0:s.data)?void 0:i.message)||"Error al eliminar usuario",status:"error",duration:3e3,isClosable:!0})}})(s)})})]})})]},s.id))})]})}),W.pages>1&&e.jsxs(t,{justify:"center",spacing:4,children:[e.jsx(p,{isDisabled:1===W.page,onClick:()=>L(e=>({...e,page:e.page-1})),children:"Anterior"}),e.jsxs(i,{children:["Página ",W.page," de ",W.pages]}),e.jsx(p,{isDisabled:W.page===W.pages,onClick:()=>L(e=>({...e,page:e.page+1})),children:"Siguiente"})]})]}),e.jsxs(v,{isOpen:F,onClose:B,size:"xl",children:[e.jsx(S,{}),e.jsxs(w,{maxW:"800px",maxH:"90vh",overflowY:"auto",children:[e.jsx(C,{children:T?"Crear Usuario":y?"Editar Usuario":"Ver Usuario"}),e.jsx(z,{}),e.jsx(A,{pb:6,children:e.jsx("form",{onSubmit:async e=>{var s,i;e.preventDefault();try{localStorage.getItem("token");const e={username:_.username,email:_.email,role:_.role,isActive:_.isActive,firstName:_.firstName||"",lastName:_.lastName||"",phone:_.phone||"",address:_.address||"",district:_.district||"",reference:_.reference||""};(T||_.password)&&(e.password=_.password),T?(await is.post("/api/users",e),$({title:"Éxito",description:"Usuario creado exitosamente",status:"success",duration:3e3,isClosable:!0})):(await is.put(`/api/users/${m.id}`,e),$({title:"Éxito",description:"Usuario actualizado exitosamente",status:"success",duration:3e3,isClosable:!0})),B(),H()}catch(t){$({title:"Error",description:(null==(i=null==(s=t.response)?void 0:s.data)?void 0:i.message)||"Error al guardar usuario",status:"error",duration:3e3,isClosable:!0})}},children:e.jsxs(s,{spacing:6,align:"stretch",children:[e.jsxs(c,{children:[e.jsx(i,{fontSize:"lg",fontWeight:"bold",mb:4,color:"blue.600",children:"Información Básica"}),e.jsxs(s,{spacing:4,children:[e.jsxs(t,{spacing:4,w:"full",children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Nombre de Usuario"}),e.jsx(G,{value:_.username,onChange:e=>I(s=>({...s,username:e.target.value})),placeholder:"Nombre de usuario",isDisabled:!y})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Email"}),e.jsx(G,{type:"email",value:_.email,onChange:e=>I(s=>({...s,email:e.target.value})),placeholder:"correo@ejemplo.com",isDisabled:!y})]})]}),e.jsxs(t,{spacing:4,w:"full",children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Nombre"}),e.jsx(G,{value:_.firstName,onChange:e=>I(s=>({...s,firstName:e.target.value})),placeholder:"Nombre",isDisabled:!y})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Apellido"}),e.jsx(G,{value:_.lastName,onChange:e=>I(s=>({...s,lastName:e.target.value})),placeholder:"Apellido",isDisabled:!y})]})]}),e.jsxs(t,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(Y,{children:"DNI"}),e.jsx(G,{value:_.documentNumber,onChange:e=>I(s=>({...s,documentNumber:e.target.value})),placeholder:"12345678",isDisabled:!y})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Teléfono"}),e.jsx(G,{value:_.phone,onChange:e=>I(s=>({...s,phone:e.target.value})),placeholder:"987654321",isDisabled:!y})]})]}),e.jsxs(U,{isRequired:T,children:[e.jsxs(Y,{children:["Contraseña ",!T&&"(dejar vacío para mantener la actual)"]}),e.jsxs(se,{children:[e.jsx(G,{type:k?"text":"password",value:_.password,onChange:e=>I(s=>({...s,password:e.target.value})),placeholder:T?"Contraseña":"Nueva contraseña (opcional)",isDisabled:!y}),e.jsx(De,{children:e.jsx(D,{"aria-label":k?"Ocultar contraseña":"Mostrar contraseña",icon:k?e.jsx(oi,{}):e.jsx(li,{}),variant:"ghost",size:"sm",onClick:()=>N(!k),isDisabled:!y})})]})]}),e.jsxs(t,{spacing:4,w:"full",children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(Y,{children:"Rol"}),e.jsxs(re,{value:_.role,onChange:e=>I(s=>({...s,role:e.target.value})),isDisabled:!y,children:[e.jsx("option",{value:"repartidor",children:"Repartidor"}),e.jsx("option",{value:"vendedor",children:"Vendedor"}),e.jsx("option",{value:"admin",children:"Administrador"})]})]}),e.jsx(U,{children:e.jsxs(t,{justify:"space-between",children:[e.jsx(Y,{mb:0,children:"Usuario Activo"}),e.jsx(Me,{isChecked:_.isActive,onChange:e=>I(s=>({...s,isActive:e.target.checked})),isDisabled:!y,colorScheme:"green"})]})})]})]})]}),e.jsxs(c,{children:[e.jsx(i,{fontSize:"lg",fontWeight:"bold",mb:4,color:"blue.600",children:"Dirección"}),e.jsxs(s,{spacing:4,children:[e.jsxs(U,{children:[e.jsx(Y,{children:"Dirección"}),e.jsx(G,{value:_.address,onChange:e=>I(s=>({...s,address:e.target.value})),placeholder:"Jr. Las Flores 123",isDisabled:!y})]}),e.jsxs(t,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(Y,{children:"Distrito"}),e.jsx(G,{value:_.district,onChange:e=>I(s=>({...s,district:e.target.value})),placeholder:"Callería",isDisabled:!y})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Referencia"}),e.jsx(G,{value:_.reference,onChange:e=>I(s=>({...s,reference:e.target.value})),placeholder:"Frente al parque",isDisabled:!y})]})]})]})]}),"repartidor"===_.role&&e.jsxs(c,{children:[e.jsx(i,{fontSize:"lg",fontWeight:"bold",mb:4,color:"green.600",children:"Datos de Repartidor"}),e.jsxs(s,{spacing:4,children:[e.jsxs(t,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(Y,{children:"Tipo de Vehículo"}),e.jsxs(re,{value:_.vehicleType,onChange:e=>I(s=>({...s,vehicleType:e.target.value})),isDisabled:!y,children:[e.jsx("option",{value:"",children:"Seleccionar"}),e.jsx("option",{value:"motorcycle",children:"Motocicleta"}),e.jsx("option",{value:"bicycle",children:"Bicicleta"}),e.jsx("option",{value:"car",children:"Auto"}),e.jsx("option",{value:"truck",children:"Camión"})]})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Placa del Vehículo"}),e.jsx(G,{value:_.vehiclePlate,onChange:e=>I(s=>({...s,vehiclePlate:e.target.value})),placeholder:"ABC-123",isDisabled:!y})]})]}),e.jsxs(t,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(Y,{children:"Número de Licencia"}),e.jsx(G,{value:_.licenseNumber,onChange:e=>I(s=>({...s,licenseNumber:e.target.value})),placeholder:"12345678",isDisabled:!y})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Número de Seguro"}),e.jsx(G,{value:_.insuranceNumber,onChange:e=>I(s=>({...s,insuranceNumber:e.target.value})),placeholder:"987654321",isDisabled:!y})]})]}),e.jsxs(t,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(Y,{children:"Contacto de Emergencia"}),e.jsx(G,{value:_.emergencyContact,onChange:e=>I(s=>({...s,emergencyContact:e.target.value})),placeholder:"María García",isDisabled:!y})]}),e.jsxs(U,{children:[e.jsx(Y,{children:"Teléfono de Emergencia"}),e.jsx(G,{value:_.emergencyPhone,onChange:e=>I(s=>({...s,emergencyPhone:e.target.value})),placeholder:"987654321",isDisabled:!y})]})]})]})]}),y&&e.jsxs(t,{justify:"flex-end",children:[e.jsx(p,{variant:"ghost",onClick:B,children:"Cancelar"}),e.jsx(p,{type:"submit",colorScheme:"blue",children:T?"Crear":"Actualizar"})]}),!y&&e.jsx(t,{justify:"flex-end",children:e.jsx(p,{onClick:B,children:"Cerrar"})})]})})})]})]})]})},gt=()=>{const{token:s,checkAuth:i}=Hs(),[t,r]=He.useState(!0);return He.useEffect(()=>{(async()=>{try{await i()}catch(e){}finally{r(!1)}})()},[i]),t?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Cargando..."})]}):e.jsxs(Ke,{children:[e.jsx(Ze,{path:"/",element:e.jsx(Mi,{}),children:e.jsx(Ze,{index:!0,element:e.jsx(Yi,{})})}),e.jsx(Ze,{path:"/guest-order",element:e.jsx(tt,{})}),e.jsx(Ze,{path:"/receipt/:id",element:e.jsx(nt,{})}),e.jsx(Ze,{path:"/track/:id",element:e.jsx(at,{})}),e.jsx(Ze,{path:"/delivery-login",element:e.jsx(lt,{})}),e.jsxs(Ze,{path:"/dashboard",element:s?e.jsx(Oi,{children:e.jsx(Ui,{})}):e.jsx(es,{to:"/",replace:!0}),children:[e.jsx(Ze,{index:!0,element:e.jsx(Ri,{requiredRoles:["admin","vendedor"],children:e.jsx(Ki,{})})}),e.jsx(Ze,{path:"orders-management",element:e.jsx(Ri,{requiredRoles:["admin"],children:e.jsx(Zi,{})})}),e.jsx(Ze,{path:"delivery-fees",element:e.jsx(Ri,{requiredRoles:["admin"],children:e.jsx(rt,{})})}),e.jsx(Ze,{path:"subscriptions",element:e.jsx(Ri,{requiredRoles:["admin"],children:e.jsx(dt,{})})}),e.jsx(Ze,{path:"vales",element:e.jsx(Ri,{requiredRoles:["admin"],children:e.jsx(ut,{})})}),e.jsx(Ze,{path:"collection-report",element:e.jsx(Ri,{requiredRoles:["admin"],children:e.jsx(ht,{})})}),e.jsx(Ze,{path:"clients",element:e.jsx(Ri,{requiredRoles:["admin"],children:e.jsx(xt,{})})}),e.jsx(Ze,{path:"terms-and-conditions",element:e.jsx(Ri,{requiredRoles:["admin"],children:e.jsx(pt,{})})}),e.jsx(Ze,{path:"users-management",element:e.jsx(Ri,{requiredRoles:["admin"],children:e.jsx(mt,{})})})]}),e.jsx(Ze,{path:"/delivery-dashboard",element:s?e.jsx(Ui,{}):e.jsx(es,{to:"/delivery-login",replace:!0}),children:e.jsx(Ze,{index:!0,element:e.jsx(Ri,{requiredRoles:["repartidor"],children:e.jsx(ot,{})})})}),e.jsx(Ze,{path:"*",element:e.jsx(Fi,{type:"404"})})]})},jt={base:1,content:1,dropdown:100,sticky:200,banner:300,overlay:400,header:999,sidebar:1e3,modal:1300,popover:1400,tooltip:1500,notification:1600,toast:1700,skipLink:1800},ft=$e({zIndices:jt,styles:{global:{".pulse-animation":{animation:`${Be`
  0% { opacity: 0.8; transform: scale(1); }
  50% { opacity: 0.4; transform: scale(1.2); }
  100% { opacity: 0.8; transform: scale(1); }
`} 2s infinite`}}},components:{Modal:{baseStyle:{overlay:{zIndex:jt.modal},dialogContainer:{zIndex:jt.modal}}},Menu:{baseStyle:{list:{zIndex:jt.dropdown}}},Popover:{baseStyle:{content:{zIndex:jt.popover}}},Tooltip:{baseStyle:{zIndex:jt.tooltip}},Drawer:{baseStyle:{overlay:{zIndex:jt.modal},dialogContainer:{zIndex:jt.modal}}}},colors:{brand:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1"}}});ns.createRoot(document.getElementById("root")).render(e.jsx(Ue.StrictMode,{children:e.jsx(qe,{theme:ft,children:e.jsxs(ss,{children:[e.jsx(gt,{}),e.jsx(qs,{position:"top-right",autoClose:3e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!1,style:{zIndex:1700,fontSize:"14px",maxWidth:"90vw"},toastStyle:{fontSize:"14px",padding:"8px 12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",margin:"8px",maxWidth:"90vw"}})]})})}));
