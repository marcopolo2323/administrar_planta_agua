import{j as e,V as u,T as n,H as h,I as Rt,u as We,C as Lr,a as F,b as W,B as N,c as le,d as K,e as ve,D as hs,f as O,_ as Ss,g as $t,h as xs,i as Oe,k as Ge,l as Ha,E as Ua,M as Ke,m as Ye,n as Ze,o as Xe,p as es,q as Qe,U as lt,L as Ie,r as br,s as Gs,F as ys,t as _e,v as rn,w as nn,x as Ga,y as Ya,z as Xa,A as Rn,G as On,J as Qa,K as Ja,N as Ln,O as yr,P as ls,Q as Ee,R as Te,S as H,W as U,X as te,Y as as,Z as Ve,$ as qe,a0 as He,a1 as Ue,a2 as vs,a3 as Pt,a4 as Fr,a5 as Ka,a6 as rs,a7 as Ns,a8 as As,a9 as ze,aa as Wr,ab as Yt,ac as Fn,ad as Za,ae as Ms,af as dr,ag as ur,ah as Mr,ai as $r,aj as Wn,ak as Mn,al as tt,am as rt,an as fs,ao as he,ap as nt,aq as pe,ar as ei,as as si,at as ti,au as an,av as ri,aw as on,ax as $n,ay as ni,az as ai,aA as ii,aB as oi,aC as li,aD as vr,aE as ln,aF as Sr,aG as Cr,aH as ci,aI as di,aJ as ui}from"./chakra-DhdMOvI-.js";import{a as hi,r as S,b as me}from"./vendor-Q3K9tvtn.js";import{u as Ys,O as Bn,N as pi,a as Vn,b as xi,R as gi,c as is,d as cn,B as mi}from"./router-DREMpGBD.js";import{a as os,c as ft}from"./utils-DzZC5mzC.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var wr={},dn=hi;wr.createRoot=dn.createRoot,wr.hydrateRoot=dn.hydrateRoot;function qn(s){var t,r,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(t=0;t<i;t++)s[t]&&(r=qn(s[t]))&&(a&&(a+=" "),a+=r)}else for(r in s)s[r]&&(a&&(a+=" "),a+=r);return a}function Js(){for(var s,t,r=0,a="",i=arguments.length;r<i;r++)(s=arguments[r])&&(t=qn(s))&&(a&&(a+=" "),a+=t);return a}function fi(s){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=s:r.appendChild(document.createTextNode(s))}fi(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var At=s=>typeof s=="number"&&!isNaN(s),st=s=>typeof s=="string",Ls=s=>typeof s=="function",ji=s=>st(s)||At(s),zr=s=>st(s)||Ls(s)?s:null,bi=(s,t)=>s===!1||At(s)&&s>0?s:t,Pr=s=>S.isValidElement(s)||st(s)||Ls(s)||At(s);function yi(s,t,r=300){let{scrollHeight:a,style:i}=s;requestAnimationFrame(()=>{i.minHeight="initial",i.height=a+"px",i.transition=`all ${r}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,r)})})}function vi({enter:s,exit:t,appendPosition:r=!1,collapse:a=!0,collapseDuration:i=300}){return function({children:l,position:o,preventExitTransition:c,done:d,nodeRef:g,isIn:P,playToast:T}){let R=r?`${s}--${o}`:s,j=r?`${t}--${o}`:t,p=S.useRef(0);return S.useLayoutEffect(()=>{let D=g.current,_=R.split(" "),v=w=>{w.target===g.current&&(T(),D.removeEventListener("animationend",v),D.removeEventListener("animationcancel",v),p.current===0&&w.type!=="animationcancel"&&D.classList.remove(..._))};D.classList.add(..._),D.addEventListener("animationend",v),D.addEventListener("animationcancel",v)},[]),S.useEffect(()=>{let D=g.current,_=()=>{D.removeEventListener("animationend",_),a?yi(D,d,i):d()};P||(c?_():(p.current=1,D.className+=` ${j}`,D.addEventListener("animationend",_)))},[P]),me.createElement(me.Fragment,null,l)}}function un(s,t){return{content:Hn(s.content,s.props),containerId:s.props.containerId,id:s.props.toastId,theme:s.props.theme,type:s.props.type,data:s.props.data||{},isLoading:s.props.isLoading,icon:s.props.icon,reason:s.removalReason,status:t}}function Hn(s,t,r=!1){return S.isValidElement(s)&&!st(s.type)?S.cloneElement(s,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):Ls(s)?s({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):s}function Si({closeToast:s,theme:t,ariaLabel:r="close"}){return me.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:a=>{a.stopPropagation(),s(!0)},"aria-label":r},me.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},me.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Ci({delay:s,isRunning:t,closeToast:r,type:a="default",hide:i,className:l,controlledProgress:o,progress:c,rtl:d,isIn:g,theme:P}){let T=i||o&&c===0,R={animationDuration:`${s}ms`,animationPlayState:t?"running":"paused"};o&&(R.transform=`scaleX(${c})`);let j=Js("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${P}`,`Toastify__progress-bar--${a}`,{"Toastify__progress-bar--rtl":d}),p=Ls(l)?l({rtl:d,type:a,defaultClassName:j}):Js(j,l),D={[o&&c>=1?"onTransitionEnd":"onAnimationEnd"]:o&&c<1?null:()=>{g&&r()}};return me.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":T},me.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${P} Toastify__progress-bar--${a}`}),me.createElement("div",{role:"progressbar","aria-hidden":T?"true":"false","aria-label":"notification timer",className:p,style:R,...D}))}var wi=1,Un=()=>`${wi++}`;function zi(s,t,r){let a=1,i=0,l=[],o=[],c=t,d=new Map,g=new Set,P=w=>(g.add(w),()=>g.delete(w)),T=()=>{o=Array.from(d.values()),g.forEach(w=>w())},R=({containerId:w,toastId:E,updateId:k})=>{let M=w?w!==s:s!==1,L=d.has(E)&&k==null;return M||L},j=(w,E)=>{d.forEach(k=>{var M;(E==null||E===k.props.toastId)&&((M=k.toggle)==null||M.call(k,w))})},p=w=>{var E,k;(k=(E=w.props)==null?void 0:E.onClose)==null||k.call(E,w.removalReason),w.isActive=!1},D=w=>{if(w==null)d.forEach(p);else{let E=d.get(w);E&&p(E)}T()},_=()=>{i-=l.length,l=[]},v=w=>{var E,k;let{toastId:M,updateId:L}=w.props,m=L==null;w.staleId&&d.delete(w.staleId),w.isActive=!0,d.set(M,w),T(),r(un(w,m?"added":"updated")),m&&((k=(E=w.props).onOpen)==null||k.call(E))};return{id:s,props:c,observe:P,toggle:j,removeToast:D,toasts:d,clearQueue:_,buildToast:(w,E)=>{if(R(E))return;let{toastId:k,updateId:M,data:L,staleId:m,delay:B}=E,y=M==null;y&&i++;let re={...c,style:c.toastStyle,key:a++,...Object.fromEntries(Object.entries(E).filter(([V,Y])=>Y!=null)),toastId:k,updateId:M,data:L,isIn:!1,className:zr(E.className||c.toastClassName),progressClassName:zr(E.progressClassName||c.progressClassName),autoClose:E.isLoading?!1:bi(E.autoClose,c.autoClose),closeToast(V){d.get(k).removalReason=V,D(k)},deleteToast(){let V=d.get(k);if(V!=null){if(r(un(V,"removed")),d.delete(k),i--,i<0&&(i=0),l.length>0){v(l.shift());return}T()}}};re.closeButton=c.closeButton,E.closeButton===!1||Pr(E.closeButton)?re.closeButton=E.closeButton:E.closeButton===!0&&(re.closeButton=Pr(c.closeButton)?c.closeButton:!0);let x={content:w,props:re,staleId:m};c.limit&&c.limit>0&&i>c.limit&&y?l.push(x):At(B)?setTimeout(()=>{v(x)},B):v(x)},setProps(w){c=w},setToggle:(w,E)=>{let k=d.get(w);k&&(k.toggle=E)},isToastActive:w=>{var E;return(E=d.get(w))==null?void 0:E.isActive},getSnapshot:()=>o}}var ms=new Map,Ct=[],Ar=new Set,Pi=s=>Ar.forEach(t=>t(s)),Gn=()=>ms.size>0;function Ai(){Ct.forEach(s=>Xn(s.content,s.options)),Ct=[]}var Ei=(s,{containerId:t})=>{var r;return(r=ms.get(t||1))==null?void 0:r.toasts.get(s)};function Yn(s,t){var r;if(t)return!!((r=ms.get(t))!=null&&r.isToastActive(s));let a=!1;return ms.forEach(i=>{i.isToastActive(s)&&(a=!0)}),a}function Ti(s){if(!Gn()){Ct=Ct.filter(t=>s!=null&&t.options.toastId!==s);return}if(s==null||ji(s))ms.forEach(t=>{t.removeToast(s)});else if(s&&("containerId"in s||"id"in s)){let t=ms.get(s.containerId);t?t.removeToast(s.id):ms.forEach(r=>{r.removeToast(s.id)})}}var Di=(s={})=>{ms.forEach(t=>{t.props.limit&&(!s.containerId||t.id===s.containerId)&&t.clearQueue()})};function Xn(s,t){Pr(s)&&(Gn()||Ct.push({content:s,options:t}),ms.forEach(r=>{r.buildToast(s,t)}))}function Ii(s){var t;(t=ms.get(s.containerId||1))==null||t.setToggle(s.id,s.fn)}function Qn(s,t){ms.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(s,t==null?void 0:t.id)})}function _i(s){let t=s.containerId||1;return{subscribe(r){let a=zi(t,s,Pi);ms.set(t,a);let i=a.observe(r);return Ai(),()=>{i(),ms.delete(t)}},setProps(r){var a;(a=ms.get(t))==null||a.setProps(r)},getSnapshot(){var r;return(r=ms.get(t))==null?void 0:r.getSnapshot()}}}function ki(s){return Ar.add(s),()=>{Ar.delete(s)}}function Ni(s){return s&&(st(s.toastId)||At(s.toastId))?s.toastId:Un()}function Et(s,t){return Xn(s,t),t.toastId}function Xt(s,t){return{...t,type:t&&t.type||s,toastId:Ni(t)}}function Qt(s){return(t,r)=>Et(t,Xt(s,r))}function ke(s,t){return Et(s,Xt("default",t))}ke.loading=(s,t)=>Et(s,Xt("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function Ri(s,{pending:t,error:r,success:a},i){let l;t&&(l=st(t)?ke.loading(t,i):ke.loading(t.render,{...i,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(g,P,T)=>{if(P==null){ke.dismiss(l);return}let R={type:g,...o,...i,data:T},j=st(P)?{render:P}:P;return l?ke.update(l,{...R,...j}):ke(j.render,{...R,...j}),T},d=Ls(s)?s():s;return d.then(g=>c("success",a,g)).catch(g=>c("error",r,g)),d}ke.promise=Ri;ke.success=Qt("success");ke.info=Qt("info");ke.error=Qt("error");ke.warning=Qt("warning");ke.warn=ke.warning;ke.dark=(s,t)=>Et(s,Xt("default",{theme:"dark",...t}));function Oi(s){Ti(s)}ke.dismiss=Oi;ke.clearWaitingQueue=Di;ke.isActive=Yn;ke.update=(s,t={})=>{let r=Ei(s,t);if(r){let{props:a,content:i}=r,l={delay:100,...a,...t,toastId:t.toastId||s,updateId:Un()};l.toastId!==s&&(l.staleId=s);let o=l.render||i;delete l.render,Et(o,l)}};ke.done=s=>{ke.update(s,{progress:1})};ke.onChange=ki;ke.play=s=>Qn(!0,s);ke.pause=s=>Qn(!1,s);function Li(s){var t;let{subscribe:r,getSnapshot:a,setProps:i}=S.useRef(_i(s)).current;i(s);let l=(t=S.useSyncExternalStore(r,a,a))==null?void 0:t.slice();function o(c){if(!l)return[];let d=new Map;return s.newestOnTop&&l.reverse(),l.forEach(g=>{let{position:P}=g.props;d.has(P)||d.set(P,[]),d.get(P).push(g)}),Array.from(d,g=>c(g[0],g[1]))}return{getToastToRender:o,isToastActive:Yn,count:l==null?void 0:l.length}}function Fi(s){let[t,r]=S.useState(!1),[a,i]=S.useState(!1),l=S.useRef(null),o=S.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:d,closeToast:g,onClick:P,closeOnClick:T}=s;Ii({id:s.toastId,containerId:s.containerId,fn:r}),S.useEffect(()=>{if(s.pauseOnFocusLoss)return R(),()=>{j()}},[s.pauseOnFocusLoss]);function R(){document.hasFocus()||v(),window.addEventListener("focus",_),window.addEventListener("blur",v)}function j(){window.removeEventListener("focus",_),window.removeEventListener("blur",v)}function p(m){if(s.draggable===!0||s.draggable===m.pointerType){w();let B=l.current;o.canCloseOnClick=!0,o.canDrag=!0,B.style.transition="none",s.draggableDirection==="x"?(o.start=m.clientX,o.removalDistance=B.offsetWidth*(s.draggablePercent/100)):(o.start=m.clientY,o.removalDistance=B.offsetHeight*(s.draggablePercent===80?s.draggablePercent*1.5:s.draggablePercent)/100)}}function D(m){let{top:B,bottom:y,left:re,right:x}=l.current.getBoundingClientRect();m.nativeEvent.type!=="touchend"&&s.pauseOnHover&&m.clientX>=re&&m.clientX<=x&&m.clientY>=B&&m.clientY<=y?v():_()}function _(){r(!0)}function v(){r(!1)}function w(){o.didMove=!1,document.addEventListener("pointermove",k),document.addEventListener("pointerup",M)}function E(){document.removeEventListener("pointermove",k),document.removeEventListener("pointerup",M)}function k(m){let B=l.current;if(o.canDrag&&B){o.didMove=!0,t&&v(),s.draggableDirection==="x"?o.delta=m.clientX-o.start:o.delta=m.clientY-o.start,o.start!==m.clientX&&(o.canCloseOnClick=!1);let y=s.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;B.style.transform=`translate3d(${y},0)`,B.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function M(){E();let m=l.current;if(o.canDrag&&o.didMove&&m){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),s.closeToast(!0),s.collapseAll();return}m.style.transition="transform 0.2s, opacity 0.2s",m.style.removeProperty("transform"),m.style.removeProperty("opacity")}}let L={onPointerDown:p,onPointerUp:D};return c&&d&&(L.onMouseEnter=v,s.stacked||(L.onMouseLeave=_)),T&&(L.onClick=m=>{P&&P(m),o.canCloseOnClick&&g(!0)}),{playToast:_,pauseToast:v,isRunning:t,preventExitTransition:a,toastRef:l,eventHandlers:L}}var Wi=typeof window<"u"?S.useLayoutEffect:S.useEffect,Jt=({theme:s,type:t,isLoading:r,...a})=>me.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:s==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...a});function Mi(s){return me.createElement(Jt,{...s},me.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function $i(s){return me.createElement(Jt,{...s},me.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Bi(s){return me.createElement(Jt,{...s},me.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Vi(s){return me.createElement(Jt,{...s},me.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function qi(){return me.createElement("div",{className:"Toastify__spinner"})}var Er={info:$i,warning:Mi,success:Bi,error:Vi,spinner:qi},Hi=s=>s in Er;function Ui({theme:s,type:t,isLoading:r,icon:a}){let i=null,l={theme:s,type:t};return a===!1||(Ls(a)?i=a({...l,isLoading:r}):S.isValidElement(a)?i=S.cloneElement(a,l):r?i=Er.spinner():Hi(t)&&(i=Er[t](l))),i}var Gi=s=>{let{isRunning:t,preventExitTransition:r,toastRef:a,eventHandlers:i,playToast:l}=Fi(s),{closeButton:o,children:c,autoClose:d,onClick:g,type:P,hideProgressBar:T,closeToast:R,transition:j,position:p,className:D,style:_,progressClassName:v,updateId:w,role:E,progress:k,rtl:M,toastId:L,deleteToast:m,isIn:B,isLoading:y,closeOnClick:re,theme:x,ariaLabel:V}=s,Y=Js("Toastify__toast",`Toastify__toast-theme--${x}`,`Toastify__toast--${P}`,{"Toastify__toast--rtl":M},{"Toastify__toast--close-on-click":re}),ae=Ls(D)?D({rtl:M,position:p,type:P,defaultClassName:Y}):Js(Y,D),Ce=Ui(s),ie=!!k||!d,ce={closeToast:R,type:P,theme:x},Ne=null;return o===!1||(Ls(o)?Ne=o(ce):S.isValidElement(o)?Ne=S.cloneElement(o,ce):Ne=Si(ce)),me.createElement(j,{isIn:B,done:m,position:p,preventExitTransition:r,nodeRef:a,playToast:l},me.createElement("div",{id:L,tabIndex:0,onClick:g,"data-in":B,className:ae,...i,style:_,ref:a,...B&&{role:E,"aria-label":V}},Ce!=null&&me.createElement("div",{className:Js("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!y})},Ce),Hn(c,s,!t),Ne,!s.customProgressBar&&me.createElement(Ci,{...w&&!ie?{key:`p-${w}`}:{},rtl:M,theme:x,delay:d,isRunning:t,isIn:B,closeToast:R,hide:T,type:P,className:v,controlledProgress:ie,progress:k||0})))},Yi=(s,t=!1)=>({enter:`Toastify--animate Toastify__${s}-enter`,exit:`Toastify--animate Toastify__${s}-exit`,appendPosition:t}),Xi=vi(Yi("bounce",!0)),Qi={position:"top-right",transition:Xi,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:s=>s.altKey&&s.code==="KeyT"};function Ji(s){let t={...Qi,...s},r=s.stacked,[a,i]=S.useState(!0),l=S.useRef(null),{getToastToRender:o,isToastActive:c,count:d}=Li(t),{className:g,style:P,rtl:T,containerId:R,hotKeys:j}=t;function p(_){let v=Js("Toastify__toast-container",`Toastify__toast-container--${_}`,{"Toastify__toast-container--rtl":T});return Ls(g)?g({position:_,rtl:T,defaultClassName:v}):Js(v,zr(g))}function D(){r&&(i(!0),ke.play())}return Wi(()=>{var _;if(r){let v=l.current.querySelectorAll('[data-in="true"]'),w=12,E=(_=t.position)==null?void 0:_.includes("top"),k=0,M=0;Array.from(v).reverse().forEach((L,m)=>{let B=L;B.classList.add("Toastify__toast--stacked"),m>0&&(B.dataset.collapsed=`${a}`),B.dataset.pos||(B.dataset.pos=E?"top":"bot");let y=k*(a?.2:1)+(a?0:w*m);B.style.setProperty("--y",`${E?y:y*-1}px`),B.style.setProperty("--g",`${w}`),B.style.setProperty("--s",`${1-(a?M:0)}`),k+=B.offsetHeight,M+=.025})}},[a,d,r]),S.useEffect(()=>{function _(v){var w;let E=l.current;j(v)&&((w=E.querySelector('[tabIndex="0"]'))==null||w.focus(),i(!1),ke.pause()),v.key==="Escape"&&(document.activeElement===E||E!=null&&E.contains(document.activeElement))&&(i(!0),ke.play())}return document.addEventListener("keydown",_),()=>{document.removeEventListener("keydown",_)}},[j]),me.createElement("section",{ref:l,className:"Toastify",id:R,onMouseEnter:()=>{r&&(i(!1),ke.pause())},onMouseLeave:D,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((_,v)=>{let w=v.length?{...P}:{...P,pointerEvents:"none"};return me.createElement("div",{tabIndex:-1,className:p(_),"data-stacked":r,style:w,key:`c-${_}`},v.map(({content:E,props:k})=>me.createElement(Gi,{...k,stacked:r,collapseAll:D,isIn:c(k.toastId,k.containerId),key:`t-${k.key}`},E)))}))}const G=os.create({baseURL:"https://aquayara.onrender.com",headers:{"Content-Type":"application/json"},withCredentials:!0});G.interceptors.request.use(s=>{const t=localStorage.getItem("token");return console.log("ðŸŒ URL completa:",s.baseURL+s.url),console.log("ðŸŒ BaseURL configurado:",s.baseURL),console.log("ðŸŒ URL relativa:",s.url),console.log("ðŸ”‘ Token presente:",t?"SÃ­":"No"),console.log("ðŸ”‘ Token completo:",t),t?(s.headers.Authorization=`Bearer ${t}`,console.log("ðŸ”‘ Token enviado para:",s.url),console.log("ðŸ”‘ Header configurado:",s.headers.Authorization)):console.log("âŒ No hay token disponible"),s},s=>(console.error("âŒ Error en interceptor de request:",s),Promise.reject(s)));G.interceptors.response.use(s=>(console.log("ðŸ“¦ Respuesta recibida de:",s.config.url),console.log("ðŸ“¦ Status:",s.status),console.log("ðŸ“¦ Content-Type:",s.headers["content-type"]),s),async s=>{var a,i,l;const t=s.config,r=localStorage.getItem("token");if(console.log("âŒ Error en respuesta:",(a=s.response)==null?void 0:a.status,(i=s.config)==null?void 0:i.url),s.response&&s.response.status===401&&!t._retry&&r&&!((l=t.url)!=null&&l.includes("/auth/profile"))){console.log("ðŸ”„ Token expirado, se reintentarÃ¡ automÃ¡ticamente"),t._retry=!0;try{const o=await os.post("https://aquayara.onrender.com/api/auth/refresh",{},{headers:{Authorization:`Bearer ${r}`}});if(o.data.success){const c=o.data.token;return localStorage.setItem("token",c),t.headers.Authorization=`Bearer ${c}`,console.log("âœ… Token renovado exitosamente"),G(t)}}catch(o){return console.error("âŒ Error al renovar token:",o),localStorage.removeItem("token"),window.location.href="/login",Promise.reject(o)}}return s.response&&s.response.status===404&&console.log("Recurso no encontrado:",s.response.data),Promise.reject(s)});const Os=ft((s,t)=>({token:localStorage.getItem("token")||null,user:null,loading:!1,error:null,login:async(r,a)=>{var i,l,o,c;s({loading:!0,error:null});try{let d;try{d=await G.post("/api/delivery/login",{username:r,password:a})}catch{d=await G.post("/api/auth/login",{username:r,password:a})}const{token:g,user:P}=d.data;localStorage.setItem("token",g),G.defaults.headers.common.Authorization=`Bearer ${g}`;try{const T=await G.get("/api/auth/profile");s({token:g,user:T.data,loading:!1})}catch{s({token:g,user:P,loading:!1})}return{success:!0}}catch(d){return s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al iniciar sesiÃ³n",loading:!1}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al iniciar sesiÃ³n"}}},register:async r=>{var a,i,l,o;s({loading:!0,error:null});try{const c=await G.post("/api/auth/register",r);return s({loading:!1}),{success:!0,data:c.data}}catch(c){return s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al registrar usuario",loading:!1}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al registrar usuario"}}},logout:()=>{localStorage.removeItem("token"),delete G.defaults.headers.common.Authorization,s({token:null,user:null})},checkAuth:async()=>{var a,i,l;const r=localStorage.getItem("token");if(console.log("ðŸ” Token encontrado en localStorage:",!!r),!r)return console.log("âŒ No hay token, usuario no autenticado"),s({token:null,user:null}),!1;try{console.log("ðŸ”„ Verificando token con el servidor..."),G.defaults.headers.common.Authorization=`Bearer ${r}`;const o=await G.get("/api/auth/profile");return console.log("âœ… Token vÃ¡lido, usuario autenticado:",o.data),s({user:o.data,token:r}),!0}catch(o){return console.error("âŒ Token invÃ¡lido o error del servidor:",o),console.error("âŒ Status:",(a=o.response)==null?void 0:a.status),console.error("âŒ Message:",(l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message),localStorage.removeItem("token"),delete G.defaults.headers.common.Authorization,s({token:null,user:null}),!1}},clearError:()=>s({error:null})})),_t=new Date("2025-09-24"),hn=2,Br=()=>{const[s,t]=S.useState(!1),[r,a]=S.useState(0),[i,l]=S.useState(!0);return S.useEffect(()=>{const o=()=>{try{const d=new Date,g=new Date(_t);if(g.setMonth(g.getMonth()+hn),console.log("ðŸ” Verificando expiraciÃ³n del sistema:"),console.log("ðŸ“… Fecha de inicio:",_t.toLocaleDateString()),console.log("â° Fecha de expiraciÃ³n:",g.toLocaleDateString()),console.log("ðŸ“… Fecha actual:",d.toLocaleDateString()),d>=g)console.log("âŒ Sistema expirado"),t(!0),a(0);else{const P=g.getTime()-d.getTime(),T=Math.ceil(P/(1e3*3600*24));console.log("âœ… Sistema activo, dÃ­as restantes:",T),t(!1),a(T)}}catch(d){console.error("Error verificando expiraciÃ³n:",d),t(!1),a(999)}finally{l(!1)}};o();const c=setInterval(o,60*60*1e3);return()=>clearInterval(c)},[]),{isExpired:s,daysRemaining:r,isLoading:i,expiryDate:new Date(new Date(_t).setMonth(new Date(_t).getMonth()+hn))}};var Jn={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},pn=me.createContext&&me.createContext(Jn),Ki=["attr","size","title"];function Zi(s,t){if(s==null)return{};var r=eo(s,t),a,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(i=0;i<l.length;i++)a=l[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function eo(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function Bt(){return Bt=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Bt.apply(this,arguments)}function xn(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),r.push.apply(r,a)}return r}function Vt(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xn(Object(r),!0).forEach(function(a){so(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function so(s,t,r){return t=to(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function to(s){var t=ro(s,"string");return typeof t=="symbol"?t:t+""}function ro(s,t){if(typeof s!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function Kn(s){return s&&s.map((t,r)=>me.createElement(t.tag,Vt({key:r},t.attr),Kn(t.child)))}function xe(s){return t=>me.createElement(no,Bt({attr:Vt({},s.attr)},t),Kn(s.child))}function no(s){var t=r=>{var{attr:a,size:i,title:l}=s,o=Zi(s,Ki),c=i||r.size||"1em",d;return r.className&&(d=r.className),s.className&&(d=(d?d+" ":"")+s.className),me.createElement("svg",Bt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,o,{className:d,style:Vt(Vt({color:s.color||r.color},r.style),s.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&me.createElement("title",null,l),s.children)};return pn!==void 0?me.createElement(pn.Consumer,null,r=>t(r)):t(Jn)}function ct(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(s)}function hr(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(s)}function ks(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(s)}function Ps(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(s)}function pr(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(s)}function gn(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(s)}function Vs(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(s)}function ao(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.61 233.32L278.68 9.39c-12.52-12.52-32.83-12.52-45.36 0L9.39 233.32c-12.52 12.53-12.52 32.83 0 45.36l223.93 223.93c12.52 12.53 32.83 12.53 45.36 0l223.93-223.93c12.52-12.53 12.52-32.83 0-45.36zm-100.98 12.56l-84.21 77.73c-5.12 4.73-13.43 1.1-13.43-5.88V264h-96v64c0 4.42-3.58 8-8 8h-32c-4.42 0-8-3.58-8-8v-80c0-17.67 14.33-32 32-32h112v-53.73c0-6.97 8.3-10.61 13.43-5.88l84.21 77.73c3.43 3.17 3.43 8.59 0 11.76z"},child:[]}]})(s)}function Vr(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(s)}function Tr(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(s)}function io(s){return xe({attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z"},child:[]}]})(s)}function qr(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(s)}function Zn(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(s)}function ea(s){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(s)}function qs(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(s)}function sa(s){return xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(s)}function oo(s){return xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm192.81 248H304c8.84 0 16 7.16 16 16s-7.16 16-16 16h-47.19c-16.45 0-31.27-9.14-38.64-23.86-2.95-5.92-8.09-6.52-10.17-6.52s-7.22.59-10.02 6.19l-7.67 15.34a15.986 15.986 0 0 1-14.31 8.84c-.38 0-.75-.02-1.14-.05-6.45-.45-12-4.75-14.03-10.89L144 354.59l-10.61 31.88c-5.89 17.66-22.38 29.53-41 29.53H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h12.39c4.83 0 9.11-3.08 10.64-7.66l18.19-54.64c3.3-9.81 12.44-16.41 22.78-16.41s19.48 6.59 22.77 16.41l13.88 41.64c19.77-16.19 54.05-9.7 66 14.16 2.02 4.06 5.96 6.5 10.16 6.5zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(s)}function Hr(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h160V320H32v128zm256 32h160c17.7 0 32-14.3 32-32V320H288v160zm192-320h-42.1c6.2-12.1 10.1-25.5 10.1-40 0-48.5-39.5-88-88-88-41.6 0-68.5 21.3-103 68.3-34.5-47-61.4-68.3-103-68.3-48.5 0-88 39.5-88 88 0 14.5 3.8 27.9 10.1 40H32c-17.7 0-32 14.3-32 32v80c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-80c0-17.7-14.3-32-32-32zm-326.1 0c-22.1 0-40-17.9-40-40s17.9-40 40-40c19.9 0 34.6 3.3 86.1 80h-86.1zm206.1 0h-86.1c51.4-76.5 65.7-80 86.1-80 22.1 0 40 17.9 40 40s-17.9 40-40 40z"},child:[]}]})(s)}function qt(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(s)}function ta(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 32H48C21.5 32 0 53.5 0 80v16h576V80c0-26.5-21.5-48-48-48zM0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V128H0v304zm352-232c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zM176 192c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zM67.1 396.2C75.5 370.5 99.6 352 128 352h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.9-5.2 19.8-15.6 19.8H82.7c-10.4 0-18.8-10-15.6-19.8z"},child:[]}]})(s)}function lo(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(s)}function co(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(s)}function uo(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(s)}function wt(s){return xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(s)}function bs(s){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(s)}function Hs(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(s)}function ho(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(s)}function ut(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(s)}function po(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(s)}function Ks(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"},child:[]}]})(s)}function xo(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(s)}function ra(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(s)}function xr(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(s)}function mn(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(s)}function go(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(s)}function mo(s){return xe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(s)}function fn(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(s)}function Cs(s){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"},child:[]}]})(s)}function fo(s){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(s)}function Us(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(s)}function na(s){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(s)}const jo="/assets/logo_aquayara2-iFhxOv8G.jpeg",dt=({size:s="md",showText:t=!0,variant:r="horizontal",color:a="blue.500",textColor:i="blue.500",taglineColor:l="teal.400"})=>{const o={xs:{logo:"20px",text:"xs",tagline:"xs"},sm:{logo:"30px",text:"sm",tagline:"xs"},md:{logo:"40px",text:"md",tagline:"sm"},lg:{logo:"60px",text:"lg",tagline:"md"},xl:{logo:"80px",text:"xl",tagline:"lg"}},c=o[s]||o.md,d=()=>e.jsx(Rt,{src:jo,alt:"AquaYara Logo",w:c.logo,h:c.logo,objectFit:"contain",borderRadius:"md",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"});return t?r==="vertical"?e.jsxs(u,{spacing:2,align:"center",children:[e.jsx(d,{}),e.jsxs(u,{spacing:0,align:"center",children:[e.jsxs(n,{fontSize:c.text,fontWeight:"bold",color:i,lineHeight:"1",children:["Aqua",e.jsx("span",{style:{color:"#38B2AC"},children:"Yara"})]}),e.jsx(n,{fontSize:c.tagline,color:l,fontStyle:"italic",lineHeight:"1",children:"Agua que encanta"})]})]}):e.jsxs(h,{spacing:3,align:"center",children:[e.jsx(d,{}),e.jsxs(u,{spacing:0,align:"start",children:[e.jsxs(n,{fontSize:c.text,fontWeight:"bold",color:i,lineHeight:"1",children:["Aqua",e.jsx("span",{style:{color:"#38B2AC"},children:"Yara"})]}),e.jsx(n,{fontSize:c.tagline,color:l,fontStyle:"italic",lineHeight:"1",children:"Agua que encanta"})]})]}):e.jsx(d,{})},Ur=()=>{const s=We("white","gray.800"),t=We("red.200","red.600"),r=We("gray.700","gray.200");return e.jsx(Lr,{maxW:"md",centerContent:!0,children:e.jsxs(u,{spacing:6,py:8,children:[e.jsx(dt,{size:"lg",variant:"horizontal",color:"red.500",textColor:"red.600",taglineColor:"red.400"}),e.jsx(F,{bg:s,borderColor:t,borderWidth:"2px",boxShadow:"xl",borderRadius:"xl",w:"100%",children:e.jsx(W,{p:8,children:e.jsxs(u,{spacing:6,textAlign:"center",children:[e.jsx(N,{display:"flex",alignItems:"center",justifyContent:"center",w:"80px",h:"80px",borderRadius:"full",bg:"red.100",color:"red.500",children:e.jsx(le,{as:uo,boxSize:10})}),e.jsxs(u,{spacing:2,children:[e.jsx(K,{size:"lg",color:"red.500",children:"Sistema Expirado"}),e.jsxs(ve,{colorScheme:"red",variant:"solid",fontSize:"sm",px:3,py:1,children:[e.jsx(le,{as:Zn,mr:1}),"Acceso Restringido"]})]}),e.jsxs(u,{spacing:4,children:[e.jsx(n,{fontSize:"md",color:r,lineHeight:"1.6",children:"El perÃ­odo de prueba del sistema ha expirado."}),e.jsx(n,{fontSize:"sm",color:"gray.500",lineHeight:"1.5",children:"Para continuar utilizando este sistema o resolver cualquier problema tÃ©cnico, contacta con el programador."})]}),e.jsx(hs,{}),e.jsxs(u,{spacing:4,w:"100%",children:[e.jsx(n,{fontSize:"sm",fontWeight:"bold",color:"gray.600",children:"ðŸ“ž Contacto del Programador"}),e.jsx(F,{bg:"blue.50",borderColor:"blue.200",w:"100%",children:e.jsx(W,{p:4,children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",color:"blue.600",children:"987654321"}),e.jsx(n,{fontSize:"sm",color:"blue.500",children:"Disponible para soporte tÃ©cnico y renovaciÃ³n del sistema"})]})})}),e.jsx(O,{colorScheme:"blue",size:"lg",w:"100%",leftIcon:e.jsx(le,{as:Hs}),onClick:()=>{window.open("https://wa.me/51987654321?text=Hola, necesito soporte tÃ©cnico para el sistema AquaYara","_blank")},_hover:{transform:"translateY(-2px)",boxShadow:"lg"},transition:"all 0.2s",children:"Contactar por WhatsApp"})]}),e.jsxs(u,{spacing:2,pt:4,children:[e.jsx(n,{fontSize:"xs",color:"gray.400",textAlign:"center",children:"Sistema desarrollado por: Programador de Software"}),e.jsx(n,{fontSize:"xs",color:"gray.400",children:"Â© 2024 AquaYara - Todos los derechos reservados"})]})]})})})]})})},Is=({children:s})=>{const{isExpired:t,isLoading:r}=Br();return r?null:t?e.jsx(Ur,{}):s},bo=({children:s})=>{const{isExpired:t,isLoading:r}=Br();return r?null:t?e.jsx(Ur,{}):s},yo=({type:s="404",title:t="PÃ¡gina no encontrada",description:r="La pÃ¡gina que buscas no existe",showRetry:a=!0})=>{const i=Ys(),l=We("gray.50","gray.900"),o=We("gray.700","gray.200"),d=(()=>{switch(s){case"404":return{icon:"ðŸ¦•",title:"Â¡Ups! PÃ¡gina no encontrada",description:"La pÃ¡gina que buscas se ha perdido en el desierto digital",action:"Volver al inicio",color:"blue"};case"offline":return{icon:"ðŸ“¡",title:"Sin conexiÃ³n a internet",description:"Parece que te has desconectado del mundo digital",action:"Reintentar",color:"orange"};case"500":return{icon:"âš ï¸",title:"Error del servidor",description:"Algo saliÃ³ mal en nuestro lado",action:"Reintentar",color:"red"};default:return{icon:"âŒ",title:t,description:r,action:"Volver al inicio",color:"gray"}}})(),g=()=>{s==="offline"?window.location.reload():i("/")},P=()=>{i("/")};return e.jsx(N,{minH:"100vh",bg:l,display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(Lr,{maxW:"md",centerContent:!0,children:e.jsxs(u,{spacing:8,textAlign:"center",py:12,children:[e.jsx(N,{fontSize:"8xl",mb:4,children:d.icon}),e.jsx(K,{size:"xl",color:o,fontWeight:"bold",children:d.title}),e.jsx(n,{fontSize:"lg",color:"gray.500",maxW:"md",lineHeight:"1.6",children:d.description}),s==="404"&&e.jsxs(u,{spacing:2,children:[e.jsx(n,{fontSize:"6xl",fontWeight:"bold",color:"blue.500",children:"404"}),e.jsx(n,{fontSize:"sm",color:"gray.400",children:"ERROR"})]}),e.jsxs(u,{spacing:4,w:"full",maxW:"sm",children:[a&&e.jsx(O,{colorScheme:d.color,size:"lg",w:"full",leftIcon:e.jsx(le,{as:xo}),onClick:g,_hover:{transform:"translateY(-2px)",boxShadow:"lg"},transition:"all 0.2s",children:d.action}),e.jsx(O,{variant:"outline",size:"lg",w:"full",leftIcon:e.jsx(le,{as:qt}),onClick:P,_hover:{transform:"translateY(-2px)",boxShadow:"md"},transition:"all 0.2s",children:"Ir al inicio"})]}),e.jsxs(u,{spacing:2,pt:4,children:[e.jsx(n,{fontSize:"sm",color:"gray.400",children:"Si el problema persiste, contacta al administrador"}),e.jsxs(h,{spacing:4,fontSize:"xs",color:"gray.400",children:[e.jsx(n,{children:"â€¢ Verifica tu conexiÃ³n"}),e.jsx(n,{children:"â€¢ Intenta mÃ¡s tarde"}),e.jsx(n,{children:"â€¢ Contacta soporte"})]})]})]})})})};var Fe="-ms-",St="-moz-",we="-webkit-",aa="comm",Kt="rule",Gr="decl",vo="@import",ia="@keyframes",So="@layer",oa=Math.abs,Yr=String.fromCharCode,Dr=Object.assign;function Co(s,t){return cs(s,0)^45?(((t<<2^cs(s,0))<<2^cs(s,1))<<2^cs(s,2))<<2^cs(s,3):0}function la(s){return s.trim()}function Rs(s,t){return(s=t.exec(s))?s[0]:s}function ge(s,t,r){return s.replace(t,r)}function Ot(s,t,r){return s.indexOf(t,r)}function cs(s,t){return s.charCodeAt(t)|0}function ht(s,t,r){return s.slice(t,r)}function _s(s){return s.length}function ca(s){return s.length}function vt(s,t){return t.push(s),s}function wo(s,t){return s.map(t).join("")}function jn(s,t){return s.filter(function(r){return!Rs(r,t)})}var Zt=1,pt=1,da=0,ws=0,ns=0,jt="";function er(s,t,r,a,i,l,o,c){return{value:s,root:t,parent:r,type:a,props:i,children:l,line:Zt,column:pt,length:o,return:"",siblings:c}}function Bs(s,t){return Dr(er("",null,null,"",null,null,0,s.siblings),s,{length:-s.length},t)}function it(s){for(;s.root;)s=Bs(s.root,{children:[s]});vt(s,s.siblings)}function zo(){return ns}function Po(){return ns=ws>0?cs(jt,--ws):0,pt--,ns===10&&(pt=1,Zt--),ns}function Es(){return ns=ws<da?cs(jt,ws++):0,pt++,ns===10&&(pt=1,Zt++),ns}function Zs(){return cs(jt,ws)}function Lt(){return ws}function sr(s,t){return ht(jt,s,t)}function Ir(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ao(s){return Zt=pt=1,da=_s(jt=s),ws=0,[]}function Eo(s){return jt="",s}function gr(s){return la(sr(ws-1,_r(s===91?s+2:s===40?s+1:s)))}function To(s){for(;(ns=Zs())&&ns<33;)Es();return Ir(s)>2||Ir(ns)>3?"":" "}function Do(s,t){for(;--t&&Es()&&!(ns<48||ns>102||ns>57&&ns<65||ns>70&&ns<97););return sr(s,Lt()+(t<6&&Zs()==32&&Es()==32))}function _r(s){for(;Es();)switch(ns){case s:return ws;case 34:case 39:s!==34&&s!==39&&_r(ns);break;case 40:s===41&&_r(s);break;case 92:Es();break}return ws}function Io(s,t){for(;Es()&&s+ns!==57;)if(s+ns===84&&Zs()===47)break;return"/*"+sr(t,ws-1)+"*"+Yr(s===47?s:Es())}function _o(s){for(;!Ir(Zs());)Es();return sr(s,ws)}function ko(s){return Eo(Ft("",null,null,null,[""],s=Ao(s),0,[0],s))}function Ft(s,t,r,a,i,l,o,c,d){for(var g=0,P=0,T=o,R=0,j=0,p=0,D=1,_=1,v=1,w=0,E="",k=i,M=l,L=a,m=E;_;)switch(p=w,w=Es()){case 40:if(p!=108&&cs(m,T-1)==58){Ot(m+=ge(gr(w),"&","&\f"),"&\f",oa(g?c[g-1]:0))!=-1&&(v=-1);break}case 34:case 39:case 91:m+=gr(w);break;case 9:case 10:case 13:case 32:m+=To(p);break;case 92:m+=Do(Lt()-1,7);continue;case 47:switch(Zs()){case 42:case 47:vt(No(Io(Es(),Lt()),t,r,d),d);break;default:m+="/"}break;case 123*D:c[g++]=_s(m)*v;case 125*D:case 59:case 0:switch(w){case 0:case 125:_=0;case 59+P:v==-1&&(m=ge(m,/\f/g,"")),j>0&&_s(m)-T&&vt(j>32?yn(m+";",a,r,T-1,d):yn(ge(m," ","")+";",a,r,T-2,d),d);break;case 59:m+=";";default:if(vt(L=bn(m,t,r,g,P,i,c,E,k=[],M=[],T,l),l),w===123)if(P===0)Ft(m,t,L,L,k,l,T,c,M);else switch(R===99&&cs(m,3)===110?100:R){case 100:case 108:case 109:case 115:Ft(s,L,L,a&&vt(bn(s,L,L,0,0,i,c,E,i,k=[],T,M),M),i,M,T,c,a?k:M);break;default:Ft(m,L,L,L,[""],M,0,c,M)}}g=P=j=0,D=v=1,E=m="",T=o;break;case 58:T=1+_s(m),j=p;default:if(D<1){if(w==123)--D;else if(w==125&&D++==0&&Po()==125)continue}switch(m+=Yr(w),w*D){case 38:v=P>0?1:(m+="\f",-1);break;case 44:c[g++]=(_s(m)-1)*v,v=1;break;case 64:Zs()===45&&(m+=gr(Es())),R=Zs(),P=T=_s(E=m+=_o(Lt())),w++;break;case 45:p===45&&_s(m)==2&&(D=0)}}return l}function bn(s,t,r,a,i,l,o,c,d,g,P,T){for(var R=i-1,j=i===0?l:[""],p=ca(j),D=0,_=0,v=0;D<a;++D)for(var w=0,E=ht(s,R+1,R=oa(_=o[D])),k=s;w<p;++w)(k=la(_>0?j[w]+" "+E:ge(E,/&\f/g,j[w])))&&(d[v++]=k);return er(s,t,r,i===0?Kt:c,d,g,P,T)}function No(s,t,r,a){return er(s,t,r,aa,Yr(zo()),ht(s,2,-2),0,a)}function yn(s,t,r,a,i){return er(s,t,r,Gr,ht(s,0,a),ht(s,a+1,-1),a,i)}function ua(s,t,r){switch(Co(s,t)){case 5103:return we+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return we+s+s;case 4789:return St+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return we+s+St+s+Fe+s+s;case 5936:switch(cs(s,t+11)){case 114:return we+s+Fe+ge(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return we+s+Fe+ge(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return we+s+Fe+ge(s,/[svh]\w+-[tblr]{2}/,"lr")+s}case 6828:case 4268:case 2903:return we+s+Fe+s+s;case 6165:return we+s+Fe+"flex-"+s+s;case 5187:return we+s+ge(s,/(\w+).+(:[^]+)/,we+"box-$1$2"+Fe+"flex-$1$2")+s;case 5443:return we+s+Fe+"flex-item-"+ge(s,/flex-|-self/g,"")+(Rs(s,/flex-|baseline/)?"":Fe+"grid-row-"+ge(s,/flex-|-self/g,""))+s;case 4675:return we+s+Fe+"flex-line-pack"+ge(s,/align-content|flex-|-self/g,"")+s;case 5548:return we+s+Fe+ge(s,"shrink","negative")+s;case 5292:return we+s+Fe+ge(s,"basis","preferred-size")+s;case 6060:return we+"box-"+ge(s,"-grow","")+we+s+Fe+ge(s,"grow","positive")+s;case 4554:return we+ge(s,/([^-])(transform)/g,"$1"+we+"$2")+s;case 6187:return ge(ge(ge(s,/(zoom-|grab)/,we+"$1"),/(image-set)/,we+"$1"),s,"")+s;case 5495:case 3959:return ge(s,/(image-set\([^]*)/,we+"$1$`$1");case 4968:return ge(ge(s,/(.+:)(flex-)?(.*)/,we+"box-pack:$3"+Fe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+we+s+s;case 4200:if(!Rs(s,/flex-|baseline/))return Fe+"grid-column-align"+ht(s,t)+s;break;case 2592:case 3360:return Fe+ge(s,"template-","")+s;case 4384:case 3616:return r&&r.some(function(a,i){return t=i,Rs(a.props,/grid-\w+-end/)})?~Ot(s+(r=r[t].value),"span",0)?s:Fe+ge(s,"-start","")+s+Fe+"grid-row-span:"+(~Ot(r,"span",0)?Rs(r,/\d+/):+Rs(r,/\d+/)-+Rs(s,/\d+/))+";":Fe+ge(s,"-start","")+s;case 4896:case 4128:return r&&r.some(function(a){return Rs(a.props,/grid-\w+-start/)})?s:Fe+ge(ge(s,"-end","-span"),"span ","")+s;case 4095:case 3583:case 4068:case 2532:return ge(s,/(.+)-inline(.+)/,we+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_s(s)-1-t>6)switch(cs(s,t+1)){case 109:if(cs(s,t+4)!==45)break;case 102:return ge(s,/(.+:)(.+)-([^]+)/,"$1"+we+"$2-$3$1"+St+(cs(s,t+3)==108?"$3":"$2-$3"))+s;case 115:return~Ot(s,"stretch",0)?ua(ge(s,"stretch","fill-available"),t,r)+s:s}break;case 5152:case 5920:return ge(s,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(a,i,l,o,c,d,g){return Fe+i+":"+l+g+(o?Fe+i+"-span:"+(c?d:+d-+l)+g:"")+s});case 4949:if(cs(s,t+6)===121)return ge(s,":",":"+we)+s;break;case 6444:switch(cs(s,cs(s,14)===45?18:11)){case 120:return ge(s,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+we+(cs(s,14)===45?"inline-":"")+"box$3$1"+we+"$2$3$1"+Fe+"$2box$3")+s;case 100:return ge(s,":",":"+Fe)+s}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ge(s,"scroll-","scroll-snap-")+s}return s}function Ht(s,t){for(var r="",a=0;a<s.length;a++)r+=t(s[a],a,s,t)||"";return r}function Ro(s,t,r,a){switch(s.type){case So:if(s.children.length)break;case vo:case Gr:return s.return=s.return||s.value;case aa:return"";case ia:return s.return=s.value+"{"+Ht(s.children,a)+"}";case Kt:if(!_s(s.value=s.props.join(",")))return""}return _s(r=Ht(s.children,a))?s.return=s.value+"{"+r+"}":""}function Oo(s){var t=ca(s);return function(r,a,i,l){for(var o="",c=0;c<t;c++)o+=s[c](r,a,i,l)||"";return o}}function Lo(s){return function(t){t.root||(t=t.return)&&s(t)}}function Fo(s,t,r,a){if(s.length>-1&&!s.return)switch(s.type){case Gr:s.return=ua(s.value,s.length,r);return;case ia:return Ht([Bs(s,{value:ge(s.value,"@","@"+we)})],a);case Kt:if(s.length)return wo(r=s.props,function(i){switch(Rs(i,a=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":it(Bs(s,{props:[ge(i,/:(read-\w+)/,":"+St+"$1")]})),it(Bs(s,{props:[i]})),Dr(s,{props:jn(r,a)});break;case"::placeholder":it(Bs(s,{props:[ge(i,/:(plac\w+)/,":"+we+"input-$1")]})),it(Bs(s,{props:[ge(i,/:(plac\w+)/,":"+St+"$1")]})),it(Bs(s,{props:[ge(i,/:(plac\w+)/,Fe+"input-$1")]})),it(Bs(s,{props:[i]})),Dr(s,{props:jn(r,a)});break}return""})}}var Wo={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},js={},xt=typeof process<"u"&&js!==void 0&&(js.REACT_APP_SC_ATTR||js.SC_ATTR)||"data-styled",ha="active",pa="data-styled-version",tr="6.1.19",Xr=`/*!sc*/
`,Ut=typeof window<"u"&&typeof document<"u",Mo=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&js!==void 0&&js.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&js.REACT_APP_SC_DISABLE_SPEEDY!==""?js.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&js.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&js!==void 0&&js.SC_DISABLE_SPEEDY!==void 0&&js.SC_DISABLE_SPEEDY!==""&&js.SC_DISABLE_SPEEDY!=="false"&&js.SC_DISABLE_SPEEDY),rr=Object.freeze([]),gt=Object.freeze({});function $o(s,t,r){return r===void 0&&(r=gt),s.theme!==r.theme&&s.theme||t||r.theme}var xa=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Bo=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Vo=/(^-|-$)/g;function vn(s){return s.replace(Bo,"-").replace(Vo,"")}var qo=/(a)(d)/gi,kt=52,Sn=function(s){return String.fromCharCode(s+(s>25?39:97))};function kr(s){var t,r="";for(t=Math.abs(s);t>kt;t=t/kt|0)r=Sn(t%kt)+r;return(Sn(t%kt)+r).replace(qo,"$1-$2")}var mr,ga=5381,ot=function(s,t){for(var r=t.length;r;)s=33*s^t.charCodeAt(--r);return s},ma=function(s){return ot(ga,s)};function Ho(s){return kr(ma(s)>>>0)}function Uo(s){return s.displayName||s.name||"Component"}function fr(s){return typeof s=="string"&&!0}var fa=typeof Symbol=="function"&&Symbol.for,ja=fa?Symbol.for("react.memo"):60115,Go=fa?Symbol.for("react.forward_ref"):60112,Yo={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Xo={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ba={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Qo=((mr={})[Go]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},mr[ja]=ba,mr);function Cn(s){return("type"in(t=s)&&t.type.$$typeof)===ja?ba:"$$typeof"in s?Qo[s.$$typeof]:Yo;var t}var Jo=Object.defineProperty,Ko=Object.getOwnPropertyNames,wn=Object.getOwnPropertySymbols,Zo=Object.getOwnPropertyDescriptor,el=Object.getPrototypeOf,zn=Object.prototype;function ya(s,t,r){if(typeof t!="string"){if(zn){var a=el(t);a&&a!==zn&&ya(s,a,r)}var i=Ko(t);wn&&(i=i.concat(wn(t)));for(var l=Cn(s),o=Cn(t),c=0;c<i.length;++c){var d=i[c];if(!(d in Xo||r&&r[d]||o&&d in o||l&&d in l)){var g=Zo(t,d);try{Jo(s,d,g)}catch{}}}}return s}function mt(s){return typeof s=="function"}function Qr(s){return typeof s=="object"&&"styledComponentId"in s}function Qs(s,t){return s&&t?"".concat(s," ").concat(t):s||t||""}function Pn(s,t){if(s.length===0)return"";for(var r=s[0],a=1;a<s.length;a++)r+=s[a];return r}function zt(s){return s!==null&&typeof s=="object"&&s.constructor.name===Object.name&&!("props"in s&&s.$$typeof)}function Nr(s,t,r){if(r===void 0&&(r=!1),!r&&!zt(s)&&!Array.isArray(s))return t;if(Array.isArray(t))for(var a=0;a<t.length;a++)s[a]=Nr(s[a],t[a]);else if(zt(t))for(var a in t)s[a]=Nr(s[a],t[a]);return s}function Jr(s,t){Object.defineProperty(s,"toString",{value:t})}function Tt(s){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(s," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var sl=function(){function s(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return s.prototype.indexOfGroup=function(t){for(var r=0,a=0;a<t;a++)r+=this.groupSizes[a];return r},s.prototype.insertRules=function(t,r){if(t>=this.groupSizes.length){for(var a=this.groupSizes,i=a.length,l=i;t>=l;)if((l<<=1)<0)throw Tt(16,"".concat(t));this.groupSizes=new Uint32Array(l),this.groupSizes.set(a),this.length=l;for(var o=i;o<l;o++)this.groupSizes[o]=0}for(var c=this.indexOfGroup(t+1),d=(o=0,r.length);o<d;o++)this.tag.insertRule(c,r[o])&&(this.groupSizes[t]++,c++)},s.prototype.clearGroup=function(t){if(t<this.length){var r=this.groupSizes[t],a=this.indexOfGroup(t),i=a+r;this.groupSizes[t]=0;for(var l=a;l<i;l++)this.tag.deleteRule(a)}},s.prototype.getGroup=function(t){var r="";if(t>=this.length||this.groupSizes[t]===0)return r;for(var a=this.groupSizes[t],i=this.indexOfGroup(t),l=i+a,o=i;o<l;o++)r+="".concat(this.tag.getRule(o)).concat(Xr);return r},s}(),Wt=new Map,Gt=new Map,Mt=1,Nt=function(s){if(Wt.has(s))return Wt.get(s);for(;Gt.has(Mt);)Mt++;var t=Mt++;return Wt.set(s,t),Gt.set(t,s),t},tl=function(s,t){Mt=t+1,Wt.set(s,t),Gt.set(t,s)},rl="style[".concat(xt,"][").concat(pa,'="').concat(tr,'"]'),nl=new RegExp("^".concat(xt,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),al=function(s,t,r){for(var a,i=r.split(","),l=0,o=i.length;l<o;l++)(a=i[l])&&s.registerName(t,a)},il=function(s,t){for(var r,a=((r=t.textContent)!==null&&r!==void 0?r:"").split(Xr),i=[],l=0,o=a.length;l<o;l++){var c=a[l].trim();if(c){var d=c.match(nl);if(d){var g=0|parseInt(d[1],10),P=d[2];g!==0&&(tl(P,g),al(s,P,d[3]),s.getTag().insertRules(g,i)),i.length=0}else i.push(c)}}},An=function(s){for(var t=document.querySelectorAll(rl),r=0,a=t.length;r<a;r++){var i=t[r];i&&i.getAttribute(xt)!==ha&&(il(s,i),i.parentNode&&i.parentNode.removeChild(i))}};function ol(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var va=function(s){var t=document.head,r=s||t,a=document.createElement("style"),i=function(c){var d=Array.from(c.querySelectorAll("style[".concat(xt,"]")));return d[d.length-1]}(r),l=i!==void 0?i.nextSibling:null;a.setAttribute(xt,ha),a.setAttribute(pa,tr);var o=ol();return o&&a.setAttribute("nonce",o),r.insertBefore(a,l),a},ll=function(){function s(t){this.element=va(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var a=document.styleSheets,i=0,l=a.length;i<l;i++){var o=a[i];if(o.ownerNode===r)return o}throw Tt(17)}(this.element),this.length=0}return s.prototype.insertRule=function(t,r){try{return this.sheet.insertRule(r,t),this.length++,!0}catch{return!1}},s.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},s.prototype.getRule=function(t){var r=this.sheet.cssRules[t];return r&&r.cssText?r.cssText:""},s}(),cl=function(){function s(t){this.element=va(t),this.nodes=this.element.childNodes,this.length=0}return s.prototype.insertRule=function(t,r){if(t<=this.length&&t>=0){var a=document.createTextNode(r);return this.element.insertBefore(a,this.nodes[t]||null),this.length++,!0}return!1},s.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},s.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},s}(),dl=function(){function s(t){this.rules=[],this.length=0}return s.prototype.insertRule=function(t,r){return t<=this.length&&(this.rules.splice(t,0,r),this.length++,!0)},s.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},s.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},s}(),En=Ut,ul={isServer:!Ut,useCSSOMInjection:!Mo},Sa=function(){function s(t,r,a){t===void 0&&(t=gt),r===void 0&&(r={});var i=this;this.options=Ss(Ss({},ul),t),this.gs=r,this.names=new Map(a),this.server=!!t.isServer,!this.server&&Ut&&En&&(En=!1,An(this)),Jr(this,function(){return function(l){for(var o=l.getTag(),c=o.length,d="",g=function(T){var R=function(v){return Gt.get(v)}(T);if(R===void 0)return"continue";var j=l.names.get(R),p=o.getGroup(T);if(j===void 0||!j.size||p.length===0)return"continue";var D="".concat(xt,".g").concat(T,'[id="').concat(R,'"]'),_="";j!==void 0&&j.forEach(function(v){v.length>0&&(_+="".concat(v,","))}),d+="".concat(p).concat(D,'{content:"').concat(_,'"}').concat(Xr)},P=0;P<c;P++)g(P);return d}(i)})}return s.registerId=function(t){return Nt(t)},s.prototype.rehydrate=function(){!this.server&&Ut&&An(this)},s.prototype.reconstructWithOptions=function(t,r){return r===void 0&&(r=!0),new s(Ss(Ss({},this.options),t),this.gs,r&&this.names||void 0)},s.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},s.prototype.getTag=function(){return this.tag||(this.tag=(t=function(r){var a=r.useCSSOMInjection,i=r.target;return r.isServer?new dl(i):a?new ll(i):new cl(i)}(this.options),new sl(t)));var t},s.prototype.hasNameForId=function(t,r){return this.names.has(t)&&this.names.get(t).has(r)},s.prototype.registerName=function(t,r){if(Nt(t),this.names.has(t))this.names.get(t).add(r);else{var a=new Set;a.add(r),this.names.set(t,a)}},s.prototype.insertRules=function(t,r,a){this.registerName(t,r),this.getTag().insertRules(Nt(t),a)},s.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},s.prototype.clearRules=function(t){this.getTag().clearGroup(Nt(t)),this.clearNames(t)},s.prototype.clearTag=function(){this.tag=void 0},s}(),hl=/&/g,pl=/^\s*\/\/.*$/gm;function Ca(s,t){return s.map(function(r){return r.type==="rule"&&(r.value="".concat(t," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(t," ")),r.props=r.props.map(function(a){return"".concat(t," ").concat(a)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=Ca(r.children,t)),r})}function xl(s){var t,r,a,i=gt,l=i.options,o=l===void 0?gt:l,c=i.plugins,d=c===void 0?rr:c,g=function(R,j,p){return p.startsWith(r)&&p.endsWith(r)&&p.replaceAll(r,"").length>0?".".concat(t):R},P=d.slice();P.push(function(R){R.type===Kt&&R.value.includes("&")&&(R.props[0]=R.props[0].replace(hl,r).replace(a,g))}),o.prefix&&P.push(Fo),P.push(Ro);var T=function(R,j,p,D){j===void 0&&(j=""),p===void 0&&(p=""),D===void 0&&(D="&"),t=D,r=j,a=new RegExp("\\".concat(r,"\\b"),"g");var _=R.replace(pl,""),v=ko(p||j?"".concat(p," ").concat(j," { ").concat(_," }"):_);o.namespace&&(v=Ca(v,o.namespace));var w=[];return Ht(v,Oo(P.concat(Lo(function(E){return w.push(E)})))),w};return T.hash=d.length?d.reduce(function(R,j){return j.name||Tt(15),ot(R,j.name)},ga).toString():"",T}var gl=new Sa,Rr=xl(),wa=me.createContext({shouldForwardProp:void 0,styleSheet:gl,stylis:Rr});wa.Consumer;me.createContext(void 0);function Tn(){return S.useContext(wa)}var ml=function(){function s(t,r){var a=this;this.inject=function(i,l){l===void 0&&(l=Rr);var o=a.name+l.hash;i.hasNameForId(a.id,o)||i.insertRules(a.id,o,l(a.rules,o,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=r,Jr(this,function(){throw Tt(12,String(a.name))})}return s.prototype.getName=function(t){return t===void 0&&(t=Rr),this.name+t.hash},s}(),fl=function(s){return s>="A"&&s<="Z"};function Dn(s){for(var t="",r=0;r<s.length;r++){var a=s[r];if(r===1&&a==="-"&&s[0]==="-")return s;fl(a)?t+="-"+a.toLowerCase():t+=a}return t.startsWith("ms-")?"-"+t:t}var za=function(s){return s==null||s===!1||s===""},Pa=function(s){var t,r,a=[];for(var i in s){var l=s[i];s.hasOwnProperty(i)&&!za(l)&&(Array.isArray(l)&&l.isCss||mt(l)?a.push("".concat(Dn(i),":"),l,";"):zt(l)?a.push.apply(a,$t($t(["".concat(i," {")],Pa(l),!1),["}"],!1)):a.push("".concat(Dn(i),": ").concat((t=i,(r=l)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||t in Wo||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return a};function et(s,t,r,a){if(za(s))return[];if(Qr(s))return[".".concat(s.styledComponentId)];if(mt(s)){if(!mt(l=s)||l.prototype&&l.prototype.isReactComponent||!t)return[s];var i=s(t);return et(i,t,r,a)}var l;return s instanceof ml?r?(s.inject(r,a),[s.getName(a)]):[s]:zt(s)?Pa(s):Array.isArray(s)?Array.prototype.concat.apply(rr,s.map(function(o){return et(o,t,r,a)})):[s.toString()]}function jl(s){for(var t=0;t<s.length;t+=1){var r=s[t];if(mt(r)&&!Qr(r))return!1}return!0}var bl=ma(tr),yl=function(){function s(t,r,a){this.rules=t,this.staticRulesId="",this.isStatic=(a===void 0||a.isStatic)&&jl(t),this.componentId=r,this.baseHash=ot(bl,r),this.baseStyle=a,Sa.registerId(r)}return s.prototype.generateAndInjectStyles=function(t,r,a){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,r,a):"";if(this.isStatic&&!a.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))i=Qs(i,this.staticRulesId);else{var l=Pn(et(this.rules,t,r,a)),o=kr(ot(this.baseHash,l)>>>0);if(!r.hasNameForId(this.componentId,o)){var c=a(l,".".concat(o),void 0,this.componentId);r.insertRules(this.componentId,o,c)}i=Qs(i,o),this.staticRulesId=o}else{for(var d=ot(this.baseHash,a.hash),g="",P=0;P<this.rules.length;P++){var T=this.rules[P];if(typeof T=="string")g+=T;else if(T){var R=Pn(et(T,t,r,a));d=ot(d,R+P),g+=R}}if(g){var j=kr(d>>>0);r.hasNameForId(this.componentId,j)||r.insertRules(this.componentId,j,a(g,".".concat(j),void 0,this.componentId)),i=Qs(i,j)}}return i},s}(),Aa=me.createContext(void 0);Aa.Consumer;var jr={};function vl(s,t,r){var a=Qr(s),i=s,l=!fr(s),o=t.attrs,c=o===void 0?rr:o,d=t.componentId,g=d===void 0?function(k,M){var L=typeof k!="string"?"sc":vn(k);jr[L]=(jr[L]||0)+1;var m="".concat(L,"-").concat(Ho(tr+L+jr[L]));return M?"".concat(M,"-").concat(m):m}(t.displayName,t.parentComponentId):d,P=t.displayName,T=P===void 0?function(k){return fr(k)?"styled.".concat(k):"Styled(".concat(Uo(k),")")}(s):P,R=t.displayName&&t.componentId?"".concat(vn(t.displayName),"-").concat(t.componentId):t.componentId||g,j=a&&i.attrs?i.attrs.concat(c).filter(Boolean):c,p=t.shouldForwardProp;if(a&&i.shouldForwardProp){var D=i.shouldForwardProp;if(t.shouldForwardProp){var _=t.shouldForwardProp;p=function(k,M){return D(k,M)&&_(k,M)}}else p=D}var v=new yl(r,R,a?i.componentStyle:void 0);function w(k,M){return function(L,m,B){var y=L.attrs,re=L.componentStyle,x=L.defaultProps,V=L.foldedComponentIds,Y=L.styledComponentId,ae=L.target,Ce=me.useContext(Aa),ie=Tn(),ce=L.shouldForwardProp||ie.shouldForwardProp,Ne=$o(m,Ce,x)||gt,z=function(ne,Be,X){for(var De,I=Ss(Ss({},Be),{className:void 0,theme:X}),fe=0;fe<ne.length;fe+=1){var Me=mt(De=ne[fe])?De(I):De;for(var Le in Me)I[Le]=Le==="className"?Qs(I[Le],Me[Le]):Le==="style"?Ss(Ss({},I[Le]),Me[Le]):Me[Le]}return Be.className&&(I.className=Qs(I.className,Be.className)),I}(y,m,Ne),Q=z.as||ae,ye={};for(var oe in z)z[oe]===void 0||oe[0]==="$"||oe==="as"||oe==="theme"&&z.theme===Ne||(oe==="forwardedAs"?ye.as=z.forwardedAs:ce&&!ce(oe,Q)||(ye[oe]=z[oe]));var A=function(ne,Be){var X=Tn(),De=ne.generateAndInjectStyles(Be,X.styleSheet,X.stylis);return De}(re,z),je=Qs(V,Y);return A&&(je+=" "+A),z.className&&(je+=" "+z.className),ye[fr(Q)&&!xa.has(Q)?"class":"className"]=je,B&&(ye.ref=B),S.createElement(Q,ye)}(E,k,M)}w.displayName=T;var E=me.forwardRef(w);return E.attrs=j,E.componentStyle=v,E.displayName=T,E.shouldForwardProp=p,E.foldedComponentIds=a?Qs(i.foldedComponentIds,i.styledComponentId):"",E.styledComponentId=R,E.target=a?i.target:s,Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(k){this._foldedDefaultProps=a?function(M){for(var L=[],m=1;m<arguments.length;m++)L[m-1]=arguments[m];for(var B=0,y=L;B<y.length;B++)Nr(M,y[B],!0);return M}({},i.defaultProps,k):k}}),Jr(E,function(){return".".concat(E.styledComponentId)}),l&&ya(E,s,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),E}function In(s,t){for(var r=[s[0]],a=0,i=t.length;a<i;a+=1)r.push(t[a],s[a+1]);return r}var _n=function(s){return Object.assign(s,{isCss:!0})};function Sl(s){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(mt(s)||zt(s))return _n(et(In(rr,$t([s],t,!0))));var a=s;return t.length===0&&a.length===1&&typeof a[0]=="string"?et(a):_n(et(In(a,t)))}function Or(s,t,r){if(r===void 0&&(r=gt),!t)throw Tt(1,t);var a=function(i){for(var l=[],o=1;o<arguments.length;o++)l[o-1]=arguments[o];return s(t,r,Sl.apply(void 0,$t([i],l,!1)))};return a.attrs=function(i){return Or(s,t,Ss(Ss({},r),{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},a.withConfig=function(i){return Or(s,t,Ss(Ss({},r),i))},a}var Ea=function(s){return Or(vl,s)},nr=Ea;xa.forEach(function(s){nr[s]=Ea(s)});const Cl=nr.div`
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background-color: var(--background-color);
`,wl=nr.div`
  width: 100%;
  max-width: 450px;
  padding: 2rem;
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
`,zl=nr.div`
  text-align: center;
  margin-bottom: 2rem;
  
  h1 {
    color: var(--primary-color);
    font-size: 1.8rem;
    margin-bottom: 0.5rem;
  }
  
  p {
    color: var(--dark-gray);
    font-size: 1rem;
  }
`,Pl=()=>e.jsx(Cl,{children:e.jsxs(wl,{children:[e.jsxs(zl,{children:[e.jsx("h1",{children:"Sistema de GestiÃ³n"}),e.jsx("p",{children:"Planta de Agua"})]}),e.jsx(Bn,{})]})}),Al=()=>{const s=S.useRef(null),t=S.useRef(Date.now());S.useRef(null);const r=async()=>{try{const l=localStorage.getItem("token");if(!l)return;const o=JSON.parse(atob(l.split(".")[1])),c=Math.floor(Date.now()/1e3);if(o.exp-c<7200){console.log("ðŸ”„ Renovando token JWT...");const g=await G.post("/api/auth/refresh");g.data.token&&(localStorage.setItem("token",g.data.token),console.log("âœ… Token renovado exitosamente"))}}catch(l){console.error("âŒ Error al renovar token:",l),l.response&&l.response.status===401&&(localStorage.removeItem("token"),window.location.href="/")}},a=()=>{t.current=Date.now()},i=()=>{const o=Date.now()-t.current,c=60*60*1e3;o>c&&(console.log("â° SesiÃ³n inactiva por mÃ¡s de 1 hora, cerrando sesiÃ³n..."),localStorage.removeItem("token"),window.location.href="/")};return S.useEffect(()=>{s.current=setInterval(r,30*60*1e3);const l=setInterval(i,10*60*1e3),o=["mousedown","mousemove","keypress","scroll","touchstart","click"];return o.forEach(c=>{document.addEventListener(c,a,!0)}),()=>{s.current&&clearInterval(s.current),clearInterval(l),o.forEach(c=>{document.removeEventListener(c,a,!0)})}},[]),{refreshToken:r}},El=()=>{const{user:s}=Os(),t=c=>!s||!s.role?!1:Array.isArray(c)?c.includes(s.role):s.role===c;return{user:s,hasRole:t,isAdmin:()=>t("admin"),isSeller:()=>t("vendedor"),isClient:()=>t("cliente"),isDeliveryPerson:()=>t("repartidor"),canAccess:c=>t(c)}},Ta=({variant:s="button",size:t="sm"})=>{const r=xs(),a="+51 961 606 183",i="aguademesaaquayara@gmail.com",l=()=>{const g=`https://wa.me/51961606183?text=${encodeURIComponent("Hola, necesito ayuda con el sistema de AquaYara")}`;window.open(g,"_blank")},o=()=>{window.open(`tel:${a}`,"_self")},c=(d,g)=>{navigator.clipboard.writeText(d).then(()=>{r({title:"Copiado",description:`${g} copiado al portapapeles`,status:"success",duration:2e3,isClosable:!0})})};return s==="badge"?e.jsxs(h,{spacing:2,children:[e.jsx(Oe,{label:"Contactar por WhatsApp",hasArrow:!0,children:e.jsx(O,{size:"xs",colorScheme:"green",leftIcon:e.jsx(le,{as:ct}),onClick:l,children:"WhatsApp"})}),e.jsx(Oe,{label:"Llamar",hasArrow:!0,children:e.jsx(O,{size:"xs",variant:"outline",leftIcon:e.jsx(le,{as:Hs}),onClick:o,children:a})})]}):s==="info"?e.jsxs(N,{p:3,bg:"blue.50",borderRadius:"md",border:"1px solid",borderColor:"blue.200",children:[e.jsx(n,{fontSize:"sm",fontWeight:"bold",color:"blue.700",mb:2,children:"ðŸ“ž Soporte TÃ©cnico"}),e.jsxs(u,{spacing:2,align:"start",children:[e.jsxs(h,{spacing:2,children:[e.jsx(le,{as:ct,color:"green.500"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["WhatsApp: ",a]}),e.jsx(O,{size:"xs",variant:"ghost",onClick:()=>c(a,"TelÃ©fono"),children:"Copiar"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(le,{as:qr,color:"blue.500"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["Email: ",i]}),e.jsx(O,{size:"xs",variant:"ghost",onClick:()=>c(i,"Email"),children:"Copiar"})]})]})]}):e.jsxs(h,{spacing:2,children:[e.jsx(Oe,{label:"Contactar por WhatsApp",hasArrow:!0,children:e.jsx(O,{size:t,colorScheme:"green",leftIcon:e.jsx(le,{as:ct}),onClick:l,children:"WhatsApp"})}),e.jsx(Oe,{label:"Llamar",hasArrow:!0,children:e.jsx(O,{size:t,variant:"outline",leftIcon:e.jsx(le,{as:Hs}),onClick:o,children:a})})]})},Tl=({isOpen:s,onClose:t,showAcceptButton:r=!1,onAccept:a})=>{const[i,l]=S.useState(!1),o=()=>{l(!0),a&&a(),t()};return e.jsxs(Ke,{isOpen:s,onClose:t,size:"xl",scrollBehavior:"inside",children:[e.jsx(Ye,{}),e.jsxs(Ze,{maxH:"90vh",children:[e.jsx(Xe,{children:e.jsx(K,{size:"md",children:"TÃ©rminos y Condiciones - AquaYara"})}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:[e.jsx("strong",{children:"Fecha de Ãºltima actualizaciÃ³n:"})," 10 de enero de 2025"]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"1. InformaciÃ³n General"}),e.jsxs(n,{fontSize:"sm",mb:2,children:[e.jsx("strong",{children:"AquaYara"})," es una empresa dedicada a la purificaciÃ³n y distribuciÃ³n de agua, con domicilio legal en Pucallpa, PerÃº."]}),e.jsx(n,{fontSize:"sm",children:"Proporcionamos servicios de purificaciÃ³n de agua, distribuciÃ³n, sistema de suscripciones, servicio de delivery y gestiÃ³n de clientes frecuentes."})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"2. AceptaciÃ³n de TÃ©rminos"}),e.jsx(n,{fontSize:"sm",mb:2,children:"Al utilizar nuestros servicios, usted acepta estos tÃ©rminos y condiciones en su totalidad. Si no estÃ¡ de acuerdo con alguna parte de estos tÃ©rminos, no debe utilizar nuestros servicios."}),e.jsx(n,{fontSize:"sm",children:"Nos reservamos el derecho de modificar estos tÃ©rminos en cualquier momento. Las modificaciones entrarÃ¡n en vigor inmediatamente despuÃ©s de su publicaciÃ³n."})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"3. Servicios Ofrecidos"}),e.jsxs(lt,{fontSize:"sm",spacing:1,children:[e.jsx(Ie,{children:"BidÃ³n de Agua 20L y Paquete de Botellas"}),e.jsx(Ie,{children:"Servicio de entrega a domicilio con tarifas segÃºn distrito"}),e.jsx(Ie,{children:"Horarios de entrega: Lunes a SÃ¡bado de 8:00 AM a 6:00 PM"}),e.jsx(Ie,{children:"Sistema de suscripciones con bonificaciones"}),e.jsx(Ie,{children:"Control de botellas restantes y pagos mensuales automÃ¡ticos"})]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"4. Precios y Pagos"}),e.jsx(n,{fontSize:"sm",mb:2,children:"Los precios estÃ¡n sujetos a cambios sin previo aviso. Aceptamos efectivo, tarjeta de crÃ©dito/dÃ©bito, Yape y Plin."}),e.jsx(n,{fontSize:"sm",children:"Los pagos deben realizarse al momento de la entrega. Los pagos mensuales de suscripciones se procesan automÃ¡ticamente."})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"5. Entregas y Devoluciones"}),e.jsx(n,{fontSize:"sm",mb:2,children:"Las entregas se realizan en el horario acordado. El cliente debe estar presente para recibir el pedido. En caso de ausencia, se reprogramarÃ¡ la entrega."}),e.jsx(n,{fontSize:"sm",children:"No se aceptan devoluciones de productos abiertos. Las devoluciones deben solicitarse dentro de las 24 horas posteriores a la entrega."})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"6. Responsabilidades del Cliente"}),e.jsxs(lt,{fontSize:"sm",spacing:1,children:[e.jsx(Ie,{children:"Proporcionar informaciÃ³n veraz y actualizada"}),e.jsx(Ie,{children:"No utilizar el sistema para fines ilegales"}),e.jsx(Ie,{children:"No compartir credenciales de acceso"}),e.jsx(Ie,{children:"Notificar cualquier uso no autorizado de su cuenta"})]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"7. Privacidad y ProtecciÃ³n de Datos"}),e.jsx(n,{fontSize:"sm",mb:2,children:"Recopilamos datos personales, de uso y tÃ©cnicos para procesar pedidos, comunicarnos con usted y mejorar nuestros servicios."}),e.jsx(n,{fontSize:"sm",children:"Implementamos medidas de seguridad como encriptaciÃ³n de datos sensibles, acceso restringido y polÃ­ticas de confidencialidad."})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"8. Sus Derechos"}),e.jsxs(lt,{fontSize:"sm",spacing:1,children:[e.jsx(Ie,{children:"Derecho de acceso a sus datos"}),e.jsx(Ie,{children:"Derecho de rectificaciÃ³n de informaciÃ³n inexacta"}),e.jsx(Ie,{children:"Derecho de eliminaciÃ³n de datos"}),e.jsx(Ie,{children:"Derecho de portabilidad de datos"}),e.jsx(Ie,{children:"Derecho de oposiciÃ³n al tratamiento"})]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"9. Contacto"}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"TelÃ©fono:"})," +51 961 606 183"]}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Email:"})," aguademesaaquayara@gmail.com"]}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"DirecciÃ³n:"})," Pucallpa, PerÃº"]}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Horario:"})," Lunes a SÃ¡bado 8:00 AM - 6:00 PM"]})]}),e.jsx(hs,{}),e.jsx(n,{fontSize:"xs",color:"gray.500",textAlign:"center",children:"Al utilizar nuestros servicios, usted confirma que ha leÃ­do, entendido y aceptado estos tÃ©rminos y condiciones."}),r&&e.jsx(N,{textAlign:"center",pt:4,children:e.jsx(O,{colorScheme:"blue",onClick:o,isDisabled:i,size:"lg",width:"full",children:i?"Aceptado":"Acepto los TÃ©rminos y Condiciones"})})]})})]})]})},Dl=({onAccept:s,showAcceptButton:t=!1})=>{const{isOpen:r,onOpen:a,onClose:i}=Ge();return e.jsxs(e.Fragment,{children:[e.jsx(O,{variant:"link",size:"sm",color:"blue.500",onClick:a,leftIcon:e.jsx(Ha,{}),children:"TÃ©rminos y Condiciones"}),e.jsx(Tl,{isOpen:r,onClose:i,showAcceptButton:t,onAccept:s})]})},Il=()=>{const{isOpen:s,onOpen:t,onClose:r}=Ge();return e.jsxs(e.Fragment,{children:[e.jsx(O,{variant:"link",size:"sm",color:"blue.500",onClick:t,leftIcon:e.jsx(Ua,{}),children:"PolÃ­tica de Privacidad"}),e.jsxs(Ke,{isOpen:s,onClose:r,size:"xl",scrollBehavior:"inside",children:[e.jsx(Ye,{}),e.jsxs(Ze,{maxH:"90vh",children:[e.jsx(Xe,{children:e.jsx(K,{size:"md",children:"PolÃ­tica de Privacidad - AquaYara"})}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:[e.jsx("strong",{children:"Fecha de Ãºltima actualizaciÃ³n:"})," 10 de enero de 2025"]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"1. InformaciÃ³n General"}),e.jsxs(n,{fontSize:"sm",mb:2,children:[e.jsx("strong",{children:"AquaYara"})," es responsable del tratamiento de sus datos personales."]}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Contacto:"})," aguademesaaquayara@gmail.com | +51 961 606 183"]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"2. Datos que Recopilamos"}),e.jsxs(lt,{fontSize:"sm",spacing:1,children:[e.jsxs(Ie,{children:[e.jsx("strong",{children:"Datos Personales:"})," Nombre, DNI/RUC, email, telÃ©fono, direcciÃ³n"]}),e.jsxs(Ie,{children:[e.jsx("strong",{children:"Datos de Uso:"})," Historial de pedidos, preferencias, patrones de compra"]}),e.jsxs(Ie,{children:[e.jsx("strong",{children:"Datos TÃ©cnicos:"})," IP, dispositivo, navegador, fecha y hora"]})]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"3. Finalidades del Tratamiento"}),e.jsxs(lt,{fontSize:"sm",spacing:1,children:[e.jsx(Ie,{children:"Procesar pedidos y gestionar entregas"}),e.jsx(Ie,{children:"Comunicarnos con usted"}),e.jsx(Ie,{children:"Procesar pagos y generar comprobantes"}),e.jsx(Ie,{children:"Mejorar nuestros servicios"}),e.jsx(Ie,{children:"Prevenir fraudes y proteger el sistema"})]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"4. Sus Derechos"}),e.jsxs(lt,{fontSize:"sm",spacing:1,children:[e.jsx(Ie,{children:"Derecho de acceso a sus datos"}),e.jsx(Ie,{children:"Derecho de rectificaciÃ³n"}),e.jsx(Ie,{children:"Derecho de eliminaciÃ³n"}),e.jsx(Ie,{children:"Derecho de portabilidad"}),e.jsx(Ie,{children:"Derecho de oposiciÃ³n"})]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"5. Seguridad"}),e.jsx(n,{fontSize:"sm",children:"Implementamos medidas de seguridad como encriptaciÃ³n de datos sensibles, acceso restringido, monitoreo continuo y polÃ­ticas de confidencialidad."})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"6. Contacto"}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Email:"})," aguademesaaquayara@gmail.com"]}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"TelÃ©fono:"})," +51 961 606 183"]}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Autoridad de Control:"})," proteccion.datos@minjus.gob.pe"]})]}),e.jsx(hs,{}),e.jsx(n,{fontSize:"xs",color:"gray.500",textAlign:"center",children:"Esta polÃ­tica se rige por la Ley de ProtecciÃ³n de Datos Personales del PerÃº (Ley NÂ° 29733)."})]})})]})]})]})},_l=()=>e.jsx(N,{bg:"gray.50",py:8,mt:"auto",children:e.jsx(Lr,{maxW:"container.xl",children:e.jsxs(u,{spacing:6,children:[e.jsxs(h,{spacing:8,wrap:"wrap",justify:"center",children:[e.jsxs(h,{spacing:2,children:[e.jsx(le,{as:Hs,color:"blue.500"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"+51 961 606 183"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(le,{as:qr,color:"blue.500"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"aguademesaaquayara@gmail.com"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(le,{as:wt,color:"blue.500"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Pucallpa, PerÃº"})]})]}),e.jsx(hs,{}),e.jsxs(h,{spacing:6,wrap:"wrap",justify:"center",children:[e.jsx(Dl,{}),e.jsx(Il,{}),e.jsx(br,{href:"mailto:aguademesaaquayara@gmail.com",color:"blue.500",fontSize:"sm",_hover:{textDecoration:"underline"},children:"Soporte TÃ©cnico"})]}),e.jsx(hs,{}),e.jsxs(u,{spacing:2,children:[e.jsx(n,{fontSize:"sm",color:"gray.500",textAlign:"center",children:"Â© 2025 AquaYara - Agua Purificada de Calidad"}),e.jsx(n,{fontSize:"xs",color:"gray.400",textAlign:"center",children:"Todos los derechos reservados | Horario: Lunes a SÃ¡bado 8:00 AM - 6:00 PM"})]})]})})}),kn=()=>{const{user:s,logout:t}=Os(),{isAdmin:r,isDeliveryPerson:a}=El(),i=Ys();Ge();const[l,o]=S.useState(!1),[c,d]=S.useState(()=>{const w=localStorage.getItem("sidebarCollapsed");return w?JSON.parse(w):!1});Al();const g=Gs({base:!0,lg:!1});S.useEffect(()=>{localStorage.setItem("sidebarCollapsed",JSON.stringify(c))},[c]);const P=()=>{t(),i("/")},T=()=>!s||!s.username?"?":s.username.charAt(0).toUpperCase(),R=[{to:"/dashboard",label:"Dashboard",icon:"ðŸ "},{to:"/dashboard/orders-management",label:"GestiÃ³n de Pedidos",icon:"ðŸ“¦",adminOnly:!0},{to:"/dashboard/clients",label:"Clientes",icon:"ðŸ‘¥",adminOnly:!0},{to:"/dashboard/vales",label:"GestiÃ³n de Vales",icon:"ðŸŽ«",adminOnly:!0},{to:"/dashboard/collection-report",label:"Reporte de Cobranza",icon:"ðŸ’°",adminOnly:!0},{to:"/dashboard/subscriptions",label:"Suscripciones",icon:"ðŸ“…",adminOnly:!0},{to:"/dashboard/delivery-fees",label:"Tarifas de EnvÃ­o",icon:"ðŸšš",adminOnly:!0},{to:"/dashboard/terms-and-conditions",label:"TÃ©rminos y Condiciones",icon:"ðŸ“„",adminOnly:!0},{to:"/dashboard/users-management",label:"GestiÃ³n de Usuarios",icon:"ðŸ‘¥",adminOnly:!0}],j=[{to:"/delivery-dashboard",label:"Dashboard",icon:"ðŸ "},{to:"/delivery-dashboard#orders",label:"Mis Pedidos",icon:"ðŸ“¦"},{to:"/delivery-dashboard#stats",label:"EstadÃ­sticas",icon:"ðŸ“Š"},{to:"/delivery-dashboard#vouchers",label:"Vales",icon:"ðŸŽ«"}],D=a()?j:R.filter(w=>!w.adminOnly||r()),_=()=>{o(!1)},v=({isCollapsed:w=!1})=>e.jsxs(u,{spacing:0,h:"full",align:"stretch",children:[e.jsx(N,{p:w?3:6,borderBottom:"1px solid",borderColor:"whiteAlpha.200",children:w?e.jsx(n,{fontSize:"2xl",textAlign:"center",color:"white",children:"ðŸ "}):e.jsx(dt,{size:"md",variant:"vertical",color:"white",textColor:"white",taglineColor:"whiteAlpha.700"})}),e.jsx(u,{spacing:1,flex:1,align:"stretch",p:w?1:2,children:D.map(E=>e.jsx(O,{as:pi,to:E.to,variant:"ghost",color:"white",justifyContent:w?"center":"flex-start",leftIcon:w?void 0:e.jsx(n,{children:E.icon}),_hover:{bg:"whiteAlpha.200"},_active:{bg:"whiteAlpha.300"},size:"sm",h:"40px",onClick:_,title:w?E.label:void 0,px:w?2:4,minW:w?"40px":"auto",w:w?"40px":"100%",children:w?e.jsx(n,{children:E.icon}):E.label},E.to))}),e.jsx(N,{p:w?2:4,borderTop:"1px solid",borderColor:"whiteAlpha.200",children:e.jsxs(Rn,{children:[e.jsx(On,{as:O,variant:"ghost",color:"white",w:"full",justifyContent:w?"center":"flex-start",leftIcon:e.jsx(Ja,{size:"sm",name:T()}),rightIcon:w?void 0:e.jsx(Qa,{}),title:w?`${s==null?void 0:s.username} (${s==null?void 0:s.role})`:void 0,children:!w&&e.jsxs(u,{spacing:0,align:"flex-start",children:[e.jsx(n,{fontSize:"sm",fontWeight:"medium",children:s==null?void 0:s.username}),e.jsx(n,{fontSize:"xs",color:"whiteAlpha.700",children:s==null?void 0:s.role})]})}),e.jsx(Ln,{children:e.jsx(yr,{onClick:()=>{P(),_()},color:"red.500",children:"Cerrar SesiÃ³n"})})]})})]});return e.jsxs(ys,{minH:"100vh",bg:"gray.50",children:[!g&&e.jsxs(N,{w:c?"60px":"280px",bg:"purple.600",color:"white",position:"fixed",h:"100vh",overflowY:"auto",zIndex:1e3,left:0,top:0,transition:"width 0.3s ease",children:[e.jsx(v,{isCollapsed:c}),e.jsx(_e,{icon:c?e.jsx(rn,{}):e.jsx(nn,{}),variant:"ghost",color:"white",size:"sm",position:"absolute",right:"-12px",top:"50%",transform:"translateY(-50%)",bg:"purple.600",border:"2px solid",borderColor:"purple.600",borderRadius:"full",_hover:{bg:"purple.700"},onClick:()=>d(!c),zIndex:1001})]}),e.jsxs(Ga,{isOpen:l,onClose:()=>o(!1),placement:"left",size:"xs",closeOnOverlayClick:!0,closeOnEsc:!0,children:[e.jsx(Ye,{}),e.jsxs(Ya,{children:[e.jsx(es,{}),e.jsx(Xe,{bg:"purple.600",color:"white",children:e.jsx(dt,{size:"sm",variant:"horizontal",color:"white",textColor:"white",taglineColor:"whiteAlpha.700"})}),e.jsx(Qe,{p:0,children:e.jsx(N,{bg:"purple.600",color:"white",h:"full",children:e.jsx(v,{})})})]})]}),e.jsxs(N,{flex:1,ml:g?0:c?"60px":"280px",display:"flex",flexDirection:"column",transition:"margin-left 0.3s ease",children:[g||!c?e.jsx(N,{bg:"white",px:{base:4,md:6},py:4,boxShadow:"sm",borderBottom:"1px solid",borderColor:"gray.200",position:"sticky",top:0,zIndex:999,children:e.jsxs(ys,{align:"center",justify:"space-between",children:[e.jsxs(h,{spacing:4,children:[g?e.jsx(_e,{icon:e.jsx(Xa,{}),variant:"ghost",onClick:()=>o(!0),"aria-label":"Abrir menÃº"}):e.jsx(_e,{icon:c?e.jsx(rn,{}):e.jsx(nn,{}),variant:"ghost",onClick:()=>d(!c),"aria-label":c?"Expandir sidebar":"Colapsar sidebar",size:"sm"}),!c&&e.jsxs(e.Fragment,{children:[e.jsx(dt,{size:"sm",variant:"horizontal"}),e.jsx(n,{fontSize:"lg",fontWeight:"semibold",color:"gray.700",children:a()?"Panel de Repartidor":"Panel de AdministraciÃ³n"})]})]}),e.jsxs(h,{spacing:4,children:[e.jsx(Ta,{variant:"badge"}),e.jsx(ve,{colorScheme:"green",variant:"subtle",children:"En lÃ­nea"})]})]})}):null,e.jsx(N,{flex:1,p:{base:4,md:6},overflowY:"auto",position:"relative",zIndex:1,children:e.jsx(Bn,{})}),e.jsx(_l,{})]})]})},kl=()=>{const[s,t]=S.useState({username:"",password:""}),[r,a]=S.useState(!1),i=Ys(),l=xs(),{login:o,error:c,clearError:d}=Os(),g=async T=>{T.preventDefault(),a(!0);try{(await o(s.username,s.password)).success&&(l({title:"Ã‰xito",description:"Inicio de sesiÃ³n exitoso",status:"success",duration:3e3,isClosable:!0}),i("/dashboard"))}catch(R){console.error("Error en login:",R)}finally{a(!1)}},P=T=>{t({...s,[T.target.name]:T.target.value}),c&&d()};return e.jsx(ls,{minH:"100vh",bg:"gray.50",children:e.jsx(N,{w:"full",maxW:"md",p:6,children:e.jsx(F,{children:e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(N,{textAlign:"center",children:[e.jsx(dt,{size:"xl",variant:"vertical",color:"blue.500",textColor:"blue.600",taglineColor:"teal.500"}),e.jsx(n,{color:"gray.600",mt:2,children:"Sistema de GestiÃ³n"})]}),e.jsx(N,{w:"full",children:e.jsx("form",{onSubmit:g,children:e.jsxs(u,{spacing:4,children:[c&&e.jsxs(Ee,{status:"error",borderRadius:"md",children:[e.jsx(Te,{}),c]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Usuario"}),e.jsx(te,{name:"username",value:s.username,onChange:P,placeholder:"Ingresa tu usuario",size:"lg",autoComplete:"username"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"ContraseÃ±a"}),e.jsx(te,{name:"password",type:"password",value:s.password,onChange:P,placeholder:"Ingresa tu contraseÃ±a",size:"lg",autoComplete:"current-password"})]}),e.jsx(O,{type:"submit",colorScheme:"blue",size:"lg",w:"full",isLoading:r,loadingText:"Iniciando sesiÃ³n...",children:"Iniciar SesiÃ³n"})]})})}),e.jsx(N,{textAlign:"center",children:e.jsx(n,{fontSize:"sm",color:"gray.500",children:"Sistema de gestiÃ³n para planta de agua"})})]})})})})})},Da=ft((s,t)=>({products:[],loading:!1,error:null,fetchProducts:async()=>{s({loading:!0,error:null});try{const r=await G.get("/api/products");s({products:r.data,loading:!1})}catch(r){console.error("Error al cargar productos:",r),s({error:r.message,loading:!1})}},createProduct:async r=>{s({loading:!0,error:null});try{const i=(await G.post("/api/products",r)).data;return s(l=>({products:[...l.products,i],loading:!1})),{success:!0,data:i}}catch(a){return console.error("Error al crear producto:",a),s({error:a.message,loading:!1}),{success:!1,error:a.message}}},updateProduct:async(r,a)=>{s({loading:!0,error:null});try{const l=(await G.put(`/api/products/${r}`,a)).data;return s(o=>({products:o.products.map(c=>c.id===r?l:c),loading:!1})),{success:!0,data:l}}catch(i){return console.error("Error al actualizar producto:",i),s({error:i.message,loading:!1}),{success:!1,error:i.message}}},deleteProduct:async r=>{s({loading:!0,error:null});try{return await G.delete(`/api/products/${r}`),s(a=>({products:a.products.filter(i=>i.id!==r),loading:!1})),{success:!0}}catch(a){return console.error("Error al eliminar producto:",a),s({error:a.message,loading:!1}),{success:!1,error:a.message}}},calculatePrice:async(r,a)=>{try{return{success:!0,data:(await G.post(`/api/products/${r}/calculate-price`,{quantity:a})).data.data.pricing}}catch(i){return console.error("Error al calcular precio:",i),{success:!1,error:i.message}}},getPricingInfo:async r=>{try{return{success:!0,data:(await G.get(`/api/products/${r}/pricing-info`)).data.data.pricingInfo}}catch(a){return console.error("Error al obtener informaciÃ³n de precios:",a),{success:!1,error:a.message}}},getFilteredProducts:r=>{const{products:a}=t();return a.filter(i=>{const l=i.name.toLowerCase(),o=i.description?i.description.toLowerCase():"",c=i.type?i.type.toLowerCase():"";return l.includes(r.toLowerCase())||o.includes(r.toLowerCase())||c.includes(r.toLowerCase())})},getProductById:r=>{const{products:a}=t();return a.find(i=>i.id===r)},clearError:()=>s({error:null}),reset:()=>s({products:[],loading:!1,error:null})})),Nl=ft((s,t)=>({clients:[],loading:!1,error:null,fetchClients:async()=>{s({loading:!0,error:null});try{const r=await G.get("/api/clients");console.log("ðŸ” API Clientes Response:",r.data);const a=r.data.success?r.data.data:r.data;console.log("ðŸ” Clientes Data:",a),s({clients:a||[],loading:!1})}catch(r){console.error("Error al cargar clientes:",r),s({error:r.message,loading:!1})}},createClient:async r=>{s({loading:!0,error:null});try{const i=(await G.post("/api/clients",r)).data;return s(l=>({clients:[...l.clients,i],loading:!1})),{success:!0,data:i}}catch(a){return console.error("Error al crear cliente:",a),s({error:a.message,loading:!1}),{success:!1,error:a.message}}},updateClient:async(r,a)=>{s({loading:!0,error:null});try{const l=(await G.put(`/api/clients/${r}`,a)).data;return s(o=>({clients:o.clients.map(c=>c.id===r?l:c),loading:!1})),{success:!0,data:l}}catch(i){return console.error("Error al actualizar cliente:",i),s({error:i.message,loading:!1}),{success:!1,error:i.message}}},deleteClient:async r=>{s({loading:!0,error:null});try{return await G.delete(`/api/clients/${r}`),s(a=>({clients:a.clients.filter(i=>i.id!==r),loading:!1})),{success:!0}}catch(a){return console.error("Error al eliminar cliente:",a),s({error:a.message,loading:!1}),{success:!1,error:a.message}}},getFilteredClients:r=>{const{clients:a}=t();return a.filter(i=>{const l=i.name.toLowerCase(),o=i.documentNumber.toLowerCase(),c=i.email?i.email.toLowerCase():"";return l.includes(r.toLowerCase())||o.includes(r.toLowerCase())||c.includes(r.toLowerCase())})},getClientById:r=>{const{clients:a}=t();return a.find(i=>i.id===r)},fetchClientById:async r=>{try{return(await G.get(`/api/clients/${r}`)).data}catch(a){return console.error("Error al obtener cliente:",a),null}},clearError:()=>s({error:null}),reset:()=>s({clients:[],loading:!1,error:null})})),ar=ft((s,t)=>({deliveryFees:[],deliveryPersons:[],loading:!1,error:null,fetchDeliveryFees:async()=>{var r,a,i,l;console.log("ðŸ”„ fetchDeliveryFees iniciado"),s({loading:!0,error:null});try{const o=await G.get("/api/delivery-fees");console.log("ðŸ“¦ Respuesta del API:",o.data);const c=o.data.success?o.data.data:o.data;return s({deliveryFees:c,loading:!1}),console.log("âœ… deliveryFees actualizado en store:",c),{success:!0,data:c}}catch(o){return console.error("âŒ Error al cargar tarifas de envÃ­o:",o),s({error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al cargar tarifas",loading:!1}),{success:!1,error:((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al cargar tarifas"}}},createDeliveryFee:async r=>{var a,i,l,o;try{const c=await G.post("/api/delivery-fees",r);return s(d=>({deliveryFees:[...Array.isArray(d.deliveryFees)?d.deliveryFees:[],c.data]})),{success:!0,data:c.data}}catch(c){return console.error("Error al crear tarifa:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al crear tarifa"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al crear tarifa"}}},updateDeliveryFee:async(r,a)=>{var i,l,o,c;try{const d=await G.put(`/api/delivery-fees/${r}`,a);return s(g=>({deliveryFees:Array.isArray(g.deliveryFees)?g.deliveryFees.map(P=>P.id===r?d.data:P):[]})),{success:!0,data:d.data}}catch(d){return console.error("Error al actualizar tarifa:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar tarifa"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar tarifa"}}},deleteDeliveryFee:async r=>{var a,i,l,o;try{return await G.delete(`/api/delivery-fees/${r}`),s(c=>({deliveryFees:Array.isArray(c.deliveryFees)?c.deliveryFees.filter(d=>d.id!==r):[]})),{success:!0}}catch(c){return console.error("Error al eliminar tarifa:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al eliminar tarifa"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al eliminar tarifa"}}},fetchDeliveryPersons:async()=>{var r,a,i,l,o,c,d;s({loading:!0,error:null});try{console.log("ðŸ”„ fetchDeliveryPersons iniciado");const g=await G.get("/api/user-management");console.log("ðŸ“¦ Respuesta usuarios completos:",g.data);const T=(g.data.success?g.data.data:g.data).filter(R=>R.role==="repartidor");return s({deliveryPersons:T,loading:!1}),console.log("âœ… Repartidores cargados:",T.length),{success:!0,data:T}}catch(g){return console.error("âŒ Error al cargar repartidores:",g),console.error("âŒ Status:",(r=g.response)==null?void 0:r.status),console.error("âŒ Message:",(i=(a=g.response)==null?void 0:a.data)==null?void 0:i.message),s({error:((o=(l=g.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al cargar repartidores",loading:!1}),{success:!1,error:((d=(c=g.response)==null?void 0:c.data)==null?void 0:d.message)||"Error al cargar repartidores"}}},createDeliveryPerson:async r=>{var a,i,l,o;try{const c=await G.post("/api/user-management",r);return s(d=>({deliveryPersons:[...Array.isArray(d.deliveryPersons)?d.deliveryPersons:[],c.data.data]})),{success:!0,data:c.data.data}}catch(c){return console.error("Error al crear repartidor:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al crear repartidor"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al crear repartidor"}}},updateDeliveryPerson:async(r,a)=>{var i,l,o,c;try{const d=await G.put(`/api/user-management/${r}`,a);return s(g=>({deliveryPersons:Array.isArray(g.deliveryPersons)?g.deliveryPersons.map(P=>P.id===r?d.data.data:P):[]})),{success:!0,data:d.data.data}}catch(d){return console.error("Error al actualizar repartidor:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar repartidor"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar repartidor"}}},updateDeliveryPersonStatus:async(r,a)=>{var i,l,o,c;try{return await G.patch(`/api/user-management/${r}/toggle-status`,{isActive:a==="available"}),s(d=>({deliveryPersons:Array.isArray(d.deliveryPersons)?d.deliveryPersons.map(g=>g.id===r?{...g,isActive:a==="available"}:g):[]})),{success:!0}}catch(d){return console.error("Error al actualizar estado:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar estado"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar estado"}}},deleteDeliveryPerson:async r=>{var a,i,l,o;try{return await G.delete(`/api/user-management/${r}`),s(c=>({deliveryPersons:Array.isArray(c.deliveryPersons)?c.deliveryPersons.filter(d=>d.id!==r):[]})),{success:!0}}catch(c){return console.error("Error al eliminar repartidor:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al eliminar repartidor"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al eliminar repartidor"}}},getAvailableDeliveryPersons:()=>{const{deliveryPersons:r}=t();return Array.isArray(r)?r.filter(a=>a.isActive===!0):[]},getDeliveryStats:()=>{const{deliveryPersons:r,deliveryFees:a}=t(),i=Array.isArray(r)?r:[],l=Array.isArray(a)?a:[],o=i.length,c=i.filter(T=>T.isActive===!0).length,d=i.filter(T=>T.isActive===!1).length,g=l.length,P=l.filter(T=>T.isActive).length;return{totalPersons:o,availablePersons:c,inactivePersons:d,totalFees:g,activeFees:P}},clearError:()=>s({error:null})})),Kr=ft((s,t)=>({orders:[],loading:!1,error:null,createGuestOrder:async r=>{var a,i,l,o,c;s({loading:!0,error:null});try{console.log("Enviando datos al backend:",r);const d=await G.post("/api/guest-orders",r);console.log("Respuesta completa del servidor:",d),console.log("Datos de la respuesta:",d.data);const g=d.data.data;return console.log("Procesando respuesta - newOrder:",g),s(P=>({orders:Array.isArray(P.orders)?[...P.orders,g]:[g],loading:!1})),{success:!0,data:g}}catch(d){return console.error("Error al crear pedido de invitado:",d),console.error("Detalles del error:",(a=d.response)==null?void 0:a.data),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al crear pedido",loading:!1}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al crear pedido"}}},fetchOrders:async()=>{var r,a,i,l;s({loading:!0,error:null});try{const o=await G.get("/api/guest-orders?limit=1000");console.log("Respuesta completa del servidor:",o),console.log("Datos de la respuesta:",o.data);const c=o.data.success?o.data.data:o.data;return console.log("Procesando pedidos:",c),s({orders:Array.isArray(c)?c:[],loading:!1}),{success:!0,data:c}}catch(o){return console.error("Error al cargar pedidos de invitados:",o),s({error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al cargar pedidos",loading:!1}),{success:!1,error:((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al cargar pedidos"}}},fetchOrdersSilently:async()=>{var r,a;try{const i=await G.get("/api/guest-orders?limit=1000");console.log("ðŸ”„ ActualizaciÃ³n silenciosa de pedidos");const l=i.data.success?i.data.data:i.data;return s({orders:Array.isArray(l)?l:[]}),{success:!0,data:l}}catch(i){return console.error("Error en actualizaciÃ³n silenciosa:",i),{success:!1,error:((a=(r=i.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al actualizar pedidos"}}},updateOrderStatus:async(r,a)=>{var i,l,o,c;try{return await G.put(`/api/guest-orders/${r}/status`,{status:a}),s(d=>({orders:Array.isArray(d.orders)?d.orders.map(g=>g.id===r?{...g,status:a}:g):[]})),{success:!0}}catch(d){return console.error("Error al actualizar estado:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar estado"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar estado"}}},updateGuestOrder:async(r,a)=>{var i,l,o,c;s({loading:!0,error:null});try{if(a.deliveryPersonId){console.log("ðŸ” Asignando repartidor - Enviando peticiÃ³n:",{url:`/api/guest-orders/${r}/assign-delivery`,data:{deliveryPersonId:a.deliveryPersonId},headers:G.defaults.headers.common});const d=await G.put(`/api/guest-orders/${r}/assign-delivery`,{deliveryPersonId:a.deliveryPersonId}),g=d.data.data;return console.log("ðŸ” AsignaciÃ³n de repartidor - Respuesta recibida:",d.data),console.log("ðŸ” AsignaciÃ³n de repartidor - updatedOrder:",g),s(P=>({orders:Array.isArray(P.orders)?P.orders.map(T=>T.id===r?{...T,...g}:T):[],loading:!1})),{success:!0,data:g}}else{console.log("ðŸ” updateGuestOrder - Enviando peticiÃ³n:",{url:`/api/guest-orders/${r}`,data:a,headers:G.defaults.headers.common});const d=await G.put(`/api/guest-orders/${r}`,a),g=d.data;return console.log("ðŸ” updateGuestOrder - Respuesta recibida:",d.data),console.log("ðŸ” updateGuestOrder - updatedOrder:",g),s(P=>({orders:Array.isArray(P.orders)?P.orders.map(T=>T.id===r?{...T,...g}:T):[],loading:!1})),{success:!0,data:g}}}catch(d){return console.error("Error al actualizar pedido de invitado:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar pedido",loading:!1}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar pedido"}}},getOrderById:r=>{const{orders:a}=t();return Array.isArray(a)?a.find(i=>i.id===r):null},getOrdersByStatus:r=>{const{orders:a}=t();return Array.isArray(a)?a.filter(i=>i.status===r):[]},getOrderStats:()=>{const{orders:r}=t();return Array.isArray(r)?{total:r.length,pending:r.filter(a=>a.status==="pendiente").length,inProgress:r.filter(a=>a.status==="en_camino").length,delivered:r.filter(a=>a.status==="entregado").length,cancelled:r.filter(a=>a.status==="cancelado").length}:{total:0,pending:0,inProgress:0,delivered:0,cancelled:0}},clearError:()=>s({error:null})})),Rl=()=>{var je,ne,Be,X,De,I,fe,Me,Le,se,C,Z;const s=Ys(),t=We("white","gray.800"),r=We("gray.200","gray.600");Gs({base:!0,md:!1});const[a,i]=S.useState(new Date),{isExpired:l,isLoading:o}=Br();if(!o&&l)return e.jsx(Ur,{});const{products:c,fetchProducts:d}=Da(),{clients:g,fetchClients:P}=Nl(),{getDeliveryStats:T,fetchDeliveryPersons:R,fetchDeliveryFees:j}=ar(),{orders:p,fetchOrders:D,getOrderStats:_}=Kr(),v=async()=>{try{const $=await G.get("/api/vouchers/stats");console.log("ðŸ“¦ Respuesta vales:",$.data),$.data.success&&(ce($.data.data),console.log("âœ… EstadÃ­sticas de vales actualizadas:",$.data.data))}catch($){console.error("Error al cargar estadÃ­sticas de vales:",$)}},w=async()=>{try{const $=await G.get("/api/subscriptions");if(console.log("ðŸ“¦ Respuesta suscripciones:",$.data),$.data.success){const Pe=$.data.data||[];z({total:Pe.length,active:Pe.filter(Ae=>Ae.status==="active").length}),console.log("âœ… EstadÃ­sticas de suscripciones actualizadas:",{total:Pe.length,active:Pe.filter(Ae=>Ae.status==="active").length})}}catch($){console.error("Error al cargar estadÃ­sticas de suscripciones:",$)}};S.useEffect(()=>{(async()=>{try{await new Promise(Ae=>setTimeout(Ae,100)),d(),P(),j(),D(),v(),w()}catch(Ae){console.error("Error cargando datos del dashboard:",Ae)}})();const Pe=setInterval(()=>{D(),P(),v(),w(),i(new Date)},3e4);return()=>clearInterval(Pe)},[d,P,j,D]),_(),T();const E=(p==null?void 0:p.length)||0,k=((je=p==null?void 0:p.filter($=>$.status==="pending"))==null?void 0:je.length)||0,M=((ne=p==null?void 0:p.filter($=>$.status==="delivered"))==null?void 0:ne.length)||0,L=((Be=p==null?void 0:p.filter($=>$.status==="confirmed"))==null?void 0:Be.length)||0,m=((X=p==null?void 0:p.filter($=>$.status==="preparing"))==null?void 0:X.length)||0,B=((De=p==null?void 0:p.filter($=>$.status==="ready"))==null?void 0:De.length)||0,y=((I=p==null?void 0:p.filter($=>$.paymentMethod==="contraentrega"))==null?void 0:I.length)||0,re=((fe=p==null?void 0:p.filter($=>$.paymentMethod==="vale"))==null?void 0:fe.length)||0,x=((Me=p==null?void 0:p.filter($=>$.paymentMethod==="suscripcion"))==null?void 0:Me.length)||0,V=((Le=p==null?void 0:p.filter($=>$.paymentType==="plin"))==null?void 0:Le.length)||0,Y=((se=p==null?void 0:p.filter($=>$.paymentType==="efectivo"||$.paymentType==="cash"))==null?void 0:se.length)||0,ae=((C=p==null?void 0:p.filter($=>$.paymentType==="plin"))==null?void 0:C.reduce(($,Pe)=>$+(Pe.totalAmount||0),0))||0,Ce=((Z=p==null?void 0:p.filter($=>$.paymentType==="efectivo"||$.paymentType==="cash"))==null?void 0:Z.reduce(($,Pe)=>$+(Pe.totalAmount||0),0))||0,[ie,ce]=S.useState({total:0,pending:0}),[Ne,z]=S.useState({total:0,active:0}),Q=(g==null?void 0:g.length)||0;console.log("ðŸ” Dashboard Debug:",{clients:(g==null?void 0:g.length)||0,totalClients:Q,valeOrders:re,suscripcionOrders:x});const ye=(p==null?void 0:p.reduce(($,Pe)=>$+(parseFloat(Pe.totalAmount)||0),0))||0,oe=(p==null?void 0:p.filter($=>{const Pe=new Date($.createdAt),Ae=new Date;return Pe.toDateString()===Ae.toDateString()}).reduce(($,Pe)=>$+(parseFloat(Pe.totalAmount)||0),0))||0,A=[{title:"Pedidos",icon:Cs,color:"orange",onClick:()=>s("/dashboard/orders-management"),count:E,description:"Gestionar pedidos"},{title:"Clientes",icon:na,color:"green",onClick:()=>s("/dashboard/clients"),count:Q,description:"Base de clientes"},{title:"Suscripciones",icon:ks,color:"purple",onClick:()=>s("/dashboard/subscriptions"),count:Ne.active,description:`${Ne.total} total, ${Ne.active} activas`},{title:"Vales",icon:Vs,color:"blue",onClick:()=>s("/dashboard/vales"),count:ie.pending,description:`${ie.total} total, ${ie.pending} pendientes`},{title:"Cobranza",icon:sa,color:"red",onClick:()=>s("/dashboard/collection-report"),count:ie.pending,description:"Vales por cobrar"},{title:"TÃ©rminos",icon:oo,color:"teal",onClick:()=>s("/dashboard/terms-and-conditions"),count:0,description:"TÃ©rminos y condiciones"},{title:"Usuarios",icon:fo,color:"cyan",onClick:()=>s("/dashboard/users-management"),count:0,description:"GestiÃ³n de usuarios"}];return e.jsxs(N,{p:{base:1,sm:2,md:4},maxW:"100%",overflow:"hidden",children:[e.jsxs(ys,{direction:{base:"column",sm:"row"},align:{base:"center",sm:"flex-start"},justify:"space-between",mb:{base:4,md:6},wrap:"wrap",gap:2,children:[e.jsxs(u,{align:{base:"center",sm:"flex-start"},spacing:{base:1,md:2},maxW:{base:"100%",sm:"70%"},children:[e.jsx(dt,{size:{base:"sm",md:"md"},variant:"horizontal",color:"blue.500",textColor:"blue.600",taglineColor:"teal.500"}),e.jsx(K,{size:{base:"md",md:"lg"},color:"gray.700",textAlign:{base:"center",sm:"left"},children:"Dashboard Administrativo"}),e.jsxs(n,{color:"gray.400",fontSize:"xs",textAlign:{base:"center",sm:"left"},children:["Ãšltima actualizaciÃ³n: ",a.toLocaleTimeString()]})]}),e.jsxs(u,{spacing:1,align:{base:"center",sm:"flex-end"},children:[e.jsx(ve,{colorScheme:"green",variant:"subtle",fontSize:"xs",children:"Sistema Activo"}),e.jsx(O,{size:"xs",colorScheme:"blue",variant:"outline",onClick:()=>{D(),P(),R(),v(),w(),i(new Date)},children:"Actualizar"})]})]}),e.jsxs(as,{columns:{base:1,sm:2,lg:5},spacing:{base:2,md:4},mb:{base:4,md:8},maxW:"100%",children:[e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"orange.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ“¦ Pedidos Pendientes"}),e.jsx(He,{color:"orange.500",fontSize:{base:"xl",md:"2xl"},children:k}),e.jsxs(Ue,{fontSize:{base:"xs",md:"sm"},children:[L," confirmados"]})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"green.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ’° Ingresos Hoy"}),e.jsxs(He,{color:"green.500",fontSize:{base:"xl",md:"2xl"},children:["S/ ",oe.toFixed(2)]}),e.jsxs(Ue,{fontSize:{base:"xs",md:"sm"},children:["Total: S/ ",ye.toFixed(2)]})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"blue.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ‘¥ Clientes"}),e.jsx(He,{color:"blue.500",fontSize:{base:"xl",md:"2xl"},children:g.length}),e.jsx(Ue,{fontSize:{base:"xs",md:"sm"},children:"Clientes registrados"})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"purple.600",fontSize:{base:"xs",md:"sm"},children:"âœ… Entregados"}),e.jsx(He,{color:"purple.500",fontSize:{base:"xl",md:"2xl"},children:M}),e.jsxs(Ue,{fontSize:{base:"xs",md:"sm"},children:[B," listos para entregar"]})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"yellow.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ“Š Total Pedidos"}),e.jsx(He,{color:"yellow.500",fontSize:{base:"xl",md:"2xl"},children:E}),e.jsxs(Ue,{fontSize:{base:"xs",md:"sm"},children:[m," en preparaciÃ³n"]})]})})})]}),e.jsxs(as,{columns:{base:2,sm:2,lg:4},spacing:{base:2,md:4},mb:{base:4,md:8},maxW:"100%",children:[e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:2,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"blue.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ’µ Contraentrega"}),e.jsx(He,{color:"blue.500",fontSize:{base:"lg",md:"xl"},children:y}),e.jsx(Ue,{fontSize:{base:"xs",md:"sm"},children:"Pago al recibir"})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:2,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"orange.600",fontSize:{base:"xs",md:"sm"},children:"ðŸŽ« Vales"}),e.jsx(He,{color:"orange.500",fontSize:{base:"lg",md:"xl"},children:re}),e.jsx(Ue,{fontSize:{base:"xs",md:"sm"},children:"Pago a crÃ©dito"})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:2,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"purple.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ“… Suscripciones"}),e.jsx(He,{color:"purple.500",fontSize:{base:"lg",md:"xl"},children:x}),e.jsx(Ue,{fontSize:{base:"xs",md:"sm"},children:"Pago mensual"})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:2,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"green.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ’§ Productos"}),e.jsx(He,{color:"green.500",fontSize:{base:"lg",md:"xl"},children:c.length}),e.jsx(Ue,{fontSize:{base:"xs",md:"sm"},children:"En inventario"})]})})})]}),e.jsxs(as,{columns:{base:1,sm:2,lg:2},spacing:{base:2,md:4},mb:{base:4,md:8},maxW:"100%",children:[e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"blue.600",fontSize:{base:"sm",md:"md"},children:"ðŸ“± PLIN"}),e.jsx(He,{color:"blue.500",fontSize:{base:"xl",md:"2xl"},children:V}),e.jsxs(Ue,{fontSize:{base:"xs",md:"sm"},children:["S/ ",ae.toFixed(2)," en total"]})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"green.600",fontSize:{base:"sm",md:"md"},children:"ðŸ’µ Efectivo"}),e.jsx(He,{color:"green.500",fontSize:{base:"xl",md:"2xl"},children:Y}),e.jsxs(Ue,{fontSize:{base:"xs",md:"sm"},children:["S/ ",Ce.toFixed(2)," en total"]})]})})})]}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",maxW:"100%",children:e.jsxs(W,{p:{base:3,md:4},children:[e.jsx(K,{size:{base:"sm",md:"md"},mb:{base:3,md:4},color:"gray.700",children:"ðŸš€ Acciones RÃ¡pidas"}),e.jsx(as,{columns:{base:2,sm:3,md:4,lg:7},spacing:{base:2,md:3},maxW:"100%",children:A.map(($,Pe)=>e.jsx(F,{borderColor:`${$.color}.200`,borderWidth:"2px",cursor:"pointer",onClick:$.onClick,_hover:{transform:"translateY(-2px)",boxShadow:"lg",borderColor:`${$.color}.300`,bg:`${$.color}.50`},transition:"all 0.2s",borderRadius:"lg",bg:"white",h:{base:"100px",md:"110px"},children:e.jsx(W,{p:{base:2,md:3},h:"100%",children:e.jsxs(u,{spacing:{base:1,md:2},h:"100%",justify:"space-between",align:"center",children:[e.jsx(N,{display:"flex",alignItems:"center",justifyContent:"center",h:{base:"24px",md:"28px"},w:{base:"24px",md:"28px"},borderRadius:"full",bg:`${$.color}.100`,flexShrink:0,children:e.jsx($.icon,{size:{base:14,md:16},color:`${$.color}.600`})}),e.jsxs(u,{spacing:1,flex:1,w:"100%",textAlign:"center",children:[e.jsx(n,{fontSize:{base:"2xs",md:"xs"},fontWeight:"bold",color:"gray.700",noOfLines:2,lineHeight:"1.1",minH:{base:"20px",md:"24px"},display:"flex",alignItems:"center",justifyContent:"center",children:$.title}),e.jsx(n,{fontSize:{base:"3xs",md:"2xs"},color:"gray.500",noOfLines:2,lineHeight:"1.0",minH:{base:"16px",md:"18px"},children:$.description})]}),e.jsxs(N,{position:"relative",display:"inline-block",children:[e.jsx(N,{bg:`${$.color}.500`,color:"white",borderRadius:"full",px:{base:2,md:3},py:{base:1,md:1.5},fontSize:{base:"sm",md:"md"},fontWeight:"900",minW:{base:"28px",md:"32px"},h:{base:"28px",md:"32px"},display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"lg",border:"4px solid white",_hover:{transform:"scale(1.1)",boxShadow:"xl",bg:`${$.color}.600`},transition:"all 0.3s ease",cursor:"pointer",children:$.count}),e.jsx(N,{position:"absolute",top:"-2px",right:"-2px",w:"8px",h:"8px",bg:"white",borderRadius:"full",opacity:.8,className:"pulse-animation"})]})]})})},Pe))})]})})]})},Ol=()=>{var $,Pe,Ae,Je,gs,Xs,at;const{orders:s,loading:t,fetchOrders:r,fetchOrdersSilently:a,updateGuestOrder:i}=Kr(),{deliveryPersons:l,fetchDeliveryPersons:o}=ar(),[c,d]=S.useState(""),[g,P]=S.useState("all"),[T,R]=S.useState("all"),[j,p]=S.useState(null),[D,_]=S.useState(""),[v,w]=S.useState(new Date),[E,k]=S.useState(!1),[M,L]=S.useState(""),{isOpen:m,onOpen:B,onClose:y}=Ge(),{isOpen:re,onOpen:x,onClose:V}=Ge(),{isOpen:Y,onOpen:ae,onClose:Ce}=Ge(),ie=xs();S.useEffect(()=>{r(),o();const f=setInterval(async()=>{k(!0),await a(),w(new Date),k(!1)},3e4);return()=>clearInterval(f)},[r,o]);const ce=s.map(f=>({...f,type:"guest",orderNumber:f.orderNumber||`PED-${f.id}`,clientName:f.clientName||f.customerName,clientPhone:f.clientPhone||f.customerPhone,clientAddress:f.clientAddress||f.deliveryAddress,clientDistrict:f.clientDistrict||f.deliveryDistrict})).sort((f,de)=>new Date(de.createdAt)-new Date(f.createdAt));console.log("ðŸ” Pedidos cargados:",ce.length),console.log("ðŸ” Repartidores cargados:",l.length),console.log("ðŸ” Primer pedido completo:",ce[0]),console.log("ðŸ” Estructura del cliente:",($=ce[0])==null?void 0:$.Client),console.log("ðŸ” Datos del cliente:",{clientName:(Pe=ce[0])==null?void 0:Pe.clientName,clientPhone:(Ae=ce[0])==null?void 0:Ae.clientPhone,clientAddress:(Je=ce[0])==null?void 0:Je.clientAddress,Client:(gs=ce[0])==null?void 0:gs.Client,deliveryAddress:(Xs=ce[0])==null?void 0:Xs.deliveryAddress,deliveryDistrict:(at=ce[0])==null?void 0:at.deliveryDistrict});const Ne=ce.filter(f=>f.deliveryPersonId);console.log("ðŸ” Pedidos asignados:",Ne.length),Ne.forEach(f=>{console.log(`ðŸ” Pedido ${f.id} asignado a repartidor ${f.deliveryPersonId}:`,{id:f.id,status:f.status,deliveryPersonId:f.deliveryPersonId,deliveryPerson:f.deliveryPerson})}),console.log("ðŸ” Repartidores disponibles:",l.map(f=>({id:f.id,name:f.name,type:typeof f.id}))),ce.forEach((f,de)=>{de<3&&console.log(`ðŸ” Pedido ${de+1}:`,{id:f.id,type:f.type,clientName:f.clientName,clientPhone:f.clientPhone,Client:f.Client,customerName:f.customerName,customerPhone:f.customerPhone,deliveryAddress:f.deliveryAddress,products:f.products,orderDetails:f.orderDetails})});const z=(ce||[]).filter(f=>{var Ts,zs,Re,Ds;const de=((Ts=f.orderNumber)==null?void 0:Ts.toLowerCase().includes(c.toLowerCase()))||((zs=f.clientName)==null?void 0:zs.toLowerCase().includes(c.toLowerCase()))||((Ds=(Re=f.client)==null?void 0:Re.name)==null?void 0:Ds.toLowerCase().includes(c.toLowerCase())),ue=g==="all"||f.status===g,ds=T==="all"||T==="efectivo"&&f.paymentType==="efectivo"||T==="plin"&&f.paymentType==="plin"||T==="vale"&&f.paymentMethod==="vale"||T==="suscripcion"&&f.paymentMethod==="suscripcion"||T==="contraentrega"&&f.paymentMethod==="contraentrega";return de&&ue&&ds}),Q={pending:z.filter(f=>f.status==="pending")||[],confirmed:z.filter(f=>f.status==="confirmed")||[],preparing:z.filter(f=>f.status==="preparing")||[],ready:z.filter(f=>f.status==="ready")||[],delivered:z.filter(f=>f.status==="delivered")||[],cancelled:z.filter(f=>f.status==="cancelled")||[]},ye=f=>{switch(f){case"pending":return"orange";case"confirmed":return"blue";case"preparing":return"yellow";case"ready":return"purple";case"delivered":return"green";case"cancelled":return"red";case"pendiente":return"orange";case"asignado":return"blue";case"en_camino":return"purple";case"entregado":return"green";case"cancelado":return"red";default:return"gray"}},oe=f=>{switch(f){case"pending":return"Pendiente";case"confirmed":return"Asignado";case"preparing":return"Preparando";case"ready":return"Listo";case"delivered":return"Entregado";case"cancelled":return"Cancelado";case"pendiente":return"Pendiente";case"asignado":return"Asignado";case"en_camino":return"En Camino";case"entregado":return"Entregado";case"cancelado":return"Cancelado";default:return f}},A=(f,de)=>{if(de==="suscripcion")return ks;switch(f){case"cash":case"efectivo":return bs;case"plin":return Ks;case"yape":return Ks;case"transfer":return FaCreditCard;default:return bs}},je=f=>{let de=[];return f.type==="regular"&&f.orderDetails&&(de=f.orderDetails.map(ue=>{var ds,Ts;return{name:((ds=ue.product)==null?void 0:ds.name)||((Ts=ue.Product)==null?void 0:Ts.name)||"Producto",quantity:ue.quantity||0,price:ue.unitPrice||ue.price||0}})),f.type==="guest"&&f.products&&(de=f.products.map(ue=>{var ds;return{name:((ds=ue.product)==null?void 0:ds.name)||ue.name||"Producto",quantity:ue.quantity||0,price:ue.price||ue.unitPrice||0}})),de.length===0?e.jsx(n,{fontSize:"xs",color:"gray.500",fontStyle:"italic",children:"Sin productos"}):e.jsx(u,{spacing:1,align:"start",w:"full",children:de.map((ue,ds)=>e.jsxs(h,{justify:"space-between",w:"full",fontSize:"xs",children:[e.jsx(n,{noOfLines:1,flex:1,children:ue.name}),e.jsxs(n,{color:"gray.600",minW:"fit-content",children:["x",ue.quantity]}),e.jsxs(n,{color:"green.600",fontWeight:"medium",minW:"fit-content",children:["S/ ",(ue.price*ue.quantity).toFixed(2)]})]},ds))})},ne=async()=>{if(!j||!D){ie({title:"Datos incompletos",description:"Selecciona un repartidor",status:"warning",duration:3e3,isClosable:!0});return}if(j.status==="cancelled"){ie({title:"AcciÃ³n no permitida",description:"No se puede asignar repartidor a un pedido cancelado",status:"error",duration:3e3,isClosable:!0}),y();return}try{const f={status:"confirmed",deliveryPersonId:D,notes:M};console.log("ðŸ” Asignando repartidor:",{orderId:j.id,deliveryPersonId:D,updateData:f});const de=await i(j.id,f);console.log("ðŸ” Resultado de la asignaciÃ³n:",de),ie({title:"Repartidor asignado",description:"El pedido ha sido asignado exitosamente",status:"success",duration:3e3,isClosable:!0}),r(),y(),p(null),_(""),L("")}catch{ie({title:"Error",description:"No se pudo asignar el repartidor",status:"error",duration:3e3,isClosable:!0})}},Be=f=>{p(f),ae()},X=async()=>{if(j)try{const f={status:"cancelled"};await i(j.id,f),ie({title:"Pedido anulado",description:`El pedido #${j.id} ha sido anulado exitosamente`,status:"success",duration:3e3,isClosable:!0}),Ce(),p(null),r()}catch{ie({title:"Error",description:"No se pudo anular el pedido",status:"error",duration:3e3,isClosable:!0})}},De=async(f,de)=>{try{const ue={status:de};await i(f.id,ue),ie({title:"Estado actualizado",description:`El pedido ahora estÃ¡ ${oe(de).toLowerCase()}`,status:"success",duration:3e3,isClosable:!0})}catch{ie({title:"Error",description:"No se pudo actualizar el estado",status:"error",duration:3e3,isClosable:!0})}},I=f=>{if(f.status==="cancelled"){ie({title:"AcciÃ³n no permitida",description:"No se puede asignar repartidor a un pedido cancelado",status:"warning",duration:3e3,isClosable:!0});return}p(f),_(f.deliveryPersonId||""),L(f.notes||""),B()},fe=f=>{console.log("ðŸ” Pedido seleccionado:",f),console.log("ðŸ” DeliveryPerson en el pedido:",f.deliveryPerson),console.log("ðŸ” DeliveryPersonId en el pedido:",f.deliveryPersonId),p(f),x()},Me=async f=>{var de;try{console.log("ðŸ” Descargando boleta para pedido:",f);const ue=await fetch("/api/admin/generate-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({orderData:{id:f.id,customerName:f.clientName||f.customerName,customerPhone:f.clientPhone||f.customerPhone,customerEmail:f.customerEmail||((de=f.client)==null?void 0:de.email),deliveryAddress:f.clientAddress||f.deliveryAddress,deliveryDistrict:f.clientDistrict||f.deliveryDistrict,subtotal:f.subtotal||f.total||f.totalAmount,deliveryFee:f.deliveryFee||0,total:f.total||f.totalAmount,paymentMethod:f.paymentMethod,paymentType:f.paymentType,items:(f.products||f.orderDetails||[]).map(Re=>{var Ds;return{name:((Ds=Re.product)==null?void 0:Ds.name)||Re.name||"Producto",quantity:Re.quantity||1,price:Re.price||Re.unitPrice||0,subtotal:Re.subtotal||(Re.price||Re.unitPrice||0)*(Re.quantity||1)}}),products:(f.products||f.orderDetails||[]).map(Re=>{var Ds;return{name:((Ds=Re.product)==null?void 0:Ds.name)||Re.name||"Producto",quantity:Re.quantity||1,price:Re.price||Re.unitPrice||0,subtotal:Re.subtotal||(Re.price||Re.unitPrice||0)*(Re.quantity||1)}}),originalProducts:f.products,originalOrderDetails:f.orderDetails},documentType:"boleta"})});if(console.log("ðŸ” Respuesta del servidor:",ue.status,ue.statusText),!ue.ok){const Re=await ue.text();throw console.error("âŒ Error del servidor:",Re),new Error(`Error al generar la boleta: ${ue.status} ${ue.statusText}`)}const ds=await ue.blob();console.log("âœ… Blob generado, tamaÃ±o:",ds.size);const Ts=window.URL.createObjectURL(ds),zs=document.createElement("a");zs.href=Ts,zs.download=`boleta_${f.orderNumber||f.id}.pdf`,document.body.appendChild(zs),zs.click(),window.URL.revokeObjectURL(Ts),document.body.removeChild(zs),ie({title:"Boleta descargada",description:"La boleta se ha descargado correctamente",status:"success",duration:3e3,isClosable:!0})}catch(ue){console.error("Error al descargar boleta:",ue),ie({title:"Error",description:"No se pudo descargar la boleta",status:"error",duration:3e3,isClosable:!0})}},Le=f=>e.jsx(F,{variant:"outline",size:"sm",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",fontSize:"sm",children:f.orderNumber}),e.jsx(n,{fontSize:"xs",color:"gray.500",children:f.type==="regular"?"Cliente Frecuente":"Cliente Visitante"}),e.jsx(n,{fontSize:"2xs",color:"gray.400",children:f.createdAt?new Date(f.createdAt).toLocaleString("es-PE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"Sin fecha"})]}),e.jsx(ve,{colorScheme:ye(f.status),children:oe(f.status)})]}),e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{spacing:2,children:[e.jsx(Us,{size:12,color:"#718096"}),e.jsx(n,{fontSize:"sm",fontWeight:"medium",children:f.clientName||"Sin nombre"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(Hs,{size:12,color:"#718096"}),e.jsx(n,{fontSize:"sm",children:f.clientPhone||"Sin telÃ©fono"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(wt,{size:12,color:"#718096"}),e.jsxs(u,{align:"start",spacing:0,children:[e.jsx(n,{fontSize:"sm",noOfLines:2,children:f.clientAddress||f.deliveryAddress||"Sin direcciÃ³n"}),f.clientDistrict&&e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["ðŸ“ ",f.clientDistrict]}),f.deliveryReference&&e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["ðŸ”— ",f.deliveryReference]})]})]})]}),e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsx(n,{fontSize:"sm",fontWeight:"medium",color:"gray.700",children:"ðŸ›’ Productos:"}),je(f)]}),e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsxs(h,{spacing:2,children:[e.jsx(le,{as:A(f.paymentType,f.paymentMethod),size:14}),e.jsx(n,{fontSize:"sm",children:f.paymentMethod==="vale"?"A CrÃ©dito (Vale)":f.paymentMethod==="suscripcion"?"SuscripciÃ³n":f.paymentMethod==="contraentrega"?f.paymentType==="plin"?"Contraentrega - PLIN":f.paymentType==="yape"?"Contraentrega - Yape":f.paymentType==="cash"?"Contraentrega - Efectivo":"Contraentrega":f.paymentType==="plin"?"PLIN":f.paymentType==="yape"?"Yape":(f.paymentType==="cash","Efectivo")})]}),e.jsxs(n,{fontWeight:"bold",fontSize:"sm",color:"green.600",children:["S/ ",parseFloat(f.total||f.totalAmount||0).toFixed(2)]})]}),f.paymentMethod==="suscripcion"&&f.subscriptionId&&e.jsx(h,{spacing:2,bg:"purple.50",p:2,borderRadius:"md",children:e.jsxs(n,{fontSize:"xs",color:"purple.600",fontWeight:"medium",children:["ðŸ“… SuscripciÃ³n ID: ",f.subscriptionId]})}),f.paymentMethod==="vale"&&e.jsx(h,{spacing:2,bg:"orange.50",p:2,borderRadius:"md",children:e.jsx(n,{fontSize:"xs",color:"orange.600",fontWeight:"medium",children:"ðŸŽ« Pago a crÃ©dito - Se cobrarÃ¡ al final del mes"})})]}),f.deliveryPersonId&&e.jsxs(h,{spacing:2,children:[e.jsx(Cs,{size:12,color:"#3182CE"}),e.jsx(n,{fontSize:"sm",children:(()=>{const de=l.find(ue=>ue.id===f.deliveryPersonId);return console.log(`ðŸ” Buscando repartidor para pedido ${f.id}:`,{deliveryPersonId:f.deliveryPersonId,type:typeof f.deliveryPersonId,foundDeliveryPerson:de,allDeliveryPersons:l.map(ue=>({id:ue.id,type:typeof ue.id}))}),(de==null?void 0:de.name)||"Repartidor asignado"})()})]}),e.jsxs(h,{spacing:2,justify:"center",children:[e.jsx(Oe,{label:"Ver detalles",children:e.jsx(_e,{size:"sm",icon:e.jsx(Wr,{}),onClick:()=>fe(f),"aria-label":"Ver detalles"})}),e.jsx(Oe,{label:"Descargar boleta",children:e.jsx(_e,{size:"sm",icon:e.jsx(Vr,{}),colorScheme:"green",onClick:()=>Me(f),"aria-label":"Descargar boleta"})}),(!f.deliveryPersonId||f.status==="pending")&&f.status!=="cancelled"&&e.jsx(Oe,{label:"Asignar repartidor",children:e.jsx(_e,{size:"sm",icon:e.jsx(Yt,{}),colorScheme:"blue",onClick:()=>I(f),"aria-label":"Asignar repartidor"})}),f.status==="confirmed"&&e.jsx(O,{size:"sm",colorScheme:"purple",onClick:()=>De(f,"preparing"),children:"Enviar"}),(f.status==="preparing"||f.status==="ready")&&e.jsx(O,{size:"sm",colorScheme:"green",onClick:()=>De(f,"delivered"),children:"Entregado"}),(f.status==="pending"||f.status==="confirmed"||f.status==="preparing"||f.status==="ready")&&e.jsx(O,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>Be(f),children:"Anular"})]})]})})},`${f.type}-${f.id}`),se=()=>{var f;return e.jsxs(Ke,{isOpen:m,onClose:y,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Asignar Repartidor"}),e.jsx(es,{}),e.jsx(Qe,{children:e.jsxs(u,{spacing:4,children:[j&&e.jsxs(Ee,{status:"info",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(n,{fontWeight:"bold",children:["Pedido: ",j.orderNumber]}),e.jsxs(n,{fontSize:"sm",children:["Cliente: ",j.clientName||((f=j.client)==null?void 0:f.name)]}),e.jsxs(n,{fontSize:"sm",children:["Total: S/ ",parseFloat(j.total||j.totalAmount||0).toFixed(2)]})]})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Repartidor"}),e.jsx(rs,{value:D,onChange:de=>_(de.target.value),placeholder:"Selecciona un repartidor",children:l.map(de=>e.jsxs("option",{value:de.id,children:[de.firstName," ",de.lastName]},de.id))})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Notas adicionales"}),e.jsx(Ns,{value:M,onChange:de=>L(de.target.value),placeholder:"Instrucciones especiales para el repartidor...",rows:3})]})]})}),e.jsxs(As,{children:[e.jsx(O,{variant:"outline",mr:3,onClick:y,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:ne,children:"Asignar Repartidor"})]})]})]})},C=()=>{var f,de,ue,ds;return e.jsxs(Ke,{isOpen:re,onClose:V,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Detalles del Pedido"}),e.jsx(es,{}),e.jsx(Qe,{children:j&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsx(F,{variant:"outline",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Pedido:"}),e.jsx(n,{children:j.orderNumber})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado:"}),e.jsx(ve,{colorScheme:ye(j.status),children:oe(j.status)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Tipo:"}),e.jsx(n,{children:j.type==="regular"?"Cliente Frecuente":"Cliente Visitante"})]})]})})}),e.jsxs(F,{variant:"outline",children:[e.jsx(ze,{children:e.jsx(K,{size:"sm",children:"Cliente"})}),e.jsx(W,{children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Nombre:"}),e.jsx(n,{children:j.clientName||((f=j.client)==null?void 0:f.name)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"TelÃ©fono:"}),e.jsx(n,{children:j.clientPhone||((de=j.client)==null?void 0:de.phone)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"DirecciÃ³n:"}),e.jsx(n,{children:j.clientAddress||((ue=j.client)==null?void 0:ue.address)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Distrito:"}),e.jsx(n,{children:j.clientDistrict||((ds=j.client)==null?void 0:ds.district)})]})]})})]}),e.jsxs(F,{variant:"outline",children:[e.jsx(ze,{children:e.jsx(K,{size:"sm",children:"Pago"})}),e.jsx(W,{children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"MÃ©todo:"}),e.jsxs(h,{children:[e.jsx(le,{as:A(j.paymentType,j.paymentMethod),size:16}),e.jsx(n,{children:j.paymentMethod==="vale"?"A CrÃ©dito (Vale)":j.paymentMethod==="suscripcion"?"SuscripciÃ³n":j.paymentMethod==="contraentrega"?j.paymentType==="plin"?"Contraentrega - PLIN":j.paymentType==="yape"?"Contraentrega - Yape":j.paymentType==="cash"?"Contraentrega - Efectivo":"Contraentrega":j.paymentType==="plin"?"PLIN":j.paymentType==="yape"?"Yape":(j.paymentType==="cash","Efectivo")})]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(j.total||j.totalAmount||0).toFixed(2)]})]})]})})]}),e.jsxs(F,{variant:"outline",children:[e.jsx(ze,{children:e.jsx(K,{size:"sm",children:"Repartidor"})}),e.jsx(W,{children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Nombre:"}),e.jsx(n,{children:j.deliveryPerson?j.deliveryPerson.username:"No asignado"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"TelÃ©fono:"}),e.jsx(n,{children:j.deliveryPerson?j.deliveryPerson.phone:"N/A"})]})]})})]}),j.notes&&e.jsxs(F,{variant:"outline",children:[e.jsx(ze,{children:e.jsx(K,{size:"sm",children:"Notas"})}),e.jsx(W,{children:e.jsx(n,{children:j.notes})})]})]})}),e.jsx(As,{children:e.jsx(O,{onClick:V,children:"Cerrar"})})]})]})},Z=()=>e.jsxs(Ke,{isOpen:Y,onClose:Ce,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Confirmar AnulaciÃ³n"}),e.jsx(es,{}),e.jsx(Qe,{children:j&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(Ee,{status:"warning",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"Â¿EstÃ¡s seguro de que deseas anular este pedido?"}),e.jsx(n,{fontSize:"sm",children:"Esta acciÃ³n no se puede deshacer."})]})]}),e.jsx(F,{variant:"outline",p:3,children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Pedido:"}),e.jsxs(n,{children:["#",j.id]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Cliente:"}),e.jsx(n,{children:j.clientName||"Sin nombre"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado actual:"}),e.jsx(ve,{colorScheme:ye(j.status),children:oe(j.status)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(j.total||j.totalAmount||0).toFixed(2)]})]})]})})]})}),e.jsxs(As,{children:[e.jsx(O,{variant:"outline",mr:3,onClick:Ce,children:"Cancelar"}),e.jsx(O,{colorScheme:"red",onClick:X,children:"SÃ­, Anular Pedido"})]})]})]});return t?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsxs(N,{p:6,children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(ys,{justify:"space-between",align:"center",children:[e.jsxs(N,{children:[e.jsx(K,{size:"lg",mb:2,children:"GestiÃ³n de Pedidos"}),e.jsx(n,{color:"gray.600",children:"Administra y asigna repartidores a los pedidos"}),e.jsxs(h,{spacing:2,children:[e.jsxs(n,{color:"gray.400",fontSize:"xs",children:["Ãšltima actualizaciÃ³n: ",v.toLocaleTimeString()]}),E&&e.jsx(N,{w:"8px",h:"8px",bg:"blue.400",borderRadius:"full",animation:"pulse 1s infinite"})]})]}),e.jsx(O,{size:"sm",colorScheme:"blue",variant:"outline",onClick:async()=>{k(!0),await a(),w(new Date),k(!1)},isLoading:E,children:"Actualizar"})]}),e.jsx(F,{children:e.jsx(W,{children:e.jsxs(as,{columns:{base:1,md:4},spacing:4,children:[e.jsxs(H,{children:[e.jsx(U,{children:"Buscar"}),e.jsxs(Pt,{children:[e.jsx(Fr,{children:e.jsx(Ka,{})}),e.jsx(te,{placeholder:"Buscar por pedido o cliente...",value:c,onChange:f=>d(f.target.value)})]})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Estado"}),e.jsxs(rs,{value:g,onChange:f=>P(f.target.value),children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"pending",children:"Pendiente"}),e.jsx("option",{value:"confirmed",children:"Asignado"}),e.jsx("option",{value:"preparing",children:"Preparando"}),e.jsx("option",{value:"ready",children:"Listo"}),e.jsx("option",{value:"delivered",children:"Entregado"}),e.jsx("option",{value:"cancelled",children:"Cancelado"})]})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Pago"}),e.jsxs(rs,{value:T,onChange:f=>R(f.target.value),children:[e.jsx("option",{value:"all",children:"Todos los pagos"}),e.jsx("option",{value:"contraentrega",children:"Contraentrega"}),e.jsx("option",{value:"vale",children:"A CrÃ©dito (Vale)"}),e.jsx("option",{value:"suscripcion",children:"SuscripciÃ³n"}),e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"plin",children:"PLIN"})]})]}),e.jsxs(H,{children:[e.jsx(U,{children:"EstadÃ­sticas"}),e.jsxs(u,{spacing:1,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Total:"}),e.jsx(ve,{colorScheme:"blue",children:z.length})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Pendientes:"}),e.jsx(ve,{colorScheme:"orange",children:Q.pending.length})]})]})]})]})})}),e.jsx(as,{columns:{base:1,md:2,lg:3},spacing:4,children:z.map(Le)}),z.length===0&&e.jsx(ls,{h:"200px",children:e.jsxs(u,{spacing:4,children:[e.jsx(n,{color:"gray.500",fontSize:"lg",children:"No hay pedidos que coincidan con los filtros"}),e.jsx(O,{variant:"outline",onClick:()=>{d(""),P("all"),R("all")},children:"Limpiar filtros"})]})})]}),se(),C(),Z()]})},Ll=({isOpen:s,onClose:t,onAccept:r,onReject:a,title:i="TÃ©rminos y Condiciones",showAcceptance:l=!0})=>{const[o,c]=S.useState(null),[d,g]=S.useState(!1),[P,T]=S.useState(!1),[R,j]=S.useState(!1),[p,D]=S.useState(null),_=We("white","gray.800"),v=We("gray.700","gray.200"),w=We("gray.50","gray.700"),E=We("gray.200","gray.600"),k=async()=>{var B,y,re;try{g(!0),D(null),console.log("ðŸ”„ Cargando tÃ©rminos y condiciones activos...");const x=await os.get("/api/terms-and-conditions/active");console.log("ðŸ“¦ Respuesta tÃ©rminos activos:",x.data),c(x.data.data),console.log("âœ… TÃ©rminos cargados:",x.data.data?"SÃ­":"No")}catch(x){console.error("âŒ Error fetching terms:",x),console.error("âŒ Status:",(B=x.response)==null?void 0:B.status),console.error("âŒ Message:",(re=(y=x.response)==null?void 0:y.data)==null?void 0:re.message),D("No se pudieron cargar los tÃ©rminos y condiciones")}finally{g(!1)}};S.useEffect(()=>{s&&(console.log("ðŸ” Modal abierto, reseteando estado"),T(!1),j(!1),k())},[s]);const M=()=>{if(console.log("ðŸ” handleAccept llamado, accepted:",P,"onAccept:",!!r,"isProcessing:",R),R){console.log("âŒ Ya se estÃ¡ procesando, ignorando clic");return}P&&r?(console.log("âœ… Ejecutando onAccept"),j(!0),r(o)):console.log("âŒ No se puede aceptar - accepted:",P,"onAccept:",!!r)},L=()=>{a?a():t()},m=B=>new Date(B).toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric"});return e.jsxs(Ke,{isOpen:s,onClose:t,size:"xl",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{maxW:"800px",maxH:"90vh",bg:_,children:[e.jsx(Xe,{children:e.jsxs(u,{align:"stretch",spacing:2,children:[e.jsx(n,{fontSize:"xl",fontWeight:"bold",color:"blue.600",children:i}),o&&e.jsxs(h,{justify:"space-between",children:[e.jsxs(ve,{colorScheme:"blue",variant:"subtle",children:["VersiÃ³n ",o.version]}),e.jsxs(n,{fontSize:"sm",color:"gray.500",children:["Vigente desde: ",m(o.effectiveDate)]})]})]})}),e.jsxs(Qe,{overflowY:"auto",pb:4,children:[d&&e.jsx(ls,{py:8,children:e.jsx(vs,{size:"xl"})}),p&&e.jsxs(Ee,{status:"error",borderRadius:"md",children:[e.jsx(Te,{}),e.jsx(n,{children:p})]}),o&&!d&&e.jsxs(N,{children:[e.jsx(n,{fontSize:"lg",fontWeight:"semibold",mb:4,color:v,children:o.title}),e.jsx(hs,{mb:4}),e.jsx(N,{whiteSpace:"pre-wrap",fontSize:"sm",lineHeight:"1.6",color:v,maxH:"400px",overflowY:"auto",p:4,bg:w,borderRadius:"md",border:"1px solid",borderColor:E,children:o.content})]})]}),l&&o&&!d&&e.jsx(As,{children:e.jsxs(u,{w:"full",spacing:4,children:[e.jsx(Fn,{isChecked:P,onChange:B=>{console.log("ðŸ” Checkbox cambiado a:",B.target.checked),T(B.target.checked)},colorScheme:"blue",size:"lg",children:e.jsx(n,{fontSize:"sm",children:"He leÃ­do y acepto los tÃ©rminos y condiciones"})}),e.jsxs(h,{w:"full",justify:"space-between",children:[e.jsx(O,{variant:"outline",onClick:L,colorScheme:"red",children:"Rechazar"}),e.jsx(O,{colorScheme:"blue",onClick:M,isDisabled:!P||R,isLoading:R,loadingText:"Procesando...",children:"Aceptar"})]})]})}),!l&&e.jsx(As,{children:e.jsx(O,{onClick:t,colorScheme:"blue",children:"Cerrar"})})]})]})},Zr=ft((s,t)=>({districts:[],loading:!1,error:null,fetchDistricts:async()=>{var r,a,i,l;s({loading:!0,error:null});try{const o=await G.get("/api/districts"),c=o.data.success?o.data.data:o.data;return s({districts:c,loading:!1}),{success:!0,data:c}}catch(o){return console.error("Error al cargar distritos:",o),s({error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al cargar distritos",loading:!1}),{success:!1,error:((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al cargar distritos"}}},getDistrictById:r=>{const{districts:a}=t();return Array.isArray(a)?a.find(i=>i.id===r):null},getDistrictsByFee:r=>{const{districts:a}=t();return Array.isArray(a)?a.filter(i=>i.deliveryFee<=r):[]},updateDistrict:async(r,a)=>{var i,l,o,c;try{const d=await G.put(`/api/districts/${r}`,a),g=d.data.data||d.data;return s(P=>({districts:Array.isArray(P.districts)?P.districts.map(T=>T.id===r?g:T):[]})),{success:!0,data:g}}catch(d){return console.error("Error al actualizar distrito:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar distrito"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar distrito"}}},createDistrict:async r=>{var a,i,l,o;try{console.log("ðŸ”„ Creando distrito con datos:",r);const c=await G.post("/api/districts",r);console.log("ðŸ“¦ Respuesta del backend:",c.data);const d=c.data.data||c.data;return console.log("ðŸ“¦ Distrito procesado:",d),s(g=>{const P=[...Array.isArray(g.districts)?g.districts:[],d];return console.log("ðŸ“¦ Distritos actualizados en store:",P),{districts:P}}),{success:!0,data:d}}catch(c){return console.error("âŒ Error al crear distrito:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al crear distrito"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al crear distrito"}}},clearError:()=>s({error:null})})),Nn="/assets/img_buyon-CC-6ZbJa.jpeg",Fl="/assets/img_paquete_botellas-nUXaTVFq.jpeg",Wl="/assets/plin_qr-Mn7UEP9b.jpeg",Ml=()=>{const s=Ys(),t=xs();Gs({base:!0,md:!1});const{isOpen:r,onOpen:a,onClose:i}=Ge(),l=()=>{i(),Ae(!1),gs(!1)},{products:o,fetchProducts:c,calculatePrice:d}=Da(),{deliveryFees:g,fetchDeliveryFees:P}=ar(),{districts:T,fetchDistricts:R}=Zr(),[j,p]=S.useState(1),[D,_]=S.useState(!1),[v,w]=S.useState(!1),[E,k]=S.useState([]),[M,L]=S.useState(!1),[m,B]=S.useState(null),[y,re]=S.useState(null),[x,V]=S.useState(!1),[Y,ae]=S.useState(!1),[Ce,ie]=S.useState(!1),[ce,Ne]=S.useState([]),[z,Q]=S.useState(!1),[ye,oe]=S.useState(null),[A,je]=S.useState(""),[ne,Be]=S.useState(null),[X,De]=S.useState({name:"",phone:"",email:"",address:"",district:"",reference:"",notes:""}),[I,fe]=S.useState([]),[Me,Le]=S.useState(new Set),[se,C]=S.useState("contraentrega"),[Z,$]=S.useState("efectivo"),[Pe,Ae]=S.useState(!1),[Je,gs]=S.useState(!1),[Xs,at]=S.useState(!1),[f,de]=S.useState(!1),ue=b=>{const q=b.toLowerCase();return q.includes("bidÃ³n")||q.includes("bidon")||q.includes("garrafa")?Nn:q.includes("paquete")||q.includes("pack")||q.includes("botellas")?Fl:Nn};S.useEffect(()=>{c(),P(),R(),ds()},[c,P,R]);const ds=async()=>{try{Q(!0),console.log("ðŸ”„ Cargando planes de suscripciÃ³n...");const b=await G.get("/api/subscription-plans");if(console.log("ðŸ“¦ Respuesta planes:",b.data),b.data.success){const q=b.data.data.map(J=>({id:J.id,name:J.name,bottles:J.totalBottles,price:parseFloat(J.monthlyPrice),bonus:J.bonusBottles,description:J.description,color:["blue","green","purple","orange","pink","teal","red"][J.sortOrder%7],popular:J.sortOrder===2,pricePerBottle:parseFloat(J.pricePerBottle),maxDailyDelivery:J.maxDailyDelivery}));console.log("âœ… Planes transformados:",q),Ne(q)}}catch(b){console.error("âŒ Error al cargar planes de suscripciÃ³n:",b),t({title:"Error",description:"No se pudieron cargar los planes de suscripciÃ³n",status:"error",duration:3e3,isClosable:!0})}finally{Q(!1)}};S.useEffect(()=>{if(ye&&ce.length>0){const b=ce.find(q=>q.id===ye);b&&(re(b),L(!0),C("suscripcion"),oe(null))}},[ye,ce]);const Ts=async b=>{try{console.log("ðŸ”„ Buscando suscripciones para DNI:",b);const q=await G.get(`/api/subscriptions/client/${b}`);return console.log("ðŸ“¦ Respuesta suscripciones:",q.data),q.data.success?(k(q.data.data),q.data.data):[]}catch(q){return console.error("âŒ Error al buscar suscripciones:",q),[]}},zs=async b=>{var q;w(!0);try{const J=await G.get(`/api/clients/document/${b}`);if(J.data.success){const ee=J.data.data;Be(ee.id),De({...X,name:ee.name,phone:ee.phone,email:ee.email||"",address:ee.address,district:ee.district,reference:"",notes:""});const ss=(await Ts(b)).filter(be=>be.status==="active"&&be.remainingBottles>0);if(ss.length>0)C("suscripcion"),L(!0),B(ss[0]),at(!0),de(!1),t({title:"SuscripciÃ³n activa encontrada",description:`Tienes ${ss[0].remainingBottles} bidones disponibles de tu suscripciÃ³n`,status:"success",duration:5e3,isClosable:!0});else try{const be=await G.get(`/api/client-preferences/dni/${b}`);if(be.data.success&&be.data.data){const $e=be.data.data;C($e.preferredPaymentMethod),at(!0);const us=new Date,ts=new Date($e.validUntil);if(ts>us)if(de(!1),$e.preferredPaymentMethod==="suscripcion"){if($e.subscriptionPlanId){const Ws=ce.find(yt=>yt.id===$e.subscriptionPlanId);Ws?(re(Ws),L(!0)):oe($e.subscriptionPlanId)}t({title:"Preferencia de suscripciÃ³n activa",description:"Puedes comprar una nueva suscripciÃ³n",status:"info",duration:5e3,isClosable:!0})}else t({title:"Modalidad activa encontrada",description:`Tu modalidad de ${$e.preferredPaymentMethod==="vale"?"vale":"suscripciÃ³n"} estÃ¡ activa hasta ${ts.toLocaleDateString()}`,status:"info",duration:5e3,isClosable:!0});else at(!1),de(!1),t({title:"Modalidad expirada",description:"Tu modalidad anterior expirÃ³. Elige una nueva modalidad de pago.",status:"warning",duration:5e3,isClosable:!0})}}catch{console.log("No se encontraron preferencias para este cliente")}t({title:"Cliente encontrado",description:`Datos de ${ee.name} cargados automÃ¡ticamente`,status:"success",duration:3e3,isClosable:!0}),p(3)}else t({title:"Cliente no encontrado",description:"Completa tus datos para registrarte automÃ¡ticamente",status:"info",duration:5e3,isClosable:!0}),p(2)}catch(J){console.error("Error al buscar cliente:",J),((q=J.response)==null?void 0:q.status)===404?(t({title:"Cliente no encontrado",description:"Completa tus datos para registrarte automÃ¡ticamente",status:"info",duration:5e3,isClosable:!0}),p(2)):(t({title:"Error al buscar cliente",description:"Intenta nuevamente o regÃ­strate como nuevo cliente",status:"error",duration:5e3,isClosable:!0}),p(2))}finally{w(!1)}},Re=b=>{b.preventDefault(),A.length===8||A.length===11?zs(A):t({title:"Documento invÃ¡lido",description:"El DNI debe tener 8 dÃ­gitos o el RUC debe tener 11 dÃ­gitos",status:"warning",duration:3e3,isClosable:!0})},Ds=async()=>{var b,q;try{if(_(!0),!A||A.trim()===""){t({title:"DNI requerido",description:"Debes ingresar tu DNI para registrarte",status:"warning",duration:3e3,isClosable:!0});return}const J={name:X.name,document:A,phone:X.phone,email:X.email||"",address:X.address,district:X.district,reference:X.reference||"",notes:X.notes||"",status:"active"},ee=await G.post("/api/clients",J);if(ee.data.success){const Se=ee.data.data.id;Be(Se),console.log("Cliente registrado con ID:",Se),t({title:"Â¡Registro exitoso!",description:"Te has registrado automÃ¡ticamente. Ahora puedes elegir productos y modalidades de pago",status:"success",duration:5e3,isClosable:!0}),p(3),setTimeout(()=>{console.log("ClientId despuÃ©s del registro:",Se),console.log("ClientId en estado:",ne)},100)}else throw new Error(ee.data.message||"Error al registrar")}catch(J){console.error("Error al registrar:",J),t({title:"Error al registrar",description:((q=(b=J.response)==null?void 0:b.data)==null?void 0:q.message)||"No se pudo completar el registro",status:"error",duration:5e3,isClosable:!0})}finally{_(!1)}},Ia=async b=>{if(!Me.has(b.id)){if(M&&b.type!=="bidon"){t({title:"Solo bidones en suscripciÃ³n",description:"Con tu suscripciÃ³n solo puedes pedir bidones de agua",status:"warning",duration:3e3,isClosable:!0});return}Le(q=>new Set(q).add(b.id));try{let q;if(M&&m){const ee=ce.find(ss=>ss.name===m.subscriptionType),Se=ee?parseFloat(ee.pricePerBottle):5;q={unitPrice:Se,totalPrice:Se,originalPrice:Se,discountApplied:0,priceLevel:"subscription"}}else{const ee=await d(b.id,1);if(ee.success)q=ee.data;else throw new Error("Error al calcular precio")}const J=I.findIndex(ee=>ee.productId===b.id);if(J!==-1){const ee=[...I],Se=ee[J].quantity+1;if(M&&m){const ss=ce.find($e=>$e.name===m.subscriptionType),be=ss?parseFloat(ss.pricePerBottle):5;ee[J].quantity=Se,ee[J].unitPrice=be,ee[J].subtotal=be*Se,ee[J].pricing={unitPrice:be,totalPrice:be*Se,originalPrice:be,discountApplied:0,priceLevel:"subscription"},fe(ee)}else{const ss=await d(b.id,Se);if(ss.success){const be=ss.data;ee[J].quantity=Se,ee[J].unitPrice=parseFloat(be.unitPrice),ee[J].subtotal=parseFloat(be.unitPrice)*Se,ee[J].pricing=be,fe(ee)}}}else{const ee={id:`${b.id}-${Date.now()}`,productId:b.id,name:b.name,type:b.type,unitPrice:parseFloat(q.unitPrice),quantity:1,subtotal:parseFloat(q.unitPrice),pricing:q};fe([...I,ee])}t({title:"Producto agregado",description:`${b.name} agregado al carrito`,status:"success",duration:2e3,isClosable:!0})}catch(q){console.error("Error al calcular precio:",q)}finally{Le(q=>{const J=new Set(q);return J.delete(b.id),J})}}},Dt=async(b,q)=>{if(q<=0){fe(I.filter(J=>J.id!==b));return}try{const J=I.find(Se=>Se.id===b);if(!J)return;let ee;if(M&&m){const Se=ce.find(be=>be.name===m.subscriptionType),ss=Se?parseFloat(Se.pricePerBottle):5;ee={unitPrice:ss,totalPrice:ss*q,originalPrice:ss,discountApplied:0,priceLevel:"subscription"}}else{const Se=await d(J.productId,q);if(Se.success)ee=Se.data;else throw new Error("Error al calcular precio")}fe(I.map(Se=>Se.id===b?{...Se,quantity:q,unitPrice:parseFloat(ee.unitPrice),subtotal:parseFloat(ee.unitPrice)*q,pricing:ee}:Se))}catch(J){console.error("Error al actualizar cantidad:",J)}},_a=(b,q)=>{const J=parseInt(q)||0;J>0?Dt(b,J):(q===""||q==="0")&&fe(I.map(ee=>ee.id===b?{...ee,quantity:0}:ee))},ka=(b,q)=>{const J=parseInt(q)||0;J<=0?fe(I.filter(ee=>ee.id!==b)):Dt(b,J)},bt=()=>{if(!X.district)return 0;const b=T.find(q=>q.name===X.district);return b?parseFloat(b.deliveryFee):0},It=()=>I.reduce((b,q)=>b+q.subtotal,0),Fs=()=>It()+bt(),ir=async()=>{if(console.log("Estado antes de crear pedido:",{clientId:ne,dni:A,paymentMethod:se,selectedSubscriptionPlan:y,cart:I}),!ne){t({title:"Cliente no registrado",description:"Debes registrarte como cliente para continuar",status:"error",duration:5e3,isClosable:!0}),p(2);return}if(se!=="suscripcion"&&I.length===0){t({title:"Carrito vacÃ­o",description:"Agrega al menos un producto al carrito",status:"warning",duration:3e3,isClosable:!0});return}if(se==="suscripcion"&&!y){t({title:"Plan no seleccionado",description:"Selecciona un plan de suscripciÃ³n",status:"warning",duration:3e3,isClosable:!0});return}if(!X.name||!X.phone||!X.address||!X.district){t({title:"Datos incompletos",description:"Completa todos los campos obligatorios",status:"warning",duration:3e3,isClosable:!0});return}await or()},Na=async b=>{try{console.log("ðŸ” handleTermsAccept iniciado"),ae(!0),ie(!1),cr&&await cr(),t({title:"TÃ©rminos aceptados",description:"Has aceptado los tÃ©rminos y condiciones",status:"success",duration:2e3,isClosable:!0}),console.log("âœ… handleTermsAccept completado")}catch(q){console.error("âŒ Error al crear pedido despuÃ©s de aceptar tÃ©rminos:",q),t({title:"Error",description:"Hubo un problema al crear el pedido",status:"error",duration:5e3,isClosable:!0})}},Ra=()=>{ae(!1),ie(!1),t({title:"TÃ©rminos rechazados",description:"Debes aceptar los tÃ©rminos y condiciones para continuar",status:"error",duration:3e3,isClosable:!0})},or=async()=>{var b,q,J,ee,Se,ss;if(!Y&&se!=="suscripcion"){t({title:"TÃ©rminos y Condiciones",description:"Debes aceptar los tÃ©rminos y condiciones para continuar",status:"warning",duration:3e3,isClosable:!0}),ie(!0);return}_(!0);try{if(M&&m){const be=I.reduce((ts,ps)=>{const Ws=o.find(yt=>yt.id===ps.productId);return Ws&&Ws.type==="bidon"?ts+ps.quantity:ts},0);if(m.remainingBottles<be){t({title:"Bidones insuficientes",description:`Solo tienes ${m.remainingBottles} bidones disponibles. Necesitas ${be} bidones.`,status:"error",duration:5e3,isClosable:!0});return}const $e={customerName:X.name,customerPhone:X.phone,customerEmail:X.email||"",deliveryAddress:X.address,deliveryDistrict:X.district,deliveryReference:X.reference||"",deliveryNotes:X.notes||"",products:I.map(ts=>({productId:ts.productId,quantity:ts.quantity,price:ts.unitPrice})),subtotal:It(),deliveryFee:bt(),totalAmount:Fs(),paymentMethod:"suscripcion",paymentType:"cash",clientId:ne,subscriptionId:m.id};console.log("Enviando pedido con suscripciÃ³n:",$e);const us=await G.post("/api/guest-orders",$e);if(us.data.success){console.log("Datos para use-bottles:",{subscriptionId:m.id,bottlesToUse:be,selectedSubscription:m}),console.log("ðŸ” Respuesta completa del pedido:",us.data);const ts=((b=us.data.data)==null?void 0:b.id)||us.data.id||"Sin ID";t({title:"Â¡Pedido creado exitosamente!",description:`Pedido #${ts} registrado. Se usaron ${be} bidones de tu suscripciÃ³n.`,status:"success",duration:5e3,isClosable:!0});const ps=((q=us.data.data)==null?void 0:q.accessToken)||us.data.accessToken;ps?s(`/receipt/${ps}`):console.error("âŒ No se encontrÃ³ accessToken en la respuesta")}else throw new Error(us.data.message||"Error al crear el pedido")}else if(se==="suscripcion"&&y)try{if(console.log("Datos para crear suscripciÃ³n:",{clientId:ne,dni:A,selectedSubscriptionPlan:y}),!ne)throw new Error("ClientId es requerido para crear suscripciÃ³n");const be={clientId:ne,clientDni:A,subscriptionType:y.id,totalBottles:y.bottles+y.bonus,totalAmount:y.price,paidAmount:y.price,expiryDate:null,notes:`SuscripciÃ³n ${y.name} comprada`},$e=await G.post("/api/subscriptions",be);if(console.log("SuscripciÃ³n creada:",$e.data),$e.data.success){const us=$e.data.data;try{const ts=new Date;ts.setMonth(ts.getMonth()+1);const ps={dni:A,clientId:ne,preferredPaymentMethod:"suscripcion",subscriptionPlanId:y.id,subscriptionAmount:y.price,subscriptionQuantity:y.bottles+y.bonus,validUntil:ts.toISOString()};await G.post("/api/client-preferences",ps),console.log("Preferencias de suscripciÃ³n guardadas:",ps),t({title:"Modalidad guardada",description:`Tu modalidad de suscripciÃ³n estarÃ¡ activa hasta ${ts.toLocaleDateString()}`,status:"success",duration:4e3,isClosable:!0})}catch(ts){console.log("Error al guardar preferencias de suscripciÃ³n:",ts)}t({title:"ðŸŽ‰ Â¡SuscripciÃ³n activada!",description:`Tu suscripciÃ³n ${y.name} estÃ¡ lista. Ahora puedes hacer pedidos usando tus ${y.bottles+y.bonus} bidones disponibles (sin costo adicional).`,status:"success",duration:8e3,isClosable:!0}),L(!0),B({id:us.id,subscriptionType:y.name,totalBottles:y.bottles+y.bonus,remainingBottles:y.bottles+y.bonus,totalAmount:y.price,status:"active"}),Z==="plin"?(p(5),Ae(!0),gs(!1),a()):(fe([]),p(3),t({title:"Â¡Ahora puedes hacer pedidos!",description:`Tienes ${y.bottles+y.bonus} bidones disponibles. Agrega productos al carrito.`,status:"info",duration:6e3,isClosable:!0}))}}catch(be){throw console.log("Error al crear suscripciÃ³n:",be),be}else{const be={customerName:X.name,customerPhone:X.phone,customerEmail:X.email||"",deliveryAddress:X.address,deliveryDistrict:X.district,deliveryReference:X.reference||"",deliveryNotes:X.notes||"",products:I.map(us=>({productId:us.productId,quantity:us.quantity,price:us.unitPrice})),subtotal:It(),deliveryFee:bt(),totalAmount:Fs(),paymentMethod:se,paymentType:Z==="efectivo"?"cash":Z,clientId:ne};console.log("Enviando pedido:",be),console.log("ClientId actual:",ne);const $e=await G.post("/api/guest-orders",be);if($e.data.success){if(se==="vale"||se==="suscripcion")try{if(ne){const ps=new Date;ps.setMonth(ps.getMonth()+1);const Ws={dni:A,clientId:ne,preferredPaymentMethod:se,subscriptionPlanId:se==="suscripcion"?y==null?void 0:y.id:null,subscriptionAmount:se==="suscripcion"?Fs():null,subscriptionQuantity:se==="suscripcion"?I.reduce((yt,qa)=>yt+qa.quantity,0):null,validUntil:ps.toISOString()};await G.post("/api/client-preferences",Ws),console.log("Preferencias guardadas:",Ws),t({title:"Modalidad guardada",description:`Tu modalidad de ${se==="vale"?"vale":"suscripciÃ³n"} estarÃ¡ activa hasta ${ps.toLocaleDateString()}`,status:"success",duration:4e3,isClosable:!0})}}catch(ps){console.log("Error al guardar preferencias:",ps)}console.log("ðŸ” Respuesta completa del pedido normal:",$e.data);const us=((J=$e.data.data)==null?void 0:J.id)||$e.data.id||"Sin ID";t({title:"Â¡Pedido creado exitosamente!",description:`Pedido #${us} registrado correctamente`,status:"success",duration:5e3,isClosable:!0});const ts=((ee=$e.data.data)==null?void 0:ee.accessToken)||$e.data.accessToken;ts?s(`/receipt/${ts}`):console.error("âŒ No se encontrÃ³ accessToken en la respuesta")}else throw new Error($e.data.message||"Error al crear el pedido")}}catch(be){console.error("Error al crear pedido:",be),t({title:"Error al crear pedido",description:((ss=(Se=be.response)==null?void 0:Se.data)==null?void 0:ss.message)||"Error interno del servidor",status:"error",duration:5e3,isClosable:!0})}finally{_(!1)}},en=()=>{Ae(!0),gs(!1),a()},lr=async b=>{var q,J;try{if(!y||!ne||!A)throw new Error("Plan de suscripciÃ³n, cliente o DNI no seleccionado");console.log("ðŸ”„ Creando suscripciÃ³n con datos:",{clientDni:A,subscriptionType:y.name,totalBottles:y.bottles+y.bonus,totalAmount:y.price});const ee={clientDni:A,subscriptionType:y.name,totalBottles:y.bottles+y.bonus,totalAmount:y.price,paidAmount:y.price,notes:`Plan ${y.name} - ${y.bottles+y.bonus} bidones`},Se=await G.post("/api/subscriptions",ee);if(Se.data.success){const ss=Se.data.data;console.log("âœ… SuscripciÃ³n creada:",ss),B({id:ss.id,subscriptionType:y.name,totalBottles:y.bottles+y.bonus,remainingBottles:y.bottles+y.bonus,totalAmount:y.price,status:"active"}),L(!0),C("suscripcion"),ae(!1),fe([]),p(3),i(),Ae(!1),gs(!1),t({title:"Â¡SuscripciÃ³n creada exitosamente!",description:`Tienes ${y.bottles+y.bonus} bidones disponibles. Agrega productos al carrito.`,status:"success",duration:6e3,isClosable:!0})}}catch(ee){throw console.error("âŒ Error al crear suscripciÃ³n:",ee),t({title:"Error al crear suscripciÃ³n",description:((J=(q=ee.response)==null?void 0:q.data)==null?void 0:J.message)||"No se pudo crear la suscripciÃ³n. IntÃ©ntalo de nuevo.",status:"error",duration:5e3,isClosable:!0}),ee}},cr=async()=>{try{se==="suscripcion"&&y?(fe([]),p(3),i(),Ae(!1),gs(!1),t({title:"Â¡Pago confirmado!",description:`Tu suscripciÃ³n ${y.name} estÃ¡ activa. Ahora puedes hacer pedidos usando tus ${y.bottles+y.bonus} bidones disponibles.`,status:"success",duration:8e3,isClosable:!0})):(await or(),i(),Ae(!1),gs(!1))}catch(b){console.error("Error al confirmar pago PLIN:",b),t({title:"Error",description:"Hubo un problema al confirmar el pago",status:"error",duration:5e3,isClosable:!0})}},Oa=()=>{let b=`ðŸ§¾ *COMPROBANTE DE PAGO PLIN*
    
ðŸ‘¤ Cliente: ${X.name}
ðŸ“± TelÃ©fono: ${X.phone}
ðŸ  DirecciÃ³n: ${X.address}
ðŸ“ Distrito: ${X.district}

`;se==="suscripcion"&&y?b+=`ðŸŽ¯ *SUSCRIPCIÃ“N:*
ðŸ“¦ Plan: ${y.name}
ðŸ’° Precio: S/ ${y.price}
ðŸ”¢ Bidones: ${y.bottles} + ${y.bonus} extra
ðŸ“Š Total bidones: ${y.bottles+y.bonus}

âœ… *PAGO REALIZADO VÃA PLIN*`:b+=`ðŸ›’ *PEDIDO:*
${I.map(J=>`â€¢ ${J.name} x${J.quantity} = S/ ${J.subtotal.toFixed(2)}`).join(`
`)}

ðŸ’° *TOTAL: S/ ${Fs().toFixed(2)}*
ðŸ“¦ Flete: S/ ${bt().toFixed(2)}

âœ… *PAGO REALIZADO VÃA PLIN*`;const q=`https://wa.me/51961606183?text=${encodeURIComponent(b)}`;window.open(q,"_blank"),gs(!0),t({title:"WhatsApp abierto",description:"EnvÃ­a el comprobante y luego confirma el pago",status:"info",duration:3e3,isClosable:!0})},sn=b=>{switch(b){case"bidon":return"blue";case"botella":return"green";default:return"gray"}},tn=b=>{switch(b){case"bidon":return"BidÃ³n";case"botella":return"Botella";default:return b}},La=()=>e.jsxs(F,{maxW:{base:"100%",sm:"md"},mx:"auto",w:"100%",children:[e.jsx(ze,{textAlign:"center",p:{base:4,md:6},children:e.jsxs(u,{spacing:{base:3,md:4},children:[e.jsx(le,{as:ta,boxSize:{base:8,md:12},color:"blue.500"}),e.jsx(K,{size:{base:"md",md:"lg"},children:"Ingresa tu DNI"}),e.jsx(n,{color:"gray.600",fontSize:{base:"sm",md:"md"},textAlign:"center",children:"Buscaremos tus datos automÃ¡ticamente para agilizar tu pedido"})]})}),e.jsx(W,{p:{base:4,md:6},children:e.jsx("form",{onSubmit:Re,children:e.jsxs(u,{spacing:{base:3,md:4},children:[e.jsxs(H,{children:[e.jsx(U,{fontSize:{base:"sm",md:"md"},children:"NÃºmero de Documento (DNI o RUC)"}),e.jsx(te,{value:A,onChange:b=>je(b.target.value),placeholder:"12345678 (DNI) o 12345678901 (RUC)",size:{base:"md",md:"lg"},textAlign:"center",fontSize:{base:"md",md:"xl"},fontWeight:"bold",maxLength:11})]}),e.jsx(O,{type:"submit",colorScheme:"blue",size:{base:"md",md:"lg"},w:"full",isLoading:v,loadingText:"Buscando...",leftIcon:e.jsx(Us,{}),children:"Buscar Cliente"}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>p(2),children:"Completar datos manualmente"})]})})})]}),Fa=()=>e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(ze,{children:e.jsxs(K,{size:"md",children:[e.jsx(Us,{style:{display:"inline",marginRight:"8px"}}),"Datos del Cliente"]})}),e.jsx(W,{children:e.jsxs(u,{spacing:4,children:[e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Documento"}),e.jsx(te,{value:A,isDisabled:!0,placeholder:"Tu documento",bg:"gray.100"}),e.jsx(Za,{children:"Documento ingresado en el paso anterior"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Nombre Completo"}),e.jsx(te,{value:X.name,onChange:b=>De({...X,name:b.target.value}),placeholder:"Tu nombre completo"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"TelÃ©fono"}),e.jsx(te,{value:X.phone,onChange:b=>De({...X,phone:b.target.value}),placeholder:"Tu nÃºmero de telÃ©fono"})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Email (opcional)"}),e.jsx(te,{type:"email",value:X.email,onChange:b=>De({...X,email:b.target.value}),placeholder:"Tu correo electrÃ³nico"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"DirecciÃ³n"}),e.jsx(Ns,{value:X.address,onChange:b=>De({...X,address:b.target.value}),placeholder:"DirecciÃ³n completa de entrega",rows:3})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Distrito"}),e.jsx(rs,{value:X.district,onChange:b=>De({...X,district:b.target.value}),placeholder:"Selecciona tu distrito",children:Array.isArray(T)?T.map(b=>e.jsxs("option",{value:b.name,children:[b.name," - S/ ",parseFloat(b.deliveryFee).toFixed(2)]},b.id)):null})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Referencia"}),e.jsx(te,{value:X.reference,onChange:b=>De({...X,reference:b.target.value}),placeholder:"Referencia del lugar (opcional)"})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Notas Adicionales"}),e.jsx(Ns,{value:X.notes,onChange:b=>De({...X,notes:b.target.value}),placeholder:"InformaciÃ³n adicional, preferencias especiales, etc. (opcional)",rows:3})]}),e.jsxs(u,{spacing:3,w:"full",children:[e.jsx(O,{colorScheme:"blue",size:"lg",w:"full",onClick:Ds,isDisabled:!X.name||!X.phone||!X.address||!X.district,children:"Registrarme y Continuar"}),e.jsxs(Ee,{status:"info",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontSize:"sm",fontWeight:"bold",children:"Registro AutomÃ¡tico"}),e.jsx(n,{fontSize:"xs",children:"Al continuar, te registrarÃ¡s automÃ¡ticamente como cliente para acceder a beneficios especiales como vales y suscripciones."})]})]})]})]})})]}),Wa=()=>e.jsxs(u,{spacing:6,w:"full",children:[e.jsxs(F,{w:"full",children:[e.jsxs(ze,{children:[e.jsxs(K,{size:"md",children:[e.jsx(xr,{style:{display:"inline",marginRight:"8px"}}),M?"Bidones Disponibles (SuscripciÃ³n)":"Productos Disponibles"]}),M&&e.jsxs(Ee,{status:"info",size:"sm",borderRadius:"md",mt:2,children:[e.jsx(Te,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Modo SuscripciÃ³n:"})," Solo puedes pedir bidones de agua. Los bidones se descontarÃ¡n de tu suscripciÃ³n sin costo adicional."]})]}),I.length===0&&e.jsxs(Ee,{status:"warning",size:"sm",borderRadius:"md",mt:2,children:[e.jsx(Te,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Â¡Recuerda!"})," Debes seleccionar al menos un producto para continuar con tu pedido."]})]})]}),e.jsx(W,{children:e.jsx(as,{columns:{base:1,md:2},spacing:4,children:o.filter(b=>!M||b.type==="bidon").map(b=>e.jsx(F,{variant:"outline",children:e.jsx(W,{children:e.jsxs(u,{align:"start",spacing:3,children:[e.jsxs(h,{spacing:4,align:"start",w:"full",children:[e.jsx(N,{flexShrink:0,children:e.jsx(Rt,{src:ue(b.name),alt:b.name,boxSize:"80px",objectFit:"cover",borderRadius:"md",border:"2px solid #e2e8f0"})}),e.jsx(u,{align:"start",spacing:1,flex:1,children:e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:b.name}),e.jsx(n,{color:"gray.600",fontSize:"sm",children:b.description}),b.name==="Paquete de Botellas de Agua"&&e.jsx(ve,{colorScheme:"green",size:"sm",fontSize:"xs",whiteSpace:"nowrap",children:"Â¡50+ = S/ 9.00 c/u!"})]}),e.jsx(ve,{colorScheme:sn(b.type),children:tn(b.type)})]})})]}),e.jsxs(h,{spacing:4,children:[e.jsxs(n,{fontWeight:"bold",color:"blue.600",fontSize:"lg",children:["S/ ",parseFloat(b.unitPrice).toFixed(2)]}),e.jsxs(n,{color:"gray.500",fontSize:"sm",children:["Stock: ",b.stock]})]}),e.jsx(O,{colorScheme:"blue",size:"sm",leftIcon:e.jsx(xr,{}),onClick:()=>Ia(b),isLoading:Me.has(b.id),loadingText:"Agregando...",w:"full",children:"Agregar al Carrito"})]})})},b.id))})})]}),I.length>0&&e.jsxs(F,{w:"full",children:[e.jsx(ze,{children:e.jsxs(K,{size:"md",children:[e.jsx(xr,{style:{display:"inline",marginRight:"8px"}}),"Tu Carrito (",I.length," ",I.length===1?"producto":"productos",")"]})}),e.jsx(W,{children:e.jsxs(u,{spacing:4,children:[I.map(b=>{var q;return e.jsx(N,{w:"full",p:3,border:"1px",borderColor:"gray.200",borderRadius:"md",children:e.jsxs(h,{spacing:3,align:"start",children:[e.jsx(Rt,{src:ue(b.name),alt:b.name,boxSize:"50px",objectFit:"cover",borderRadius:"md",border:"1px solid #e2e8f0"}),e.jsxs(u,{spacing:2,flex:1,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:b.name}),e.jsx(ve,{colorScheme:sn(b.type),children:tn(b.type)})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(u,{align:"start",spacing:0,children:[e.jsxs(n,{color:"gray.600",fontSize:"sm",children:["S/ ",parseFloat(b.unitPrice).toFixed(2)," c/u"]}),((q=b.pricing)==null?void 0:q.priceLevel)==="especial50"&&e.jsx(ve,{colorScheme:"green",size:"sm",children:"Â¡Descuento 50+ unidades!"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(O,{size:"sm",onClick:()=>Dt(b.id,b.quantity-1),children:"-"}),e.jsx(te,{value:b.quantity,onChange:J=>_a(b.id,J.target.value),onBlur:J=>ka(b.id,J.target.value),size:"sm",w:"60px",textAlign:"center",type:"number",min:"0",placeholder:"0"}),e.jsx(O,{size:"sm",onClick:()=>Dt(b.id,b.quantity+1),children:"+"})]})]}),e.jsx(h,{justify:"space-between",w:"full",children:e.jsxs(n,{fontWeight:"bold",color:"blue.600",children:["Subtotal: S/ ",parseFloat(b.subtotal).toFixed(2)]})})]})]})},b.id)}),e.jsx(hs,{}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Subtotal:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(It()).toFixed(2)]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Flete:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(bt()).toFixed(2)]})]}),e.jsx(hs,{}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(Fs()).toFixed(2)]})]})]}),e.jsx(O,{colorScheme:"green",size:"lg",w:"full",onClick:()=>{p(M&&m?5:4)},leftIcon:e.jsx(Cs,{}),children:M&&m?"Continuar con ConfirmaciÃ³n":"Continuar con Modalidad"})]})})]})]}),Ma=()=>M&&m?e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(ze,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:ks,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Usar SuscripciÃ³n"}),e.jsxs(n,{color:"gray.600",textAlign:"center",children:["Tienes ",m.remainingBottles," bidones disponibles de tu suscripciÃ³n"]}),e.jsxs(Ee,{status:"success",size:"sm",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"SuscripciÃ³n activa:"})," ",m.remainingBottles," bidones disponibles"]})]})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsx(F,{variant:"filled",borderColor:"purple.500",bg:"purple.50",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Tipo de SuscripciÃ³n:"}),e.jsx(n,{children:m.subscriptionType||"N/A"})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Bidones Totales:"}),e.jsx(n,{children:m.totalBottles||0})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Bidones Restantes:"}),e.jsx(n,{color:"green.600",fontWeight:"bold",children:m.remainingBottles||0})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Total Pagado:"}),e.jsxs(n,{children:["S/ ",m.totalAmount?parseFloat(m.totalAmount).toFixed(2):"0.00"]})]})]})})}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:X.name})]}),e.jsxs(u,{spacing:1,w:"full",align:"stretch",children:[e.jsx(n,{children:"Productos:"}),I.map((b,q)=>e.jsxs(h,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["â€¢ ",b.name," x",b.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(b.subtotal).toFixed(2)]})]},q))]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total Bidones:"}),e.jsxs(n,{fontWeight:"bold",color:"purple.600",children:[I.reduce((b,q)=>b+q.quantity,0)," bidones"]})]})]})]})})}),e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:()=>p(5),leftIcon:e.jsx(Ps,{}),children:"Usar SuscripciÃ³n (Sin Pago)"})]})})]}):Xs&&!f?e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(ze,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:bs,boxSize:12,color:"green.500"}),e.jsx(K,{size:"lg",children:"Modalidad de Pago"}),e.jsx(n,{color:"gray.600",textAlign:"center",children:"Tu modalidad de pago estÃ¡ activa este mes"}),e.jsxs(Ee,{status:"success",size:"sm",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Modalidad activa:"})," ",se==="vale"?"A CrÃ©dito (Vale)":se==="suscripcion"?"SuscripciÃ³n Mensual":"Contraentrega"]})]})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsx(F,{variant:"filled",borderColor:"blue.500",bg:"blue.50",children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ms,{value:se,isChecked:!0}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:se==="vale"?"A CrÃ©dito (Vale)":se==="suscripcion"?"SuscripciÃ³n con Beneficios":"Contraentrega"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:se==="vale"?"Paga al final del mes - Se anota en tu vale":se==="suscripcion"?"Pedido recurrente mensual con bidones extra":"Pagas en efectivo o PLIN cuando recibes tu pedido"})]})]})})}),e.jsx(O,{colorScheme:"blue",size:"lg",w:"full",onClick:()=>{se==="suscripcion"?(L(!0),p(3)):p(5)},leftIcon:e.jsx(Vs,{}),children:se==="vale"?"Continuar (Sin Pago Inmediato)":"Continuar con Forma de Pago"})]})})]}):se==="suscripcion"&&!y?(console.log("Mostrando planes de suscripciÃ³n. Estado actual:",{clientId:ne,dni:A,paymentMethod:se,selectedSubscriptionPlan:y,isSubscriptionMode:M}),M||L(!0),ne?e.jsxs(F,{maxW:"4xl",mx:"auto",children:[e.jsx(ze,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:ks,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Elige tu Plan de SuscripciÃ³n"}),e.jsx(n,{color:"gray.600",textAlign:"center",children:"Selecciona el plan que mejor se adapte a tus necesidades"}),e.jsxs(Ee,{status:"info",size:"sm",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Beneficios de la suscripciÃ³n:"})," Paga una vez al mes y recibe bidones extra gratis. DespuÃ©s solo pides la cantidad que necesites sin pagar nada mÃ¡s."]})]})]})}),e.jsxs(W,{children:[z?e.jsx(ls,{py:8,children:e.jsxs(u,{spacing:4,children:[e.jsx(vs,{size:"xl",color:"blue.500"}),e.jsx(n,{color:"gray.500",children:"Cargando planes de suscripciÃ³n..."})]})}):e.jsx(as,{columns:{base:1,md:3},spacing:6,children:ce.map(b=>e.jsxs(F,{variant:(y==null?void 0:y.id)===b.id?"filled":"outline",borderColor:(y==null?void 0:y.id)===b.id?`${b.color}.500`:"gray.200",cursor:"pointer",onClick:()=>re(b),position:"relative",_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:[b.popular&&e.jsx(ve,{position:"absolute",top:-2,right:4,colorScheme:b.color,variant:"solid",borderRadius:"full",px:3,py:1,children:"MÃ¡s Popular"}),e.jsx(W,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsxs(u,{spacing:2,children:[e.jsx(n,{fontWeight:"bold",fontSize:"xl",color:`${b.color}.600`,children:b.name}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:b.description})]}),e.jsxs(u,{spacing:1,children:[e.jsxs(n,{fontSize:"3xl",fontWeight:"bold",color:`${b.color}.500`,children:["S/ ",b.price]}),e.jsx(n,{fontSize:"sm",color:"gray.500",children:"por mes"})]}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Bidones incluidos:"}),e.jsx(n,{fontWeight:"bold",children:b.bottles})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Bidones extra:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["+",b.bonus]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Total bidones:"}),e.jsx(n,{fontWeight:"bold",color:`${b.color}.600`,children:b.bottles+b.bonus})]})]}),e.jsx(O,{colorScheme:b.color,variant:(y==null?void 0:y.id)===b.id?"solid":"outline",w:"full",size:"sm",children:(y==null?void 0:y.id)===b.id?"Seleccionado":"Seleccionar"})]})})]},b.id))}),e.jsxs(u,{spacing:4,mt:6,children:[e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:async()=>{if(y)try{await lr("efectivo")}catch(b){console.error("Error al crear suscripciÃ³n:",b),t({title:"Error",description:"No se pudo crear la suscripciÃ³n. IntÃ©ntalo de nuevo.",status:"error",duration:5e3,isClosable:!0})}else p(5)},leftIcon:e.jsx(Vs,{}),isDisabled:!y,children:"Continuar con Forma de Pago"}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>{C("contraentrega"),L(!1)},children:"Cambiar a Contraentrega"})]})]})]}):e.jsx(F,{maxW:"lg",mx:"auto",children:e.jsx(ze,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:Zn,boxSize:12,color:"red.500"}),e.jsx(K,{size:"lg",color:"red.500",children:"Error de Cliente"}),e.jsx(n,{color:"gray.600",textAlign:"center",children:"No se pudo identificar al cliente. Por favor, regÃ­strate nuevamente."}),e.jsx(O,{colorScheme:"blue",onClick:()=>p(2),children:"Volver al Registro"})]})})})):e.jsxs(F,{maxW:{base:"100%",sm:"lg"},mx:"auto",w:"100%",children:[e.jsx(ze,{textAlign:"center",p:{base:4,md:6},children:e.jsxs(u,{spacing:{base:3,md:4},children:[e.jsx(le,{as:bs,boxSize:{base:10,md:12},color:"green.500"}),e.jsx(K,{size:{base:"md",md:"lg"},children:"Modalidad de Pago"}),e.jsx(n,{color:"gray.600",textAlign:"center",fontSize:{base:"sm",md:"md"},children:Xs?"Tu modalidad anterior expirÃ³. Elige una nueva modalidad:":"Selecciona cÃ³mo deseas pagar tu pedido"}),e.jsxs(Ee,{status:Xs?"warning":"info",size:"sm",borderRadius:"md",w:"100%",children:[e.jsx(Te,{}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},children:Xs?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Modalidad expirada:"})," Tu modalidad anterior ya no estÃ¡ activa. Elige una nueva modalidad de pago para este mes."]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Contraentrega:"})," Pagas cuando recibes el pedido",e.jsx("br",{}),e.jsx("strong",{children:"A CrÃ©dito:"})," Se anota en tu vale y pagas al final del mes",e.jsx("br",{}),e.jsx("strong",{children:"SuscripciÃ³n:"})," Pedido recurrente mensual"]})})]})]})}),e.jsx(W,{p:{base:4,md:6},children:e.jsxs(u,{spacing:{base:4,md:6},w:"100%",children:[e.jsx(dr,{value:se,onChange:b=>{C(b),b==="suscripcion"?m?L(!0):(L(!1),p(4)):L(!1)},w:"100%",children:e.jsxs(ur,{spacing:{base:3,md:4},w:"100%",children:[e.jsx(F,{variant:se==="contraentrega"?"filled":"outline",borderColor:se==="contraentrega"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>{C("contraentrega"),L(!1)},w:"100%",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(h,{spacing:{base:3,md:4},w:"100%",children:[e.jsx(Ms,{value:"contraentrega",flexShrink:0}),e.jsxs(u,{align:"start",spacing:1,flex:1,minW:0,children:[e.jsx(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:"Contraentrega"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},color:"gray.600",noOfLines:2,children:"Pagas en efectivo o PLIN cuando recibes tu pedido"})]})]})})}),e.jsx(F,{variant:se==="vale"?"filled":"outline",borderColor:se==="vale"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>{C("vale"),L(!1)},w:"100%",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(h,{spacing:{base:3,md:4},w:"100%",children:[e.jsx(Ms,{value:"vale",flexShrink:0}),e.jsxs(u,{align:"start",spacing:1,flex:1,minW:0,children:[e.jsx(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:"A CrÃ©dito (Vale)"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},color:"gray.600",noOfLines:2,children:"Paga al final del mes - Se anota en tu vale"})]})]})})}),e.jsx(F,{variant:se==="suscripcion"?"filled":"outline",borderColor:se==="suscripcion"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>{C("suscripcion"),m?L(!0):(L(!1),p(4))},w:"100%",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(h,{spacing:{base:3,md:4},w:"100%",align:"start",children:[e.jsx(Ms,{value:"suscripcion",flexShrink:0,mt:1}),e.jsx(u,{align:"start",spacing:1,flex:1,minW:0,children:e.jsx(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:"SuscripciÃ³n con Beneficios"})})]})})})]})}),e.jsx(O,{colorScheme:"blue",size:"lg",w:"full",onClick:()=>p(5),leftIcon:e.jsx(Vs,{}),children:se==="vale"?"Continuar (Sin Pago Inmediato)":"Continuar con Forma de Pago"})]})})]}),$a=()=>se==="suscripcion"&&y&&!m?e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(ze,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:Hr,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Confirmar SuscripciÃ³n"}),e.jsx(n,{color:"gray.600",children:"Revisa los detalles de tu plan de suscripciÃ³n"})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsx(F,{variant:"outline",w:"full",borderColor:"purple.200",children:e.jsx(W,{children:e.jsxs(u,{spacing:4,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:y.name}),e.jsx(n,{fontSize:"sm",color:"gray.600",textAlign:"center",children:y.description}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones incluidos:"}),e.jsx(n,{fontWeight:"bold",children:y.bottles})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones extra:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["+",y.bonus]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total bidones:"}),e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:y.bottles+y.bonus})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Precio por bidÃ³n:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(y.pricePerBottle).toFixed(2)]})]}),e.jsx(hs,{}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",children:"Total a pagar:"}),e.jsxs(n,{fontSize:"xl",fontWeight:"bold",color:"purple.600",children:["S/ ",parseFloat(y.price).toFixed(2)]})]})]})]})})}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Datos del Cliente"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Nombre:"}),e.jsx(n,{fontWeight:"bold",children:X.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"DNI:"}),e.jsx(n,{fontWeight:"bold",children:A})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"TelÃ©fono:"}),e.jsx(n,{fontWeight:"bold",children:X.phone})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Email:"}),e.jsx(n,{fontWeight:"bold",children:X.email})]})]})]})})}),e.jsxs(Ee,{status:"info",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"CÃ³mo funciona la suscripciÃ³n:"}),e.jsxs(n,{fontSize:"sm",children:["â€¢ Pagas una vez al mes por adelantado",e.jsx("br",{}),"â€¢ Recibes ",y.bottles+y.bonus," bidones inmediatamente",e.jsx("br",{}),"â€¢ DespuÃ©s solo pides la cantidad que necesites sin pagar",e.jsx("br",{}),"â€¢ Los bidones se descuentan de tu suscripciÃ³n"]})]})]}),e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:()=>p(6),leftIcon:e.jsx(Vs,{}),children:"Proceder al Pago"})]})})]}):M&&m?e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(ze,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:ks,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Confirmar Pedido con SuscripciÃ³n"}),e.jsx(n,{color:"gray.600",children:"UsarÃ¡s bidones de tu suscripciÃ³n existente"})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(Ee,{status:"info",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"CÃ³mo funciona con suscripciÃ³n:"}),e.jsxs(n,{fontSize:"sm",children:["â€¢ Se descontarÃ¡n ",I.reduce((b,q)=>{const J=o.find(ee=>ee.id===q.productId);return J&&J.type==="bidon"?b+q.quantity:b},0)," bidones de tu suscripciÃ³n",e.jsx("br",{}),"â€¢ El repartidor NO cobrarÃ¡ nada en la entrega",e.jsx("br",{}),"â€¢ Los bidones se descontarÃ¡n automÃ¡ticamente",e.jsx("br",{}),"â€¢ QuedarÃ¡n ",m.remainingBottles-I.reduce((b,q)=>{const J=o.find(ee=>ee.id===q.productId);return J&&J.type==="bidon"?b+q.quantity:b},0)," bidones disponibles"]})]})]}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:X.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Modalidad:"}),e.jsx(ve,{colorScheme:"purple",children:"SuscripciÃ³n (Sin Pago)"})]}),e.jsxs(u,{spacing:1,w:"full",align:"stretch",children:[e.jsx(n,{children:"Productos:"}),I.map((b,q)=>e.jsxs(h,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["â€¢ ",b.name," x",b.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(b.subtotal).toFixed(2)]})]},q))]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones a usar:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:[I.reduce((b,q)=>b+q.quantity,0)," bidones"]})]})]})]})})}),e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:or,leftIcon:e.jsx(Ps,{}),isLoading:D,loadingText:"Creando pedido...",children:"Confirmar Pedido con SuscripciÃ³n"})]})})]}):se==="vale"?e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(ze,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:bs,boxSize:12,color:"orange.500"}),e.jsx(K,{size:"lg",children:"Pago a CrÃ©dito"}),e.jsx(n,{color:"gray.600",children:"Tu pedido se anotarÃ¡ en tu vale de crÃ©dito"})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(Ee,{status:"info",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"CÃ³mo funciona el pago a crÃ©dito:"}),e.jsxs(n,{fontSize:"sm",children:["â€¢ Tu pedido se anotarÃ¡ automÃ¡ticamente en tu vale",e.jsx("br",{}),"â€¢ El repartidor NO cobrarÃ¡ nada en la entrega",e.jsx("br",{}),"â€¢ Debes pagar todos tus vales al final del mes",e.jsx("br",{}),"â€¢ Puedes pagar en efectivo o PLIN cuando sea el momento"]})]})]}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:X.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Modalidad:"}),e.jsx(ve,{colorScheme:"orange",children:"A CrÃ©dito (Vale)"})]}),e.jsxs(u,{spacing:1,w:"full",align:"stretch",children:[e.jsx(n,{children:"Productos:"}),I.map((b,q)=>e.jsxs(h,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["â€¢ ",b.name," x",b.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(b.subtotal).toFixed(2)]})]},q))]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"orange.600",children:["S/ ",parseFloat(Fs()).toFixed(2)," (A CrÃ©dito)"]})]})]})]})})}),e.jsx(O,{colorScheme:"orange",size:"lg",w:"full",onClick:ir,leftIcon:e.jsx(Ps,{}),isLoading:D,loadingText:"Creando pedido...",children:"Confirmar Pedido a CrÃ©dito"})]})})]}):se==="suscripcion"&&y?e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(ze,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:ks,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Confirmar SuscripciÃ³n"}),e.jsxs(n,{color:"gray.600",children:["Plan ",y.name," seleccionado"]})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(Ee,{status:"info",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"CÃ³mo funciona la suscripciÃ³n:"}),e.jsxs(n,{fontSize:"sm",children:["â€¢ Pagas una vez al mes por adelantado",e.jsx("br",{}),"â€¢ Recibes ",y.bottles+y.bonus," bidones inmediatamente",e.jsx("br",{}),"â€¢ DespuÃ©s solo pides la cantidad que necesites sin pagar",e.jsx("br",{}),"â€¢ Los bidones se descuentan de tu suscripciÃ³n"]})]})]}),e.jsx(F,{variant:"outline",w:"full",borderColor:"purple.200",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:y.name}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Precio del plan:"}),e.jsxs(n,{fontWeight:"bold",color:"purple.600",children:["S/ ",y.price]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones incluidos:"}),e.jsx(n,{fontWeight:"bold",children:y.bottles})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones extra:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["+",y.bonus]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total bidones:"}),e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:y.bottles+y.bonus})]})]})]})})}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:X.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Modalidad:"}),e.jsxs(ve,{colorScheme:"purple",children:["SuscripciÃ³n ",y.name]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total a pagar:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:["S/ ",y.monthlyPrice]})]})]})]})})}),e.jsxs(u,{spacing:4,w:"full",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Â¿CÃ³mo deseas pagar?"}),e.jsx(dr,{value:Z,onChange:$,children:e.jsxs(ur,{spacing:4,w:"full",children:[e.jsx(F,{variant:Z==="efectivo"?"filled":"outline",borderColor:Z==="efectivo"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>$("efectivo"),children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ms,{value:"efectivo"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"Efectivo"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga en efectivo al repartidor"})]})]})})}),e.jsx(F,{variant:Z==="plin"?"filled":"outline",borderColor:Z==="plin"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>$("plin"),children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ms,{value:"plin"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"PLIN"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga con PLIN"})]})]})})})]})}),e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:Z==="efectivo"?ir:en,leftIcon:e.jsx(Ps,{}),isLoading:D,loadingText:"Creando suscripciÃ³n...",children:Z==="efectivo"?"Confirmar SuscripciÃ³n":"Pagar con PLIN"})]})]})})]}):e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(ze,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:Vs,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Forma de Pago"}),e.jsx(n,{color:"gray.600",children:"Â¿CÃ³mo deseas pagar?"})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsx(dr,{value:Z,onChange:$,children:e.jsxs(ur,{spacing:4,children:[e.jsx(F,{variant:Z==="efectivo"?"filled":"outline",borderColor:Z==="efectivo"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>$("efectivo"),children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ms,{value:"efectivo"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"Efectivo"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga en efectivo al repartidor"})]})]})})}),e.jsx(F,{variant:Z==="plin"?"filled":"outline",borderColor:Z==="plin"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>$("plin"),children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ms,{value:"plin"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"PLIN"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Pago digital con QR"})]})]})})})]})}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:X.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Modalidad:"}),e.jsx(ve,{colorScheme:"blue",children:se==="contraentrega"?"Contraentrega":se==="vale"?"A CrÃ©dito (Vale)":"SuscripciÃ³n"})]}),e.jsxs(u,{spacing:1,w:"full",align:"stretch",children:[e.jsx(n,{children:"Productos:"}),I.map((b,q)=>e.jsxs(h,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["â€¢ ",b.name," x",b.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(b.subtotal).toFixed(2)]})]},q))]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(Fs()).toFixed(2)]})]})]})]})})}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:4,children:[e.jsxs(h,{w:"full",justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"TÃ©rminos y Condiciones"}),e.jsx(O,{size:"sm",variant:"outline",colorScheme:"blue",onClick:()=>ie(!0),children:"Ver TÃ©rminos"})]}),e.jsxs(h,{w:"full",spacing:3,children:[e.jsx(Fn,{isChecked:Y,onChange:b=>ae(b.target.checked),colorScheme:"blue",size:"lg"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"He leÃ­do y acepto los tÃ©rminos y condiciones del servicio"})]})]})})}),e.jsx(O,{colorScheme:"green",size:"lg",w:"full",onClick:Z==="efectivo"?ir:en,leftIcon:e.jsx(Ps,{}),isLoading:D,loadingText:"Creando pedido...",isDisabled:!Y,children:Z==="efectivo"?"Confirmar Pedido":"Pagar con PLIN"})]})})]}),Ba=()=>e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(ze,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:Vs,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Pago de SuscripciÃ³n"}),e.jsx(n,{color:"gray.600",children:"Selecciona tu mÃ©todo de pago para la suscripciÃ³n"})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsx(F,{variant:"outline",w:"full",borderColor:"purple.200",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:y.name}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total bidones:"}),e.jsx(n,{fontWeight:"bold",children:y.bottles+y.bonus})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Precio por bidÃ³n:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(y.pricePerBottle).toFixed(2)]})]}),e.jsx(hs,{}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",children:"Total a pagar:"}),e.jsxs(n,{fontSize:"xl",fontWeight:"bold",color:"purple.600",children:["S/ ",parseFloat(y.price).toFixed(2)]})]})]})})}),e.jsxs(u,{spacing:4,w:"full",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"MÃ©todo de Pago"}),e.jsx(F,{variant:Z==="efectivo"?"filled":"outline",borderColor:Z==="efectivo"?"green.500":"gray.200",cursor:"pointer",onClick:()=>$("efectivo"),_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(le,{as:bs,boxSize:8,color:"green.500"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"Pago en Efectivo"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga cuando recibas tu suscripciÃ³n"})]})]})})}),e.jsx(F,{variant:Z==="plin"?"filled":"outline",borderColor:Z==="plin"?"purple.500":"gray.200",cursor:"pointer",onClick:()=>$("plin"),_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(le,{as:Ks,boxSize:8,color:"purple.500"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"Pago con Plin"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga con QR de Plin"})]})]})})})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsx(O,{variant:"outline",flex:1,onClick:()=>p(5),children:"â† Anterior"}),e.jsx(O,{colorScheme:"purple",flex:1,onClick:()=>{Z==="efectivo"?lr():Z==="plin"&&a()},leftIcon:Z==="efectivo"?e.jsx(Ps,{}):e.jsx(Ks,{}),isLoading:D,loadingText:Z==="efectivo"?"Creando suscripciÃ³n...":"Preparando pago...",children:Z==="efectivo"?"Confirmar SuscripciÃ³n":"Pagar con Plin"})]})]})})]}),Va=()=>e.jsxs(Ke,{isOpen:r,onClose:l,size:{base:"full",sm:"md"},isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{mx:{base:0,sm:4},my:{base:0,sm:4},maxH:{base:"100vh",sm:"90vh"},maxW:{base:"100vw",sm:"500px"},w:{base:"100%",sm:"auto"},children:[e.jsx(Xe,{textAlign:"center",p:{base:3,md:4},children:e.jsxs(u,{spacing:2,children:[e.jsx(le,{as:Ks,boxSize:{base:6,md:8},color:"purple.500"}),e.jsx(n,{fontSize:{base:"md",md:"lg"},children:"Pago con PLIN"})]})}),e.jsx(es,{}),e.jsx(Qe,{pb:{base:3,md:4},px:{base:3,md:4},overflowY:"auto",children:e.jsxs(u,{spacing:{base:3,md:4},w:"100%",children:[e.jsxs(Ee,{status:"info",fontSize:{base:"xs",md:"sm"},w:"100%",children:[e.jsx(Te,{}),e.jsx(n,{children:"Escanea el cÃ³digo QR con tu app PLIN"})]}),e.jsx(N,{textAlign:"center",w:"100%",maxW:"250px",mx:"auto",children:e.jsx(Rt,{src:Wl,alt:"QR PLIN",w:"100%",h:"auto",borderRadius:"md"})}),e.jsxs(u,{spacing:2,w:"100%",children:[e.jsxs(n,{fontWeight:"bold",fontSize:{base:"md",md:"lg"},textAlign:"center",children:["Total a pagar: S/ ",se==="suscripcion"&&y?parseFloat(y.price).toFixed(2):parseFloat(Fs()).toFixed(2)]}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},color:"gray.600",textAlign:"center",children:se==="suscripcion"&&y?`Plan ${y.name} - ${y.bottles+y.bonus} bidones`:"Incluye productos + flete de envÃ­o"})]}),e.jsxs(Ee,{status:Je?"success":"warning",fontSize:{base:"xs",md:"sm"},children:[e.jsx(Te,{}),e.jsx(n,{children:Je?"âœ… Comprobante enviado por WhatsApp. Ahora puedes confirmar el pago.":"DespuÃ©s de pagar, envÃ­a el comprobante por WhatsApp"})]}),se==="suscripcion"&&y&&e.jsxs(Ee,{status:"info",fontSize:{base:"xs",md:"sm"},children:[e.jsx(Te,{}),e.jsxs(n,{children:[e.jsx("strong",{children:"Importante:"})," Una vez pagada la suscripciÃ³n, podrÃ¡s hacer pedidos usando tus bidones sin costo adicional."]})]}),e.jsxs(u,{spacing:{base:2,md:3},w:"full",children:[e.jsx(O,{colorScheme:"green",size:{base:"md",md:"lg"},w:"full",leftIcon:e.jsx(ct,{}),onClick:Oa,fontSize:{base:"sm",md:"md"},children:"Enviar Comprobante por WhatsApp"}),e.jsx(O,{colorScheme:"purple",size:{base:"md",md:"lg"},w:"full",leftIcon:e.jsx(Ps,{}),onClick:async()=>{if(se==="suscripcion"&&y)try{_(!0),await lr("plin")}catch(b){console.error("Error en suscripciÃ³n:",b)}finally{_(!1)}else await cr()},isLoading:D,loadingText:se==="suscripcion"?"Creando suscripciÃ³n...":"Creando pedido...",isDisabled:!Je||D,opacity:Je?1:.5,fontSize:{base:"sm",md:"md"},children:Je?"Confirmar Pago y Crear Pedido":"Primero envÃ­a el comprobante por WhatsApp"})]})]})})]})]});return e.jsxs(N,{minH:"100vh",bg:"gray.50",py:{base:4,md:8},children:[e.jsx(N,{maxW:"1200px",mx:"auto",px:{base:2,sm:4},children:e.jsxs(u,{spacing:{base:4,md:8},children:[e.jsxs(N,{textAlign:"center",w:"100%",children:[e.jsx(K,{size:{base:"lg",md:"xl"},color:"blue.600",mb:2,children:"Pedido RÃ¡pido de Agua"}),e.jsx(n,{color:"gray.600",fontSize:{base:"md",md:"lg"},children:"Proceso simplificado en 5 pasos"})]}),e.jsx(N,{w:"100%",overflowX:"auto",pb:2,px:{base:2,md:0},children:e.jsx(h,{spacing:{base:.5,sm:1,md:2},justify:"center",minW:"max-content",w:"100%",children:[1,2,3,4,5,6].map(b=>e.jsxs(u,{spacing:.5,minW:{base:"50px",sm:"60px"},flex:1,children:[e.jsx(N,{w:{base:6,sm:8,md:10},h:{base:6,sm:8,md:10},borderRadius:"full",bg:b<=j?"blue.500":"gray.200",color:b<=j?"white":"gray.500",display:"flex",alignItems:"center",justifyContent:"center",fontSize:{base:"2xs",sm:"xs",md:"sm"},fontWeight:"bold",flexShrink:0,children:b}),e.jsx(n,{fontSize:{base:"3xs",sm:"2xs",md:"xs"},color:b<=j?"blue.600":"gray.500",textAlign:"center",whiteSpace:"nowrap",noOfLines:1,maxW:"100%",children:b===1?"DNI":b===2?"Datos":b===3?"Productos":b===4?"Modalidad":b===5?"Confirmar":b===6?"Pago":b})]},b))})}),j===1&&La(),j===2&&Fa(),j===3&&Wa(),j===4&&Ma(),j===5&&$a(),j===6&&Ba(),j>1&&e.jsxs(h,{spacing:4,children:[e.jsx(O,{variant:"outline",onClick:()=>p(j-1),children:"â† Anterior"}),j<6&&j!==5&&e.jsx(O,{colorScheme:"blue",isDisabled:j===3&&I.length===0,onClick:()=>{if(j===3&&I.length===0){t({title:"Â¡Productos requeridos!",description:"Por favor, selecciona al menos un producto para continuar con tu pedido.",status:"warning",duration:4e3,isClosable:!0});return}p(M&&m&&j===3?5:j+1)},children:j===3&&I.length===0?"Selecciona productos â†’":"Siguiente â†’"})]})]})}),Va(),e.jsx(Ll,{isOpen:Ce,onClose:()=>ie(!1),onAccept:Na,onReject:Ra,title:"TÃ©rminos y Condiciones - Planta de Agua Aquayara",showAcceptance:!0})]})},$l=()=>{const[s,t]=S.useState(null),{isOpen:r,onOpen:a,onClose:i}=Ge(),l=xs();Gs({base:!0,md:!1});const o=(Y,ae=2)=>{if(Y==null||Y==="")return"0.00";const Ce=parseFloat(Y);return isNaN(Ce)?"0.00":Ce.toFixed(ae)},{deliveryFees:c,loading:d,error:g,fetchDeliveryFees:P,createDeliveryFee:T,updateDeliveryFee:R,deleteDeliveryFee:j,clearError:p}=ar(),{districts:D,loading:_,error:v,fetchDistricts:w,updateDistrict:E,createDistrict:k,clearError:M}=Zr(),[L,m]=S.useState({name:"",price:0});S.useEffect(()=>{console.log("ðŸ”„ Cargando tarifas de envÃ­o y distritos..."),P().then(Y=>{console.log("ðŸ“¦ Resultado de fetchDeliveryFees:",Y),console.log("ðŸ“¦ deliveryFees en estado:",c)}),w().then(Y=>{console.log("ðŸ“¦ Resultado de fetchDistricts:",Y),console.log("ðŸ“¦ districts en estado:",D)})},[P,w]),S.useEffect(()=>{g&&(l({title:"Error",description:g,status:"error",duration:3e3,isClosable:!0}),p())},[g,l,p]);const B=async Y=>{Y.preventDefault(),console.log("ðŸ”„ Enviando formulario con datos:",L),console.log("ðŸ”„ Editando distrito:",s);const ae=s?await E(s.id,{name:L.name,deliveryFee:L.price}):await k({name:L.name,deliveryFee:L.price});console.log("ðŸ“¦ Resultado de la operaciÃ³n:",ae),ae.success&&(l({title:s?"Distrito actualizado":"Distrito creado",description:`El distrito ha sido ${s?"actualizado":"creado"}`,status:"success",duration:2e3,isClosable:!0}),x(),i())},y=Y=>{t(Y),m({name:Y.name,price:Y.deliveryFee||0}),a()},re=async Y=>{window.confirm("Â¿EstÃ¡s seguro de que quieres eliminar este distrito?")&&l({title:"FunciÃ³n no disponible",description:"La eliminaciÃ³n de distritos no estÃ¡ disponible por el momento",status:"warning",duration:2e3,isClosable:!0})},x=()=>{m({name:"",price:0}),t(null)},V=()=>{x(),a()};return d?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsxs(N,{p:6,children:[e.jsxs(ys,{justify:"space-between",align:"center",mb:6,children:[e.jsx(K,{size:"lg",color:"gray.700",children:"GestiÃ³n de Distritos y Fletes"}),e.jsx(O,{colorScheme:"blue",leftIcon:e.jsx(Mr,{}),onClick:V,children:"Nuevo Distrito"})]}),D.length===0?e.jsxs(Ee,{status:"info",children:[e.jsx(Te,{}),"No hay distritos configurados."]}):e.jsx(as,{columns:{base:1,md:2,lg:3},spacing:6,children:Array.isArray(D)?D.map((Y,ae)=>e.jsxs(F,{variant:"outline",children:[e.jsx(ze,{children:e.jsxs(ys,{justify:"space-between",align:"center",children:[e.jsx(K,{size:"md",children:Y.name||"Sin nombre"}),e.jsx(ve,{colorScheme:"green",children:"Activo"})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:3,align:"start",children:[e.jsxs(h,{children:[e.jsx(bs,{color:"gray.500"}),e.jsxs(n,{fontSize:"lg",fontWeight:"bold",color:"blue.600",children:["S/ ",o(Y.deliveryFee||0)]})]}),e.jsxs(h,{spacing:2,w:"full",justify:"end",children:[e.jsx(_e,{size:"sm",icon:e.jsx(Yt,{}),onClick:()=>y(Y),colorScheme:"blue",variant:"outline"}),e.jsx(_e,{size:"sm",icon:e.jsx($r,{}),onClick:()=>re(Y.id),colorScheme:"red",variant:"outline"})]})]})})]},Y.id||`district-${ae}`)):null}),e.jsxs(Ke,{isOpen:r,onClose:i,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsx(Ze,{children:e.jsxs("form",{onSubmit:B,children:[e.jsx(Xe,{children:s?"Editar Distrito":"Nuevo Distrito"}),e.jsx(es,{}),e.jsx(Qe,{children:e.jsxs(u,{spacing:4,children:[e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Nombre del Distrito/Ciudad"}),e.jsx(te,{value:L.name,onChange:Y=>m({...L,name:Y.target.value}),placeholder:"Ej: San Isidro, Miraflores, Lima Centro"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Precio de Flete por Distrito (S/)"}),e.jsx(Wn,{value:L.price,onChange:Y=>m({...L,price:parseFloat(Y)||0}),min:0,precision:2,children:e.jsx(Mn,{})})]})]})}),e.jsxs(As,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:i,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",type:"submit",children:s?"Actualizar":"Crear"})]})]})})]})]})},Bl=()=>{const s=Ys(),{id:t}=Vn(),r=xs(),a=Gs({base:!0,md:!1}),[i,l]=S.useState(null),[o,c]=S.useState(!0),[d,g]=S.useState("boleta");S.useEffect(()=>{(async()=>{var v;try{if(t){try{const E=await G.get(`/api/guest-orders/token/${t}`);if(E.data.success){const k=E.data.data;console.log("ðŸ” OrderData recibido del servidor:",k),console.log("ðŸ” Products en orderData:",k.products),l({id:k.id,client:{name:k.customerName,phone:k.customerPhone,email:k.customerEmail,address:k.deliveryAddress,district:k.deliveryDistrict,reference:k.deliveryNotes,notes:k.deliveryNotes},items:((v=k.products)==null?void 0:v.map(M=>{var L;return{name:((L=M.product)==null?void 0:L.name)||"Producto",quantity:M.quantity,unitPrice:M.price,subtotal:M.subtotal}}))||[],paymentMethod:k.paymentMethod,paymentType:k.paymentType,subtotal:k.totalAmount-k.deliveryFee,deliveryFee:k.deliveryFee,total:k.totalAmount,status:k.status==="pending"?"pendiente":k.status,createdAt:k.createdAt});return}}catch{console.log("No se pudo cargar desde el servidor, intentando localStorage")}const w=localStorage.getItem("guestOrderData");if(w){const E=JSON.parse(w);l({id:t,...E,status:"pendiente",createdAt:new Date().toISOString()})}}else{const w=localStorage.getItem("guestOrderData");if(w){const E=JSON.parse(w);l({id:"temp",...E,status:"pendiente",createdAt:new Date().toISOString()})}}}catch(w){console.error("Error al cargar pedido:",w),r({title:"Error",description:"No se pudo cargar el pedido",status:"error",duration:3e3,isClosable:!0})}finally{c(!1)}})()},[t,r]);const P=async()=>{if(i)try{r({title:"Generando PDF",description:"Preparando el documento...",status:"info",duration:2e3,isClosable:!0}),console.log("Datos del order original:",i),console.log("Items del order:",i.items),console.log("Payment method del order:",i.paymentMethod);const _={};i.items.forEach((m,B)=>{const y=`${m.name}-${m.unitPrice}`;_[y]=(_[y]||0)+1,console.log(`ðŸ” Item ${B}:`,{name:m.name,quantity:m.quantity,unitPrice:m.unitPrice,subtotal:m.subtotal,key:y})}),console.log("Conteo de productos:",_);const v=Object.entries(_).filter(([m,B])=>B>1);v.length>0&&console.warn("âš ï¸ Productos duplicados detectados:",v);const w={id:i.id,customerName:i.client.name,customerPhone:i.client.phone,customerEmail:i.client.email||null,deliveryAddress:i.client.address,deliveryDistrict:i.client.district,deliveryNotes:i.client.reference||null,paymentMethod:i.paymentMethod||"contraentrega",paymentType:i.paymentType||"cash",orderDetails:i.items.map(m=>(console.log("Mapeando item para orderDetails:",m),{product:{name:m.name},productName:m.name,quantity:parseInt(m.quantity),unitPrice:parseFloat(m.unitPrice),subtotal:parseFloat(m.subtotal)})),items:[],subtotal:parseFloat(i.subtotal),deliveryFee:parseFloat(i.deliveryFee),total:parseFloat(i.total),status:i.status,createdAt:i.createdAt};console.log("Datos finales enviados al backend:",w),console.log("Datos del pedido que se envÃ­an al backend:",{order:i,orderData:w,items:i.items,subtotal:i.subtotal,deliveryFee:i.deliveryFee,total:i.total}),console.log("Llamando al endpoint del backend para generar PDF..."),console.log("URL:","/api/guest-payments/generate-pdf"),console.log("Datos enviados:",{orderData:w,documentType:"boleta"});const E=await G.post("/api/guest-payments/generate-pdf",{orderData:w,documentType:d},{responseType:"blob"});console.log("Respuesta del backend:",{status:E.status,headers:E.headers,dataType:typeof E.data,dataLength:E.data.length});const k=new Blob([E.data],{type:"application/pdf"}),M=window.URL.createObjectURL(k),L=document.createElement("a");L.href=M,L.download=`${d}_${i.id}.pdf`,document.body.appendChild(L),L.click(),document.body.removeChild(L),window.URL.revokeObjectURL(M),r({title:"PDF Generado",description:"El documento se ha descargado exitosamente",status:"success",duration:3e3,isClosable:!0})}catch(_){console.error("Error al generar PDF:",_),r({title:"Error",description:"Error al generar el PDF",status:"error",duration:3e3,isClosable:!0})}},T=()=>{window.print()},R=()=>{const _=`Hola, tengo una consulta sobre mi pedido #${i==null?void 0:i.id}`,v=`https://wa.me/51961606183?text=${encodeURIComponent(_)}`;window.open(v,"_blank")},j=()=>{localStorage.removeItem("guestOrderData"),s("/guest-order")},p=_=>{switch(_){case"pendiente":return"yellow";case"confirmado":return"blue";case"en_preparacion":return"orange";case"en_camino":return"purple";case"entregado":return"green";case"cancelado":return"red";default:return"gray"}},D=_=>{switch(_){case"pendiente":return"Pendiente";case"confirmado":return"Confirmado";case"en_preparacion":return"En PreparaciÃ³n";case"en_camino":return"En Camino";case"entregado":return"Entregado";case"cancelado":return"Cancelado";default:return _}};return o?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):i?e.jsx(N,{minH:"100vh",bg:"gray.50",py:8,children:e.jsx(N,{maxW:"800px",mx:"auto",px:4,children:e.jsxs(u,{spacing:8,children:[e.jsxs(N,{textAlign:"center",children:[e.jsx(K,{size:"xl",color:"blue.600",mb:2,children:"Recibo de Pedido"}),e.jsx(n,{color:"gray.600",fontSize:"lg",children:"Comprobante de tu pedido de agua"})]}),e.jsxs(F,{w:"full",children:[e.jsx(ze,{children:e.jsxs(ys,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(K,{size:"md",color:"gray.700",children:["Pedido #",i.id]}),e.jsx(n,{fontSize:"sm",color:"gray.500",children:new Date(i.createdAt).toLocaleString()})]}),e.jsx(ve,{colorScheme:p(i.status),size:"lg",children:D(i.status)})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(N,{w:"full",p:4,bg:"gray.50",borderRadius:"md",children:[e.jsxs(n,{fontWeight:"bold",mb:3,color:"gray.700",children:[e.jsx(qt,{style:{display:"inline",marginRight:"8px"}}),"InformaciÃ³n del Cliente"]}),e.jsxs(as,{columns:{base:1,md:2},spacing:3,children:[e.jsxs(N,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Nombre:"}),e.jsx(n,{fontWeight:"bold",children:i.client.name})]}),e.jsxs(N,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"TelÃ©fono:"}),e.jsx(n,{fontWeight:"bold",children:i.client.phone})]}),i.client.email&&e.jsxs(N,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Email:"}),e.jsx(n,{fontWeight:"bold",children:i.client.email})]}),e.jsxs(N,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Distrito:"}),e.jsx(n,{fontWeight:"bold",children:i.client.district})]})]}),e.jsxs(N,{mt:3,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"DirecciÃ³n:"}),e.jsx(n,{fontWeight:"bold",children:i.client.address})]}),i.client.reference&&e.jsxs(N,{mt:2,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Referencia:"}),e.jsx(n,{fontWeight:"bold",children:i.client.reference})]})]}),e.jsxs(N,{w:"full",children:[e.jsxs(n,{fontWeight:"bold",mb:3,color:"gray.700",children:[e.jsx(Cs,{style:{display:"inline",marginRight:"8px"}}),"Productos Solicitados"]}),a?e.jsx(u,{spacing:3,children:i.items.map((_,v)=>e.jsx(F,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:_.name}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["Cantidad: ",_.quantity]}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["S/ ",parseFloat(_.unitPrice).toFixed(2)," c/u"]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Subtotal:"}),e.jsxs(n,{fontWeight:"bold",color:"blue.600",children:["S/ ",parseFloat(_.subtotal).toFixed(2)]})]})]})})},v))}):e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(he,{children:"Producto"}),e.jsx(he,{isNumeric:!0,children:"Cantidad"}),e.jsx(he,{isNumeric:!0,children:"Precio Unit."}),e.jsx(he,{isNumeric:!0,children:"Subtotal"})]})}),e.jsx(nt,{children:i.items.map((_,v)=>e.jsxs(fs,{children:[e.jsx(pe,{children:e.jsx(u,{align:"start",spacing:1,children:e.jsx(n,{fontWeight:"bold",children:_.name})})}),e.jsx(pe,{isNumeric:!0,children:_.quantity}),e.jsxs(pe,{isNumeric:!0,children:["S/ ",parseFloat(_.unitPrice).toFixed(2)]}),e.jsxs(pe,{isNumeric:!0,fontWeight:"bold",color:"blue.600",children:["S/ ",parseFloat(_.subtotal).toFixed(2)]})]},v))})]})]}),e.jsx(N,{w:"full",p:4,border:"1px",borderColor:"gray.200",borderRadius:"md",children:e.jsxs(u,{spacing:2,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Subtotal:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(i.subtotal).toFixed(2)]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Flete:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(i.deliveryFee).toFixed(2)]})]}),e.jsx(hs,{}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(i.total).toFixed(2)]})]})]})}),i.client.notes&&e.jsxs(N,{w:"full",p:4,bg:"yellow.50",borderRadius:"md",children:[e.jsx(n,{fontWeight:"bold",mb:2,color:"gray.700",children:"Notas Adicionales:"}),e.jsx(n,{fontSize:"sm",children:i.client.notes})]}),e.jsx(N,{w:"full",maxW:"300px",children:e.jsxs(H,{children:[e.jsx(U,{children:"Tipo de Documento"}),e.jsxs(rs,{value:d,onChange:_=>g(_.target.value),children:[e.jsx("option",{value:"boleta",children:"Boleta"}),e.jsx("option",{value:"factura",children:"Factura"})]})]})}),e.jsxs(as,{columns:{base:1,md:2,lg:4},spacing:4,w:"full",children:[e.jsx(O,{leftIcon:e.jsx(Vr,{}),colorScheme:"blue",variant:"outline",onClick:P,children:"Descargar PDF"}),e.jsx(O,{leftIcon:e.jsx(po,{}),colorScheme:"gray",variant:"outline",onClick:T,children:"Imprimir"}),e.jsx(O,{leftIcon:e.jsx(ct,{}),colorScheme:"green",variant:"outline",onClick:R,children:"WhatsApp"}),e.jsx(O,{leftIcon:e.jsx(qt,{}),colorScheme:"purple",onClick:j,children:"Nuevo Pedido"})]})]})})]})]})})}):e.jsx(ls,{h:"400px",children:e.jsxs(Ee,{status:"error",children:[e.jsx(Te,{}),"No se encontrÃ³ el pedido"]})})},Vl=()=>{var _;const s=Ys(),{id:t}=Vn(),r=xs();Gs({base:!0,md:!1});const[a,i]=S.useState(null),[l,o]=S.useState(!1),[c,d]=S.useState(t||""),[g,P]=S.useState(!1);S.useEffect(()=>{t&&T(t)},[t]);const T=async v=>{o(!0),P(!1);try{const w=await axios.get(`/api/guest-orders/${v}`),E=w.data.success?w.data.data:w.data;E?i(E):P(!0)}catch(w){console.error("Error al cargar pedido:",w),P(!0)}finally{o(!1)}},R=()=>{if(!c.trim()){r({title:"ID requerido",description:"Ingresa un nÃºmero de pedido",status:"warning",duration:3e3,isClosable:!0});return}T(c.trim())},j=v=>{switch(v){case"pendiente":return{color:"yellow",text:"Pendiente",icon:gn,description:"Tu pedido estÃ¡ siendo procesado"};case"confirmado":return{color:"blue",text:"Confirmado",icon:pr,description:"Tu pedido ha sido confirmado"};case"en_preparacion":return{color:"orange",text:"En PreparaciÃ³n",icon:Cs,description:"Tu pedido estÃ¡ siendo preparado"};case"en_camino":return{color:"purple",text:"En Camino",icon:Cs,description:"Tu pedido estÃ¡ en camino"};case"entregado":return{color:"green",text:"Entregado",icon:pr,description:"Tu pedido ha sido entregado"};case"cancelado":return{color:"red",text:"Cancelado",icon:mo,description:"Tu pedido ha sido cancelado"};default:return{color:"gray",text:v,icon:gn,description:"Estado desconocido"}}},p=v=>{switch(v){case"pendiente":return 20;case"confirmado":return 40;case"en_preparacion":return 60;case"en_camino":return 80;case"entregado":return 100;case"cancelado":return 0;default:return 0}},D=()=>[{key:"pendiente",label:"Pendiente",description:"Pedido recibido"},{key:"confirmado",label:"Confirmado",description:"Pedido confirmado"},{key:"en_preparacion",label:"En PreparaciÃ³n",description:"Preparando pedido"},{key:"en_camino",label:"En Camino",description:"Enviando pedido"},{key:"entregado",label:"Entregado",description:"Pedido entregado"}];return l?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsx(N,{minH:"100vh",bg:"gray.50",py:8,children:e.jsx(N,{maxW:"800px",mx:"auto",px:4,children:e.jsxs(u,{spacing:8,children:[e.jsxs(N,{textAlign:"center",children:[e.jsx(K,{size:"xl",color:"blue.600",mb:2,children:"Seguimiento de Pedido"}),e.jsx(n,{color:"gray.600",fontSize:"lg",children:"Consulta el estado de tu pedido"})]}),e.jsxs(F,{w:"full",children:[e.jsx(ze,{children:e.jsx(K,{size:"md",color:"gray.700",children:"Buscar Pedido"})}),e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsxs(Pt,{flex:1,children:[e.jsx(Fr,{pointerEvents:"none",children:e.jsx(ra,{color:"gray.300"})}),e.jsx(te,{placeholder:"Ingresa el nÃºmero de pedido",value:c,onChange:v=>d(v.target.value),onKeyPress:v=>v.key==="Enter"&&R()})]}),e.jsx(O,{colorScheme:"blue",onClick:R,isLoading:l,loadingText:"Buscando...",children:"Buscar"})]})})]}),g&&e.jsxs(Ee,{status:"error",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",children:"Pedido no encontrado"}),e.jsx(n,{fontSize:"sm",children:"Verifica que el nÃºmero de pedido sea correcto"})]})]}),a&&e.jsxs(F,{w:"full",children:[e.jsx(ze,{children:e.jsxs(ys,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(K,{size:"md",color:"gray.700",children:["Pedido #",a.id]}),e.jsx(n,{fontSize:"sm",color:"gray.500",children:new Date(a.createdAt).toLocaleString()})]}),e.jsx(ve,{colorScheme:j(a.status).color,size:"lg",children:j(a.status).text})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(N,{w:"full",p:4,bg:`${j(a.status).color}.50`,borderRadius:"md",children:[e.jsxs(h,{spacing:3,mb:3,children:[me.createElement(j(a.status).icon,{color:`${j(a.status).color}.500`,size:"24px"}),e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:j(a.status).text})]}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:j(a.status).description}),e.jsx(ei,{value:p(a.status),colorScheme:j(a.status).color,size:"sm",mt:3})]}),e.jsxs(N,{w:"full",children:[e.jsx(n,{fontWeight:"bold",mb:4,color:"gray.700",children:"Progreso del Pedido"}),e.jsx(u,{spacing:3,children:D().map((v,w)=>{const E=p(a.status)>p(v.key),k=a.status===v.key;return e.jsxs(h,{w:"full",spacing:4,children:[e.jsx(N,{w:"8",h:"8",borderRadius:"full",bg:E?"green.500":k?`${j(a.status).color}.500`:"gray.300",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"sm",children:E?e.jsx(pr,{}):w+1}),e.jsxs(u,{align:"start",spacing:1,flex:1,children:[e.jsx(n,{fontWeight:k?"bold":"normal",children:v.label}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:v.description})]})]},v.key)})})]}),e.jsxs(N,{w:"full",p:4,bg:"gray.50",borderRadius:"md",children:[e.jsx(n,{fontWeight:"bold",mb:3,color:"gray.700",children:"InformaciÃ³n de Entrega"}),e.jsxs(as,{columns:{base:1,md:2},spacing:3,children:[e.jsxs(N,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:a.clientName||"N/A"})]}),e.jsxs(N,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"TelÃ©fono:"}),e.jsx(n,{fontWeight:"bold",children:a.clientPhone||"N/A"})]}),e.jsxs(N,{colSpan:{base:1,md:2},children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"DirecciÃ³n:"}),e.jsx(n,{fontWeight:"bold",children:a.deliveryAddress||"N/A"})]})]})]}),e.jsxs(N,{w:"full",children:[e.jsx(n,{fontWeight:"bold",mb:3,color:"gray.700",children:"Productos Solicitados"}),e.jsx(u,{spacing:2,children:((_=a.items)==null?void 0:_.map((v,w)=>e.jsxs(h,{justify:"space-between",w:"full",p:2,bg:"gray.50",borderRadius:"md",children:[e.jsxs(n,{fontSize:"sm",children:[v.name," x ",v.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(v.subtotal).toFixed(2)]})]},w)))||e.jsx(n,{fontSize:"sm",color:"gray.500",children:"No hay informaciÃ³n de productos"})})]}),e.jsx(N,{w:"full",p:4,border:"1px",borderColor:"gray.200",borderRadius:"md",children:e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(a.total||0).toFixed(2)]})]})}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsx(O,{leftIcon:e.jsx(qt,{}),colorScheme:"blue",onClick:()=>s("/guest-order"),flex:1,children:"Nuevo Pedido"}),e.jsx(O,{leftIcon:e.jsx(Cs,{}),colorScheme:"green",variant:"outline",onClick:()=>s(`/receipt/${a.id}`),flex:1,children:"Ver Recibo"})]})]})})]})]})})})},ql=()=>{const{user:s}=Os(),{updateGuestOrder:t}=Kr(),r=xs(),[a,i]=S.useState(!0),[l,o]=S.useState([]),[c,d]=S.useState([]),[g,P]=S.useState([]),[T,R]=S.useState([]),[j,p]=S.useState("orders"),[D,_]=S.useState("all"),[v,w]=S.useState(null),[E,k]=S.useState(null),{isOpen:M,onOpen:L,onClose:m}=Ge(),{isOpen:B,onOpen:y,onClose:re}=Ge(),{isOpen:x,onOpen:V,onClose:Y}=Ge(),[ae,Ce]=S.useState({clientId:"",productId:"",quantity:1,notes:""});S.useEffect(()=>{ie(),ce(),Ne(),z();const C=setInterval(ie,3e4);return()=>clearInterval(C)},[]);const ie=async()=>{try{console.log("ðŸ” DeliveryDashboard - Usuario actual:",s),console.log("ðŸ” DeliveryDashboard - ID del usuario:",s==null?void 0:s.id);const C=await G.get("/api/delivery/orders");if(console.log("ðŸ” DeliveryDashboard - Respuesta del servidor:",C.data),C.data.success){const Z=C.data.data||[];console.log("ðŸ” DeliveryDashboard - Pedidos recibidos:",Z.length),o(Array.isArray(Z)?Z:[])}else console.error("Error en la respuesta:",C.data.message),o([])}catch(C){console.error("Error al cargar pedidos:",C),o([]),r({title:"Error",description:"No se pudieron cargar los pedidos",status:"error",duration:3e3,isClosable:!0})}finally{i(!1)}},ce=async()=>{try{const C=await G.get(`/api/vouchers/delivery-person/${s==null?void 0:s.id}`);if(console.log("ðŸ” DeliveryDashboard - Vales recibidos:",C.data),C.data.success){const Z=C.data.data||[];d(Array.isArray(Z)?Z:[])}else d([])}catch(C){console.error("Error al cargar vales:",C),d([])}},Ne=async()=>{try{const C=await G.get("/api/clients");C.data.success&&Array.isArray(C.data.data)?P(C.data.data):P([])}catch(C){console.error("Error al cargar clientes:",C),P([])}},z=async()=>{try{const C=await G.get("/api/products");C.data.success&&Array.isArray(C.data.data)?R(C.data.data):R([])}catch(C){console.error("Error al cargar productos:",C),R([])}},Q=C=>{switch(C){case"confirmed":return"blue";case"preparing":return"yellow";case"ready":return"purple";case"delivered":return"green";case"cancelled":return"red";default:return"gray"}},ye=C=>{switch(C){case"confirmed":return"Confirmado";case"preparing":return"Preparando";case"ready":return"Listo";case"delivered":return"Entregado";case"cancelled":return"Cancelado";default:return"Desconocido"}},oe=(C,Z)=>{if(Z==="suscripcion")return ks;switch(C){case"cash":case"efectivo":return bs;case"plin":return Ks;case"yape":return Ks;case"transfer":return Vs;default:return bs}},A={total:l.length,confirmed:l.filter(C=>C.status==="confirmed").length,preparing:l.filter(C=>C.status==="preparing").length,ready:l.filter(C=>C.status==="ready").length,delivered:l.filter(C=>C.status==="delivered").length,cancelled:l.filter(C=>C.status==="cancelled").length},je=l.filter(C=>D==="all"?!0:D==="asignado"?C.status==="confirmed":D==="en_camino"?C.status==="preparing"||C.status==="ready":D==="entregado"?C.status==="delivered":!0),ne=(C,Z)=>{const $=encodeURIComponent(Z);window.open(`https://wa.me/51${C}?text=${$}`,"_blank")},Be=C=>{const Z=encodeURIComponent(C);window.open(`https://www.google.com/maps/search/?api=1&query=${Z}`,"_blank")},X=C=>{w(C),y()},De=(C,Z)=>{w({...C,newStatus:Z}),L()},I=async()=>{if(v)try{const C={status:v.newStatus};await t(v.id,C),r({title:"Estado actualizado",description:`El pedido ahora estÃ¡ ${ye(v.newStatus).toLowerCase()}`,status:"success",duration:3e3,isClosable:!0}),m(),w(null),ie()}catch{r({title:"Error",description:"No se pudo actualizar el estado",status:"error",duration:3e3,isClosable:!0})}},fe=C=>{var Z,$,Pe,Ae;return e.jsx(F,{variant:"outline",shadow:"sm",borderRadius:"lg",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(u,{spacing:{base:2,md:3},align:"stretch",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(u,{align:"start",spacing:.5,flex:1,minW:0,children:[e.jsx(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},noOfLines:1,children:C.orderNumber||`#${C.id}`}),e.jsx(n,{fontSize:{base:"2xs",md:"xs"},color:"gray.500",noOfLines:1,children:C.type==="regular"?"Cliente Frecuente":"Cliente Visitante"})]}),e.jsx(ve,{colorScheme:Q(C.status),fontSize:{base:"2xs",md:"xs"},px:{base:1,md:2},py:.5,children:ye(C.status)})]}),e.jsxs(u,{spacing:{base:1.5,md:2},align:"stretch",children:[e.jsxs(h,{spacing:2,w:"full",children:[e.jsx(Us,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},fontWeight:"medium",noOfLines:1,flex:1,children:C.clientName||((Z=C.client)==null?void 0:Z.name)||"Sin nombre"})]}),e.jsxs(h,{spacing:2,w:"full",children:[e.jsx(Hs,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,flex:1,children:C.clientPhone||(($=C.client)==null?void 0:$.phone)||"Sin telÃ©fono"}),e.jsx(Oe,{label:"Enviar WhatsApp",children:e.jsx(_e,{size:"sm",icon:e.jsx(ct,{}),colorScheme:"green",variant:"ghost",onClick:()=>{var Je;return ne(C.clientPhone||((Je=C.client)==null?void 0:Je.phone),`Hola! Soy el repartidor de AquaYara. Estoy en camino con tu pedido ${C.orderNumber||`#${C.id}`}. Â¿Te parece bien?`)}})})]}),e.jsxs(h,{spacing:2,w:"full",children:[e.jsx(wt,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:2,flex:1,children:C.clientAddress||((Pe=C.client)==null?void 0:Pe.address)||"Sin direcciÃ³n"}),e.jsx(Oe,{label:"Abrir en Google Maps",children:e.jsx(_e,{size:"sm",icon:e.jsx(ao,{}),colorScheme:"blue",variant:"ghost",onClick:()=>{var Je;return Be(C.clientAddress||((Je=C.client)==null?void 0:Je.address))}})})]}),e.jsxs(h,{spacing:2,w:"full",children:[e.jsx(wt,{size:12,color:"#718096"}),e.jsxs(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,flex:1,children:["Distrito: ",C.clientDistrict||((Ae=C.client)==null?void 0:Ae.district)||C.deliveryDistrict||"Sin distrito"]})]})]}),e.jsxs(u,{spacing:2,align:"stretch",w:"full",children:[!1,e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(h,{spacing:2,flex:1,minW:0,children:[e.jsx(le,{as:oe(C.paymentType,C.paymentMethod),size:14}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,children:C.paymentMethod==="vale"?"A CrÃ©dito (Vale)":C.paymentMethod==="suscripcion"?"SuscripciÃ³n":C.paymentMethod==="contraentrega"?C.paymentType==="plin"?"Contraentrega - PLIN":C.paymentType==="yape"?"Contraentrega - Yape":C.paymentType==="cash"?"Contraentrega - Efectivo":"Contraentrega":C.paymentType==="plin"?"PLIN":C.paymentType==="yape"?"Yape":(C.paymentType==="cash","Efectivo")})]}),e.jsx(n,{fontWeight:"bold",fontSize:{base:"xs",md:"sm"},color:C.paymentMethod==="vale"?"orange.600":"green.600",children:C.paymentMethod==="vale"?"Sin cobro":`S/ ${parseFloat(C.total||C.totalAmount||0).toFixed(2)}`})]}),e.jsx(ve,{colorScheme:C.paymentMethod==="vale"?"orange":C.paymentMethod==="suscripcion"?"purple":C.paymentType==="plin"||C.paymentType==="yape"?"blue":"green",fontSize:{base:"2xs",md:"xs"},px:2,py:1,borderRadius:"md",children:C.paymentMethod==="vale"?"ðŸ’³ NO COBRAR - A CrÃ©dito":C.paymentMethod==="suscripcion"?"ðŸ“… NO COBRAR - SuscripciÃ³n":C.paymentType==="plin"||C.paymentType==="yape"?"ðŸ“± NO COBRAR - Pago Digital":"ðŸ’° COBRAR - Efectivo"})]}),C.products&&C.products.length>0&&e.jsxs(u,{spacing:{base:1,md:1.5},align:"stretch",children:[e.jsx(n,{fontSize:{base:"2xs",md:"xs"},fontWeight:"bold",color:"gray.600",children:"Productos:"}),Array.isArray(C.products)&&C.products.map((Je,gs)=>e.jsxs(h,{justify:"space-between",fontSize:{base:"2xs",md:"xs"},w:"full",children:[e.jsx(n,{noOfLines:1,flex:1,minW:0,children:Je.name||Je.productName}),e.jsxs(n,{fontWeight:"bold",color:"blue.600",flexShrink:0,px:1,children:["x",Je.quantity]}),e.jsxs(n,{color:"green.600",minW:"fit-content",textAlign:"right",flexShrink:0,children:["S/ ",parseFloat(Je.unitPrice||Je.price||0).toFixed(2)]})]},gs))]}),C.paymentMethod==="vale"&&e.jsxs(Ee,{status:"warning",size:"sm",borderRadius:"md",children:[e.jsx(Te,{}),e.jsx(n,{fontSize:{base:"2xs",md:"xs"},fontWeight:"bold",noOfLines:1,children:"âš ï¸ PEDIDO A CRÃ‰DITO - NO COBRAR NADA"})]}),C.notes&&e.jsxs(Ee,{status:"info",size:"sm",borderRadius:"md",children:[e.jsx(Te,{}),e.jsx(n,{fontSize:{base:"2xs",md:"xs"},noOfLines:2,children:C.notes})]}),e.jsxs(u,{spacing:{base:2,md:3},align:"stretch",children:[e.jsx(h,{spacing:2,justify:"center",children:e.jsx(Oe,{label:"Ver detalles",children:e.jsx(_e,{size:{base:"sm",md:"md"},icon:e.jsx(qs,{}),onClick:()=>X(C),"aria-label":"Ver detalles",colorScheme:"blue",variant:"outline"})})}),C.status==="confirmed"&&e.jsx(O,{size:{base:"sm",md:"md"},colorScheme:"purple",leftIcon:e.jsx(ho,{}),onClick:()=>De(C,"preparing"),w:"full",fontSize:{base:"xs",md:"sm"},children:"Iniciar PreparaciÃ³n"}),C.status==="preparing"&&e.jsx(O,{size:{base:"sm",md:"md"},colorScheme:"blue",leftIcon:e.jsx(Cs,{}),onClick:()=>De(C,"ready"),w:"full",fontSize:{base:"xs",md:"sm"},children:"Listo para Entrega"}),C.status==="ready"&&e.jsx(O,{size:{base:"sm",md:"md"},colorScheme:"green",leftIcon:e.jsx(Ps,{}),onClick:()=>De(C,"delivered"),w:"full",fontSize:{base:"xs",md:"sm"},children:"Marcar Entregado"})]})]})})},`${C.type}-${C.id}`)},Me=()=>e.jsxs(Ke,{isOpen:M,onClose:m,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Actualizar Estado del Pedido"}),e.jsx(es,{}),e.jsx(Qe,{children:e.jsx(u,{spacing:4,children:v&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{children:["Â¿Confirmar cambio de estado del pedido #",v.id,"?"]}),e.jsxs(n,{fontWeight:"bold",children:[v.newStatus==="preparing"&&"Iniciar PreparaciÃ³n",v.newStatus==="ready"&&"Marcar como Listo",v.newStatus==="delivered"&&"Marcar como Entregado"]})]})})}),e.jsxs(As,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:m,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:I,children:"Confirmar"})]})]})]}),Le=()=>{var C,Z,$,Pe;return e.jsxs(Ke,{isOpen:B,onClose:re,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Detalles del Pedido"}),e.jsx(es,{}),e.jsx(Qe,{children:v&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(n,{fontWeight:"bold",fontSize:"lg",children:["Pedido #",v.id]}),e.jsx(hs,{}),e.jsxs(u,{spacing:3,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Cliente:"}),e.jsx(n,{children:v.clientName||((C=v.client)==null?void 0:C.name)||"Sin nombre"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"TelÃ©fono:"}),e.jsx(n,{children:v.clientPhone||((Z=v.client)==null?void 0:Z.phone)||"Sin telÃ©fono"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"DirecciÃ³n:"}),e.jsx(n,{children:v.clientAddress||(($=v.client)==null?void 0:$.address)||"Sin direcciÃ³n"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Distrito:"}),e.jsx(n,{children:v.clientDistrict||((Pe=v.client)==null?void 0:Pe.district)||v.deliveryDistrict||"Sin distrito"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado:"}),e.jsx(ve,{colorScheme:Q(v.status),children:ye(v.status)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"MÃ©todo de pago:"}),e.jsxs(h,{children:[e.jsx(le,{as:oe(v.paymentType,v.paymentMethod),size:16}),e.jsx(n,{children:v.paymentMethod==="vale"?"A CrÃ©dito (Vale)":v.paymentMethod==="suscripcion"?"SuscripciÃ³n":v.paymentMethod==="contraentrega"?v.paymentType==="plin"?"Contraentrega - PLIN":v.paymentType==="yape"?"Contraentrega - Yape":v.paymentType==="cash"?"Contraentrega - Efectivo":"Contraentrega":v.paymentType==="plin"?"PLIN":v.paymentType==="yape"?"Yape":(v.paymentType==="cash","Efectivo")})]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Total:"}),e.jsx(n,{fontWeight:"bold",color:v.paymentMethod==="vale"?"orange.600":"green.600",children:v.paymentMethod==="vale"?"Sin cobro":`S/ ${parseFloat(v.total||v.totalAmount||0).toFixed(2)}`})]}),e.jsxs(Ee,{status:v.paymentMethod==="vale"?"warning":v.paymentMethod==="suscripcion"||v.paymentType==="plin"||v.paymentType==="yape"?"info":"success",borderRadius:"md",children:[e.jsx(Te,{}),e.jsx(n,{fontSize:"sm",fontWeight:"bold",children:v.paymentMethod==="vale"?"ðŸ’³ NO COBRAR - Este pedido es a crÃ©dito":v.paymentMethod==="suscripcion"?"ðŸ“… NO COBRAR - Este pedido es por suscripciÃ³n":v.paymentType==="plin"?"ðŸ“± NO COBRAR - El cliente pagarÃ¡ por PLIN":v.paymentType==="yape"?"ðŸ“± NO COBRAR - El cliente pagarÃ¡ por Yape":"ðŸ’° COBRAR - El cliente pagarÃ¡ en efectivo"})]})]}),v.products&&v.products.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(hs,{}),e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsx(n,{fontWeight:"bold",children:"Productos:"}),Array.isArray(v.products)&&v.products.map((Ae,Je)=>{var gs;return e.jsxs(h,{justify:"space-between",fontSize:"sm",children:[e.jsx(n,{flex:1,children:((gs=Ae.product)==null?void 0:gs.name)||Ae.name||"Producto desconocido"}),e.jsxs(n,{fontWeight:"bold",children:[Ae.quantity," x S/ ",parseFloat(Ae.price||Ae.unitPrice||0).toFixed(2)]})]},Je)})]})]})]})}),e.jsx(As,{children:e.jsx(O,{onClick:re,children:"Cerrar"})})]})]})},se=()=>e.jsxs(Ke,{isOpen:x,onClose:Y,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Crear Nuevo Vale"}),e.jsx(es,{}),e.jsx(Qe,{children:e.jsxs(u,{spacing:4,children:[e.jsxs(H,{children:[e.jsx(U,{children:"Cliente"}),e.jsx(rs,{placeholder:"Seleccionar cliente",children:g.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Producto"}),e.jsx(rs,{placeholder:"Seleccionar producto",children:T.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Cantidad"}),e.jsx(te,{type:"number",min:"1",defaultValue:"1"})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Notas"}),e.jsx(Ns,{placeholder:"Notas adicionales..."})]})]})}),e.jsxs(As,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:Y,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:Y,children:"Crear Vale"})]})]})]});return a?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsx(N,{p:{base:2,sm:3,md:6},minH:"100vh",bg:"gray.50",children:e.jsxs(u,{spacing:{base:3,md:6},align:"stretch",children:[e.jsx(N,{bg:"white",p:{base:3,md:4},borderRadius:"lg",shadow:"sm",children:e.jsxs(u,{spacing:2,align:"start",children:[e.jsx(K,{size:{base:"sm",md:"lg"},color:"gray.800",children:"Panel de Repartidor"}),e.jsxs(n,{color:"gray.600",fontSize:{base:"xs",md:"md"},children:["Bienvenido, ",(console.log("ðŸ” Verificando nombre del usuario:",{firstName:s==null?void 0:s.firstName,lastName:s==null?void 0:s.lastName,username:s==null?void 0:s.username,hasFirstName:!!(s!=null&&s.firstName),hasLastName:!!(s!=null&&s.lastName),bothNames:!!(s!=null&&s.firstName&&(s!=null&&s.lastName))}),s!=null&&s.firstName&&(s!=null&&s.lastName)?`${s.firstName} ${s.lastName}`:(s==null?void 0:s.username)||"Repartidor"),". Gestiona tus entregas asignadas."]})]})}),e.jsxs(as,{columns:{base:2,sm:4},spacing:{base:2,md:4},children:[e.jsx(F,{shadow:"sm",borderRadius:"lg",children:e.jsxs(W,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(n,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"blue.600",children:A.total}),e.jsx(n,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"Total Pedidos"})]})}),e.jsx(F,{shadow:"sm",borderRadius:"lg",children:e.jsxs(W,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(n,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"orange.600",children:A.confirmed+A.preparing+A.ready}),e.jsx(n,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"En Proceso"})]})}),e.jsx(F,{shadow:"sm",borderRadius:"lg",children:e.jsxs(W,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(n,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"green.600",children:A.delivered}),e.jsx(n,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"Entregados"})]})}),e.jsx(F,{shadow:"sm",borderRadius:"lg",children:e.jsxs(W,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(n,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"red.600",children:A.cancelled}),e.jsx(n,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"Cancelados"})]})})]}),e.jsx(N,{bg:"white",borderRadius:"lg",shadow:"sm",overflow:"hidden",children:e.jsxs(si,{index:j==="orders"?0:1,onChange:C=>p(C===0?"orders":"vouchers"),children:[e.jsxs(ti,{bg:"gray.50",p:1,children:[e.jsx(an,{fontSize:{base:"xs",md:"sm"},px:{base:2,md:4},py:{base:2,md:3},_selected:{bg:"white",shadow:"sm"},flex:1,minW:0,children:e.jsxs(u,{spacing:1,children:[e.jsx(hr,{size:12}),e.jsxs(n,{fontSize:{base:"2xs",md:"xs"},noOfLines:1,children:["Pedidos (",l.length,")"]})]})}),e.jsx(an,{fontSize:{base:"xs",md:"sm"},px:{base:2,md:4},py:{base:2,md:3},_selected:{bg:"white",shadow:"sm"},flex:1,minW:0,children:e.jsxs(u,{spacing:1,children:[e.jsx(bs,{size:12}),e.jsxs(n,{fontSize:{base:"2xs",md:"xs"},noOfLines:1,children:["Vales (",c.length,")"]})]})})]}),e.jsxs(ri,{children:[e.jsxs(on,{px:{base:2,md:4},py:{base:3,md:4},children:[e.jsx(F,{shadow:"sm",mb:4,children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(u,{spacing:{base:3,md:4},align:"stretch",children:[e.jsxs(H,{children:[e.jsx(U,{fontSize:{base:"sm",md:"md"},children:"Filtrar por Estado"}),e.jsxs(rs,{value:D,onChange:C=>_(C.target.value),size:{base:"sm",md:"md"},children:[e.jsx("option",{value:"all",children:"Todos los pedidos"}),e.jsx("option",{value:"asignado",children:"Asignados"}),e.jsx("option",{value:"en_camino",children:"En Camino"}),e.jsx("option",{value:"entregado",children:"Entregados"})]})]}),e.jsxs(n,{fontSize:{base:"xs",md:"sm"},color:"gray.600",textAlign:"center",children:["Mostrando ",je.length," de ",l.length," pedidos"]})]})})}),je.length>0?e.jsx(u,{spacing:{base:3,md:4},align:"stretch",children:je.map(fe)}):e.jsx(ls,{h:"200px",bg:"white",borderRadius:"lg",shadow:"sm",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:hr,boxSize:12,color:"gray.400"}),e.jsxs(n,{color:"gray.500",fontSize:{base:"sm",md:"lg"},textAlign:"center",children:["No hay pedidos ",D==="all"?"":`con estado ${ye(D).toLowerCase()}`]}),e.jsx(O,{variant:"outline",size:{base:"sm",md:"md"},onClick:()=>_("all"),children:"Ver todos los pedidos"})]})})]}),e.jsx(on,{px:{base:2,md:4},py:{base:3,md:4},children:e.jsxs(u,{spacing:{base:4,md:6},align:"stretch",children:[e.jsx(N,{bg:"white",p:{base:3,md:4},borderRadius:"lg",shadow:"sm",children:e.jsxs(u,{spacing:2,align:"start",children:[e.jsx(K,{size:{base:"sm",md:"md"},color:"gray.800",children:"Mis Vales"}),e.jsx(n,{color:"gray.600",fontSize:{base:"xs",md:"sm"},children:"Gestiona los vales que has creado"})]})}),e.jsx(N,{children:e.jsx(O,{colorScheme:"blue",leftIcon:e.jsx(ut,{}),onClick:V,size:{base:"sm",md:"md"},w:"full",children:"Crear Nuevo Vale"})}),c.length>0?e.jsx(u,{spacing:{base:3,md:4},align:"stretch",children:c.map(C=>{var Z,$;return e.jsx(F,{variant:"outline",shadow:"sm",borderRadius:"lg",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(u,{spacing:{base:2,md:3},align:"stretch",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:["Vale #",C.id]}),e.jsx(ve,{colorScheme:C.status==="pending"?"orange":C.status==="delivered"?"blue":"green",fontSize:{base:"2xs",md:"xs"},children:C.status==="pending"?"Pendiente":C.status==="delivered"?"Entregado":"Pagado"})]}),e.jsxs(u,{spacing:{base:1,md:2},align:"stretch",children:[e.jsxs(h,{spacing:2,children:[e.jsx(Us,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,children:((Z=C.Client)==null?void 0:Z.name)||"Cliente no encontrado"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(hr,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,children:(($=C.product)==null?void 0:$.name)||"Producto no especificado"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(n,{fontSize:{base:"xs",md:"sm"},children:"Cantidad:"}),e.jsx(n,{fontWeight:"bold",fontSize:{base:"xs",md:"sm"},children:C.quantity})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:{base:"xs",md:"sm"},children:"Total:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",fontSize:{base:"xs",md:"sm"},children:["S/ ",parseFloat(C.totalAmount||0).toFixed(2)]})]})]})]})})},C.id)})}):e.jsx(ls,{h:"200px",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:bs,boxSize:12,color:"gray.400"}),e.jsx(n,{color:"gray.500",fontSize:"lg",children:"No has creado ningÃºn vale aÃºn"}),e.jsx(O,{colorScheme:"blue",leftIcon:e.jsx(ut,{}),onClick:V,children:"Crear tu primer vale"})]})})]})})]})]})}),Me(),Le(),se()]})})},Hl=()=>{const[s,t]=S.useState({username:"",password:""}),[r,a]=S.useState(!1),[i,l]=S.useState(!1),{login:o,error:c}=Os(),d=Ys(),g=xs(),P=R=>{t({...s,[R.target.name]:R.target.value})},T=async R=>{R.preventDefault(),l(!0);try{if((await o(s.username,s.password)).success){const p=Os.getState().user;p&&p.role==="repartidor"?(g({title:"Bienvenido",description:`Hola ${p.username}, bienvenido al panel de repartidor`,status:"success",duration:3e3,isClosable:!0}),d("/delivery-dashboard")):(g({title:"Acceso Denegado",description:"Esta cuenta no es de un repartidor",status:"error",duration:3e3,isClosable:!0}),Os.getState().logout())}}catch(j){console.error("Error en login:",j)}finally{l(!1)}};return e.jsx(N,{minH:"100vh",bg:"gray.50",display:"flex",alignItems:"center",justifyContent:"center",p:4,children:e.jsxs(F,{maxW:"md",w:"full",boxShadow:"xl",children:[e.jsx(ze,{textAlign:"center",pb:2,children:e.jsxs(u,{spacing:4,children:[e.jsx(N,{color:"purple.600",fontSize:"4xl",children:e.jsx(Cs,{})}),e.jsx(K,{size:"lg",color:"gray.700",children:"Panel de Repartidor"}),e.jsx(n,{color:"gray.600",fontSize:"sm",children:"Inicia sesiÃ³n para gestionar tus pedidos asignados"})]})}),e.jsx(W,{pt:0,children:e.jsx("form",{onSubmit:T,children:e.jsxs(u,{spacing:4,children:[c&&e.jsxs(Ee,{status:"error",borderRadius:"md",children:[e.jsx(Te,{}),c]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Usuario"}),e.jsx(te,{name:"username",value:s.username,onChange:P,placeholder:"Ingresa tu usuario",size:"lg",autoComplete:"username"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"ContraseÃ±a"}),e.jsxs(Pt,{size:"lg",children:[e.jsx(te,{name:"password",type:r?"text":"password",value:s.password,onChange:P,placeholder:"Ingresa tu contraseÃ±a"}),e.jsx($n,{children:e.jsx(_e,{"aria-label":r?"Ocultar contraseÃ±a":"Mostrar contraseÃ±a",icon:r?e.jsx(ea,{}):e.jsx(qs,{}),variant:"ghost",onClick:()=>a(!r)})})]})]}),e.jsx(O,{type:"submit",colorScheme:"purple",size:"lg",w:"full",isLoading:i,loadingText:"Iniciando sesiÃ³n...",leftIcon:e.jsx(Cs,{}),children:"Iniciar SesiÃ³n"}),e.jsx(hs,{}),e.jsxs(u,{spacing:2,textAlign:"center",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Â¿No eres repartidor?"}),e.jsxs(h,{spacing:4,children:[e.jsx(br,{color:"blue.500",onClick:()=>d("/"),_hover:{textDecoration:"underline"},children:"Panel de AdministraciÃ³n"}),e.jsx(n,{color:"gray.400",children:"|"}),e.jsx(br,{color:"green.500",onClick:()=>d("/client-login"),_hover:{textDecoration:"underline"},children:"Ãrea de Clientes"})]})]})]})})})]})})},Ul=()=>{const[s,t]=S.useState([]),[r,a]=S.useState(!0),i=xs(),l=We("white","gray.800"),o=We("gray.200","gray.600"),c=We("gray.700","gray.200"),d=We("blue.50","blue.900"),g=We("green.500","green.300"),P=We("blue.600","blue.300");S.useEffect(()=>{T()},[]);const T=async()=>{var p;try{a(!0),console.log("ðŸ”„ SubscriptionPlansCard: Cargando planes...");const D=await G.get("/api/subscription-plans");console.log("ðŸ“¦ SubscriptionPlansCard: Respuesta:",D.data),t(D.data.data||[]),console.log("âœ… SubscriptionPlansCard: Planes cargados:",((p=D.data.data)==null?void 0:p.length)||0)}catch(D){console.error("âŒ SubscriptionPlansCard: Error al cargar planes:",D),i({title:"Error",description:"No se pudieron cargar los planes de suscripciÃ³n",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}},R=p=>p===0?"Sin bonificaciÃ³n":p===1?"1 recarga mensual gratis":`${p} recargas mensual gratis`,j=p=>{const D=["blue","green","purple","orange","pink","teal","red"];return D[p%D.length]};return r?e.jsx(ls,{py:10,children:e.jsxs(u,{spacing:4,children:[e.jsx(vs,{size:"xl",color:"blue.500"}),e.jsx(n,{color:"gray.500",children:"Cargando planes de suscripciÃ³n..."})]})}):e.jsxs(N,{children:[e.jsx(F,{bg:d,borderColor:o,mb:6,children:e.jsx(W,{children:e.jsxs(u,{spacing:4,textAlign:"center",children:[e.jsx(K,{size:"lg",color:c,children:"ðŸš° Cartilla de Suscripciones AquaYara"}),e.jsx(n,{color:c,fontSize:"lg",children:"Por el pago mensual de cierta cantidad de bidones, recibe bonificaciones por ser un buen cliente"}),e.jsxs(h,{spacing:4,wrap:"wrap",justify:"center",children:[e.jsxs(h,{children:[e.jsx(le,{as:Ps,color:"green.500"}),e.jsx(n,{fontSize:"sm",children:"VÃ¡lido solo para clientes que pagan adelantado una mensualidad"})]}),e.jsxs(h,{children:[e.jsx(le,{as:Cs,color:"blue.500"}),e.jsx(n,{fontSize:"sm",children:"Control con sistema y cuaderno con firma"})]}),e.jsxs(h,{children:[e.jsx(le,{as:lo,color:"purple.500"}),e.jsx(n,{fontSize:"sm",children:"Contrato y factura mensual"})]})]})]})})}),e.jsx(as,{columns:{base:1,md:2,lg:3},spacing:6,children:s.map(p=>e.jsxs(F,{bg:l,borderColor:o,borderWidth:"2px",_hover:{transform:"translateY(-4px)",shadow:"lg",borderColor:j(p.sortOrder)+".300"},transition:"all 0.3s ease",position:"relative",children:[p.bonusBottles>0&&e.jsx(N,{position:"absolute",top:-2,right:4,children:e.jsxs(ve,{colorScheme:"green",fontSize:"xs",px:3,py:1,borderRadius:"full",transform:"rotate(15deg)",children:[e.jsx(le,{as:Hr,mr:1}),parseFloat(p.bonusPercentage).toFixed(1),"% BONUS"]})}),e.jsx(ze,{pb:2,children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsx(K,{size:"md",color:c,textAlign:"center",children:p.name}),e.jsx(n,{fontSize:"sm",color:"gray.500",textAlign:"center",children:p.description})]})}),e.jsx(W,{pt:0,children:e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(N,{textAlign:"center",children:[e.jsxs(n,{fontSize:"2xl",fontWeight:"bold",color:P,children:[p.totalBottles," Bidones"]}),p.bonusBottles>0&&e.jsxs(n,{fontSize:"sm",color:g,fontWeight:"semibold",children:["+ ",p.bonusBottles," bonus"]})]}),e.jsx(hs,{}),e.jsxs(u,{spacing:2,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Pago mensual:"}),e.jsxs(n,{fontSize:"lg",fontWeight:"bold",color:P,children:["S/ ",parseFloat(p.monthlyPrice).toFixed(2)]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Precio por bidÃ³n:"}),e.jsxs(n,{fontSize:"md",fontWeight:"semibold",color:c,children:["S/ ",parseFloat(p.pricePerBottle).toFixed(2)]})]})]}),e.jsx(hs,{}),e.jsxs(N,{textAlign:"center",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",mb:1,children:"BonificaciÃ³n:"}),e.jsx(n,{fontSize:"md",fontWeight:"semibold",color:g,children:R(p.bonusBottles)})]}),e.jsx(N,{textAlign:"center",children:e.jsxs(h,{justify:"center",spacing:2,children:[e.jsx(le,{as:Cs,color:"blue.500"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["MÃ¡x. ",p.maxDailyDelivery," entregas diarias"]})]})}),e.jsx(O,{colorScheme:j(p.sortOrder),size:"md",w:"full",mt:2,_hover:{transform:"scale(1.02)",shadow:"md"},transition:"all 0.2s ease",children:"Seleccionar Plan"})]})})]},p.id))}),e.jsx(F,{bg:l,borderColor:o,mt:6,children:e.jsx(W,{children:e.jsxs(u,{spacing:4,textAlign:"center",children:[e.jsx(K,{size:"md",color:c,children:"InformaciÃ³n Importante"}),e.jsxs(as,{columns:{base:1,md:2},spacing:4,w:"full",children:[e.jsxs(N,{children:[e.jsx(n,{fontWeight:"semibold",color:c,mb:2,children:"Condiciones del Servicio:"}),e.jsxs(u,{spacing:1,align:"start",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ Servicio para clientes domÃ©sticos y empresariales"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ VÃ¡lido solo para clientes que pagan adelantado una mensualidad"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ Control con sistema y cuaderno con firma, fecha, hora y nombre de recepciÃ³n"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ Contrato y factura mensual"})]})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"semibold",color:c,mb:2,children:"Beneficios:"}),e.jsxs(u,{spacing:1,align:"start",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ Descuentos progresivos segÃºn cantidad"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ Bonificaciones en bidones adicionales"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ Entregas programadas y controladas"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ AtenciÃ³n prioritaria al cliente"})]})]})]})]})})})]})},Gl=()=>{var X,De;const[s,t]=S.useState([]),[r,a]=S.useState([]),[i,l]=S.useState([]),[o,c]=S.useState(!0),[d,g]=S.useState(""),[P,T]=S.useState("all"),[R,j]=S.useState(null),[p,D]=S.useState("management"),{isOpen:_,onOpen:v,onClose:w}=Ge(),{isOpen:E,onOpen:k,onClose:M}=Ge(),{isOpen:L,onOpen:m,onClose:B}=Ge(),[y,re]=S.useState({clientId:"",planId:"",startDate:"",notes:""}),[x,V]=S.useState({id:"",status:"",remainingBottles:"",notes:""}),Y=xs();Gs({base:!0,md:!1});const ae=We("white","gray.800"),Ce=We("gray.200","gray.600");S.useEffect(()=>{ie()},[]);const ie=async()=>{c(!0);try{const[I,fe]=await Promise.all([G.get("/api/clients"),G.get("/api/subscriptions")]);t(fe.data.data||[]),a(I.data.data||[]),l([{id:1,name:"Plan BÃ¡sico",bottles:20,bonus:2,price:100,description:"20 bidones + 2 extra"},{id:2,name:"Plan Intermedio",bottles:30,bonus:5,price:150,description:"30 bidones + 5 extra"},{id:3,name:"Plan Premium",bottles:50,bonus:10,price:250,description:"50 bidones + 10 extra"}])}catch(I){console.error("Error al cargar datos:",I),Y({title:"Error",description:"No se pudieron cargar los datos",status:"error",duration:3e3,isClosable:!0})}finally{c(!1)}},ce=(Array.isArray(s)?s:[]).filter(I=>{var Le,se,C,Z;const fe=((se=(Le=I.client)==null?void 0:Le.name)==null?void 0:se.toLowerCase().includes(d.toLowerCase()))||((Z=(C=I.client)==null?void 0:C.email)==null?void 0:Z.toLowerCase().includes(d.toLowerCase())),Me=P==="all"||I.status===P;return fe&&Me}),Ne=I=>{switch(I){case"active":return"green";case"paused":return"yellow";case"cancelled":return"red";case"expired":return"gray";default:return"gray"}},z=I=>{switch(I){case"active":return"Activa";case"paused":return"Pausada";case"cancelled":return"Cancelada";case"expired":return"Expirada";default:return"Desconocido"}},Q=I=>new Date(I).toLocaleDateString("es-ES"),ye=async()=>{try{const I=r.find(Le=>Le.id===parseInt(y.clientId)),fe=i.find(Le=>Le.id===parseInt(y.planId));if(!I||!fe){Y({title:"Error",description:"Cliente o plan no encontrado",status:"error",duration:3e3,isClosable:!0});return}const Me={clientId:I.id,clientDni:I.documentNumber,subscriptionType:fe.name,totalBottles:fe.bottles+fe.bonus,totalAmount:fe.price,paidAmount:fe.price,expiryDate:null,notes:y.notes};await G.post("/api/subscriptions",Me),Y({title:"SuscripciÃ³n creada",description:"La suscripciÃ³n se ha creado correctamente",status:"success",duration:3e3,isClosable:!0}),w(),re({clientId:"",planId:"",startDate:"",notes:""}),ie()}catch(I){console.error("Error al crear suscripciÃ³n:",I),Y({title:"Error",description:"No se pudo crear la suscripciÃ³n",status:"error",duration:3e3,isClosable:!0})}},oe=async()=>{try{await G.put(`/api/subscriptions/${x.id}`,x),Y({title:"SuscripciÃ³n actualizada",description:"La suscripciÃ³n se ha actualizado correctamente",status:"success",duration:3e3,isClosable:!0}),M(),V({id:"",status:"",remainingBottles:"",notes:""}),ie()}catch(I){console.error("Error al actualizar suscripciÃ³n:",I),Y({title:"Error",description:"No se pudo actualizar la suscripciÃ³n",status:"error",duration:3e3,isClosable:!0})}},A=I=>{j(I),m()},je=I=>{V({id:I.id,status:I.status,remainingBottles:I.remainingBottles,notes:I.notes||""}),k()},ne=s.filter(I=>I.status==="active").length,Be=s.filter(I=>I.status==="active").reduce((I,fe)=>{var Me;return I+(((Me=fe.plan)==null?void 0:Me.price)||0)},0);return o?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsx(N,{p:6,children:e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(ys,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(K,{size:"lg",children:[e.jsx(le,{as:ks,mr:2}),"GestiÃ³n de Suscripciones"]}),e.jsx(n,{color:"gray.600",children:"Administra las suscripciones de clientes frecuentes"})]}),e.jsxs(h,{spacing:4,children:[e.jsx(O,{leftIcon:e.jsx(co,{}),colorScheme:p==="management"?"blue":"gray",variant:p==="management"?"solid":"outline",onClick:()=>D("management"),children:"GestiÃ³n"}),e.jsx(O,{leftIcon:e.jsx(Hr,{}),colorScheme:p==="plans"?"blue":"gray",variant:p==="plans"?"solid":"outline",onClick:()=>D("plans"),children:"Cartilla de Planes"}),p==="management"&&e.jsx(O,{leftIcon:e.jsx(ut,{}),colorScheme:"blue",onClick:v,size:"lg",children:"Nueva SuscripciÃ³n"})]})]}),p==="plans"?e.jsx(Ul,{}):e.jsxs(e.Fragment,{children:[e.jsxs(as,{columns:{base:1,md:3},spacing:4,children:[e.jsx(F,{bg:ae,borderColor:Ce,children:e.jsx(W,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Total Suscripciones"}),e.jsx(He,{children:s.length}),e.jsxs(Ue,{children:[e.jsx(ni,{type:"increase"}),ne," activas"]})]})})}),e.jsx(F,{bg:ae,borderColor:Ce,children:e.jsx(W,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Ingresos Mensuales"}),e.jsxs(He,{children:["S/ ",Be.toFixed(2)]}),e.jsx(Ue,{children:"De suscripciones activas"})]})})}),e.jsx(F,{bg:ae,borderColor:Ce,children:e.jsx(W,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Planes Disponibles"}),e.jsx(He,{children:i.length}),e.jsx(Ue,{children:"Planes de suscripciÃ³n"})]})})})]}),e.jsx(F,{bg:ae,borderColor:Ce,children:e.jsx(W,{children:e.jsxs(h,{spacing:4,wrap:"wrap",children:[e.jsxs(Pt,{maxW:"300px",children:[e.jsx(Fr,{pointerEvents:"none",children:e.jsx(le,{as:ra,color:"gray.300"})}),e.jsx(te,{placeholder:"Buscar por cliente...",value:d,onChange:I=>g(I.target.value)})]}),e.jsxs(rs,{value:P,onChange:I=>T(I.target.value),maxW:"200px",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"active",children:"Activas"}),e.jsx("option",{value:"paused",children:"Pausadas"}),e.jsx("option",{value:"cancelled",children:"Canceladas"}),e.jsx("option",{value:"expired",children:"Expiradas"})]})]})})}),e.jsxs(F,{bg:ae,borderColor:Ce,children:[e.jsx(ze,{children:e.jsx(K,{size:"md",children:"Suscripciones"})}),e.jsx(W,{children:ce.length===0?e.jsx(ls,{py:10,children:e.jsx(n,{color:"gray.500",fontSize:"lg",children:"No hay suscripciones registradas"})}):e.jsx(ai,{children:e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(he,{children:"Cliente"}),e.jsx(he,{children:"Plan"}),e.jsx(he,{children:"Estado"}),e.jsx(he,{children:"Bidones Restantes"}),e.jsx(he,{children:"Fecha Inicio"}),e.jsx(he,{children:"DuraciÃ³n"}),e.jsx(he,{children:"Acciones"})]})}),e.jsx(nt,{children:(Array.isArray(ce)?ce:[]).map(I=>{var fe,Me;return e.jsxs(fs,{children:[e.jsx(pe,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:((fe=I.client)==null?void 0:fe.name)||"N/A"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:((Me=I.client)==null?void 0:Me.email)||"N/A"})]})}),e.jsx(pe,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:I.subscriptionType||"N/A"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["S/ ",I.totalAmount||0]})]})}),e.jsx(pe,{children:e.jsx(ve,{colorScheme:Ne(I.status),children:z(I.status)})}),e.jsx(pe,{children:e.jsx(n,{fontWeight:"bold",color:"blue.600",children:I.remainingBottles||0})}),e.jsx(pe,{children:Q(I.purchaseDate)}),e.jsx(pe,{children:e.jsx(n,{color:"green.600",fontWeight:"bold",children:"Hasta agotar bidones"})}),e.jsx(pe,{children:e.jsxs(Rn,{children:[e.jsx(On,{as:O,size:"sm",variant:"ghost",children:e.jsx(le,{as:io})}),e.jsxs(Ln,{children:[e.jsx(yr,{icon:e.jsx(qs,{}),onClick:()=>A(I),children:"Ver Detalles"}),e.jsx(yr,{icon:e.jsx(Tr,{}),onClick:()=>je(I),children:"Editar"})]})]})})]},I.id)})})]})})})]}),e.jsxs(Ke,{isOpen:_,onClose:w,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Nueva SuscripciÃ³n"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Cliente"}),e.jsx(rs,{placeholder:"Seleccionar cliente",value:y.clientId,onChange:I=>re({...y,clientId:I.target.value}),children:(Array.isArray(r)?r:[]).map(I=>e.jsxs("option",{value:I.id,children:[I.name," - ",I.email]},I.id))})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Plan de SuscripciÃ³n"}),e.jsx(rs,{placeholder:"Seleccionar plan",value:y.planId,onChange:I=>re({...y,planId:I.target.value}),children:(Array.isArray(i)?i:[]).map(I=>e.jsxs("option",{value:I.id,children:[I.name," - S/ ",I.price," (",I.bottles+I.bonus," bidones)"]},I.id))})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Fecha de Inicio"}),e.jsx(te,{type:"date",value:y.startDate,onChange:I=>re({...y,startDate:I.target.value})})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Notas"}),e.jsx(Ns,{placeholder:"Notas adicionales...",value:y.notes,onChange:I=>re({...y,notes:I.target.value})})]})]})}),e.jsxs(As,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:w,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:ye,children:"Crear SuscripciÃ³n"})]})]})]}),e.jsxs(Ke,{isOpen:E,onClose:M,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Editar SuscripciÃ³n"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Estado"}),e.jsxs(rs,{value:x.status,onChange:I=>V({...x,status:I.target.value}),children:[e.jsx("option",{value:"active",children:"Activa"}),e.jsx("option",{value:"paused",children:"Pausada"}),e.jsx("option",{value:"cancelled",children:"Cancelada"}),e.jsx("option",{value:"expired",children:"Expirada"})]})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Bidones Restantes"}),e.jsxs(Wn,{value:x.remainingBottles,onChange:I=>V({...x,remainingBottles:I}),min:0,children:[e.jsx(Mn,{}),e.jsxs(ii,{children:[e.jsx(oi,{}),e.jsx(li,{})]})]})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Notas"}),e.jsx(Ns,{placeholder:"Notas adicionales...",value:x.notes,onChange:I=>V({...x,notes:I.target.value})})]})]})}),e.jsxs(As,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:M,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:oe,children:"Actualizar SuscripciÃ³n"})]})]})]}),e.jsxs(Ke,{isOpen:L,onClose:B,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Detalles de la SuscripciÃ³n"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:R&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(as,{columns:2,spacing:4,children:[e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Cliente:"}),e.jsx(n,{children:((X=R.client)==null?void 0:X.name)||"N/A"})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Email:"}),e.jsx(n,{children:((De=R.client)==null?void 0:De.email)||"N/A"})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Tipo de SuscripciÃ³n:"}),e.jsx(n,{children:R.subscriptionType||"N/A"})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Total Pagado:"}),e.jsxs(n,{children:["S/ ",R.totalAmount||0]})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Estado:"}),e.jsx(ve,{colorScheme:Ne(R.status),children:z(R.status)})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Bidones Restantes:"}),e.jsx(n,{fontWeight:"bold",color:"blue.600",children:R.remainingBottles||0})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Fecha de Compra:"}),e.jsx(n,{children:Q(R.purchaseDate)})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"DuraciÃ³n:"}),e.jsx(n,{color:"green.600",fontWeight:"bold",children:"Hasta agotar bidones"})]})]}),R.notes&&e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Notas:"}),e.jsx(n,{children:R.notes})]})]})})]})]})]}),e.jsx(Ta,{})]})})},Yl=()=>{var re;const[s,t]=S.useState([]),[r,a]=S.useState(!1),[i,l]=S.useState(null),[o,c]=S.useState(new Date),{isOpen:d,onOpen:g,onClose:P}=Ge(),{isOpen:T,onOpen:R,onClose:j}=Ge();Ge();const p=xs(),[D,_]=S.useState({clientId:"",amount:"",description:"",dueDate:"",status:"active"}),[v,w]=S.useState([]);S.useEffect(()=>{k(),E();const x=setInterval(()=>{k(),c(new Date)},3e4);return()=>clearInterval(x)},[]);const E=async()=>{try{const x=await G.get("/api/clients");x.data.success&&w(x.data.data||[])}catch(x){console.error("Error al cargar clientes:",x)}},k=async()=>{var x;try{a(!0),console.log("ðŸ” Cargando vales agrupados por pedido desde /api/vouchers/by-order...");const V=await G.get("/api/vouchers/by-order");console.log("ðŸ“¦ Respuesta de vales agrupados:",V.data),V.data.success&&(t(V.data.data||[]),console.log(`âœ… Vales agrupados cargados: ${((x=V.data.data)==null?void 0:x.length)||0} pedidos`))}catch(V){console.error("Error al cargar vales:",V),p({title:"Error",description:"No se pudieron cargar los vales",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}},M=async()=>{try{(await G.post("/api/vouchers",D)).data.success&&(p({title:"Vale creado",description:"El vale se ha creado exitosamente",status:"success",duration:3e3,isClosable:!0}),k(),P(),_({clientId:"",amount:"",description:"",dueDate:"",status:"active"}))}catch(x){console.error("Error al crear vale:",x),p({title:"Error",description:"No se pudo crear el vale",status:"error",duration:3e3,isClosable:!0})}},L=x=>{switch(x){case"pending":return"yellow";case"delivered":return"green";case"paid":return"blue";case"cancelled":return"red";default:return"gray"}},m=x=>{switch(x){case"pending":return"Pendiente";case"delivered":return"Entregado";case"paid":return"Pagado";case"cancelled":return"Cancelado";default:return x}},B=x=>{switch(x){case"pending":return ks;case"delivered":return Ps;case"paid":return bs;case"cancelled":return go;default:return Ps}},y={total:s.length,pending:s.filter(x=>x.status==="pending").length,delivered:s.filter(x=>x.status==="delivered").length,paid:s.filter(x=>x.status==="paid").length,totalAmount:s.reduce((x,V)=>x+parseFloat(V.totalAmount||0),0),pendingAmount:s.filter(x=>x.status==="pending").reduce((x,V)=>x+parseFloat(V.totalAmount||0),0),deliveredAmount:s.filter(x=>x.status==="delivered").reduce((x,V)=>x+parseFloat(V.totalAmount||0),0)};return e.jsxs(N,{p:6,children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(ys,{justify:"space-between",align:"center",children:[e.jsxs(N,{children:[e.jsx(K,{size:"lg",mb:2,children:"GestiÃ³n de Vales"}),e.jsx(n,{color:"gray.600",children:"Administra los vales de crÃ©dito de los clientes"}),e.jsxs(n,{color:"gray.400",fontSize:"xs",children:["Ãšltima actualizaciÃ³n: ",o.toLocaleTimeString()]})]}),e.jsx(O,{size:"sm",colorScheme:"blue",variant:"outline",onClick:()=>{k(),c(new Date)},isLoading:r,children:"Actualizar"})]}),e.jsxs(as,{columns:{base:1,sm:2,lg:4},spacing:4,children:[e.jsx(F,{children:e.jsx(W,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Total Vales"}),e.jsx(He,{color:"blue.500",children:y.total}),e.jsx(Ue,{children:"Vales creados"})]})})}),e.jsx(F,{children:e.jsx(W,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Pendientes"}),e.jsx(He,{color:"yellow.500",children:y.pending}),e.jsx(Ue,{children:"Por entregar"})]})})}),e.jsx(F,{children:e.jsx(W,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Entregados"}),e.jsx(He,{color:"green.500",children:y.delivered}),e.jsx(Ue,{children:"Completados"})]})})}),e.jsx(F,{children:e.jsx(W,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Pagados"}),e.jsx(He,{color:"blue.500",children:y.paid}),e.jsx(Ue,{children:"Cobrados"})]})})}),e.jsx(F,{children:e.jsx(W,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Monto Total"}),e.jsxs(He,{color:"purple.500",children:["S/ ",y.totalAmount.toFixed(2)]}),e.jsx(Ue,{children:"En vales"})]})})}),e.jsx(F,{children:e.jsx(W,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Pendiente"}),e.jsxs(He,{color:"yellow.500",children:["S/ ",y.pendingAmount.toFixed(2)]}),e.jsx(Ue,{children:"Por entregar"})]})})})]}),e.jsxs(F,{children:[e.jsx(ze,{children:e.jsxs(ys,{justify:"space-between",align:"center",children:[e.jsx(K,{size:"md",children:"Lista de Vales"}),e.jsx(O,{leftIcon:e.jsx(ut,{}),colorScheme:"green",onClick:g,children:"Nuevo Vale"})]})}),e.jsx(W,{children:s.length===0?e.jsxs(Ee,{status:"info",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"No hay vales registrados"}),e.jsxs(n,{fontSize:"sm",children:['Los vales se crean automÃ¡ticamente cuando los clientes eligen la modalidad "vale" en sus pedidos.',e.jsx("br",{}),'Puedes crear vales manualmente usando el botÃ³n "Crear Vale" arriba.']})]})]}):e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(he,{children:"Cliente"}),e.jsx(he,{children:"Productos del Pedido"}),e.jsx(he,{children:"Total del Pedido"}),e.jsx(he,{children:"Estado"}),e.jsx(he,{children:"Fecha CreaciÃ³n"}),e.jsx(he,{children:"Fecha Vencimiento"}),e.jsx(he,{children:"Acciones"})]})}),e.jsx(nt,{children:s.map(x=>{var V,Y;return e.jsxs(fs,{children:[e.jsx(pe,{children:e.jsxs(u,{spacing:1,align:"start",children:[e.jsxs(h,{children:[e.jsx(Us,{size:14,color:"#718096"}),e.jsx(n,{fontWeight:"medium",children:((V=x.client)==null?void 0:V.name)||"Cliente no encontrado"})]}),e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["DNI: ",((Y=x.client)==null?void 0:Y.documentNumber)||"N/A"]})]})}),e.jsx(pe,{children:e.jsxs(u,{spacing:1,align:"start",children:[(x.products||[]).map((ae,Ce)=>e.jsxs(n,{fontSize:"sm",children:[ae.name," x",ae.quantity]},Ce)),(!x.products||x.products.length===0)&&e.jsx(n,{fontSize:"sm",color:"gray.500",children:"Sin productos"})]})}),e.jsxs(pe,{children:[e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(x.totalAmount||0).toFixed(2)]}),e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["Pedido #",x.guestOrderId||"Individual"]})]}),e.jsx(pe,{children:e.jsxs(vr,{colorScheme:L(x.status),children:[e.jsx(ln,{as:B(x.status)}),e.jsx(Sr,{children:m(x.status)})]})}),e.jsxs(pe,{children:[e.jsx(n,{fontSize:"sm",children:x.createdAt?new Date(x.createdAt).toLocaleDateString():"Sin fecha"}),e.jsx(n,{fontSize:"xs",color:"gray.500",children:x.createdAt?new Date(x.createdAt).toLocaleTimeString():""})]}),e.jsxs(pe,{children:[e.jsx(n,{fontSize:"sm",color:x.dueDate&&new Date(x.dueDate)<new Date?"red.500":"gray.700",children:x.dueDate?new Date(x.dueDate).toLocaleDateString():"Sin vencimiento"}),x.dueDate&&new Date(x.dueDate)<new Date&&e.jsx(n,{fontSize:"xs",color:"red.500",fontWeight:"bold",children:"VENCIDO"})]}),e.jsx(pe,{children:e.jsx(h,{spacing:2,children:e.jsx(Oe,{label:"Ver detalles",children:e.jsx(_e,{size:"sm",icon:e.jsx(qs,{}),onClick:()=>{l(x),R()}})})})})]},x.id)})})]})})]})]}),e.jsxs(Ke,{isOpen:d,onClose:P,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Crear Nuevo Vale"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Cliente"}),e.jsx(rs,{value:D.clientId,onChange:x=>_({...D,clientId:x.target.value}),placeholder:"Selecciona un cliente",children:v.map(x=>e.jsxs("option",{value:x.id,children:[x.name," - ",x.email]},x.id))})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Monto"}),e.jsx(te,{type:"number",value:D.amount,onChange:x=>_({...D,amount:x.target.value}),placeholder:"0.00"})]}),e.jsxs(H,{children:[e.jsx(U,{children:"DescripciÃ³n"}),e.jsx(Ns,{value:D.description,onChange:x=>_({...D,description:x.target.value}),placeholder:"DescripciÃ³n del vale"})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Fecha de Vencimiento"}),e.jsx(te,{type:"date",value:D.dueDate,onChange:x=>_({...D,dueDate:x.target.value})})]}),e.jsx(O,{colorScheme:"green",w:"full",onClick:M,leftIcon:e.jsx(ut,{}),children:"Crear Vale"})]})})]})]}),e.jsxs(Ke,{isOpen:T,onClose:j,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Detalles del Vale"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:i&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Cliente:"}),e.jsx(n,{children:((re=i.client)==null?void 0:re.name)||"Cliente no encontrado"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Monto:"}),e.jsxs(n,{color:"green.600",fontWeight:"bold",children:["S/ ",parseFloat(i.amount||0).toFixed(2)]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado:"}),e.jsxs(vr,{colorScheme:L(i.status),children:[e.jsx(ln,{as:B(i.status)}),e.jsx(Sr,{children:m(i.status)})]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Fecha de Vencimiento:"}),e.jsx(n,{children:i.dueDate?new Date(i.dueDate).toLocaleDateString():"Sin fecha"})]}),i.description&&e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",mb:2,children:"DescripciÃ³n:"}),e.jsx(n,{children:i.description})]})]})})]})]})]})},Xl=()=>{const[s,t]=S.useState(null),[r,a]=S.useState(!1),[i,l]=S.useState(new Date().getFullYear()),[o,c]=S.useState(new Date().getMonth()+1),[d,g]=S.useState(null),{isOpen:P,onOpen:T,onClose:R}=Ge(),j=xs(),p=We("white","gray.800"),D=We("gray.200","gray.600");S.useEffect(()=>{_()},[i,o]);const _=async()=>{try{a(!0);const m=await G.get(`/api/reports/collection?year=${i}&month=${o}`);m.data.success&&(console.log("ðŸ” Datos del reporte de cobranza recibidos:",m.data.data),m.data.data.clients&&m.data.data.clients.length>0&&console.log("ðŸ” Primer cliente:",m.data.data.clients[0]),t(m.data.data))}catch(m){console.error("Error al cargar reporte:",m),j({title:"Error",description:"No se pudo cargar el reporte de cobranza",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}},v=m=>["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][m-1],w=m=>{const B=parseFloat(m)||0;return new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN"}).format(B)},E=m=>new Date(m).toLocaleDateString("es-ES"),k=m=>{g(m),T()},M=()=>{const m=new Date().getFullYear(),B=[];for(let y=m;y>=m-2;y--)B.push(y);return B},L=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}];return r?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsx(N,{p:6,children:e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(ys,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(N,{children:[e.jsx(K,{size:"lg",mb:2,children:e.jsxs(h,{children:[e.jsx(sa,{}),e.jsx(n,{children:"Reporte de Cobranza Mensual"})]})}),e.jsx(n,{color:"gray.600",children:"Total de deudas por cliente en vales pendientes de pago"})]}),e.jsx(O,{leftIcon:e.jsx(Vr,{}),colorScheme:"blue",variant:"outline",onClick:_,isLoading:r,children:"Actualizar"})]}),e.jsx(F,{bg:p,borderColor:D,children:e.jsx(W,{children:e.jsxs(h,{spacing:4,wrap:"wrap",children:[e.jsx(rs,{value:i,onChange:m=>l(parseInt(m.target.value)),maxW:"150px",children:M().map(m=>e.jsx("option",{value:m,children:m},m))}),e.jsx(rs,{value:o,onChange:m=>c(parseInt(m.target.value)),maxW:"200px",children:L.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))})]})})}),s?e.jsxs(e.Fragment,{children:[e.jsxs(as,{columns:{base:1,md:3},spacing:4,children:[e.jsx(F,{bg:p,borderColor:D,children:e.jsx(W,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"PerÃ­odo"}),e.jsxs(He,{fontSize:"lg",children:[v(s.period.month)," ",s.period.year]}),e.jsxs(Ue,{children:[e.jsx(ks,{style:{display:"inline",marginRight:"4px"}}),"Reporte mensual"]})]})})}),e.jsx(F,{bg:p,borderColor:D,children:e.jsx(W,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Clientes con Deuda"}),e.jsx(He,{color:"orange.500",children:s.summary.totalClients}),e.jsxs(Ue,{children:[e.jsx(na,{style:{display:"inline",marginRight:"4px"}}),"Clientes pendientes"]})]})})}),e.jsx(F,{bg:p,borderColor:D,children:e.jsx(W,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Total a Cobrar"}),e.jsx(He,{color:"red.500",children:w(s.summary.totalDebt)}),e.jsxs(Ue,{children:[e.jsx(bs,{style:{display:"inline",marginRight:"4px"}}),"Monto total"]})]})})})]}),e.jsxs(F,{bg:p,borderColor:D,children:[e.jsx(ze,{children:e.jsx(K,{size:"md",children:"Clientes con Deuda Pendiente"})}),e.jsx(W,{children:s.clients.length===0?e.jsxs(Ee,{status:"success",children:[e.jsx(Te,{}),e.jsx(n,{children:"Â¡Excelente! No hay deudas pendientes para este perÃ­odo."})]}):e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(he,{children:"Cliente"}),e.jsx(he,{children:"Contacto"}),e.jsx(he,{children:"Total Deuda"}),e.jsx(he,{children:"Vales"}),e.jsx(he,{children:"Acciones"})]})}),e.jsx(nt,{children:(s.clients||[]).map(m=>(console.log("ðŸ” Renderizando cliente:",{name:m.client.name,remainingAmount:m.remainingAmount,totalAmount:m.totalAmount,valesCount:m.valesCount}),e.jsxs(fs,{children:[e.jsx(pe,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:m.client.name}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["DNI: ",m.client.documentNumber]})]})}),e.jsx(pe,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(h,{children:[e.jsx(Hs,{size:12,color:"#718096"}),e.jsx(n,{fontSize:"sm",children:m.client.phone})]}),e.jsxs(h,{children:[e.jsx(qr,{size:12,color:"#718096"}),e.jsx(n,{fontSize:"sm",children:m.client.email})]})]})}),e.jsx(pe,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",color:"red.600",fontSize:"lg",children:w(m.remainingAmount||0)}),e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["De ",w(m.totalAmount||0)," total"]})]})}),e.jsx(pe,{children:e.jsx(vr,{colorScheme:"blue",children:e.jsxs(Sr,{children:[m.valesCount||0," vales"]})})}),e.jsx(pe,{children:e.jsx(Oe,{label:"Ver detalles de vales",children:e.jsx(_e,{size:"sm",icon:e.jsx(qs,{}),onClick:()=>k(m)})})})]},m.client.id)))})]})})]})]}):e.jsxs(Ee,{status:"info",children:[e.jsx(Te,{}),e.jsx(n,{children:"Selecciona un perÃ­odo para generar el reporte de cobranza."})]}),e.jsxs(Ke,{isOpen:P,onClose:R,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsxs(Xe,{children:["Detalles de Vales - ",d==null?void 0:d.client.name]}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:d&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Cliente:"}),e.jsx(n,{children:d.client.name})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Total Deuda:"}),e.jsx(n,{color:"red.600",fontWeight:"bold",fontSize:"lg",children:w(d.remainingAmount)})]}),e.jsx(hs,{}),e.jsx(n,{fontWeight:"bold",children:"Detalle de Vales:"}),(d.vouchers||d.vales||[]).map((m,B)=>e.jsx(F,{variant:"outline",size:"sm",children:e.jsx(W,{children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsxs(n,{fontWeight:"bold",children:["Vale #",m.id]}),e.jsx(n,{fontSize:"sm",color:"gray.500",children:E(m.createdAt)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"sm",children:"Monto Original:"}),e.jsx(n,{fontSize:"sm",children:w(m.amount)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"sm",children:"Usado:"}),e.jsx(n,{fontSize:"sm",color:"green.600",children:w(m.usedAmount)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"sm",fontWeight:"bold",children:"Pendiente:"}),e.jsx(n,{fontSize:"sm",fontWeight:"bold",color:"red.600",children:w(m.remainingAmount)})]}),m.description&&e.jsx(n,{fontSize:"xs",color:"gray.500",children:m.description})]})})},m.id))]})})]})]})]})})},Ql=()=>{const s=xs(),t=Gs({base:!0,md:!1}),{isOpen:r,onOpen:a,onClose:i}=Ge(),{isOpen:l,onOpen:o,onClose:c}=Ge(),{isOpen:d,onOpen:g,onClose:P}=Ge(),{districts:T,fetchDistricts:R}=Zr(),[j,p]=S.useState([]),[D,_]=S.useState(!0),[v,w]=S.useState(new Date),[E,k]=S.useState(null),[M,L]=S.useState(""),[m,B]=S.useState("all"),[y,re]=S.useState("all"),[x,V]=S.useState({name:"",document:"",phone:"",email:"",address:"",district:"",reference:"",notes:""}),Y=async()=>{try{_(!0);const A=await G.get("/api/clients");A.data.success&&(p(A.data.data),w(new Date))}catch(A){console.error("Error al cargar clientes:",A),s({title:"Error",description:"No se pudieron cargar los clientes",status:"error",duration:3e3,isClosable:!0})}finally{_(!1)}};S.useEffect(()=>{Y(),R();const A=setInterval(Y,3e4);return()=>clearInterval(A)},[]);const ae=async()=>{var A,je;try{(await G.post("/api/clients",x)).data.success&&(s({title:"Cliente creado",description:"El cliente se ha registrado exitosamente",status:"success",duration:3e3,isClosable:!0}),Y(),i(),z())}catch(ne){console.error("Error al crear cliente:",ne),s({title:"Error",description:((je=(A=ne.response)==null?void 0:A.data)==null?void 0:je.message)||"No se pudo crear el cliente",status:"error",duration:3e3,isClosable:!0})}},Ce=async()=>{var A,je;try{(await G.put(`/api/clients/${E.id}`,x)).data.success&&(s({title:"Cliente actualizado",description:"Los datos del cliente se han actualizado",status:"success",duration:3e3,isClosable:!0}),Y(),c(),z())}catch(ne){console.error("Error al actualizar cliente:",ne),s({title:"Error",description:((je=(A=ne.response)==null?void 0:A.data)==null?void 0:je.message)||"No se pudo actualizar el cliente",status:"error",duration:3e3,isClosable:!0})}},ie=async A=>{if(window.confirm("Â¿EstÃ¡s seguro de que quieres eliminar este cliente?"))try{(await G.delete(`/api/clients/${A}`)).data.success&&(s({title:"Cliente eliminado",description:"El cliente ha sido eliminado exitosamente",status:"success",duration:3e3,isClosable:!0}),Y())}catch(je){console.error("Error al eliminar cliente:",je),s({title:"Error",description:"No se pudo eliminar el cliente",status:"error",duration:3e3,isClosable:!0})}},ce=A=>{k(A),V({name:A.name||"",document:A.documentNumber||"",phone:A.phone||"",email:A.email||"",address:A.address||"",district:A.district||"",reference:A.reference||"",notes:A.notes||""}),o()},Ne=A=>{k(A),g()},z=()=>{V({name:"",document:"",phone:"",email:"",address:"",district:"",reference:"",notes:""}),k(null)},Q=j.filter(A=>{const je=A.name.toLowerCase().includes(M.toLowerCase())||A.documentNumber.includes(M)||A.phone.includes(M),ne=m==="all"||A.status===m,Be=y==="all"||A.district===y;return je&&ne&&Be}),ye=j.length,oe=j.filter(A=>A.status==="active").length;return D?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsxs(N,{p:6,children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(ys,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(K,{size:"lg",color:"blue.600",children:"GestiÃ³n de Clientes"}),e.jsx(n,{color:"gray.600",children:"Administra la informaciÃ³n de tus clientes"})]}),e.jsxs(h,{spacing:4,children:[e.jsx(O,{leftIcon:e.jsx(mn,{}),onClick:Y,variant:"outline",children:"Actualizar"}),e.jsx(O,{leftIcon:e.jsx(ut,{}),onClick:a,colorScheme:"blue",children:"Nuevo Cliente"})]})]}),e.jsxs(as,{columns:{base:1,md:3},spacing:4,children:[e.jsx(F,{children:e.jsx(W,{children:e.jsxs(h,{justify:"space-between",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Total Clientes"}),e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:ye})]}),e.jsx(Us,{size:24,color:"#3182CE"})]})})}),e.jsx(F,{children:e.jsx(W,{children:e.jsxs(h,{justify:"space-between",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Clientes Activos"}),e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"green.600",children:oe})]}),e.jsx(Us,{size:24,color:"#38A169"})]})})}),e.jsx(F,{children:e.jsx(W,{children:e.jsxs(h,{justify:"space-between",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Ãšltima ActualizaciÃ³n"}),e.jsx(n,{fontSize:"sm",fontWeight:"bold",color:"gray.600",children:v.toLocaleTimeString()})]}),e.jsx(mn,{size:20,color:"#718096"})]})})})]}),e.jsx(F,{children:e.jsx(W,{children:e.jsxs(h,{spacing:4,wrap:"wrap",children:[e.jsx(te,{placeholder:"Buscar por nombre, DNI o telÃ©fono...",value:M,onChange:A=>L(A.target.value),maxW:"300px"}),e.jsxs(rs,{value:m,onChange:A=>B(A.target.value),maxW:"200px",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"inactive",children:"Inactivos"})]}),e.jsxs(rs,{value:y,onChange:A=>re(A.target.value),maxW:"200px",placeholder:"Seleccionar distrito",children:[e.jsx("option",{value:"all",children:"Todos los distritos"}),T.map(A=>e.jsx("option",{value:A.name,children:A.name},A.id))]}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>{L(""),B("all"),re("all")},children:"Limpiar Filtros"})]})})}),e.jsxs(F,{children:[e.jsx(ze,{children:e.jsxs(h,{justify:"space-between",children:[e.jsx(K,{size:"md",children:"Lista de Clientes"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["Mostrando ",Q.length," de ",ye," clientes",y!=="all"&&` en ${y}`,m!=="all"&&` (${m==="active"?"Activos":"Inactivos"})`]})]})}),e.jsx(W,{children:t?e.jsx(u,{spacing:4,children:Q.map(A=>e.jsx(F,{w:"full",variant:"outline",children:e.jsx(W,{children:e.jsxs(u,{align:"start",spacing:3,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:A.name}),e.jsx(ve,{colorScheme:A.status==="active"?"green":"gray",children:A.status==="active"?"Activo":"Inactivo"})]}),e.jsxs(u,{align:"start",spacing:1,w:"full",children:[e.jsxs(h,{children:[e.jsx(ta,{size:14,color:"#718096"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["DNI: ",A.documentNumber]})]}),e.jsxs(h,{children:[e.jsx(Hs,{size:14,color:"#718096"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:A.phone})]}),e.jsxs(h,{children:[e.jsx(wt,{size:14,color:"#718096"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:A.district})]})]}),e.jsxs(h,{spacing:2,children:[e.jsx(Oe,{label:"Ver detalles",children:e.jsx(_e,{icon:e.jsx(qs,{}),size:"sm",onClick:()=>Ne(A)})}),e.jsx(Oe,{label:"Editar",children:e.jsx(_e,{icon:e.jsx(Tr,{}),size:"sm",colorScheme:"blue",onClick:()=>ce(A)})}),e.jsx(Oe,{label:"Eliminar",children:e.jsx(_e,{icon:e.jsx(fn,{}),size:"sm",colorScheme:"red",onClick:()=>ie(A.id)})})]})]})})},A.id))}):e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(he,{children:"Cliente"}),e.jsx(he,{children:"DNI"}),e.jsx(he,{children:"TelÃ©fono"}),e.jsx(he,{children:"Distrito"}),e.jsx(he,{children:"Estado"}),e.jsx(he,{children:"Acciones"})]})}),e.jsx(nt,{children:Q.map(A=>e.jsxs(fs,{children:[e.jsx(pe,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:A.name}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:A.email})]})}),e.jsx(pe,{children:A.documentNumber}),e.jsx(pe,{children:A.phone}),e.jsx(pe,{children:A.district}),e.jsx(pe,{children:e.jsx(ve,{colorScheme:A.status==="active"?"green":"gray",children:A.status==="active"?"Activo":"Inactivo"})}),e.jsx(pe,{children:e.jsxs(h,{spacing:2,children:[e.jsx(Oe,{label:"Ver detalles",children:e.jsx(_e,{icon:e.jsx(qs,{}),size:"sm",onClick:()=>Ne(A)})}),e.jsx(Oe,{label:"Editar",children:e.jsx(_e,{icon:e.jsx(Tr,{}),size:"sm",colorScheme:"blue",onClick:()=>ce(A)})}),e.jsx(Oe,{label:"Eliminar",children:e.jsx(_e,{icon:e.jsx(fn,{}),size:"sm",colorScheme:"red",onClick:()=>ie(A.id)})})]})})]},A.id))})]})})]})]}),e.jsxs(Ke,{isOpen:r,onClose:i,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Nuevo Cliente"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Nombre Completo"}),e.jsx(te,{value:x.name,onChange:A=>V({...x,name:A.target.value}),placeholder:"Ingresa el nombre completo"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"DNI"}),e.jsx(te,{value:x.document,onChange:A=>V({...x,document:A.target.value}),placeholder:"Ingresa el DNI"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"TelÃ©fono"}),e.jsx(te,{value:x.phone,onChange:A=>V({...x,phone:A.target.value}),placeholder:"Ingresa el telÃ©fono"})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Email"}),e.jsx(te,{type:"email",value:x.email,onChange:A=>V({...x,email:A.target.value}),placeholder:"Ingresa el email"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"DirecciÃ³n"}),e.jsx(te,{value:x.address,onChange:A=>V({...x,address:A.target.value}),placeholder:"Ingresa la direcciÃ³n"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Distrito"}),e.jsx(te,{value:x.district,onChange:A=>V({...x,district:A.target.value}),placeholder:"Ingresa el distrito"})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Referencia"}),e.jsx(te,{value:x.reference,onChange:A=>V({...x,reference:A.target.value}),placeholder:"Referencia de la direcciÃ³n"})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Notas"}),e.jsx(Ns,{value:x.notes,onChange:A=>V({...x,notes:A.target.value}),placeholder:"Notas adicionales"})]}),e.jsx(O,{colorScheme:"blue",onClick:ae,w:"full",children:"Crear Cliente"})]})})]})]}),e.jsxs(Ke,{isOpen:l,onClose:c,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Editar Cliente"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Nombre Completo"}),e.jsx(te,{value:x.name,onChange:A=>V({...x,name:A.target.value}),placeholder:"Ingresa el nombre completo"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"DNI"}),e.jsx(te,{value:x.document,onChange:A=>V({...x,document:A.target.value}),placeholder:"Ingresa el DNI"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"TelÃ©fono"}),e.jsx(te,{value:x.phone,onChange:A=>V({...x,phone:A.target.value}),placeholder:"Ingresa el telÃ©fono"})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Email"}),e.jsx(te,{type:"email",value:x.email,onChange:A=>V({...x,email:A.target.value}),placeholder:"Ingresa el email"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"DirecciÃ³n"}),e.jsx(te,{value:x.address,onChange:A=>V({...x,address:A.target.value}),placeholder:"Ingresa la direcciÃ³n"})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Distrito"}),e.jsx(te,{value:x.district,onChange:A=>V({...x,district:A.target.value}),placeholder:"Ingresa el distrito"})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Referencia"}),e.jsx(te,{value:x.reference,onChange:A=>V({...x,reference:A.target.value}),placeholder:"Referencia de la direcciÃ³n"})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Notas"}),e.jsx(Ns,{value:x.notes,onChange:A=>V({...x,notes:A.target.value}),placeholder:"Notas adicionales"})]}),e.jsx(O,{colorScheme:"blue",onClick:Ce,w:"full",children:"Actualizar Cliente"})]})})]})]}),e.jsxs(Ke,{isOpen:d,onClose:P,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Detalles del Cliente"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:E&&e.jsx(u,{spacing:4,align:"stretch",children:e.jsx(F,{children:e.jsx(W,{children:e.jsxs(u,{spacing:3,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Nombre:"}),e.jsx(n,{children:E.name})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"DNI:"}),e.jsx(n,{children:E.documentNumber})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"TelÃ©fono:"}),e.jsx(n,{children:E.phone})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Email:"}),e.jsx(n,{children:E.email||"No especificado"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"DirecciÃ³n:"}),e.jsx(n,{children:E.address})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Distrito:"}),e.jsx(n,{children:E.district})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Referencia:"}),e.jsx(n,{children:E.reference||"No especificada"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado:"}),e.jsx(ve,{colorScheme:E.status==="active"?"green":"gray",children:E.status==="active"?"Activo":"Inactivo"})]}),E.notes&&e.jsxs(u,{align:"stretch",children:[e.jsx(n,{fontWeight:"bold",children:"Notas:"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:E.notes})]})]})})})})})]})]})]})},Jl=()=>{const[s,t]=S.useState([]),[r,a]=S.useState(!0),[i,l]=S.useState(null),[o,c]=S.useState(!1),[d,g]=S.useState({version:"",title:"",content:"",effectiveDate:""}),[P,T]=S.useState({page:1,limit:10,total:0,pages:0}),[R,j]=S.useState("all"),{isOpen:p,onOpen:D,onClose:_}=Ge(),v=xs(),w=We("white","gray.800");We("gray.200","gray.600"),S.useEffect(()=>{E()},[P.page,R]);const E=async()=>{try{a(!0);const x=localStorage.getItem("token"),V=new URLSearchParams({page:P.page,limit:P.limit});R!=="all"&&V.append("status",R),console.log("ðŸ”„ Llamando a /api/terms-and-conditions con params:",V.toString());const Y=await os.get(`/api/terms-and-conditions?${V}`);console.log("ðŸ“¦ Respuesta tÃ©rminos:",Y.data),t(Y.data.data||[]),T(ae=>{var Ce,ie;return{...ae,total:((Ce=Y.data.pagination)==null?void 0:Ce.total)||0,pages:((ie=Y.data.pagination)==null?void 0:ie.pages)||1}})}catch(x){console.error("Error fetching terms:",x),v({title:"Error",description:"Error al cargar tÃ©rminos y condiciones",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}},k=()=>{l(null),c(!0),g({version:"",title:"",content:"",effectiveDate:new Date().toISOString().split("T")[0]}),D()},M=x=>{l(x),c(!0),g({version:x.version,title:x.title,content:x.content,effectiveDate:x.effectiveDate.split("T")[0]}),D()},L=x=>{l(x),c(!1),g({version:x.version,title:x.title,content:x.content,effectiveDate:x.effectiveDate.split("T")[0]}),D()},m=async x=>{var V,Y;x.preventDefault();try{const ae=localStorage.getItem("token");i?(await os.put(`/api/terms-and-conditions/${i.id}`,d),v({title:"Ã‰xito",description:"TÃ©rminos y condiciones actualizados",status:"success",duration:3e3,isClosable:!0})):(await os.post("/api/terms-and-conditions",d),v({title:"Ã‰xito",description:"TÃ©rminos y condiciones creados",status:"success",duration:3e3,isClosable:!0})),_(),E()}catch(ae){console.error("Error saving terms:",ae),v({title:"Error",description:((Y=(V=ae.response)==null?void 0:V.data)==null?void 0:Y.message)||"Error al guardar tÃ©rminos",status:"error",duration:3e3,isClosable:!0})}},B=async x=>{try{const V=localStorage.getItem("token");await os.patch(`/api/terms-and-conditions/${x.id}/toggle`,{}),v({title:"Ã‰xito",description:`TÃ©rminos ${x.isActive?"desactivados":"activados"}`,status:"success",duration:3e3,isClosable:!0}),E()}catch(V){console.error("Error toggling status:",V),v({title:"Error",description:"Error al cambiar estado",status:"error",duration:3e3,isClosable:!0})}},y=async x=>{var V,Y;if(window.confirm("Â¿EstÃ¡s seguro de eliminar estos tÃ©rminos y condiciones?"))try{const ae=localStorage.getItem("token");await os.delete(`/api/terms-and-conditions/${x.id}`),v({title:"Ã‰xito",description:"TÃ©rminos y condiciones eliminados",status:"success",duration:3e3,isClosable:!0}),E()}catch(ae){console.error("Error deleting terms:",ae),v({title:"Error",description:((Y=(V=ae.response)==null?void 0:V.data)==null?void 0:Y.message)||"Error al eliminar tÃ©rminos",status:"error",duration:3e3,isClosable:!0})}},re=x=>new Date(x).toLocaleDateString("es-PE");return r?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsxs(N,{p:6,bg:w,borderRadius:"lg",boxShadow:"sm",children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:"GestiÃ³n de TÃ©rminos y Condiciones"}),e.jsx(O,{leftIcon:e.jsx(Mr,{}),colorScheme:"blue",onClick:k,children:"Crear Nuevos TÃ©rminos"})]}),e.jsx(h,{spacing:4,children:e.jsxs(H,{maxW:"200px",children:[e.jsx(U,{children:"Estado"}),e.jsxs(rs,{value:R,onChange:x=>j(x.target.value),children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"inactive",children:"Inactivos"})]})]})}),e.jsx(N,{overflowX:"auto",children:e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(he,{children:"VersiÃ³n"}),e.jsx(he,{children:"TÃ­tulo"}),e.jsx(he,{children:"Estado"}),e.jsx(he,{children:"Fecha Vigencia"}),e.jsx(he,{children:"Creado"}),e.jsx(he,{children:"Acciones"})]})}),e.jsx(nt,{children:s.map(x=>e.jsxs(fs,{children:[e.jsx(pe,{fontWeight:"bold",children:x.version}),e.jsx(pe,{maxW:"300px",isTruncated:!0,children:x.title}),e.jsx(pe,{children:e.jsx(ve,{colorScheme:x.isActive?"green":"red",variant:"subtle",children:x.isActive?"Activo":"Inactivo"})}),e.jsx(pe,{children:re(x.effectiveDate)}),e.jsx(pe,{children:re(x.createdAt)}),e.jsx(pe,{children:e.jsxs(h,{spacing:2,children:[e.jsx(Oe,{label:"Ver",children:e.jsx(_e,{icon:e.jsx(Wr,{}),size:"sm",variant:"ghost",onClick:()=>L(x)})}),e.jsx(Oe,{label:"Editar",children:e.jsx(_e,{icon:e.jsx(Yt,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:()=>M(x)})}),e.jsx(Oe,{label:x.isActive?"Desactivar":"Activar",children:e.jsx(Cr,{isChecked:x.isActive,onChange:()=>B(x),colorScheme:"green"})}),!x.isActive&&e.jsx(Oe,{label:"Eliminar",children:e.jsx(_e,{icon:e.jsx($r,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>y(x)})})]})})]},x.id))})]})}),P.pages>1&&e.jsxs(h,{justify:"center",spacing:4,children:[e.jsx(O,{isDisabled:P.page===1,onClick:()=>T(x=>({...x,page:x.page-1})),children:"Anterior"}),e.jsxs(n,{children:["PÃ¡gina ",P.page," de ",P.pages]}),e.jsx(O,{isDisabled:P.page===P.pages,onClick:()=>T(x=>({...x,page:x.page+1})),children:"Siguiente"})]})]}),e.jsxs(Ke,{isOpen:p,onClose:_,size:"xl",children:[e.jsx(Ye,{}),e.jsxs(Ze,{maxW:"800px",children:[e.jsx(Xe,{children:o?"Editar TÃ©rminos y Condiciones":"Ver TÃ©rminos y Condiciones"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsx("form",{onSubmit:m,children:e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(h,{children:[e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"VersiÃ³n"}),e.jsx(te,{value:d.version,onChange:x=>g(V=>({...V,version:x.target.value})),placeholder:"ej: 1.0, 2.0",isDisabled:!o})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Fecha de Vigencia"}),e.jsx(te,{type:"date",value:d.effectiveDate,onChange:x=>g(V=>({...V,effectiveDate:x.target.value})),isDisabled:!o})]})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"TÃ­tulo"}),e.jsx(te,{value:d.title,onChange:x=>g(V=>({...V,title:x.target.value})),placeholder:"TÃ­tulo de los tÃ©rminos y condiciones",isDisabled:!o})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Contenido"}),e.jsx(Ns,{value:d.content,onChange:x=>g(V=>({...V,content:x.target.value})),placeholder:"Contenido completo de los tÃ©rminos y condiciones...",rows:15,isDisabled:!o})]}),o&&e.jsxs(h,{justify:"flex-end",children:[e.jsx(O,{variant:"ghost",onClick:_,children:"Cancelar"}),e.jsx(O,{type:"submit",colorScheme:"blue",children:i?"Actualizar":"Crear"})]}),!o&&e.jsx(h,{justify:"flex-end",children:e.jsx(O,{onClick:_,children:"Cerrar"})})]})})})]})]})]})},Kl=()=>{const[s,t]=xi(),[r,a]=S.useState([]),[i,l]=S.useState(!0),{user:o}=Os(),[c,d]=S.useState(null),[g,P]=S.useState(!1),[T,R]=S.useState(!1),[j,p]=S.useState({username:"",email:"",password:"",role:"repartidor",isActive:!0,firstName:"",lastName:"",documentNumber:"",phone:"",address:"",district:"",reference:"",vehicleType:"",vehiclePlate:"",licenseNumber:"",insuranceNumber:"",emergencyContact:"",emergencyPhone:""}),[D,_]=S.useState(!1),[v,w]=S.useState({page:1,limit:10,total:0,pages:0}),[E,k]=S.useState("all"),{isOpen:M,onOpen:L,onClose:m}=Ge(),B=xs(),y=We("white","gray.800");We("gray.200","gray.600"),S.useEffect(()=>{const z=s.get("role");z&&z!=="all"&&k(z)},[s]),S.useEffect(()=>{re()},[v.page,E]);const re=async()=>{var z,Q,ye;try{l(!0);const oe=localStorage.getItem("token");console.log("ðŸ”‘ Token para usuarios:",oe?"Presente":"Ausente"),console.log("ðŸ”‘ Token completo:",oe),oe&&!os.defaults.headers.common.Authorization&&(os.defaults.headers.common.Authorization=`Bearer ${oe}`,console.log("ðŸ”‘ Token configurado en axios")),console.log("ðŸ”‘ Header Authorization actual:",os.defaults.headers.common.Authorization),console.log("ðŸ”„ Llamando a /api/users/role con role:",E);let A;if(E==="all"){console.log("ðŸ”„ Obteniendo usuarios de todos los roles...");const[je,ne,Be]=await Promise.all([os.get("/api/users/role?role=admin"),os.get("/api/users/role?role=vendedor"),os.get("/api/users/role?role=repartidor")]);console.log("ðŸ“¦ Admin users:",je.data),console.log("ðŸ“¦ Vendedor users:",ne.data),console.log("ðŸ“¦ Repartidor users:",Be.data),A={data:{success:!0,data:[...je.data.success?je.data.data:[],...ne.data.success?ne.data.data:[],...Be.data.success?Be.data.data:[]]}}}else console.log("ðŸ”„ Obteniendo usuarios del rol:",E),A=await os.get(`/api/users/role?role=${E}`);console.log("ðŸ“¦ Respuesta usuarios:",A.data),A.data.success?(a(A.data.data||[]),w(je=>{var ne;return{...je,total:((ne=A.data.data)==null?void 0:ne.length)||0,pages:1}})):(a([]),w(je=>({...je,total:0,pages:1})))}catch(oe){console.error("Error fetching users:",oe),console.error("Error details:",(z=oe.response)==null?void 0:z.data),console.error("Error status:",(Q=oe.response)==null?void 0:Q.status),console.error("Error headers:",(ye=oe.response)==null?void 0:ye.headers),B({title:"Error",description:"Error al cargar usuarios",status:"error",duration:3e3,isClosable:!0}),a([])}finally{l(!1)}},x=()=>{d(null),R(!0),P(!0),p({username:"",email:"",password:"",role:"repartidor",isActive:!0,firstName:"",lastName:"",documentNumber:"",phone:"",address:"",district:"",reference:"",vehicleType:"",vehiclePlate:"",licenseNumber:"",insuranceNumber:"",emergencyContact:"",emergencyPhone:""}),L()},V=z=>{d(z),R(!1),P(!0),p({username:z.username,email:z.email,password:"",role:z.role,isActive:z.isActive,firstName:z.firstName||"",lastName:z.lastName||"",documentNumber:z.documentNumber||"",phone:z.phone||"",address:z.address||"",district:z.district||"",reference:z.reference||"",vehicleType:z.vehicleType||"",vehiclePlate:z.vehiclePlate||"",licenseNumber:z.licenseNumber||"",insuranceNumber:z.insuranceNumber||"",emergencyContact:z.emergencyContact||"",emergencyPhone:z.emergencyPhone||""}),L()},Y=z=>{d(z),R(!1),P(!1),p({username:z.username,email:z.email,password:"",role:z.role,isActive:z.isActive,firstName:z.firstName||"",lastName:z.lastName||"",documentNumber:z.documentNumber||"",phone:z.phone||"",address:z.address||"",district:z.district||"",reference:z.reference||"",vehicleType:z.vehicleType||"",vehiclePlate:z.vehiclePlate||"",licenseNumber:z.licenseNumber||"",insuranceNumber:z.insuranceNumber||"",emergencyContact:z.emergencyContact||"",emergencyPhone:z.emergencyPhone||""}),L()},ae=async z=>{var Q,ye;z.preventDefault();try{const oe=localStorage.getItem("token"),A={username:j.username,email:j.email,role:j.role,isActive:j.isActive,firstName:j.firstName||"",lastName:j.lastName||"",phone:j.phone||"",address:j.address||"",district:j.district||"",reference:j.reference||""};(T||j.password)&&(A.password=j.password),T?(await os.post("/api/users",A),B({title:"Ã‰xito",description:"Usuario creado exitosamente",status:"success",duration:3e3,isClosable:!0})):(await os.put(`/api/users/${c.id}`,A),B({title:"Ã‰xito",description:"Usuario actualizado exitosamente",status:"success",duration:3e3,isClosable:!0})),m(),re()}catch(oe){console.error("Error saving user:",oe),B({title:"Error",description:((ye=(Q=oe.response)==null?void 0:Q.data)==null?void 0:ye.message)||"Error al guardar usuario",status:"error",duration:3e3,isClosable:!0})}},Ce=async z=>{try{const Q=localStorage.getItem("token");await os.patch(`/api/users/${z.id}/toggle-status`,{}),B({title:"Ã‰xito",description:`Usuario ${z.isActive?"desactivado":"activado"}`,status:"success",duration:3e3,isClosable:!0}),re()}catch(Q){console.error("Error toggling status:",Q),B({title:"Error",description:"Error al cambiar estado del usuario",status:"error",duration:3e3,isClosable:!0})}},ie=async z=>{var Q,ye;if(o&&o.id===z.id){B({title:"Error",description:"No puedes eliminarte a ti mismo",status:"error",duration:3e3,isClosable:!0});return}if(window.confirm(`Â¿EstÃ¡s seguro de eliminar al usuario "${z.username}"?`))try{const oe=localStorage.getItem("token");await os.delete(`/api/users/${z.id}`),B({title:"Ã‰xito",description:"Usuario eliminado exitosamente",status:"success",duration:3e3,isClosable:!0}),re()}catch(oe){console.error("Error deleting user:",oe),B({title:"Error",description:((ye=(Q=oe.response)==null?void 0:Q.data)==null?void 0:ye.message)||"Error al eliminar usuario",status:"error",duration:3e3,isClosable:!0})}},ce=z=>{switch(z){case"admin":return"red";case"vendedor":return"blue";case"repartidor":return"green";default:return"gray"}},Ne=z=>{switch(z){case"admin":return"Administrador";case"vendedor":return"Vendedor";case"repartidor":return"Repartidor";default:return z}};return i?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsxs(N,{p:6,bg:y,borderRadius:"lg",boxShadow:"sm",children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:"GestiÃ³n de Usuarios"}),e.jsx(O,{leftIcon:e.jsx(Mr,{}),colorScheme:"blue",onClick:x,children:"Crear Usuario"})]}),e.jsx(h,{spacing:4,children:e.jsxs(H,{maxW:"200px",children:[e.jsx(U,{children:"Rol"}),e.jsxs(rs,{value:E,onChange:z=>k(z.target.value),children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"admin",children:"Administrador"}),e.jsx("option",{value:"vendedor",children:"Vendedor"}),e.jsx("option",{value:"repartidor",children:"Repartidor"})]})]})}),e.jsx(N,{overflowX:"auto",children:e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(he,{children:"Usuario"}),e.jsx(he,{children:"Nombre"}),e.jsx(he,{children:"Email"}),e.jsx(he,{children:"Rol"}),e.jsx(he,{children:"Estado"}),e.jsx(he,{children:"Creado"}),e.jsx(he,{children:"Acciones"})]})}),e.jsx(nt,{children:r.map(z=>e.jsxs(fs,{children:[e.jsx(pe,{fontWeight:"bold",children:z.username}),e.jsx(pe,{children:z.firstName&&z.lastName?`${z.firstName} ${z.lastName}`:z.firstName||z.lastName||"-"}),e.jsx(pe,{children:z.email}),e.jsx(pe,{children:e.jsx(ve,{colorScheme:ce(z.role),variant:"subtle",children:Ne(z.role)})}),e.jsx(pe,{children:e.jsx(ve,{colorScheme:z.isActive?"green":"red",variant:"subtle",children:z.isActive?"Activo":"Inactivo"})}),e.jsx(pe,{children:new Date(z.createdAt).toLocaleDateString("es-PE")}),e.jsx(pe,{children:e.jsxs(h,{spacing:2,children:[e.jsx(Oe,{label:"Ver",children:e.jsx(_e,{icon:e.jsx(Wr,{}),size:"sm",variant:"ghost",onClick:()=>Y(z)})}),e.jsx(Oe,{label:"Editar",children:e.jsx(_e,{icon:e.jsx(Yt,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:()=>V(z)})}),e.jsx(Oe,{label:z.isActive?"Desactivar":"Activar",children:e.jsx(Cr,{isChecked:z.isActive,onChange:()=>Ce(z),colorScheme:"green"})}),e.jsx(Oe,{label:o&&o.id===z.id?"No puedes eliminarte a ti mismo":"Eliminar",children:e.jsx(_e,{icon:e.jsx($r,{}),size:"sm",variant:"ghost",colorScheme:"red",isDisabled:o&&o.id===z.id,onClick:()=>ie(z)})})]})})]},z.id))})]})}),v.pages>1&&e.jsxs(h,{justify:"center",spacing:4,children:[e.jsx(O,{isDisabled:v.page===1,onClick:()=>w(z=>({...z,page:z.page-1})),children:"Anterior"}),e.jsxs(n,{children:["PÃ¡gina ",v.page," de ",v.pages]}),e.jsx(O,{isDisabled:v.page===v.pages,onClick:()=>w(z=>({...z,page:z.page+1})),children:"Siguiente"})]})]}),e.jsxs(Ke,{isOpen:M,onClose:m,size:"xl",children:[e.jsx(Ye,{}),e.jsxs(Ze,{maxW:"800px",maxH:"90vh",overflowY:"auto",children:[e.jsx(Xe,{children:T?"Crear Usuario":g?"Editar Usuario":"Ver Usuario"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsx("form",{onSubmit:ae,children:e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(N,{children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",mb:4,color:"blue.600",children:"InformaciÃ³n BÃ¡sica"}),e.jsxs(u,{spacing:4,children:[e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Nombre de Usuario"}),e.jsx(te,{value:j.username,onChange:z=>p(Q=>({...Q,username:z.target.value})),placeholder:"Nombre de usuario",isDisabled:!g})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Email"}),e.jsx(te,{type:"email",value:j.email,onChange:z=>p(Q=>({...Q,email:z.target.value})),placeholder:"correo@ejemplo.com",isDisabled:!g})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Nombre"}),e.jsx(te,{value:j.firstName,onChange:z=>p(Q=>({...Q,firstName:z.target.value})),placeholder:"Nombre",isDisabled:!g})]}),e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Apellido"}),e.jsx(te,{value:j.lastName,onChange:z=>p(Q=>({...Q,lastName:z.target.value})),placeholder:"Apellido",isDisabled:!g})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(H,{children:[e.jsx(U,{children:"DNI"}),e.jsx(te,{value:j.documentNumber,onChange:z=>p(Q=>({...Q,documentNumber:z.target.value})),placeholder:"12345678",isDisabled:!g})]}),e.jsxs(H,{children:[e.jsx(U,{children:"TelÃ©fono"}),e.jsx(te,{value:j.phone,onChange:z=>p(Q=>({...Q,phone:z.target.value})),placeholder:"987654321",isDisabled:!g})]})]}),e.jsxs(H,{isRequired:T,children:[e.jsxs(U,{children:["ContraseÃ±a ",!T&&"(dejar vacÃ­o para mantener la actual)"]}),e.jsxs(Pt,{children:[e.jsx(te,{type:D?"text":"password",value:j.password,onChange:z=>p(Q=>({...Q,password:z.target.value})),placeholder:T?"ContraseÃ±a":"Nueva contraseÃ±a (opcional)",isDisabled:!g}),e.jsx($n,{children:e.jsx(_e,{"aria-label":D?"Ocultar contraseÃ±a":"Mostrar contraseÃ±a",icon:D?e.jsx(ea,{}):e.jsx(qs,{}),variant:"ghost",size:"sm",onClick:()=>_(!D),isDisabled:!g})})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(H,{isRequired:!0,children:[e.jsx(U,{children:"Rol"}),e.jsxs(rs,{value:j.role,onChange:z=>p(Q=>({...Q,role:z.target.value})),isDisabled:!g,children:[e.jsx("option",{value:"repartidor",children:"Repartidor"}),e.jsx("option",{value:"vendedor",children:"Vendedor"}),e.jsx("option",{value:"admin",children:"Administrador"})]})]}),e.jsx(H,{children:e.jsxs(h,{justify:"space-between",children:[e.jsx(U,{mb:0,children:"Usuario Activo"}),e.jsx(Cr,{isChecked:j.isActive,onChange:z=>p(Q=>({...Q,isActive:z.target.checked})),isDisabled:!g,colorScheme:"green"})]})})]})]})]}),e.jsxs(N,{children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",mb:4,color:"blue.600",children:"DirecciÃ³n"}),e.jsxs(u,{spacing:4,children:[e.jsxs(H,{children:[e.jsx(U,{children:"DirecciÃ³n"}),e.jsx(te,{value:j.address,onChange:z=>p(Q=>({...Q,address:z.target.value})),placeholder:"Jr. Las Flores 123",isDisabled:!g})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(H,{children:[e.jsx(U,{children:"Distrito"}),e.jsx(te,{value:j.district,onChange:z=>p(Q=>({...Q,district:z.target.value})),placeholder:"CallerÃ­a",isDisabled:!g})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Referencia"}),e.jsx(te,{value:j.reference,onChange:z=>p(Q=>({...Q,reference:z.target.value})),placeholder:"Frente al parque",isDisabled:!g})]})]})]})]}),j.role==="repartidor"&&e.jsxs(N,{children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",mb:4,color:"green.600",children:"Datos de Repartidor"}),e.jsxs(u,{spacing:4,children:[e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(H,{children:[e.jsx(U,{children:"Tipo de VehÃ­culo"}),e.jsxs(rs,{value:j.vehicleType,onChange:z=>p(Q=>({...Q,vehicleType:z.target.value})),isDisabled:!g,children:[e.jsx("option",{value:"",children:"Seleccionar"}),e.jsx("option",{value:"motorcycle",children:"Motocicleta"}),e.jsx("option",{value:"bicycle",children:"Bicicleta"}),e.jsx("option",{value:"car",children:"Auto"}),e.jsx("option",{value:"truck",children:"CamiÃ³n"})]})]}),e.jsxs(H,{children:[e.jsx(U,{children:"Placa del VehÃ­culo"}),e.jsx(te,{value:j.vehiclePlate,onChange:z=>p(Q=>({...Q,vehiclePlate:z.target.value})),placeholder:"ABC-123",isDisabled:!g})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(H,{children:[e.jsx(U,{children:"NÃºmero de Licencia"}),e.jsx(te,{value:j.licenseNumber,onChange:z=>p(Q=>({...Q,licenseNumber:z.target.value})),placeholder:"12345678",isDisabled:!g})]}),e.jsxs(H,{children:[e.jsx(U,{children:"NÃºmero de Seguro"}),e.jsx(te,{value:j.insuranceNumber,onChange:z=>p(Q=>({...Q,insuranceNumber:z.target.value})),placeholder:"987654321",isDisabled:!g})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(H,{children:[e.jsx(U,{children:"Contacto de Emergencia"}),e.jsx(te,{value:j.emergencyContact,onChange:z=>p(Q=>({...Q,emergencyContact:z.target.value})),placeholder:"MarÃ­a GarcÃ­a",isDisabled:!g})]}),e.jsxs(H,{children:[e.jsx(U,{children:"TelÃ©fono de Emergencia"}),e.jsx(te,{value:j.emergencyPhone,onChange:z=>p(Q=>({...Q,emergencyPhone:z.target.value})),placeholder:"987654321",isDisabled:!g})]})]})]})]}),g&&e.jsxs(h,{justify:"flex-end",children:[e.jsx(O,{variant:"ghost",onClick:m,children:"Cancelar"}),e.jsx(O,{type:"submit",colorScheme:"blue",children:T?"Crear":"Actualizar"})]}),!g&&e.jsx(h,{justify:"flex-end",children:e.jsx(O,{onClick:m,children:"Cerrar"})})]})})})]})]})]})},Zl=()=>{const{token:s,checkAuth:t}=Os(),[r,a]=S.useState(!0);return S.useEffect(()=>{(async()=>{try{console.log("ðŸ”„ Iniciando verificaciÃ³n de autenticaciÃ³n...");const l=await t();console.log("âœ… VerificaciÃ³n completada, autenticado:",l)}catch(l){console.error("âŒ Error en verificaciÃ³n de autenticaciÃ³n:",l)}finally{a(!1)}})()},[t]),r?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Cargando..."})]}):e.jsxs(gi,{children:[e.jsx(is,{path:"/",element:e.jsx(Pl,{}),children:e.jsx(is,{index:!0,element:e.jsx(kl,{})})}),e.jsx(is,{path:"/guest-order",element:e.jsx(Ml,{})}),e.jsx(is,{path:"/receipt/:id",element:e.jsx(Bl,{})}),e.jsx(is,{path:"/track/:id",element:e.jsx(Vl,{})}),e.jsx(is,{path:"/delivery-login",element:e.jsx(Hl,{})}),e.jsxs(is,{path:"/dashboard",element:s?e.jsx(bo,{children:e.jsx(kn,{})}):e.jsx(cn,{to:"/",replace:!0}),children:[e.jsx(is,{index:!0,element:e.jsx(Is,{requiredRoles:["admin","vendedor"],children:e.jsx(Rl,{})})}),e.jsx(is,{path:"orders-management",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Ol,{})})}),e.jsx(is,{path:"delivery-fees",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx($l,{})})}),e.jsx(is,{path:"subscriptions",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Gl,{})})}),e.jsx(is,{path:"vales",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Yl,{})})}),e.jsx(is,{path:"collection-report",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Xl,{})})}),e.jsx(is,{path:"clients",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Ql,{})})}),e.jsx(is,{path:"terms-and-conditions",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Jl,{})})}),e.jsx(is,{path:"users-management",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Kl,{})})})]}),e.jsx(is,{path:"/delivery-dashboard",element:s?e.jsx(kn,{}):e.jsx(cn,{to:"/delivery-login",replace:!0}),children:e.jsx(is,{index:!0,element:e.jsx(Is,{requiredRoles:["repartidor"],children:e.jsx(ql,{})})})}),e.jsx(is,{path:"*",element:e.jsx(yo,{type:"404"})})]})},$s={base:1,content:1,dropdown:100,sticky:200,banner:300,overlay:400,header:999,sidebar:1e3,modal:1300,popover:1400,tooltip:1500,notification:1600,toast:1700,skipLink:1800},ec=ci`
  0% { opacity: 0.8; transform: scale(1); }
  50% { opacity: 0.4; transform: scale(1.2); }
  100% { opacity: 0.8; transform: scale(1); }
`,sc=di({zIndices:$s,styles:{global:{".pulse-animation":{animation:`${ec} 2s infinite`}}},components:{Modal:{baseStyle:{overlay:{zIndex:$s.modal},dialogContainer:{zIndex:$s.modal}}},Menu:{baseStyle:{list:{zIndex:$s.dropdown}}},Popover:{baseStyle:{content:{zIndex:$s.popover}}},Tooltip:{baseStyle:{zIndex:$s.tooltip}},Drawer:{baseStyle:{overlay:{zIndex:$s.modal},dialogContainer:{zIndex:$s.modal}}}},colors:{brand:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1"}}});wr.createRoot(document.getElementById("root")).render(e.jsx(me.StrictMode,{children:e.jsx(ui,{theme:sc,children:e.jsxs(mi,{children:[e.jsx(Zl,{}),e.jsx(Ji,{position:"top-right",autoClose:3e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!1,style:{zIndex:1700,fontSize:"14px",maxWidth:"90vw"},toastStyle:{fontSize:"14px",padding:"8px 12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",margin:"8px",maxWidth:"90vw"}})]})})}));
