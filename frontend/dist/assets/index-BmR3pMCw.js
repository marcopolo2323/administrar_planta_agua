import{j as e,B as N,V as u,T as n,a as O,_ as vs,b as Lt,H as h,I as _t,u as ps,c as Ne,d as ge,e as Fe,f as Ma,E as $a,M as qe,g as Le,h as He,i as We,k as K,l as Ue,m as Me,U as at,L as Ae,D as hs,C as Ba,n as xr,o as Hs,F as js,p as De,q as Kr,r as Zr,s as Va,t as qa,v as Ha,w as Se,x as En,y as Tn,z as Ua,A as Ga,G as Dn,J as gr,K as as,N as L,O as W,P as Ee,Q as Te,R as U,S as G,W as re,X as ss,Y as is,Z as Qe,$ as Je,a0 as Ke,a1 as Ze,a2 as bs,a3 as wt,a4 as kr,a5 as Ya,a6 as es,a7 as _s,a8 as Ps,a9 as Pe,aa as Nr,ab as qt,ac as In,ad as Xa,ae as Ws,af as ar,ag as ir,ah as Rr,ai as Or,aj as _n,ak as kn,al as Zs,am as et,an as gs,ao as le,ap as st,aq as ce,ar as Qa,as as Ja,at as Ka,au as en,av as Za,aw as sn,ax as Nn,ay as ei,az as si,aA as ti,aB as ri,aC as ni,aD as mr,aE as tn,aF as fr,aG as jr,aH as ai,aI as ii,aJ as oi}from"./chakra-CWkQ078C.js";import{a as li,r as v,b as pe}from"./vendor-Q3K9tvtn.js";import{N as jt,O as Rn,u as tt,a as ci,b as On,c as di,R as ui,d as rs,B as hi}from"./router-HhaMLxGd.js";import{a as ns,c as pt}from"./utils-DzZC5mzC.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var br={},rn=li;br.createRoot=rn.createRoot,br.hydrateRoot=rn.hydrateRoot;function Fn(s){var t,r,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(t=0;t<i;t++)s[t]&&(r=Fn(s[t]))&&(a&&(a+=" "),a+=r)}else for(r in s)s[r]&&(a&&(a+=" "),a+=r);return a}function Gs(){for(var s,t,r=0,a="",i=arguments.length;r<i;r++)(s=arguments[r])&&(t=Fn(s))&&(a&&(a+=" "),a+=t);return a}function pi(s){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=s:r.appendChild(document.createTextNode(s))}pi(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var zt=s=>typeof s=="number"&&!isNaN(s),Js=s=>typeof s=="string",Os=s=>typeof s=="function",xi=s=>Js(s)||zt(s),yr=s=>Js(s)||Os(s)?s:null,gi=(s,t)=>s===!1||zt(s)&&s>0?s:t,vr=s=>v.isValidElement(s)||Js(s)||Os(s)||zt(s);function mi(s,t,r=300){let{scrollHeight:a,style:i}=s;requestAnimationFrame(()=>{i.minHeight="initial",i.height=a+"px",i.transition=`all ${r}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,r)})})}function fi({enter:s,exit:t,appendPosition:r=!1,collapse:a=!0,collapseDuration:i=300}){return function({children:l,position:o,preventExitTransition:c,done:d,nodeRef:j,isIn:z,playToast:D}){let m=r?`${s}--${o}`:s,T=r?`${t}--${o}`:t,C=v.useRef(0);return v.useLayoutEffect(()=>{let I=j.current,k=m.split(" "),y=P=>{P.target===j.current&&(D(),I.removeEventListener("animationend",y),I.removeEventListener("animationcancel",y),C.current===0&&P.type!=="animationcancel"&&I.classList.remove(...k))};I.classList.add(...k),I.addEventListener("animationend",y),I.addEventListener("animationcancel",y)},[]),v.useEffect(()=>{let I=j.current,k=()=>{I.removeEventListener("animationend",k),a?mi(I,d,i):d()};z||(c?k():(C.current=1,I.className+=` ${T}`,I.addEventListener("animationend",k)))},[z]),pe.createElement(pe.Fragment,null,l)}}function nn(s,t){return{content:Ln(s.content,s.props),containerId:s.props.containerId,id:s.props.toastId,theme:s.props.theme,type:s.props.type,data:s.props.data||{},isLoading:s.props.isLoading,icon:s.props.icon,reason:s.removalReason,status:t}}function Ln(s,t,r=!1){return v.isValidElement(s)&&!Js(s.type)?v.cloneElement(s,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):Os(s)?s({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):s}function ji({closeToast:s,theme:t,ariaLabel:r="close"}){return pe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:a=>{a.stopPropagation(),s(!0)},"aria-label":r},pe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},pe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function bi({delay:s,isRunning:t,closeToast:r,type:a="default",hide:i,className:l,controlledProgress:o,progress:c,rtl:d,isIn:j,theme:z}){let D=i||o&&c===0,m={animationDuration:`${s}ms`,animationPlayState:t?"running":"paused"};o&&(m.transform=`scaleX(${c})`);let T=Gs("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${z}`,`Toastify__progress-bar--${a}`,{"Toastify__progress-bar--rtl":d}),C=Os(l)?l({rtl:d,type:a,defaultClassName:T}):Gs(T,l),I={[o&&c>=1?"onTransitionEnd":"onAnimationEnd"]:o&&c<1?null:()=>{j&&r()}};return pe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":D},pe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${z} Toastify__progress-bar--${a}`}),pe.createElement("div",{role:"progressbar","aria-hidden":D?"true":"false","aria-label":"notification timer",className:C,style:m,...I}))}var yi=1,Wn=()=>`${yi++}`;function vi(s,t,r){let a=1,i=0,l=[],o=[],c=t,d=new Map,j=new Set,z=P=>(j.add(P),()=>j.delete(P)),D=()=>{o=Array.from(d.values()),j.forEach(P=>P())},m=({containerId:P,toastId:E,updateId:R})=>{let M=P?P!==s:s!==1,F=d.has(E)&&R==null;return M||F},T=(P,E)=>{d.forEach(R=>{var M;(E==null||E===R.props.toastId)&&((M=R.toggle)==null||M.call(R,P))})},C=P=>{var E,R;(R=(E=P.props)==null?void 0:E.onClose)==null||R.call(E,P.removalReason),P.isActive=!1},I=P=>{if(P==null)d.forEach(C);else{let E=d.get(P);E&&C(E)}D()},k=()=>{i-=l.length,l=[]},y=P=>{var E,R;let{toastId:M,updateId:F}=P.props,g=F==null;P.staleId&&d.delete(P.staleId),P.isActive=!0,d.set(M,P),D(),r(nn(P,g?"added":"updated")),g&&((R=(E=P.props).onOpen)==null||R.call(E))};return{id:s,props:c,observe:z,toggle:T,removeToast:I,toasts:d,clearQueue:k,buildToast:(P,E)=>{if(m(E))return;let{toastId:R,updateId:M,data:F,staleId:g,delay:V}=E,b=M==null;b&&i++;let ne={...c,style:c.toastStyle,key:a++,...Object.fromEntries(Object.entries(E).filter(([$,q])=>q!=null)),toastId:R,updateId:M,data:F,isIn:!1,className:yr(E.className||c.toastClassName),progressClassName:yr(E.progressClassName||c.progressClassName),autoClose:E.isLoading?!1:gi(E.autoClose,c.autoClose),closeToast($){d.get(R).removalReason=$,I(R)},deleteToast(){let $=d.get(R);if($!=null){if(r(nn($,"removed")),d.delete(R),i--,i<0&&(i=0),l.length>0){y(l.shift());return}D()}}};ne.closeButton=c.closeButton,E.closeButton===!1||vr(E.closeButton)?ne.closeButton=E.closeButton:E.closeButton===!0&&(ne.closeButton=vr(c.closeButton)?c.closeButton:!0);let x={content:P,props:ne,staleId:g};c.limit&&c.limit>0&&i>c.limit&&b?l.push(x):zt(V)?setTimeout(()=>{y(x)},V):y(x)},setProps(P){c=P},setToggle:(P,E)=>{let R=d.get(P);R&&(R.toggle=E)},isToastActive:P=>{var E;return(E=d.get(P))==null?void 0:E.isActive},getSnapshot:()=>o}}var xs=new Map,vt=[],Sr=new Set,Si=s=>Sr.forEach(t=>t(s)),Mn=()=>xs.size>0;function Ci(){vt.forEach(s=>Bn(s.content,s.options)),vt=[]}var wi=(s,{containerId:t})=>{var r;return(r=xs.get(t||1))==null?void 0:r.toasts.get(s)};function $n(s,t){var r;if(t)return!!((r=xs.get(t))!=null&&r.isToastActive(s));let a=!1;return xs.forEach(i=>{i.isToastActive(s)&&(a=!0)}),a}function zi(s){if(!Mn()){vt=vt.filter(t=>s!=null&&t.options.toastId!==s);return}if(s==null||xi(s))xs.forEach(t=>{t.removeToast(s)});else if(s&&("containerId"in s||"id"in s)){let t=xs.get(s.containerId);t?t.removeToast(s.id):xs.forEach(r=>{r.removeToast(s.id)})}}var Pi=(s={})=>{xs.forEach(t=>{t.props.limit&&(!s.containerId||t.id===s.containerId)&&t.clearQueue()})};function Bn(s,t){vr(s)&&(Mn()||vt.push({content:s,options:t}),xs.forEach(r=>{r.buildToast(s,t)}))}function Ai(s){var t;(t=xs.get(s.containerId||1))==null||t.setToggle(s.id,s.fn)}function Vn(s,t){xs.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(s,t==null?void 0:t.id)})}function Ei(s){let t=s.containerId||1;return{subscribe(r){let a=vi(t,s,Si);xs.set(t,a);let i=a.observe(r);return Ci(),()=>{i(),xs.delete(t)}},setProps(r){var a;(a=xs.get(t))==null||a.setProps(r)},getSnapshot(){var r;return(r=xs.get(t))==null?void 0:r.getSnapshot()}}}function Ti(s){return Sr.add(s),()=>{Sr.delete(s)}}function Di(s){return s&&(Js(s.toastId)||zt(s.toastId))?s.toastId:Wn()}function Pt(s,t){return Bn(s,t),t.toastId}function Ht(s,t){return{...t,type:t&&t.type||s,toastId:Di(t)}}function Ut(s){return(t,r)=>Pt(t,Ht(s,r))}function Ie(s,t){return Pt(s,Ht("default",t))}Ie.loading=(s,t)=>Pt(s,Ht("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function Ii(s,{pending:t,error:r,success:a},i){let l;t&&(l=Js(t)?Ie.loading(t,i):Ie.loading(t.render,{...i,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(j,z,D)=>{if(z==null){Ie.dismiss(l);return}let m={type:j,...o,...i,data:D},T=Js(z)?{render:z}:z;return l?Ie.update(l,{...m,...T}):Ie(T.render,{...m,...T}),D},d=Os(s)?s():s;return d.then(j=>c("success",a,j)).catch(j=>c("error",r,j)),d}Ie.promise=Ii;Ie.success=Ut("success");Ie.info=Ut("info");Ie.error=Ut("error");Ie.warning=Ut("warning");Ie.warn=Ie.warning;Ie.dark=(s,t)=>Pt(s,Ht("default",{theme:"dark",...t}));function _i(s){zi(s)}Ie.dismiss=_i;Ie.clearWaitingQueue=Pi;Ie.isActive=$n;Ie.update=(s,t={})=>{let r=wi(s,t);if(r){let{props:a,content:i}=r,l={delay:100,...a,...t,toastId:t.toastId||s,updateId:Wn()};l.toastId!==s&&(l.staleId=s);let o=l.render||i;delete l.render,Pt(o,l)}};Ie.done=s=>{Ie.update(s,{progress:1})};Ie.onChange=Ti;Ie.play=s=>Vn(!0,s);Ie.pause=s=>Vn(!1,s);function ki(s){var t;let{subscribe:r,getSnapshot:a,setProps:i}=v.useRef(Ei(s)).current;i(s);let l=(t=v.useSyncExternalStore(r,a,a))==null?void 0:t.slice();function o(c){if(!l)return[];let d=new Map;return s.newestOnTop&&l.reverse(),l.forEach(j=>{let{position:z}=j.props;d.has(z)||d.set(z,[]),d.get(z).push(j)}),Array.from(d,j=>c(j[0],j[1]))}return{getToastToRender:o,isToastActive:$n,count:l==null?void 0:l.length}}function Ni(s){let[t,r]=v.useState(!1),[a,i]=v.useState(!1),l=v.useRef(null),o=v.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:d,closeToast:j,onClick:z,closeOnClick:D}=s;Ai({id:s.toastId,containerId:s.containerId,fn:r}),v.useEffect(()=>{if(s.pauseOnFocusLoss)return m(),()=>{T()}},[s.pauseOnFocusLoss]);function m(){document.hasFocus()||y(),window.addEventListener("focus",k),window.addEventListener("blur",y)}function T(){window.removeEventListener("focus",k),window.removeEventListener("blur",y)}function C(g){if(s.draggable===!0||s.draggable===g.pointerType){P();let V=l.current;o.canCloseOnClick=!0,o.canDrag=!0,V.style.transition="none",s.draggableDirection==="x"?(o.start=g.clientX,o.removalDistance=V.offsetWidth*(s.draggablePercent/100)):(o.start=g.clientY,o.removalDistance=V.offsetHeight*(s.draggablePercent===80?s.draggablePercent*1.5:s.draggablePercent)/100)}}function I(g){let{top:V,bottom:b,left:ne,right:x}=l.current.getBoundingClientRect();g.nativeEvent.type!=="touchend"&&s.pauseOnHover&&g.clientX>=ne&&g.clientX<=x&&g.clientY>=V&&g.clientY<=b?y():k()}function k(){r(!0)}function y(){r(!1)}function P(){o.didMove=!1,document.addEventListener("pointermove",R),document.addEventListener("pointerup",M)}function E(){document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",M)}function R(g){let V=l.current;if(o.canDrag&&V){o.didMove=!0,t&&y(),s.draggableDirection==="x"?o.delta=g.clientX-o.start:o.delta=g.clientY-o.start,o.start!==g.clientX&&(o.canCloseOnClick=!1);let b=s.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;V.style.transform=`translate3d(${b},0)`,V.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function M(){E();let g=l.current;if(o.canDrag&&o.didMove&&g){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),s.closeToast(!0),s.collapseAll();return}g.style.transition="transform 0.2s, opacity 0.2s",g.style.removeProperty("transform"),g.style.removeProperty("opacity")}}let F={onPointerDown:C,onPointerUp:I};return c&&d&&(F.onMouseEnter=y,s.stacked||(F.onMouseLeave=k)),D&&(F.onClick=g=>{z&&z(g),o.canCloseOnClick&&j(!0)}),{playToast:k,pauseToast:y,isRunning:t,preventExitTransition:a,toastRef:l,eventHandlers:F}}var Ri=typeof window<"u"?v.useLayoutEffect:v.useEffect,Gt=({theme:s,type:t,isLoading:r,...a})=>pe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:s==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...a});function Oi(s){return pe.createElement(Gt,{...s},pe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Fi(s){return pe.createElement(Gt,{...s},pe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Li(s){return pe.createElement(Gt,{...s},pe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Wi(s){return pe.createElement(Gt,{...s},pe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Mi(){return pe.createElement("div",{className:"Toastify__spinner"})}var Cr={info:Fi,warning:Oi,success:Li,error:Wi,spinner:Mi},$i=s=>s in Cr;function Bi({theme:s,type:t,isLoading:r,icon:a}){let i=null,l={theme:s,type:t};return a===!1||(Os(a)?i=a({...l,isLoading:r}):v.isValidElement(a)?i=v.cloneElement(a,l):r?i=Cr.spinner():$i(t)&&(i=Cr[t](l))),i}var Vi=s=>{let{isRunning:t,preventExitTransition:r,toastRef:a,eventHandlers:i,playToast:l}=Ni(s),{closeButton:o,children:c,autoClose:d,onClick:j,type:z,hideProgressBar:D,closeToast:m,transition:T,position:C,className:I,style:k,progressClassName:y,updateId:P,role:E,progress:R,rtl:M,toastId:F,deleteToast:g,isIn:V,isLoading:b,closeOnClick:ne,theme:x,ariaLabel:$}=s,q=Gs("Toastify__toast",`Toastify__toast-theme--${x}`,`Toastify__toast--${z}`,{"Toastify__toast--rtl":M},{"Toastify__toast--close-on-click":ne}),se=Os(I)?I({rtl:M,position:C,type:z,defaultClassName:q}):Gs(q,I),we=Bi(s),xe=!!R||!d,Ce={closeToast:m,type:z,theme:x},_e=null;return o===!1||(Os(o)?_e=o(Ce):v.isValidElement(o)?_e=v.cloneElement(o,Ce):_e=ji(Ce)),pe.createElement(T,{isIn:V,done:g,position:C,preventExitTransition:r,nodeRef:a,playToast:l},pe.createElement("div",{id:F,tabIndex:0,onClick:j,"data-in":V,className:se,...i,style:k,ref:a,...V&&{role:E,"aria-label":$}},we!=null&&pe.createElement("div",{className:Gs("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!b})},we),Ln(c,s,!t),_e,!s.customProgressBar&&pe.createElement(bi,{...P&&!xe?{key:`p-${P}`}:{},rtl:M,theme:x,delay:d,isRunning:t,isIn:V,closeToast:m,hide:D,type:z,className:y,controlledProgress:xe,progress:R||0})))},qi=(s,t=!1)=>({enter:`Toastify--animate Toastify__${s}-enter`,exit:`Toastify--animate Toastify__${s}-exit`,appendPosition:t}),Hi=fi(qi("bounce",!0)),Ui={position:"top-right",transition:Hi,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:s=>s.altKey&&s.code==="KeyT"};function Gi(s){let t={...Ui,...s},r=s.stacked,[a,i]=v.useState(!0),l=v.useRef(null),{getToastToRender:o,isToastActive:c,count:d}=ki(t),{className:j,style:z,rtl:D,containerId:m,hotKeys:T}=t;function C(k){let y=Gs("Toastify__toast-container",`Toastify__toast-container--${k}`,{"Toastify__toast-container--rtl":D});return Os(j)?j({position:k,rtl:D,defaultClassName:y}):Gs(y,yr(j))}function I(){r&&(i(!0),Ie.play())}return Ri(()=>{var k;if(r){let y=l.current.querySelectorAll('[data-in="true"]'),P=12,E=(k=t.position)==null?void 0:k.includes("top"),R=0,M=0;Array.from(y).reverse().forEach((F,g)=>{let V=F;V.classList.add("Toastify__toast--stacked"),g>0&&(V.dataset.collapsed=`${a}`),V.dataset.pos||(V.dataset.pos=E?"top":"bot");let b=R*(a?.2:1)+(a?0:P*g);V.style.setProperty("--y",`${E?b:b*-1}px`),V.style.setProperty("--g",`${P}`),V.style.setProperty("--s",`${1-(a?M:0)}`),R+=V.offsetHeight,M+=.025})}},[a,d,r]),v.useEffect(()=>{function k(y){var P;let E=l.current;T(y)&&((P=E.querySelector('[tabIndex="0"]'))==null||P.focus(),i(!1),Ie.pause()),y.key==="Escape"&&(document.activeElement===E||E!=null&&E.contains(document.activeElement))&&(i(!0),Ie.play())}return document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}},[T]),pe.createElement("section",{ref:l,className:"Toastify",id:m,onMouseEnter:()=>{r&&(i(!1),Ie.pause())},onMouseLeave:I,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((k,y)=>{let P=y.length?{...z}:{...z,pointerEvents:"none"};return pe.createElement("div",{tabIndex:-1,className:C(k),"data-stacked":r,style:P,key:`c-${k}`},y.map(({content:E,props:R})=>pe.createElement(Vi,{...R,stacked:r,collapseAll:I,isIn:c(R.toastId,R.containerId),key:`t-${R.key}`},E)))}))}const Y=ns.create({baseURL:"https://aquayara.onrender.com",headers:{"Content-Type":"application/json"},withCredentials:!0});Y.interceptors.request.use(s=>{const t=localStorage.getItem("token");return console.log("🌐 URL completa:",s.baseURL+s.url),console.log("🌐 BaseURL configurado:",s.baseURL),console.log("🌐 URL relativa:",s.url),console.log("🔑 Token presente:",t?"Sí":"No"),console.log("🔑 Token completo:",t),t?(s.headers.Authorization=`Bearer ${t}`,console.log("🔑 Token enviado para:",s.url),console.log("🔑 Header configurado:",s.headers.Authorization)):console.log("❌ No hay token disponible"),s},s=>(console.error("❌ Error en interceptor de request:",s),Promise.reject(s)));Y.interceptors.response.use(s=>(console.log("📦 Respuesta recibida de:",s.config.url),console.log("📦 Status:",s.status),console.log("📦 Content-Type:",s.headers["content-type"]),s),async s=>{var a,i,l;const t=s.config,r=localStorage.getItem("token");if(console.log("❌ Error en respuesta:",(a=s.response)==null?void 0:a.status,(i=s.config)==null?void 0:i.url),s.response&&s.response.status===401&&!t._retry&&r&&!((l=t.url)!=null&&l.includes("/auth/profile"))){console.log("🔄 Token expirado, se reintentará automáticamente"),t._retry=!0;try{const o=await ns.post("https://aquayara.onrender.com/api/auth/refresh",{},{headers:{Authorization:`Bearer ${r}`}});if(o.data.success){const c=o.data.token;return localStorage.setItem("token",c),t.headers.Authorization=`Bearer ${c}`,console.log("✅ Token renovado exitosamente"),Y(t)}}catch(o){return console.error("❌ Error al renovar token:",o),localStorage.removeItem("token"),window.location.href="/login",Promise.reject(o)}}return s.response&&s.response.status===404&&console.log("Recurso no encontrado:",s.response.data),Promise.reject(s)});const Rs=pt((s,t)=>({token:localStorage.getItem("token")||null,user:null,loading:!1,error:null,login:async(r,a)=>{var i,l,o,c;s({loading:!0,error:null});try{let d;try{d=await Y.post("/api/delivery/login",{username:r,password:a})}catch{d=await Y.post("/api/auth/login",{username:r,password:a})}const{token:j,user:z}=d.data;localStorage.setItem("token",j),Y.defaults.headers.common.Authorization=`Bearer ${j}`;try{const D=await Y.get("/api/auth/profile");s({token:j,user:D.data,loading:!1})}catch{s({token:j,user:z,loading:!1})}return{success:!0}}catch(d){return s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al iniciar sesión",loading:!1}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al iniciar sesión"}}},register:async r=>{var a,i,l,o;s({loading:!0,error:null});try{const c=await Y.post("/api/auth/register",r);return s({loading:!1}),{success:!0,data:c.data}}catch(c){return s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al registrar usuario",loading:!1}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al registrar usuario"}}},logout:()=>{localStorage.removeItem("token"),delete Y.defaults.headers.common.Authorization,s({token:null,user:null})},checkAuth:async()=>{var a,i,l;const r=localStorage.getItem("token");if(console.log("🔍 Token encontrado en localStorage:",!!r),!r)return console.log("❌ No hay token, usuario no autenticado"),s({token:null,user:null}),!1;try{console.log("🔄 Verificando token con el servidor..."),Y.defaults.headers.common.Authorization=`Bearer ${r}`;const o=await Y.get("/api/auth/profile");return console.log("✅ Token válido, usuario autenticado:",o.data),s({user:o.data,token:r}),!0}catch(o){return console.error("❌ Token inválido o error del servidor:",o),console.error("❌ Status:",(a=o.response)==null?void 0:a.status),console.error("❌ Message:",(l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message),localStorage.removeItem("token"),delete Y.defaults.headers.common.Authorization,s({token:null,user:null}),!1}},clearError:()=>s({error:null})})),qn=()=>{const{user:s}=Rs(),t=c=>!s||!s.role?!1:Array.isArray(c)?c.includes(s.role):s.role===c;return{user:s,hasRole:t,isAdmin:()=>t("admin"),isSeller:()=>t(["admin","vendedor"]),isClient:()=>t("cliente"),isDeliveryPerson:()=>t("repartidor"),canAccess:c=>t(c)}};var Hn={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},an=pe.createContext&&pe.createContext(Hn),Yi=["attr","size","title"];function Xi(s,t){if(s==null)return{};var r=Qi(s,t),a,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(i=0;i<l.length;i++)a=l[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function Qi(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function Wt(){return Wt=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Wt.apply(this,arguments)}function on(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),r.push.apply(r,a)}return r}function Mt(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?on(Object(r),!0).forEach(function(a){Ji(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):on(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function Ji(s,t,r){return t=Ki(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function Ki(s){var t=Zi(s,"string");return typeof t=="symbol"?t:t+""}function Zi(s,t){if(typeof s!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function Un(s){return s&&s.map((t,r)=>pe.createElement(t.tag,Mt({key:r},t.attr),Un(t.child)))}function ue(s){return t=>pe.createElement(eo,Wt({attr:Mt({},s.attr)},t),Un(s.child))}function eo(s){var t=r=>{var{attr:a,size:i,title:l}=s,o=Xi(s,Yi),c=i||r.size||"1em",d;return r.className&&(d=r.className),s.className&&(d=(d?d+" ":"")+s.className),pe.createElement("svg",Wt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,o,{className:d,style:Mt(Mt({color:s.color||r.color},r.style),s.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&pe.createElement("title",null,l),s.children)};return an!==void 0?pe.createElement(an.Consumer,null,r=>t(r)):t(Hn)}function it(s){return ue({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(s)}function so(s){return ue({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(s)}function or(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(s)}function Is(s){return ue({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(s)}function zs(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(s)}function lr(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(s)}function ln(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(s)}function Bs(s){return ue({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(s)}function to(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.61 233.32L278.68 9.39c-12.52-12.52-32.83-12.52-45.36 0L9.39 233.32c-12.52 12.53-12.52 32.83 0 45.36l223.93 223.93c12.52 12.53 32.83 12.53 45.36 0l223.93-223.93c12.52-12.53 12.52-32.83 0-45.36zm-100.98 12.56l-84.21 77.73c-5.12 4.73-13.43 1.1-13.43-5.88V264h-96v64c0 4.42-3.58 8-8 8h-32c-4.42 0-8-3.58-8-8v-80c0-17.67 14.33-32 32-32h112v-53.73c0-6.97 8.3-10.61 13.43-5.88l84.21 77.73c3.43 3.17 3.43 8.59 0 11.76z"},child:[]}]})(s)}function Fr(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(s)}function wr(s){return ue({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(s)}function ro(s){return ue({attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z"},child:[]}]})(s)}function Lr(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(s)}function no(s){return ue({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(s)}function Gn(s){return ue({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(s)}function Vs(s){return ue({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(s)}function Yn(s){return ue({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(s)}function ao(s){return ue({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm192.81 248H304c8.84 0 16 7.16 16 16s-7.16 16-16 16h-47.19c-16.45 0-31.27-9.14-38.64-23.86-2.95-5.92-8.09-6.52-10.17-6.52s-7.22.59-10.02 6.19l-7.67 15.34a15.986 15.986 0 0 1-14.31 8.84c-.38 0-.75-.02-1.14-.05-6.45-.45-12-4.75-14.03-10.89L144 354.59l-10.61 31.88c-5.89 17.66-22.38 29.53-41 29.53H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h12.39c4.83 0 9.11-3.08 10.64-7.66l18.19-54.64c3.3-9.81 12.44-16.41 22.78-16.41s19.48 6.59 22.77 16.41l13.88 41.64c19.77-16.19 54.05-9.7 66 14.16 2.02 4.06 5.96 6.5 10.16 6.5zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(s)}function Wr(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h160V320H32v128zm256 32h160c17.7 0 32-14.3 32-32V320H288v160zm192-320h-42.1c6.2-12.1 10.1-25.5 10.1-40 0-48.5-39.5-88-88-88-41.6 0-68.5 21.3-103 68.3-34.5-47-61.4-68.3-103-68.3-48.5 0-88 39.5-88 88 0 14.5 3.8 27.9 10.1 40H32c-17.7 0-32 14.3-32 32v80c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-80c0-17.7-14.3-32-32-32zm-326.1 0c-22.1 0-40-17.9-40-40s17.9-40 40-40c19.9 0 34.6 3.3 86.1 80h-86.1zm206.1 0h-86.1c51.4-76.5 65.7-80 86.1-80 22.1 0 40 17.9 40 40s-17.9 40-40 40z"},child:[]}]})(s)}function zr(s){return ue({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(s)}function Xn(s){return ue({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 32H48C21.5 32 0 53.5 0 80v16h576V80c0-26.5-21.5-48-48-48zM0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V128H0v304zm352-232c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zM176 192c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zM67.1 396.2C75.5 370.5 99.6 352 128 352h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.9-5.2 19.8-15.6 19.8H82.7c-10.4 0-18.8-10-15.6-19.8z"},child:[]}]})(s)}function io(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(s)}function oo(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(s)}function St(s){return ue({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(s)}function fs(s){return ue({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(s)}function Ks(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(s)}function lo(s){return ue({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(s)}function ot(s){return ue({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(s)}function co(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(s)}function Ys(s){return ue({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"},child:[]}]})(s)}function Qn(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(s)}function uo(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(s)}function cr(s){return ue({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(s)}function cn(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(s)}function ho(s){return ue({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(s)}function po(s){return ue({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(s)}function dn(s){return ue({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(s)}function Ss(s){return ue({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"},child:[]}]})(s)}function xo(s){return ue({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(s)}function qs(s){return ue({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(s)}function Jn(s){return ue({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(s)}const Ts=({children:s,requiredRoles:t,fallbackPath:r="/login",showAccessDenied:a=!0})=>{const{canAccess:i,user:l}=qn();return l?i(t)?s:(console.log("🔍 ProtectedRoute: Usuario no tiene permisos",{userRole:l.role,requiredRoles:t,canAccess:i(t)}),a?e.jsx(N,{minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bg:"gray.50",children:e.jsxs(u,{spacing:6,p:8,bg:"white",borderRadius:"lg",boxShadow:"lg",maxW:"md",w:"full",children:[e.jsx(N,{color:"red.500",fontSize:"4xl",children:e.jsx(uo,{})}),e.jsxs(u,{spacing:2,textAlign:"center",children:[e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"gray.800",children:"Acceso Denegado"}),e.jsx(n,{color:"gray.600",children:"No tienes permisos para acceder a esta sección."}),e.jsxs(n,{fontSize:"sm",color:"gray.500",children:["Tu rol actual: ",e.jsx("strong",{children:l.role})]}),e.jsxs(n,{fontSize:"sm",color:"gray.500",children:["Roles requeridos: ",e.jsx("strong",{children:Array.isArray(t)?t.join(", "):t})]})]}),e.jsx(O,{leftIcon:e.jsx(so,{}),colorScheme:"blue",variant:"outline",onClick:()=>window.history.back(),children:"Volver"})]})}):e.jsx(jt,{to:"/dashboard",replace:!0})):(console.log("🔍 ProtectedRoute: No hay usuario autenticado, redirigiendo al login"),e.jsx(jt,{to:r,replace:!0}))};var Re="-ms-",bt="-moz-",ze="-webkit-",Kn="comm",Yt="rule",Mr="decl",go="@import",Zn="@keyframes",mo="@layer",ea=Math.abs,$r=String.fromCharCode,Pr=Object.assign;function fo(s,t){return ls(s,0)^45?(((t<<2^ls(s,0))<<2^ls(s,1))<<2^ls(s,2))<<2^ls(s,3):0}function sa(s){return s.trim()}function Ns(s,t){return(s=t.exec(s))?s[0]:s}function he(s,t,r){return s.replace(t,r)}function kt(s,t,r){return s.indexOf(t,r)}function ls(s,t){return s.charCodeAt(t)|0}function lt(s,t,r){return s.slice(t,r)}function Ds(s){return s.length}function ta(s){return s.length}function ft(s,t){return t.push(s),s}function jo(s,t){return s.map(t).join("")}function un(s,t){return s.filter(function(r){return!Ns(r,t)})}var Xt=1,ct=1,ra=0,Cs=0,ts=0,xt="";function Qt(s,t,r,a,i,l,o,c){return{value:s,root:t,parent:r,type:a,props:i,children:l,line:Xt,column:ct,length:o,return:"",siblings:c}}function $s(s,t){return Pr(Qt("",null,null,"",null,null,0,s.siblings),s,{length:-s.length},t)}function rt(s){for(;s.root;)s=$s(s.root,{children:[s]});ft(s,s.siblings)}function bo(){return ts}function yo(){return ts=Cs>0?ls(xt,--Cs):0,ct--,ts===10&&(ct=1,Xt--),ts}function As(){return ts=Cs<ra?ls(xt,Cs++):0,ct++,ts===10&&(ct=1,Xt++),ts}function Xs(){return ls(xt,Cs)}function Nt(){return Cs}function Jt(s,t){return lt(xt,s,t)}function Ar(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function vo(s){return Xt=ct=1,ra=Ds(xt=s),Cs=0,[]}function So(s){return xt="",s}function dr(s){return sa(Jt(Cs-1,Er(s===91?s+2:s===40?s+1:s)))}function Co(s){for(;(ts=Xs())&&ts<33;)As();return Ar(s)>2||Ar(ts)>3?"":" "}function wo(s,t){for(;--t&&As()&&!(ts<48||ts>102||ts>57&&ts<65||ts>70&&ts<97););return Jt(s,Nt()+(t<6&&Xs()==32&&As()==32))}function Er(s){for(;As();)switch(ts){case s:return Cs;case 34:case 39:s!==34&&s!==39&&Er(ts);break;case 40:s===41&&Er(s);break;case 92:As();break}return Cs}function zo(s,t){for(;As()&&s+ts!==57;)if(s+ts===84&&Xs()===47)break;return"/*"+Jt(t,Cs-1)+"*"+$r(s===47?s:As())}function Po(s){for(;!Ar(Xs());)As();return Jt(s,Cs)}function Ao(s){return So(Rt("",null,null,null,[""],s=vo(s),0,[0],s))}function Rt(s,t,r,a,i,l,o,c,d){for(var j=0,z=0,D=o,m=0,T=0,C=0,I=1,k=1,y=1,P=0,E="",R=i,M=l,F=a,g=E;k;)switch(C=P,P=As()){case 40:if(C!=108&&ls(g,D-1)==58){kt(g+=he(dr(P),"&","&\f"),"&\f",ea(j?c[j-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:g+=dr(P);break;case 9:case 10:case 13:case 32:g+=Co(C);break;case 92:g+=wo(Nt()-1,7);continue;case 47:switch(Xs()){case 42:case 47:ft(Eo(zo(As(),Nt()),t,r,d),d);break;default:g+="/"}break;case 123*I:c[j++]=Ds(g)*y;case 125*I:case 59:case 0:switch(P){case 0:case 125:k=0;case 59+z:y==-1&&(g=he(g,/\f/g,"")),T>0&&Ds(g)-D&&ft(T>32?pn(g+";",a,r,D-1,d):pn(he(g," ","")+";",a,r,D-2,d),d);break;case 59:g+=";";default:if(ft(F=hn(g,t,r,j,z,i,c,E,R=[],M=[],D,l),l),P===123)if(z===0)Rt(g,t,F,F,R,l,D,c,M);else switch(m===99&&ls(g,3)===110?100:m){case 100:case 108:case 109:case 115:Rt(s,F,F,a&&ft(hn(s,F,F,0,0,i,c,E,i,R=[],D,M),M),i,M,D,c,a?R:M);break;default:Rt(g,F,F,F,[""],M,0,c,M)}}j=z=T=0,I=y=1,E=g="",D=o;break;case 58:D=1+Ds(g),T=C;default:if(I<1){if(P==123)--I;else if(P==125&&I++==0&&yo()==125)continue}switch(g+=$r(P),P*I){case 38:y=z>0?1:(g+="\f",-1);break;case 44:c[j++]=(Ds(g)-1)*y,y=1;break;case 64:Xs()===45&&(g+=dr(As())),m=Xs(),z=D=Ds(E=g+=Po(Nt())),P++;break;case 45:C===45&&Ds(g)==2&&(I=0)}}return l}function hn(s,t,r,a,i,l,o,c,d,j,z,D){for(var m=i-1,T=i===0?l:[""],C=ta(T),I=0,k=0,y=0;I<a;++I)for(var P=0,E=lt(s,m+1,m=ea(k=o[I])),R=s;P<C;++P)(R=sa(k>0?T[P]+" "+E:he(E,/&\f/g,T[P])))&&(d[y++]=R);return Qt(s,t,r,i===0?Yt:c,d,j,z,D)}function Eo(s,t,r,a){return Qt(s,t,r,Kn,$r(bo()),lt(s,2,-2),0,a)}function pn(s,t,r,a,i){return Qt(s,t,r,Mr,lt(s,0,a),lt(s,a+1,-1),a,i)}function na(s,t,r){switch(fo(s,t)){case 5103:return ze+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ze+s+s;case 4789:return bt+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return ze+s+bt+s+Re+s+s;case 5936:switch(ls(s,t+11)){case 114:return ze+s+Re+he(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return ze+s+Re+he(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return ze+s+Re+he(s,/[svh]\w+-[tblr]{2}/,"lr")+s}case 6828:case 4268:case 2903:return ze+s+Re+s+s;case 6165:return ze+s+Re+"flex-"+s+s;case 5187:return ze+s+he(s,/(\w+).+(:[^]+)/,ze+"box-$1$2"+Re+"flex-$1$2")+s;case 5443:return ze+s+Re+"flex-item-"+he(s,/flex-|-self/g,"")+(Ns(s,/flex-|baseline/)?"":Re+"grid-row-"+he(s,/flex-|-self/g,""))+s;case 4675:return ze+s+Re+"flex-line-pack"+he(s,/align-content|flex-|-self/g,"")+s;case 5548:return ze+s+Re+he(s,"shrink","negative")+s;case 5292:return ze+s+Re+he(s,"basis","preferred-size")+s;case 6060:return ze+"box-"+he(s,"-grow","")+ze+s+Re+he(s,"grow","positive")+s;case 4554:return ze+he(s,/([^-])(transform)/g,"$1"+ze+"$2")+s;case 6187:return he(he(he(s,/(zoom-|grab)/,ze+"$1"),/(image-set)/,ze+"$1"),s,"")+s;case 5495:case 3959:return he(s,/(image-set\([^]*)/,ze+"$1$`$1");case 4968:return he(he(s,/(.+:)(flex-)?(.*)/,ze+"box-pack:$3"+Re+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ze+s+s;case 4200:if(!Ns(s,/flex-|baseline/))return Re+"grid-column-align"+lt(s,t)+s;break;case 2592:case 3360:return Re+he(s,"template-","")+s;case 4384:case 3616:return r&&r.some(function(a,i){return t=i,Ns(a.props,/grid-\w+-end/)})?~kt(s+(r=r[t].value),"span",0)?s:Re+he(s,"-start","")+s+Re+"grid-row-span:"+(~kt(r,"span",0)?Ns(r,/\d+/):+Ns(r,/\d+/)-+Ns(s,/\d+/))+";":Re+he(s,"-start","")+s;case 4896:case 4128:return r&&r.some(function(a){return Ns(a.props,/grid-\w+-start/)})?s:Re+he(he(s,"-end","-span"),"span ","")+s;case 4095:case 3583:case 4068:case 2532:return he(s,/(.+)-inline(.+)/,ze+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ds(s)-1-t>6)switch(ls(s,t+1)){case 109:if(ls(s,t+4)!==45)break;case 102:return he(s,/(.+:)(.+)-([^]+)/,"$1"+ze+"$2-$3$1"+bt+(ls(s,t+3)==108?"$3":"$2-$3"))+s;case 115:return~kt(s,"stretch",0)?na(he(s,"stretch","fill-available"),t,r)+s:s}break;case 5152:case 5920:return he(s,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(a,i,l,o,c,d,j){return Re+i+":"+l+j+(o?Re+i+"-span:"+(c?d:+d-+l)+j:"")+s});case 4949:if(ls(s,t+6)===121)return he(s,":",":"+ze)+s;break;case 6444:switch(ls(s,ls(s,14)===45?18:11)){case 120:return he(s,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ze+(ls(s,14)===45?"inline-":"")+"box$3$1"+ze+"$2$3$1"+Re+"$2box$3")+s;case 100:return he(s,":",":"+Re)+s}break;case 5719:case 2647:case 2135:case 3927:case 2391:return he(s,"scroll-","scroll-snap-")+s}return s}function $t(s,t){for(var r="",a=0;a<s.length;a++)r+=t(s[a],a,s,t)||"";return r}function To(s,t,r,a){switch(s.type){case mo:if(s.children.length)break;case go:case Mr:return s.return=s.return||s.value;case Kn:return"";case Zn:return s.return=s.value+"{"+$t(s.children,a)+"}";case Yt:if(!Ds(s.value=s.props.join(",")))return""}return Ds(r=$t(s.children,a))?s.return=s.value+"{"+r+"}":""}function Do(s){var t=ta(s);return function(r,a,i,l){for(var o="",c=0;c<t;c++)o+=s[c](r,a,i,l)||"";return o}}function Io(s){return function(t){t.root||(t=t.return)&&s(t)}}function _o(s,t,r,a){if(s.length>-1&&!s.return)switch(s.type){case Mr:s.return=na(s.value,s.length,r);return;case Zn:return $t([$s(s,{value:he(s.value,"@","@"+ze)})],a);case Yt:if(s.length)return jo(r=s.props,function(i){switch(Ns(i,a=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":rt($s(s,{props:[he(i,/:(read-\w+)/,":"+bt+"$1")]})),rt($s(s,{props:[i]})),Pr(s,{props:un(r,a)});break;case"::placeholder":rt($s(s,{props:[he(i,/:(plac\w+)/,":"+ze+"input-$1")]})),rt($s(s,{props:[he(i,/:(plac\w+)/,":"+bt+"$1")]})),rt($s(s,{props:[he(i,/:(plac\w+)/,Re+"input-$1")]})),rt($s(s,{props:[i]})),Pr(s,{props:un(r,a)});break}return""})}}var ko={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ms={},dt=typeof process<"u"&&ms!==void 0&&(ms.REACT_APP_SC_ATTR||ms.SC_ATTR)||"data-styled",aa="active",ia="data-styled-version",Kt="6.1.19",Br=`/*!sc*/
`,Bt=typeof window<"u"&&typeof document<"u",No=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&ms!==void 0&&ms.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ms.REACT_APP_SC_DISABLE_SPEEDY!==""?ms.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ms.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&ms!==void 0&&ms.SC_DISABLE_SPEEDY!==void 0&&ms.SC_DISABLE_SPEEDY!==""&&ms.SC_DISABLE_SPEEDY!=="false"&&ms.SC_DISABLE_SPEEDY),Zt=Object.freeze([]),ut=Object.freeze({});function Ro(s,t,r){return r===void 0&&(r=ut),s.theme!==r.theme&&s.theme||t||r.theme}var oa=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Oo=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Fo=/(^-|-$)/g;function xn(s){return s.replace(Oo,"-").replace(Fo,"")}var Lo=/(a)(d)/gi,Dt=52,gn=function(s){return String.fromCharCode(s+(s>25?39:97))};function Tr(s){var t,r="";for(t=Math.abs(s);t>Dt;t=t/Dt|0)r=gn(t%Dt)+r;return(gn(t%Dt)+r).replace(Lo,"$1-$2")}var ur,la=5381,nt=function(s,t){for(var r=t.length;r;)s=33*s^t.charCodeAt(--r);return s},ca=function(s){return nt(la,s)};function Wo(s){return Tr(ca(s)>>>0)}function Mo(s){return s.displayName||s.name||"Component"}function hr(s){return typeof s=="string"&&!0}var da=typeof Symbol=="function"&&Symbol.for,ua=da?Symbol.for("react.memo"):60115,$o=da?Symbol.for("react.forward_ref"):60112,Bo={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Vo={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ha={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},qo=((ur={})[$o]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ur[ua]=ha,ur);function mn(s){return("type"in(t=s)&&t.type.$$typeof)===ua?ha:"$$typeof"in s?qo[s.$$typeof]:Bo;var t}var Ho=Object.defineProperty,Uo=Object.getOwnPropertyNames,fn=Object.getOwnPropertySymbols,Go=Object.getOwnPropertyDescriptor,Yo=Object.getPrototypeOf,jn=Object.prototype;function pa(s,t,r){if(typeof t!="string"){if(jn){var a=Yo(t);a&&a!==jn&&pa(s,a,r)}var i=Uo(t);fn&&(i=i.concat(fn(t)));for(var l=mn(s),o=mn(t),c=0;c<i.length;++c){var d=i[c];if(!(d in Vo||r&&r[d]||o&&d in o||l&&d in l)){var j=Go(t,d);try{Ho(s,d,j)}catch{}}}}return s}function ht(s){return typeof s=="function"}function Vr(s){return typeof s=="object"&&"styledComponentId"in s}function Us(s,t){return s&&t?"".concat(s," ").concat(t):s||t||""}function bn(s,t){if(s.length===0)return"";for(var r=s[0],a=1;a<s.length;a++)r+=s[a];return r}function Ct(s){return s!==null&&typeof s=="object"&&s.constructor.name===Object.name&&!("props"in s&&s.$$typeof)}function Dr(s,t,r){if(r===void 0&&(r=!1),!r&&!Ct(s)&&!Array.isArray(s))return t;if(Array.isArray(t))for(var a=0;a<t.length;a++)s[a]=Dr(s[a],t[a]);else if(Ct(t))for(var a in t)s[a]=Dr(s[a],t[a]);return s}function qr(s,t){Object.defineProperty(s,"toString",{value:t})}function At(s){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(s," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Xo=function(){function s(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return s.prototype.indexOfGroup=function(t){for(var r=0,a=0;a<t;a++)r+=this.groupSizes[a];return r},s.prototype.insertRules=function(t,r){if(t>=this.groupSizes.length){for(var a=this.groupSizes,i=a.length,l=i;t>=l;)if((l<<=1)<0)throw At(16,"".concat(t));this.groupSizes=new Uint32Array(l),this.groupSizes.set(a),this.length=l;for(var o=i;o<l;o++)this.groupSizes[o]=0}for(var c=this.indexOfGroup(t+1),d=(o=0,r.length);o<d;o++)this.tag.insertRule(c,r[o])&&(this.groupSizes[t]++,c++)},s.prototype.clearGroup=function(t){if(t<this.length){var r=this.groupSizes[t],a=this.indexOfGroup(t),i=a+r;this.groupSizes[t]=0;for(var l=a;l<i;l++)this.tag.deleteRule(a)}},s.prototype.getGroup=function(t){var r="";if(t>=this.length||this.groupSizes[t]===0)return r;for(var a=this.groupSizes[t],i=this.indexOfGroup(t),l=i+a,o=i;o<l;o++)r+="".concat(this.tag.getRule(o)).concat(Br);return r},s}(),Ot=new Map,Vt=new Map,Ft=1,It=function(s){if(Ot.has(s))return Ot.get(s);for(;Vt.has(Ft);)Ft++;var t=Ft++;return Ot.set(s,t),Vt.set(t,s),t},Qo=function(s,t){Ft=t+1,Ot.set(s,t),Vt.set(t,s)},Jo="style[".concat(dt,"][").concat(ia,'="').concat(Kt,'"]'),Ko=new RegExp("^".concat(dt,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Zo=function(s,t,r){for(var a,i=r.split(","),l=0,o=i.length;l<o;l++)(a=i[l])&&s.registerName(t,a)},el=function(s,t){for(var r,a=((r=t.textContent)!==null&&r!==void 0?r:"").split(Br),i=[],l=0,o=a.length;l<o;l++){var c=a[l].trim();if(c){var d=c.match(Ko);if(d){var j=0|parseInt(d[1],10),z=d[2];j!==0&&(Qo(z,j),Zo(s,z,d[3]),s.getTag().insertRules(j,i)),i.length=0}else i.push(c)}}},yn=function(s){for(var t=document.querySelectorAll(Jo),r=0,a=t.length;r<a;r++){var i=t[r];i&&i.getAttribute(dt)!==aa&&(el(s,i),i.parentNode&&i.parentNode.removeChild(i))}};function sl(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var xa=function(s){var t=document.head,r=s||t,a=document.createElement("style"),i=function(c){var d=Array.from(c.querySelectorAll("style[".concat(dt,"]")));return d[d.length-1]}(r),l=i!==void 0?i.nextSibling:null;a.setAttribute(dt,aa),a.setAttribute(ia,Kt);var o=sl();return o&&a.setAttribute("nonce",o),r.insertBefore(a,l),a},tl=function(){function s(t){this.element=xa(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var a=document.styleSheets,i=0,l=a.length;i<l;i++){var o=a[i];if(o.ownerNode===r)return o}throw At(17)}(this.element),this.length=0}return s.prototype.insertRule=function(t,r){try{return this.sheet.insertRule(r,t),this.length++,!0}catch{return!1}},s.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},s.prototype.getRule=function(t){var r=this.sheet.cssRules[t];return r&&r.cssText?r.cssText:""},s}(),rl=function(){function s(t){this.element=xa(t),this.nodes=this.element.childNodes,this.length=0}return s.prototype.insertRule=function(t,r){if(t<=this.length&&t>=0){var a=document.createTextNode(r);return this.element.insertBefore(a,this.nodes[t]||null),this.length++,!0}return!1},s.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},s.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},s}(),nl=function(){function s(t){this.rules=[],this.length=0}return s.prototype.insertRule=function(t,r){return t<=this.length&&(this.rules.splice(t,0,r),this.length++,!0)},s.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},s.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},s}(),vn=Bt,al={isServer:!Bt,useCSSOMInjection:!No},ga=function(){function s(t,r,a){t===void 0&&(t=ut),r===void 0&&(r={});var i=this;this.options=vs(vs({},al),t),this.gs=r,this.names=new Map(a),this.server=!!t.isServer,!this.server&&Bt&&vn&&(vn=!1,yn(this)),qr(this,function(){return function(l){for(var o=l.getTag(),c=o.length,d="",j=function(D){var m=function(y){return Vt.get(y)}(D);if(m===void 0)return"continue";var T=l.names.get(m),C=o.getGroup(D);if(T===void 0||!T.size||C.length===0)return"continue";var I="".concat(dt,".g").concat(D,'[id="').concat(m,'"]'),k="";T!==void 0&&T.forEach(function(y){y.length>0&&(k+="".concat(y,","))}),d+="".concat(C).concat(I,'{content:"').concat(k,'"}').concat(Br)},z=0;z<c;z++)j(z);return d}(i)})}return s.registerId=function(t){return It(t)},s.prototype.rehydrate=function(){!this.server&&Bt&&yn(this)},s.prototype.reconstructWithOptions=function(t,r){return r===void 0&&(r=!0),new s(vs(vs({},this.options),t),this.gs,r&&this.names||void 0)},s.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},s.prototype.getTag=function(){return this.tag||(this.tag=(t=function(r){var a=r.useCSSOMInjection,i=r.target;return r.isServer?new nl(i):a?new tl(i):new rl(i)}(this.options),new Xo(t)));var t},s.prototype.hasNameForId=function(t,r){return this.names.has(t)&&this.names.get(t).has(r)},s.prototype.registerName=function(t,r){if(It(t),this.names.has(t))this.names.get(t).add(r);else{var a=new Set;a.add(r),this.names.set(t,a)}},s.prototype.insertRules=function(t,r,a){this.registerName(t,r),this.getTag().insertRules(It(t),a)},s.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},s.prototype.clearRules=function(t){this.getTag().clearGroup(It(t)),this.clearNames(t)},s.prototype.clearTag=function(){this.tag=void 0},s}(),il=/&/g,ol=/^\s*\/\/.*$/gm;function ma(s,t){return s.map(function(r){return r.type==="rule"&&(r.value="".concat(t," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(t," ")),r.props=r.props.map(function(a){return"".concat(t," ").concat(a)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=ma(r.children,t)),r})}function ll(s){var t,r,a,i=ut,l=i.options,o=l===void 0?ut:l,c=i.plugins,d=c===void 0?Zt:c,j=function(m,T,C){return C.startsWith(r)&&C.endsWith(r)&&C.replaceAll(r,"").length>0?".".concat(t):m},z=d.slice();z.push(function(m){m.type===Yt&&m.value.includes("&")&&(m.props[0]=m.props[0].replace(il,r).replace(a,j))}),o.prefix&&z.push(_o),z.push(To);var D=function(m,T,C,I){T===void 0&&(T=""),C===void 0&&(C=""),I===void 0&&(I="&"),t=I,r=T,a=new RegExp("\\".concat(r,"\\b"),"g");var k=m.replace(ol,""),y=Ao(C||T?"".concat(C," ").concat(T," { ").concat(k," }"):k);o.namespace&&(y=ma(y,o.namespace));var P=[];return $t(y,Do(z.concat(Io(function(E){return P.push(E)})))),P};return D.hash=d.length?d.reduce(function(m,T){return T.name||At(15),nt(m,T.name)},la).toString():"",D}var cl=new ga,Ir=ll(),fa=pe.createContext({shouldForwardProp:void 0,styleSheet:cl,stylis:Ir});fa.Consumer;pe.createContext(void 0);function Sn(){return v.useContext(fa)}var dl=function(){function s(t,r){var a=this;this.inject=function(i,l){l===void 0&&(l=Ir);var o=a.name+l.hash;i.hasNameForId(a.id,o)||i.insertRules(a.id,o,l(a.rules,o,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=r,qr(this,function(){throw At(12,String(a.name))})}return s.prototype.getName=function(t){return t===void 0&&(t=Ir),this.name+t.hash},s}(),ul=function(s){return s>="A"&&s<="Z"};function Cn(s){for(var t="",r=0;r<s.length;r++){var a=s[r];if(r===1&&a==="-"&&s[0]==="-")return s;ul(a)?t+="-"+a.toLowerCase():t+=a}return t.startsWith("ms-")?"-"+t:t}var ja=function(s){return s==null||s===!1||s===""},ba=function(s){var t,r,a=[];for(var i in s){var l=s[i];s.hasOwnProperty(i)&&!ja(l)&&(Array.isArray(l)&&l.isCss||ht(l)?a.push("".concat(Cn(i),":"),l,";"):Ct(l)?a.push.apply(a,Lt(Lt(["".concat(i," {")],ba(l),!1),["}"],!1)):a.push("".concat(Cn(i),": ").concat((t=i,(r=l)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||t in ko||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return a};function Qs(s,t,r,a){if(ja(s))return[];if(Vr(s))return[".".concat(s.styledComponentId)];if(ht(s)){if(!ht(l=s)||l.prototype&&l.prototype.isReactComponent||!t)return[s];var i=s(t);return Qs(i,t,r,a)}var l;return s instanceof dl?r?(s.inject(r,a),[s.getName(a)]):[s]:Ct(s)?ba(s):Array.isArray(s)?Array.prototype.concat.apply(Zt,s.map(function(o){return Qs(o,t,r,a)})):[s.toString()]}function hl(s){for(var t=0;t<s.length;t+=1){var r=s[t];if(ht(r)&&!Vr(r))return!1}return!0}var pl=ca(Kt),xl=function(){function s(t,r,a){this.rules=t,this.staticRulesId="",this.isStatic=(a===void 0||a.isStatic)&&hl(t),this.componentId=r,this.baseHash=nt(pl,r),this.baseStyle=a,ga.registerId(r)}return s.prototype.generateAndInjectStyles=function(t,r,a){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,r,a):"";if(this.isStatic&&!a.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))i=Us(i,this.staticRulesId);else{var l=bn(Qs(this.rules,t,r,a)),o=Tr(nt(this.baseHash,l)>>>0);if(!r.hasNameForId(this.componentId,o)){var c=a(l,".".concat(o),void 0,this.componentId);r.insertRules(this.componentId,o,c)}i=Us(i,o),this.staticRulesId=o}else{for(var d=nt(this.baseHash,a.hash),j="",z=0;z<this.rules.length;z++){var D=this.rules[z];if(typeof D=="string")j+=D;else if(D){var m=bn(Qs(D,t,r,a));d=nt(d,m+z),j+=m}}if(j){var T=Tr(d>>>0);r.hasNameForId(this.componentId,T)||r.insertRules(this.componentId,T,a(j,".".concat(T),void 0,this.componentId)),i=Us(i,T)}}return i},s}(),ya=pe.createContext(void 0);ya.Consumer;var pr={};function gl(s,t,r){var a=Vr(s),i=s,l=!hr(s),o=t.attrs,c=o===void 0?Zt:o,d=t.componentId,j=d===void 0?function(R,M){var F=typeof R!="string"?"sc":xn(R);pr[F]=(pr[F]||0)+1;var g="".concat(F,"-").concat(Wo(Kt+F+pr[F]));return M?"".concat(M,"-").concat(g):g}(t.displayName,t.parentComponentId):d,z=t.displayName,D=z===void 0?function(R){return hr(R)?"styled.".concat(R):"Styled(".concat(Mo(R),")")}(s):z,m=t.displayName&&t.componentId?"".concat(xn(t.displayName),"-").concat(t.componentId):t.componentId||j,T=a&&i.attrs?i.attrs.concat(c).filter(Boolean):c,C=t.shouldForwardProp;if(a&&i.shouldForwardProp){var I=i.shouldForwardProp;if(t.shouldForwardProp){var k=t.shouldForwardProp;C=function(R,M){return I(R,M)&&k(R,M)}}else C=I}var y=new xl(r,m,a?i.componentStyle:void 0);function P(R,M){return function(F,g,V){var b=F.attrs,ne=F.componentStyle,x=F.defaultProps,$=F.foldedComponentIds,q=F.styledComponentId,se=F.target,we=pe.useContext(ya),xe=Sn(),Ce=F.shouldForwardProp||xe.shouldForwardProp,_e=Ro(g,we,x)||ut,w=function(ae,Q,B){for(var ye,_=vs(vs({},Q),{className:void 0,theme:B}),je=0;je<ae.length;je+=1){var Ge=ht(ye=ae[je])?ye(_):ye;for(var $e in Ge)_[$e]=$e==="className"?Us(_[$e],Ge[$e]):$e==="style"?vs(vs({},_[$e]),Ge[$e]):Ge[$e]}return Q.className&&(_.className=Us(_.className,Q.className)),_}(b,g,_e),X=w.as||se,be={};for(var de in w)w[de]===void 0||de[0]==="$"||de==="as"||de==="theme"&&w.theme===_e||(de==="forwardedAs"?be.as=w.forwardedAs:Ce&&!Ce(de,X)||(be[de]=w[de]));var A=function(ae,Q){var B=Sn(),ye=ae.generateAndInjectStyles(Q,B.styleSheet,B.stylis);return ye}(ne,w),me=Us($,q);return A&&(me+=" "+A),w.className&&(me+=" "+w.className),be[hr(X)&&!oa.has(X)?"class":"className"]=me,V&&(be.ref=V),v.createElement(X,be)}(E,R,M)}P.displayName=D;var E=pe.forwardRef(P);return E.attrs=T,E.componentStyle=y,E.displayName=D,E.shouldForwardProp=C,E.foldedComponentIds=a?Us(i.foldedComponentIds,i.styledComponentId):"",E.styledComponentId=m,E.target=a?i.target:s,Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(R){this._foldedDefaultProps=a?function(M){for(var F=[],g=1;g<arguments.length;g++)F[g-1]=arguments[g];for(var V=0,b=F;V<b.length;V++)Dr(M,b[V],!0);return M}({},i.defaultProps,R):R}}),qr(E,function(){return".".concat(E.styledComponentId)}),l&&pa(E,s,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),E}function wn(s,t){for(var r=[s[0]],a=0,i=t.length;a<i;a+=1)r.push(t[a],s[a+1]);return r}var zn=function(s){return Object.assign(s,{isCss:!0})};function ml(s){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(ht(s)||Ct(s))return zn(Qs(wn(Zt,Lt([s],t,!0))));var a=s;return t.length===0&&a.length===1&&typeof a[0]=="string"?Qs(a):zn(Qs(wn(a,t)))}function _r(s,t,r){if(r===void 0&&(r=ut),!t)throw At(1,t);var a=function(i){for(var l=[],o=1;o<arguments.length;o++)l[o-1]=arguments[o];return s(t,r,ml.apply(void 0,Lt([i],l,!1)))};return a.attrs=function(i){return _r(s,t,vs(vs({},r),{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},a.withConfig=function(i){return _r(s,t,vs(vs({},r),i))},a}var va=function(s){return _r(gl,s)},er=va;oa.forEach(function(s){er[s]=va(s)});const fl=er.div`
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background-color: var(--background-color);
`,jl=er.div`
  width: 100%;
  max-width: 450px;
  padding: 2rem;
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
`,bl=er.div`
  text-align: center;
  margin-bottom: 2rem;
  
  h1 {
    color: var(--primary-color);
    font-size: 1.8rem;
    margin-bottom: 0.5rem;
  }
  
  p {
    color: var(--dark-gray);
    font-size: 1rem;
  }
`,yl=()=>e.jsx(fl,{children:e.jsxs(jl,{children:[e.jsxs(bl,{children:[e.jsx("h1",{children:"Sistema de Gestión"}),e.jsx("p",{children:"Planta de Agua"})]}),e.jsx(Rn,{})]})}),vl=()=>{const s=v.useRef(null),t=v.useRef(Date.now());v.useRef(null);const r=async()=>{try{const l=localStorage.getItem("token");if(!l)return;const o=JSON.parse(atob(l.split(".")[1])),c=Math.floor(Date.now()/1e3);if(o.exp-c<7200){console.log("🔄 Renovando token JWT...");const j=await Y.post("/api/auth/refresh");j.data.token&&(localStorage.setItem("token",j.data.token),console.log("✅ Token renovado exitosamente"))}}catch(l){console.error("❌ Error al renovar token:",l),l.response&&l.response.status===401&&(localStorage.removeItem("token"),window.location.href="/")}},a=()=>{t.current=Date.now()},i=()=>{const o=Date.now()-t.current,c=60*60*1e3;o>c&&(console.log("⏰ Sesión inactiva por más de 1 hora, cerrando sesión..."),localStorage.removeItem("token"),window.location.href="/")};return v.useEffect(()=>{s.current=setInterval(r,30*60*1e3);const l=setInterval(i,10*60*1e3),o=["mousedown","mousemove","keypress","scroll","touchstart","click"];return o.forEach(c=>{document.addEventListener(c,a,!0)}),()=>{s.current&&clearInterval(s.current),clearInterval(l),o.forEach(c=>{document.removeEventListener(c,a,!0)})}},[]),{refreshToken:r}},Sl="/assets/logo_aquayara2-iFhxOv8G.jpeg",yt=({size:s="md",showText:t=!0,variant:r="horizontal",color:a="blue.500",textColor:i="blue.500",taglineColor:l="teal.400"})=>{const o={xs:{logo:"20px",text:"xs",tagline:"xs"},sm:{logo:"30px",text:"sm",tagline:"xs"},md:{logo:"40px",text:"md",tagline:"sm"},lg:{logo:"60px",text:"lg",tagline:"md"},xl:{logo:"80px",text:"xl",tagline:"lg"}},c=o[s]||o.md,d=()=>e.jsx(_t,{src:Sl,alt:"AquaYara Logo",w:c.logo,h:c.logo,objectFit:"contain",borderRadius:"md",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"});return t?r==="vertical"?e.jsxs(u,{spacing:2,align:"center",children:[e.jsx(d,{}),e.jsxs(u,{spacing:0,align:"center",children:[e.jsxs(n,{fontSize:c.text,fontWeight:"bold",color:i,lineHeight:"1",children:["Aqua",e.jsx("span",{style:{color:"#38B2AC"},children:"Yara"})]}),e.jsx(n,{fontSize:c.tagline,color:l,fontStyle:"italic",lineHeight:"1",children:"Agua que encanta"})]})]}):e.jsxs(h,{spacing:3,align:"center",children:[e.jsx(d,{}),e.jsxs(u,{spacing:0,align:"start",children:[e.jsxs(n,{fontSize:c.text,fontWeight:"bold",color:i,lineHeight:"1",children:["Aqua",e.jsx("span",{style:{color:"#38B2AC"},children:"Yara"})]}),e.jsx(n,{fontSize:c.tagline,color:l,fontStyle:"italic",lineHeight:"1",children:"Agua que encanta"})]})]}):e.jsx(d,{})},Sa=({variant:s="button",size:t="sm"})=>{const r=ps(),a="+51 961 606 183",i="aguademesaaquayara@gmail.com",l=()=>{const j=`https://wa.me/51961606183?text=${encodeURIComponent("Hola, necesito ayuda con el sistema de AquaYara")}`;window.open(j,"_blank")},o=()=>{window.open(`tel:${a}`,"_self")},c=(d,j)=>{navigator.clipboard.writeText(d).then(()=>{r({title:"Copiado",description:`${j} copiado al portapapeles`,status:"success",duration:2e3,isClosable:!0})})};return s==="badge"?e.jsxs(h,{spacing:2,children:[e.jsx(Ne,{label:"Contactar por WhatsApp",hasArrow:!0,children:e.jsx(O,{size:"xs",colorScheme:"green",leftIcon:e.jsx(ge,{as:it}),onClick:l,children:"WhatsApp"})}),e.jsx(Ne,{label:"Llamar",hasArrow:!0,children:e.jsx(O,{size:"xs",variant:"outline",leftIcon:e.jsx(ge,{as:Ks}),onClick:o,children:a})})]}):s==="info"?e.jsxs(N,{p:3,bg:"blue.50",borderRadius:"md",border:"1px solid",borderColor:"blue.200",children:[e.jsx(n,{fontSize:"sm",fontWeight:"bold",color:"blue.700",mb:2,children:"📞 Soporte Técnico"}),e.jsxs(u,{spacing:2,align:"start",children:[e.jsxs(h,{spacing:2,children:[e.jsx(ge,{as:it,color:"green.500"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["WhatsApp: ",a]}),e.jsx(O,{size:"xs",variant:"ghost",onClick:()=>c(a,"Teléfono"),children:"Copiar"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(ge,{as:Lr,color:"blue.500"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["Email: ",i]}),e.jsx(O,{size:"xs",variant:"ghost",onClick:()=>c(i,"Email"),children:"Copiar"})]})]})]}):e.jsxs(h,{spacing:2,children:[e.jsx(Ne,{label:"Contactar por WhatsApp",hasArrow:!0,children:e.jsx(O,{size:t,colorScheme:"green",leftIcon:e.jsx(ge,{as:it}),onClick:l,children:"WhatsApp"})}),e.jsx(Ne,{label:"Llamar",hasArrow:!0,children:e.jsx(O,{size:t,variant:"outline",leftIcon:e.jsx(ge,{as:Ks}),onClick:o,children:a})})]})},Cl=({isOpen:s,onClose:t,showAcceptButton:r=!1,onAccept:a})=>{const[i,l]=v.useState(!1),o=()=>{l(!0),a&&a(),t()};return e.jsxs(qe,{isOpen:s,onClose:t,size:"xl",scrollBehavior:"inside",children:[e.jsx(Le,{}),e.jsxs(He,{maxH:"90vh",children:[e.jsx(We,{children:e.jsx(K,{size:"md",children:"Términos y Condiciones - AquaYara"})}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:[e.jsx("strong",{children:"Fecha de última actualización:"})," 10 de enero de 2025"]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"1. Información General"}),e.jsxs(n,{fontSize:"sm",mb:2,children:[e.jsx("strong",{children:"AquaYara"})," es una empresa dedicada a la purificación y distribución de agua, con domicilio legal en Pucallpa, Perú."]}),e.jsx(n,{fontSize:"sm",children:"Proporcionamos servicios de purificación de agua, distribución, sistema de suscripciones, servicio de delivery y gestión de clientes frecuentes."})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"2. Aceptación de Términos"}),e.jsx(n,{fontSize:"sm",mb:2,children:"Al utilizar nuestros servicios, usted acepta estos términos y condiciones en su totalidad. Si no está de acuerdo con alguna parte de estos términos, no debe utilizar nuestros servicios."}),e.jsx(n,{fontSize:"sm",children:"Nos reservamos el derecho de modificar estos términos en cualquier momento. Las modificaciones entrarán en vigor inmediatamente después de su publicación."})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"3. Servicios Ofrecidos"}),e.jsxs(at,{fontSize:"sm",spacing:1,children:[e.jsx(Ae,{children:"Bidón de Agua 20L y Paquete de Botellas"}),e.jsx(Ae,{children:"Servicio de entrega a domicilio con tarifas según distrito"}),e.jsx(Ae,{children:"Horarios de entrega: Lunes a Sábado de 8:00 AM a 6:00 PM"}),e.jsx(Ae,{children:"Sistema de suscripciones con bonificaciones"}),e.jsx(Ae,{children:"Control de botellas restantes y pagos mensuales automáticos"})]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"4. Precios y Pagos"}),e.jsx(n,{fontSize:"sm",mb:2,children:"Los precios están sujetos a cambios sin previo aviso. Aceptamos efectivo, tarjeta de crédito/débito, Yape y Plin."}),e.jsx(n,{fontSize:"sm",children:"Los pagos deben realizarse al momento de la entrega. Los pagos mensuales de suscripciones se procesan automáticamente."})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"5. Entregas y Devoluciones"}),e.jsx(n,{fontSize:"sm",mb:2,children:"Las entregas se realizan en el horario acordado. El cliente debe estar presente para recibir el pedido. En caso de ausencia, se reprogramará la entrega."}),e.jsx(n,{fontSize:"sm",children:"No se aceptan devoluciones de productos abiertos. Las devoluciones deben solicitarse dentro de las 24 horas posteriores a la entrega."})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"6. Responsabilidades del Cliente"}),e.jsxs(at,{fontSize:"sm",spacing:1,children:[e.jsx(Ae,{children:"Proporcionar información veraz y actualizada"}),e.jsx(Ae,{children:"No utilizar el sistema para fines ilegales"}),e.jsx(Ae,{children:"No compartir credenciales de acceso"}),e.jsx(Ae,{children:"Notificar cualquier uso no autorizado de su cuenta"})]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"7. Privacidad y Protección de Datos"}),e.jsx(n,{fontSize:"sm",mb:2,children:"Recopilamos datos personales, de uso y técnicos para procesar pedidos, comunicarnos con usted y mejorar nuestros servicios."}),e.jsx(n,{fontSize:"sm",children:"Implementamos medidas de seguridad como encriptación de datos sensibles, acceso restringido y políticas de confidencialidad."})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"8. Sus Derechos"}),e.jsxs(at,{fontSize:"sm",spacing:1,children:[e.jsx(Ae,{children:"Derecho de acceso a sus datos"}),e.jsx(Ae,{children:"Derecho de rectificación de información inexacta"}),e.jsx(Ae,{children:"Derecho de eliminación de datos"}),e.jsx(Ae,{children:"Derecho de portabilidad de datos"}),e.jsx(Ae,{children:"Derecho de oposición al tratamiento"})]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"9. Contacto"}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Teléfono:"})," +51 961 606 183"]}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Email:"})," aguademesaaquayara@gmail.com"]}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Dirección:"})," Pucallpa, Perú"]}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Horario:"})," Lunes a Sábado 8:00 AM - 6:00 PM"]})]}),e.jsx(hs,{}),e.jsx(n,{fontSize:"xs",color:"gray.500",textAlign:"center",children:"Al utilizar nuestros servicios, usted confirma que ha leído, entendido y aceptado estos términos y condiciones."}),r&&e.jsx(N,{textAlign:"center",pt:4,children:e.jsx(O,{colorScheme:"blue",onClick:o,isDisabled:i,size:"lg",width:"full",children:i?"Aceptado":"Acepto los Términos y Condiciones"})})]})})]})]})},wl=({onAccept:s,showAcceptButton:t=!1})=>{const{isOpen:r,onOpen:a,onClose:i}=Fe();return e.jsxs(e.Fragment,{children:[e.jsx(O,{variant:"link",size:"sm",color:"blue.500",onClick:a,leftIcon:e.jsx(Ma,{}),children:"Términos y Condiciones"}),e.jsx(Cl,{isOpen:r,onClose:i,showAcceptButton:t,onAccept:s})]})},zl=()=>{const{isOpen:s,onOpen:t,onClose:r}=Fe();return e.jsxs(e.Fragment,{children:[e.jsx(O,{variant:"link",size:"sm",color:"blue.500",onClick:t,leftIcon:e.jsx($a,{}),children:"Política de Privacidad"}),e.jsxs(qe,{isOpen:s,onClose:r,size:"xl",scrollBehavior:"inside",children:[e.jsx(Le,{}),e.jsxs(He,{maxH:"90vh",children:[e.jsx(We,{children:e.jsx(K,{size:"md",children:"Política de Privacidad - AquaYara"})}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:[e.jsx("strong",{children:"Fecha de última actualización:"})," 10 de enero de 2025"]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"1. Información General"}),e.jsxs(n,{fontSize:"sm",mb:2,children:[e.jsx("strong",{children:"AquaYara"})," es responsable del tratamiento de sus datos personales."]}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Contacto:"})," aguademesaaquayara@gmail.com | +51 961 606 183"]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"2. Datos que Recopilamos"}),e.jsxs(at,{fontSize:"sm",spacing:1,children:[e.jsxs(Ae,{children:[e.jsx("strong",{children:"Datos Personales:"})," Nombre, DNI/RUC, email, teléfono, dirección"]}),e.jsxs(Ae,{children:[e.jsx("strong",{children:"Datos de Uso:"})," Historial de pedidos, preferencias, patrones de compra"]}),e.jsxs(Ae,{children:[e.jsx("strong",{children:"Datos Técnicos:"})," IP, dispositivo, navegador, fecha y hora"]})]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"3. Finalidades del Tratamiento"}),e.jsxs(at,{fontSize:"sm",spacing:1,children:[e.jsx(Ae,{children:"Procesar pedidos y gestionar entregas"}),e.jsx(Ae,{children:"Comunicarnos con usted"}),e.jsx(Ae,{children:"Procesar pagos y generar comprobantes"}),e.jsx(Ae,{children:"Mejorar nuestros servicios"}),e.jsx(Ae,{children:"Prevenir fraudes y proteger el sistema"})]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"4. Sus Derechos"}),e.jsxs(at,{fontSize:"sm",spacing:1,children:[e.jsx(Ae,{children:"Derecho de acceso a sus datos"}),e.jsx(Ae,{children:"Derecho de rectificación"}),e.jsx(Ae,{children:"Derecho de eliminación"}),e.jsx(Ae,{children:"Derecho de portabilidad"}),e.jsx(Ae,{children:"Derecho de oposición"})]})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"5. Seguridad"}),e.jsx(n,{fontSize:"sm",children:"Implementamos medidas de seguridad como encriptación de datos sensibles, acceso restringido, monitoreo continuo y políticas de confidencialidad."})]}),e.jsxs(N,{children:[e.jsx(K,{size:"sm",mb:2,children:"6. Contacto"}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Email:"})," aguademesaaquayara@gmail.com"]}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Teléfono:"})," +51 961 606 183"]}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Autoridad de Control:"})," proteccion.datos@minjus.gob.pe"]})]}),e.jsx(hs,{}),e.jsx(n,{fontSize:"xs",color:"gray.500",textAlign:"center",children:"Esta política se rige por la Ley de Protección de Datos Personales del Perú (Ley N° 29733)."})]})})]})]})]})},Pl=()=>e.jsx(N,{bg:"gray.50",py:8,mt:"auto",children:e.jsx(Ba,{maxW:"container.xl",children:e.jsxs(u,{spacing:6,children:[e.jsxs(h,{spacing:8,wrap:"wrap",justify:"center",children:[e.jsxs(h,{spacing:2,children:[e.jsx(ge,{as:Ks,color:"blue.500"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"+51 961 606 183"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(ge,{as:Lr,color:"blue.500"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"aguademesaaquayara@gmail.com"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(ge,{as:St,color:"blue.500"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Pucallpa, Perú"})]})]}),e.jsx(hs,{}),e.jsxs(h,{spacing:6,wrap:"wrap",justify:"center",children:[e.jsx(wl,{}),e.jsx(zl,{}),e.jsx(xr,{href:"mailto:aguademesaaquayara@gmail.com",color:"blue.500",fontSize:"sm",_hover:{textDecoration:"underline"},children:"Soporte Técnico"})]}),e.jsx(hs,{}),e.jsxs(u,{spacing:2,children:[e.jsx(n,{fontSize:"sm",color:"gray.500",textAlign:"center",children:"© 2025 AquaYara - Agua Purificada de Calidad"}),e.jsx(n,{fontSize:"xs",color:"gray.400",textAlign:"center",children:"Todos los derechos reservados | Horario: Lunes a Sábado 8:00 AM - 6:00 PM"})]})]})})}),Pn=()=>{const{user:s,logout:t}=Rs(),{isAdmin:r,isDeliveryPerson:a}=qn(),i=tt();Fe();const[l,o]=v.useState(!1),[c,d]=v.useState(()=>{const P=localStorage.getItem("sidebarCollapsed");return P?JSON.parse(P):!1});vl();const j=Hs({base:!0,lg:!1});v.useEffect(()=>{localStorage.setItem("sidebarCollapsed",JSON.stringify(c))},[c]);const z=()=>{t(),i("/")},D=()=>!s||!s.username?"?":s.username.charAt(0).toUpperCase(),m=[{to:"/dashboard",label:"Dashboard",icon:"🏠"},{to:"/dashboard/orders-management",label:"Gestión de Pedidos",icon:"📦",adminOnly:!0},{to:"/dashboard/clients",label:"Clientes",icon:"👥",adminOnly:!0},{to:"/dashboard/vales",label:"Gestión de Vales",icon:"🎫",adminOnly:!0},{to:"/dashboard/collection-report",label:"Reporte de Cobranza",icon:"💰",adminOnly:!0},{to:"/dashboard/subscriptions",label:"Suscripciones",icon:"📅",adminOnly:!0},{to:"/dashboard/delivery-fees",label:"Tarifas de Envío",icon:"🚚",adminOnly:!0},{to:"/dashboard/terms-and-conditions",label:"Términos y Condiciones",icon:"📄",adminOnly:!0},{to:"/dashboard/users-management",label:"Gestión de Usuarios",icon:"👥",adminOnly:!0}],T=[{to:"/delivery-dashboard",label:"Dashboard",icon:"🏠"},{to:"/delivery-dashboard#orders",label:"Mis Pedidos",icon:"📦"},{to:"/delivery-dashboard#stats",label:"Estadísticas",icon:"📊"},{to:"/delivery-dashboard#vouchers",label:"Vales",icon:"🎫"}],I=a()?T:m.filter(P=>!P.adminOnly||r()),k=()=>{o(!1)},y=({isCollapsed:P=!1})=>e.jsxs(u,{spacing:0,h:"full",align:"stretch",children:[e.jsx(N,{p:P?3:6,borderBottom:"1px solid",borderColor:"whiteAlpha.200",children:P?e.jsx(n,{fontSize:"2xl",textAlign:"center",color:"white",children:"🏠"}):e.jsx(yt,{size:"md",variant:"vertical",color:"white",textColor:"white",taglineColor:"whiteAlpha.700"})}),e.jsx(u,{spacing:1,flex:1,align:"stretch",p:2,children:I.map(E=>e.jsx(O,{as:ci,to:E.to,variant:"ghost",color:"white",justifyContent:P?"center":"flex-start",leftIcon:e.jsx(n,{children:E.icon}),_hover:{bg:"whiteAlpha.200"},_active:{bg:"whiteAlpha.300"},size:"sm",h:"40px",onClick:k,title:P?E.label:void 0,children:!P&&E.label},E.to))}),e.jsx(N,{p:P?2:4,borderTop:"1px solid",borderColor:"whiteAlpha.200",children:e.jsxs(En,{children:[e.jsx(Tn,{as:O,variant:"ghost",color:"white",w:"full",justifyContent:P?"center":"flex-start",leftIcon:e.jsx(Ga,{size:"sm",name:D()}),rightIcon:P?void 0:e.jsx(Ua,{}),title:P?`${s==null?void 0:s.username} (${s==null?void 0:s.role})`:void 0,children:!P&&e.jsxs(u,{spacing:0,align:"flex-start",children:[e.jsx(n,{fontSize:"sm",fontWeight:"medium",children:s==null?void 0:s.username}),e.jsx(n,{fontSize:"xs",color:"whiteAlpha.700",children:s==null?void 0:s.role})]})}),e.jsx(Dn,{children:e.jsx(gr,{onClick:()=>{z(),k()},color:"red.500",children:"Cerrar Sesión"})})]})})]});return e.jsxs(js,{minH:"100vh",bg:"gray.50",children:[!j&&e.jsxs(N,{w:c?"60px":"280px",bg:"purple.600",color:"white",position:"fixed",h:"100vh",overflowY:"auto",zIndex:1e3,left:0,top:0,transition:"width 0.3s ease",children:[e.jsx(y,{isCollapsed:c}),e.jsx(De,{icon:c?e.jsx(Kr,{}):e.jsx(Zr,{}),variant:"ghost",color:"white",size:"sm",position:"absolute",right:"-12px",top:"50%",transform:"translateY(-50%)",bg:"purple.600",border:"2px solid",borderColor:"purple.600",borderRadius:"full",_hover:{bg:"purple.700"},onClick:()=>d(!c),zIndex:1001})]}),e.jsxs(Va,{isOpen:l,onClose:()=>o(!1),placement:"left",size:"xs",closeOnOverlayClick:!0,closeOnEsc:!0,children:[e.jsx(Le,{}),e.jsxs(qa,{children:[e.jsx(Ue,{}),e.jsx(We,{bg:"purple.600",color:"white",children:e.jsx(yt,{size:"sm",variant:"horizontal",color:"white",textColor:"white",taglineColor:"whiteAlpha.700"})}),e.jsx(Me,{p:0,children:e.jsx(N,{bg:"purple.600",color:"white",h:"full",children:e.jsx(y,{})})})]})]}),e.jsxs(N,{flex:1,ml:j?0:c?"60px":"280px",display:"flex",flexDirection:"column",transition:"margin-left 0.3s ease",children:[e.jsx(N,{bg:"white",px:{base:4,md:6},py:4,boxShadow:"sm",borderBottom:"1px solid",borderColor:"gray.200",position:"sticky",top:0,zIndex:999,children:e.jsxs(js,{align:"center",justify:"space-between",children:[e.jsxs(h,{spacing:4,children:[j?e.jsx(De,{icon:e.jsx(Ha,{}),variant:"ghost",onClick:()=>o(!0),"aria-label":"Abrir menú"}):e.jsx(De,{icon:c?e.jsx(Kr,{}):e.jsx(Zr,{}),variant:"ghost",onClick:()=>d(!c),"aria-label":c?"Expandir sidebar":"Colapsar sidebar",size:"sm"}),e.jsx(yt,{size:"sm",variant:"horizontal"}),e.jsx(n,{fontSize:"lg",fontWeight:"semibold",color:"gray.700",children:a()?"Panel de Repartidor":"Panel de Administración"})]}),e.jsxs(h,{spacing:4,children:[e.jsx(Sa,{variant:"badge"}),e.jsx(Se,{colorScheme:"green",variant:"subtle",children:"En línea"})]})]})}),e.jsx(N,{flex:1,p:{base:4,md:6},overflowY:"auto",position:"relative",zIndex:1,children:e.jsx(Rn,{})}),e.jsx(Pl,{})]})]})},Al=()=>{const[s,t]=v.useState({username:"",password:""}),[r,a]=v.useState(!1),i=tt(),l=ps(),{login:o,error:c,clearError:d}=Rs(),j=async D=>{D.preventDefault(),a(!0);try{(await o(s.username,s.password)).success&&(l({title:"Éxito",description:"Inicio de sesión exitoso",status:"success",duration:3e3,isClosable:!0}),i("/dashboard"))}catch(m){console.error("Error en login:",m)}finally{a(!1)}},z=D=>{t({...s,[D.target.name]:D.target.value}),c&&d()};return e.jsx(as,{minH:"100vh",bg:"gray.50",children:e.jsx(N,{w:"full",maxW:"md",p:6,children:e.jsx(L,{children:e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(N,{textAlign:"center",children:[e.jsx(yt,{size:"xl",variant:"vertical",color:"blue.500",textColor:"blue.600",taglineColor:"teal.500"}),e.jsx(n,{color:"gray.600",mt:2,children:"Sistema de Gestión"})]}),e.jsx(N,{w:"full",children:e.jsx("form",{onSubmit:j,children:e.jsxs(u,{spacing:4,children:[c&&e.jsxs(Ee,{status:"error",borderRadius:"md",children:[e.jsx(Te,{}),c]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Usuario"}),e.jsx(re,{name:"username",value:s.username,onChange:z,placeholder:"Ingresa tu usuario",size:"lg",autoComplete:"username"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Contraseña"}),e.jsx(re,{name:"password",type:"password",value:s.password,onChange:z,placeholder:"Ingresa tu contraseña",size:"lg",autoComplete:"current-password"})]}),e.jsx(O,{type:"submit",colorScheme:"blue",size:"lg",w:"full",isLoading:r,loadingText:"Iniciando sesión...",children:"Iniciar Sesión"})]})})}),e.jsx(N,{textAlign:"center",children:e.jsx(n,{fontSize:"sm",color:"gray.500",children:"Sistema de gestión para planta de agua"})})]})})})})})},Ca=pt((s,t)=>({products:[],loading:!1,error:null,fetchProducts:async()=>{s({loading:!0,error:null});try{const r=await Y.get("/api/products");s({products:r.data,loading:!1})}catch(r){console.error("Error al cargar productos:",r),s({error:r.message,loading:!1})}},createProduct:async r=>{s({loading:!0,error:null});try{const i=(await Y.post("/api/products",r)).data;return s(l=>({products:[...l.products,i],loading:!1})),{success:!0,data:i}}catch(a){return console.error("Error al crear producto:",a),s({error:a.message,loading:!1}),{success:!1,error:a.message}}},updateProduct:async(r,a)=>{s({loading:!0,error:null});try{const l=(await Y.put(`/api/products/${r}`,a)).data;return s(o=>({products:o.products.map(c=>c.id===r?l:c),loading:!1})),{success:!0,data:l}}catch(i){return console.error("Error al actualizar producto:",i),s({error:i.message,loading:!1}),{success:!1,error:i.message}}},deleteProduct:async r=>{s({loading:!0,error:null});try{return await Y.delete(`/api/products/${r}`),s(a=>({products:a.products.filter(i=>i.id!==r),loading:!1})),{success:!0}}catch(a){return console.error("Error al eliminar producto:",a),s({error:a.message,loading:!1}),{success:!1,error:a.message}}},calculatePrice:async(r,a)=>{try{return{success:!0,data:(await Y.post(`/api/products/${r}/calculate-price`,{quantity:a})).data.data.pricing}}catch(i){return console.error("Error al calcular precio:",i),{success:!1,error:i.message}}},getPricingInfo:async r=>{try{return{success:!0,data:(await Y.get(`/api/products/${r}/pricing-info`)).data.data.pricingInfo}}catch(a){return console.error("Error al obtener información de precios:",a),{success:!1,error:a.message}}},getFilteredProducts:r=>{const{products:a}=t();return a.filter(i=>{const l=i.name.toLowerCase(),o=i.description?i.description.toLowerCase():"",c=i.type?i.type.toLowerCase():"";return l.includes(r.toLowerCase())||o.includes(r.toLowerCase())||c.includes(r.toLowerCase())})},getProductById:r=>{const{products:a}=t();return a.find(i=>i.id===r)},clearError:()=>s({error:null}),reset:()=>s({products:[],loading:!1,error:null})})),El=pt((s,t)=>({clients:[],loading:!1,error:null,fetchClients:async()=>{s({loading:!0,error:null});try{const r=await Y.get("/api/clients");console.log("🔍 API Clientes Response:",r.data);const a=r.data.success?r.data.data:r.data;console.log("🔍 Clientes Data:",a),s({clients:a||[],loading:!1})}catch(r){console.error("Error al cargar clientes:",r),s({error:r.message,loading:!1})}},createClient:async r=>{s({loading:!0,error:null});try{const i=(await Y.post("/api/clients",r)).data;return s(l=>({clients:[...l.clients,i],loading:!1})),{success:!0,data:i}}catch(a){return console.error("Error al crear cliente:",a),s({error:a.message,loading:!1}),{success:!1,error:a.message}}},updateClient:async(r,a)=>{s({loading:!0,error:null});try{const l=(await Y.put(`/api/clients/${r}`,a)).data;return s(o=>({clients:o.clients.map(c=>c.id===r?l:c),loading:!1})),{success:!0,data:l}}catch(i){return console.error("Error al actualizar cliente:",i),s({error:i.message,loading:!1}),{success:!1,error:i.message}}},deleteClient:async r=>{s({loading:!0,error:null});try{return await Y.delete(`/api/clients/${r}`),s(a=>({clients:a.clients.filter(i=>i.id!==r),loading:!1})),{success:!0}}catch(a){return console.error("Error al eliminar cliente:",a),s({error:a.message,loading:!1}),{success:!1,error:a.message}}},getFilteredClients:r=>{const{clients:a}=t();return a.filter(i=>{const l=i.name.toLowerCase(),o=i.documentNumber.toLowerCase(),c=i.email?i.email.toLowerCase():"";return l.includes(r.toLowerCase())||o.includes(r.toLowerCase())||c.includes(r.toLowerCase())})},getClientById:r=>{const{clients:a}=t();return a.find(i=>i.id===r)},fetchClientById:async r=>{try{return(await Y.get(`/api/clients/${r}`)).data}catch(a){return console.error("Error al obtener cliente:",a),null}},clearError:()=>s({error:null}),reset:()=>s({clients:[],loading:!1,error:null})})),sr=pt((s,t)=>({deliveryFees:[],deliveryPersons:[],loading:!1,error:null,fetchDeliveryFees:async()=>{var r,a,i,l;console.log("🔄 fetchDeliveryFees iniciado"),s({loading:!0,error:null});try{const o=await Y.get("/api/delivery-fees");console.log("📦 Respuesta del API:",o.data);const c=o.data.success?o.data.data:o.data;return s({deliveryFees:c,loading:!1}),console.log("✅ deliveryFees actualizado en store:",c),{success:!0,data:c}}catch(o){return console.error("❌ Error al cargar tarifas de envío:",o),s({error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al cargar tarifas",loading:!1}),{success:!1,error:((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al cargar tarifas"}}},createDeliveryFee:async r=>{var a,i,l,o;try{const c=await Y.post("/api/delivery-fees",r);return s(d=>({deliveryFees:[...Array.isArray(d.deliveryFees)?d.deliveryFees:[],c.data]})),{success:!0,data:c.data}}catch(c){return console.error("Error al crear tarifa:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al crear tarifa"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al crear tarifa"}}},updateDeliveryFee:async(r,a)=>{var i,l,o,c;try{const d=await Y.put(`/api/delivery-fees/${r}`,a);return s(j=>({deliveryFees:Array.isArray(j.deliveryFees)?j.deliveryFees.map(z=>z.id===r?d.data:z):[]})),{success:!0,data:d.data}}catch(d){return console.error("Error al actualizar tarifa:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar tarifa"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar tarifa"}}},deleteDeliveryFee:async r=>{var a,i,l,o;try{return await Y.delete(`/api/delivery-fees/${r}`),s(c=>({deliveryFees:Array.isArray(c.deliveryFees)?c.deliveryFees.filter(d=>d.id!==r):[]})),{success:!0}}catch(c){return console.error("Error al eliminar tarifa:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al eliminar tarifa"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al eliminar tarifa"}}},fetchDeliveryPersons:async()=>{var r,a,i,l,o,c,d;s({loading:!0,error:null});try{console.log("🔄 fetchDeliveryPersons iniciado");const j=await Y.get("/api/user-management");console.log("📦 Respuesta usuarios completos:",j.data);const D=(j.data.success?j.data.data:j.data).filter(m=>m.role==="repartidor");return s({deliveryPersons:D,loading:!1}),console.log("✅ Repartidores cargados:",D.length),{success:!0,data:D}}catch(j){return console.error("❌ Error al cargar repartidores:",j),console.error("❌ Status:",(r=j.response)==null?void 0:r.status),console.error("❌ Message:",(i=(a=j.response)==null?void 0:a.data)==null?void 0:i.message),s({error:((o=(l=j.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al cargar repartidores",loading:!1}),{success:!1,error:((d=(c=j.response)==null?void 0:c.data)==null?void 0:d.message)||"Error al cargar repartidores"}}},createDeliveryPerson:async r=>{var a,i,l,o;try{const c=await Y.post("/api/user-management",r);return s(d=>({deliveryPersons:[...Array.isArray(d.deliveryPersons)?d.deliveryPersons:[],c.data.data]})),{success:!0,data:c.data.data}}catch(c){return console.error("Error al crear repartidor:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al crear repartidor"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al crear repartidor"}}},updateDeliveryPerson:async(r,a)=>{var i,l,o,c;try{const d=await Y.put(`/api/user-management/${r}`,a);return s(j=>({deliveryPersons:Array.isArray(j.deliveryPersons)?j.deliveryPersons.map(z=>z.id===r?d.data.data:z):[]})),{success:!0,data:d.data.data}}catch(d){return console.error("Error al actualizar repartidor:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar repartidor"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar repartidor"}}},updateDeliveryPersonStatus:async(r,a)=>{var i,l,o,c;try{return await Y.patch(`/api/user-management/${r}/toggle-status`,{isActive:a==="available"}),s(d=>({deliveryPersons:Array.isArray(d.deliveryPersons)?d.deliveryPersons.map(j=>j.id===r?{...j,isActive:a==="available"}:j):[]})),{success:!0}}catch(d){return console.error("Error al actualizar estado:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar estado"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar estado"}}},deleteDeliveryPerson:async r=>{var a,i,l,o;try{return await Y.delete(`/api/user-management/${r}`),s(c=>({deliveryPersons:Array.isArray(c.deliveryPersons)?c.deliveryPersons.filter(d=>d.id!==r):[]})),{success:!0}}catch(c){return console.error("Error al eliminar repartidor:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al eliminar repartidor"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al eliminar repartidor"}}},getAvailableDeliveryPersons:()=>{const{deliveryPersons:r}=t();return Array.isArray(r)?r.filter(a=>a.isActive===!0):[]},getDeliveryStats:()=>{const{deliveryPersons:r,deliveryFees:a}=t(),i=Array.isArray(r)?r:[],l=Array.isArray(a)?a:[],o=i.length,c=i.filter(D=>D.isActive===!0).length,d=i.filter(D=>D.isActive===!1).length,j=l.length,z=l.filter(D=>D.isActive).length;return{totalPersons:o,availablePersons:c,inactivePersons:d,totalFees:j,activeFees:z}},clearError:()=>s({error:null})})),Hr=pt((s,t)=>({orders:[],loading:!1,error:null,createGuestOrder:async r=>{var a,i,l,o,c;s({loading:!0,error:null});try{console.log("Enviando datos al backend:",r);const d=await Y.post("/api/guest-orders",r);console.log("Respuesta completa del servidor:",d),console.log("Datos de la respuesta:",d.data);const j=d.data.data;return console.log("Procesando respuesta - newOrder:",j),s(z=>({orders:Array.isArray(z.orders)?[...z.orders,j]:[j],loading:!1})),{success:!0,data:j}}catch(d){return console.error("Error al crear pedido de invitado:",d),console.error("Detalles del error:",(a=d.response)==null?void 0:a.data),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al crear pedido",loading:!1}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al crear pedido"}}},fetchOrders:async()=>{var r,a,i,l;s({loading:!0,error:null});try{const o=await Y.get("/api/guest-orders?limit=1000");console.log("Respuesta completa del servidor:",o),console.log("Datos de la respuesta:",o.data);const c=o.data.success?o.data.data:o.data;return console.log("Procesando pedidos:",c),s({orders:Array.isArray(c)?c:[],loading:!1}),{success:!0,data:c}}catch(o){return console.error("Error al cargar pedidos de invitados:",o),s({error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al cargar pedidos",loading:!1}),{success:!1,error:((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al cargar pedidos"}}},updateOrderStatus:async(r,a)=>{var i,l,o,c;try{return await Y.put(`/api/guest-orders/${r}/status`,{status:a}),s(d=>({orders:Array.isArray(d.orders)?d.orders.map(j=>j.id===r?{...j,status:a}:j):[]})),{success:!0}}catch(d){return console.error("Error al actualizar estado:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar estado"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar estado"}}},updateGuestOrder:async(r,a)=>{var i,l,o,c;s({loading:!0,error:null});try{if(a.deliveryPersonId){console.log("🔍 Asignando repartidor - Enviando petición:",{url:`/api/guest-orders/${r}/assign-delivery`,data:{deliveryPersonId:a.deliveryPersonId},headers:Y.defaults.headers.common});const d=await Y.put(`/api/guest-orders/${r}/assign-delivery`,{deliveryPersonId:a.deliveryPersonId}),j=d.data.data;return console.log("🔍 Asignación de repartidor - Respuesta recibida:",d.data),console.log("🔍 Asignación de repartidor - updatedOrder:",j),s(z=>({orders:Array.isArray(z.orders)?z.orders.map(D=>D.id===r?{...D,...j}:D):[],loading:!1})),{success:!0,data:j}}else{console.log("🔍 updateGuestOrder - Enviando petición:",{url:`/api/guest-orders/${r}`,data:a,headers:Y.defaults.headers.common});const d=await Y.put(`/api/guest-orders/${r}`,a),j=d.data;return console.log("🔍 updateGuestOrder - Respuesta recibida:",d.data),console.log("🔍 updateGuestOrder - updatedOrder:",j),s(z=>({orders:Array.isArray(z.orders)?z.orders.map(D=>D.id===r?{...D,...j}:D):[],loading:!1})),{success:!0,data:j}}}catch(d){return console.error("Error al actualizar pedido de invitado:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar pedido",loading:!1}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar pedido"}}},getOrderById:r=>{const{orders:a}=t();return Array.isArray(a)?a.find(i=>i.id===r):null},getOrdersByStatus:r=>{const{orders:a}=t();return Array.isArray(a)?a.filter(i=>i.status===r):[]},getOrderStats:()=>{const{orders:r}=t();return Array.isArray(r)?{total:r.length,pending:r.filter(a=>a.status==="pendiente").length,inProgress:r.filter(a=>a.status==="en_camino").length,delivered:r.filter(a=>a.status==="entregado").length,cancelled:r.filter(a=>a.status==="cancelado").length}:{total:0,pending:0,inProgress:0,delivered:0,cancelled:0}},clearError:()=>s({error:null})})),Tl=()=>{var _e,w,X,be,de,A,me,ae;const s=tt(),t=ss("white","gray.800"),r=ss("gray.200","gray.600");Hs({base:!0,md:!1});const[a,i]=v.useState(new Date),{products:l,fetchProducts:o}=Ca(),{clients:c,fetchClients:d}=El(),{getDeliveryStats:j,fetchDeliveryPersons:z,fetchDeliveryFees:D}=sr(),{orders:m,fetchOrders:T,getOrderStats:C}=Hr(),I=async()=>{try{const Q=await Y.get("/api/vouchers/stats");console.log("📦 Respuesta vales:",Q.data),Q.data.success&&(x(Q.data.data),console.log("✅ Estadísticas de vales actualizadas:",Q.data.data))}catch(Q){console.error("Error al cargar estadísticas de vales:",Q)}},k=async()=>{try{const Q=await Y.get("/api/subscriptions");if(console.log("📦 Respuesta suscripciones:",Q.data),Q.data.success){const B=Q.data.data||[];q({total:B.length,active:B.filter(ye=>ye.status==="active").length}),console.log("✅ Estadísticas de suscripciones actualizadas:",{total:B.length,active:B.filter(ye=>ye.status==="active").length})}}catch(Q){console.error("Error al cargar estadísticas de suscripciones:",Q)}};v.useEffect(()=>{(async()=>{try{await new Promise(ye=>setTimeout(ye,100)),o(),d(),D(),T(),I(),k()}catch(ye){console.error("Error cargando datos del dashboard:",ye)}})();const B=setInterval(()=>{T(),d(),I(),k(),i(new Date)},3e4);return()=>clearInterval(B)},[o,d,D,T]),C(),j();const y=(m==null?void 0:m.length)||0,P=((_e=m==null?void 0:m.filter(Q=>Q.status==="pending"))==null?void 0:_e.length)||0,E=((w=m==null?void 0:m.filter(Q=>Q.status==="delivered"))==null?void 0:w.length)||0,R=((X=m==null?void 0:m.filter(Q=>Q.status==="confirmed"))==null?void 0:X.length)||0,M=((be=m==null?void 0:m.filter(Q=>Q.status==="preparing"))==null?void 0:be.length)||0,F=((de=m==null?void 0:m.filter(Q=>Q.status==="ready"))==null?void 0:de.length)||0,g=((A=m==null?void 0:m.filter(Q=>Q.paymentMethod==="contraentrega"))==null?void 0:A.length)||0,V=((me=m==null?void 0:m.filter(Q=>Q.paymentMethod==="vale"))==null?void 0:me.length)||0,b=((ae=m==null?void 0:m.filter(Q=>Q.paymentMethod==="suscripcion"))==null?void 0:ae.length)||0,[ne,x]=v.useState({total:0,pending:0}),[$,q]=v.useState({total:0,active:0}),se=(c==null?void 0:c.length)||0;console.log("🔍 Dashboard Debug:",{clients:(c==null?void 0:c.length)||0,totalClients:se,valeOrders:V,suscripcionOrders:b});const we=(m==null?void 0:m.reduce((Q,B)=>Q+(parseFloat(B.totalAmount)||0),0))||0,xe=(m==null?void 0:m.filter(Q=>{const B=new Date(Q.createdAt),ye=new Date;return B.toDateString()===ye.toDateString()}).reduce((Q,B)=>Q+(parseFloat(B.totalAmount)||0),0))||0,Ce=[{title:"Pedidos",icon:Ss,color:"orange",onClick:()=>s("/dashboard/orders-management"),count:y,description:"Gestionar pedidos"},{title:"Clientes",icon:Jn,color:"green",onClick:()=>s("/dashboard/clients"),count:se,description:"Base de clientes"},{title:"Suscripciones",icon:Is,color:"purple",onClick:()=>s("/dashboard/subscriptions"),count:$.active,description:`${$.total} total, ${$.active} activas`},{title:"Vales",icon:Bs,color:"blue",onClick:()=>s("/dashboard/vales"),count:ne.pending,description:`${ne.total} total, ${ne.pending} pendientes`},{title:"Cobranza",icon:Yn,color:"red",onClick:()=>s("/dashboard/collection-report"),count:ne.pending,description:"Vales por cobrar"},{title:"Términos",icon:ao,color:"teal",onClick:()=>s("/dashboard/terms-and-conditions"),count:0,description:"Términos y condiciones"},{title:"Usuarios",icon:xo,color:"cyan",onClick:()=>s("/dashboard/users-management"),count:0,description:"Gestión de usuarios"}];return e.jsxs(N,{p:{base:1,sm:2,md:4},maxW:"100%",overflow:"hidden",children:[e.jsxs(js,{direction:{base:"column",sm:"row"},align:{base:"center",sm:"flex-start"},justify:"space-between",mb:{base:4,md:6},wrap:"wrap",gap:2,children:[e.jsxs(u,{align:{base:"center",sm:"flex-start"},spacing:{base:1,md:2},maxW:{base:"100%",sm:"70%"},children:[e.jsx(yt,{size:{base:"sm",md:"md"},variant:"horizontal",color:"blue.500",textColor:"blue.600",taglineColor:"teal.500"}),e.jsx(K,{size:{base:"md",md:"lg"},color:"gray.700",textAlign:{base:"center",sm:"left"},children:"Dashboard Administrativo"}),e.jsx(n,{color:"gray.500",fontSize:{base:"xs",md:"sm"},textAlign:{base:"center",sm:"left"},children:"Gestión completa del negocio"}),e.jsxs(n,{color:"gray.400",fontSize:"xs",textAlign:{base:"center",sm:"left"},children:["Última actualización: ",a.toLocaleTimeString()]})]}),e.jsxs(u,{spacing:1,align:{base:"center",sm:"flex-end"},children:[e.jsx(Se,{colorScheme:"green",variant:"subtle",fontSize:"xs",children:"Sistema Activo"}),e.jsx(O,{size:"xs",colorScheme:"blue",variant:"outline",onClick:()=>{T(),d(),z(),I(),k(),i(new Date)},children:"Actualizar"})]})]}),e.jsxs(is,{columns:{base:1,sm:2,lg:5},spacing:{base:2,md:4},mb:{base:4,md:8},maxW:"100%",children:[e.jsx(L,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(Qe,{children:[e.jsx(Je,{color:"orange.600",fontSize:{base:"xs",md:"sm"},children:"📦 Pedidos Pendientes"}),e.jsx(Ke,{color:"orange.500",fontSize:{base:"xl",md:"2xl"},children:P}),e.jsxs(Ze,{fontSize:{base:"xs",md:"sm"},children:[R," confirmados"]})]})})}),e.jsx(L,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(Qe,{children:[e.jsx(Je,{color:"green.600",fontSize:{base:"xs",md:"sm"},children:"💰 Ingresos Hoy"}),e.jsxs(Ke,{color:"green.500",fontSize:{base:"xl",md:"2xl"},children:["S/ ",xe.toFixed(2)]}),e.jsxs(Ze,{fontSize:{base:"xs",md:"sm"},children:["Total: S/ ",we.toFixed(2)]})]})})}),e.jsx(L,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(Qe,{children:[e.jsx(Je,{color:"blue.600",fontSize:{base:"xs",md:"sm"},children:"👥 Clientes"}),e.jsx(Ke,{color:"blue.500",fontSize:{base:"xl",md:"2xl"},children:c.length}),e.jsx(Ze,{fontSize:{base:"xs",md:"sm"},children:"Clientes registrados"})]})})}),e.jsx(L,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(Qe,{children:[e.jsx(Je,{color:"purple.600",fontSize:{base:"xs",md:"sm"},children:"✅ Entregados"}),e.jsx(Ke,{color:"purple.500",fontSize:{base:"xl",md:"2xl"},children:E}),e.jsxs(Ze,{fontSize:{base:"xs",md:"sm"},children:[F," listos para entregar"]})]})})}),e.jsx(L,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(Qe,{children:[e.jsx(Je,{color:"yellow.600",fontSize:{base:"xs",md:"sm"},children:"📊 Total Pedidos"}),e.jsx(Ke,{color:"yellow.500",fontSize:{base:"xl",md:"2xl"},children:y}),e.jsxs(Ze,{fontSize:{base:"xs",md:"sm"},children:[M," en preparación"]})]})})})]}),e.jsxs(is,{columns:{base:2,sm:2,lg:4},spacing:{base:2,md:4},mb:{base:4,md:8},maxW:"100%",children:[e.jsx(L,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:2,md:4},children:e.jsxs(Qe,{children:[e.jsx(Je,{color:"blue.600",fontSize:{base:"xs",md:"sm"},children:"💵 Contraentrega"}),e.jsx(Ke,{color:"blue.500",fontSize:{base:"lg",md:"xl"},children:g}),e.jsx(Ze,{fontSize:{base:"xs",md:"sm"},children:"Pago al recibir"})]})})}),e.jsx(L,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:2,md:4},children:e.jsxs(Qe,{children:[e.jsx(Je,{color:"orange.600",fontSize:{base:"xs",md:"sm"},children:"🎫 Vales"}),e.jsx(Ke,{color:"orange.500",fontSize:{base:"lg",md:"xl"},children:V}),e.jsx(Ze,{fontSize:{base:"xs",md:"sm"},children:"Pago a crédito"})]})})}),e.jsx(L,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:2,md:4},children:e.jsxs(Qe,{children:[e.jsx(Je,{color:"purple.600",fontSize:{base:"xs",md:"sm"},children:"📅 Suscripciones"}),e.jsx(Ke,{color:"purple.500",fontSize:{base:"lg",md:"xl"},children:b}),e.jsx(Ze,{fontSize:{base:"xs",md:"sm"},children:"Pago mensual"})]})})}),e.jsx(L,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(W,{p:{base:2,md:4},children:e.jsxs(Qe,{children:[e.jsx(Je,{color:"green.600",fontSize:{base:"xs",md:"sm"},children:"💧 Productos"}),e.jsx(Ke,{color:"green.500",fontSize:{base:"lg",md:"xl"},children:l.length}),e.jsx(Ze,{fontSize:{base:"xs",md:"sm"},children:"En inventario"})]})})})]}),e.jsx(L,{bg:t,borderColor:r,boxShadow:"sm",maxW:"100%",children:e.jsxs(W,{p:{base:3,md:4},children:[e.jsx(K,{size:{base:"sm",md:"md"},mb:{base:3,md:4},color:"gray.700",children:"🚀 Acciones Rápidas"}),e.jsx(is,{columns:{base:2,sm:3,md:4,lg:7},spacing:{base:2,md:3},maxW:"100%",children:Ce.map((Q,B)=>e.jsx(L,{borderColor:`${Q.color}.200`,borderWidth:"2px",cursor:"pointer",onClick:Q.onClick,_hover:{transform:"translateY(-2px)",boxShadow:"lg",borderColor:`${Q.color}.300`,bg:`${Q.color}.50`},transition:"all 0.2s",borderRadius:"lg",bg:"white",h:{base:"100px",md:"110px"},children:e.jsx(W,{p:{base:2,md:3},h:"100%",children:e.jsxs(u,{spacing:{base:1,md:2},h:"100%",justify:"space-between",align:"center",children:[e.jsx(N,{display:"flex",alignItems:"center",justifyContent:"center",h:{base:"24px",md:"28px"},w:{base:"24px",md:"28px"},borderRadius:"full",bg:`${Q.color}.100`,flexShrink:0,children:e.jsx(Q.icon,{size:{base:14,md:16},color:`${Q.color}.600`})}),e.jsxs(u,{spacing:1,flex:1,w:"100%",textAlign:"center",children:[e.jsx(n,{fontSize:{base:"2xs",md:"xs"},fontWeight:"bold",color:"gray.700",noOfLines:2,lineHeight:"1.1",minH:{base:"20px",md:"24px"},display:"flex",alignItems:"center",justifyContent:"center",children:Q.title}),e.jsx(n,{fontSize:{base:"3xs",md:"2xs"},color:"gray.500",noOfLines:2,lineHeight:"1.0",minH:{base:"16px",md:"18px"},children:Q.description})]}),e.jsxs(N,{position:"relative",display:"inline-block",children:[e.jsx(N,{bg:`${Q.color}.500`,color:"white",borderRadius:"full",px:{base:2,md:3},py:{base:1,md:1.5},fontSize:{base:"sm",md:"md"},fontWeight:"900",minW:{base:"28px",md:"32px"},h:{base:"28px",md:"32px"},display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"lg",border:"4px solid white",_hover:{transform:"scale(1.1)",boxShadow:"xl",bg:`${Q.color}.600`},transition:"all 0.3s ease",cursor:"pointer",children:Q.count}),e.jsx(N,{position:"absolute",top:"-2px",right:"-2px",w:"8px",h:"8px",bg:"white",borderRadius:"full",opacity:.8,className:"pulse-animation"})]})]})})},B))})]})})]})},Dl=()=>{var te,S,ee,Be,ks,os,Ve;const{orders:s,loading:t,fetchOrders:r,updateGuestOrder:a}=Hr(),{deliveryPersons:i,fetchDeliveryPersons:l}=sr(),[o,c]=v.useState(""),[d,j]=v.useState("all"),[z,D]=v.useState("all"),[m,T]=v.useState(null),[C,I]=v.useState(""),[k,y]=v.useState(new Date),[P,E]=v.useState(""),{isOpen:R,onOpen:M,onClose:F}=Fe(),{isOpen:g,onOpen:V,onClose:b}=Fe(),{isOpen:ne,onOpen:x,onClose:$}=Fe(),q=ps();v.useEffect(()=>{r(),l();const p=setInterval(()=>{r(),y(new Date)},3e4);return()=>clearInterval(p)},[r,l]);const se=s.map(p=>({...p,type:"guest",orderNumber:p.orderNumber||`PED-${p.id}`,clientName:p.clientName||p.customerName,clientPhone:p.clientPhone||p.customerPhone,clientAddress:p.clientAddress||p.deliveryAddress,clientDistrict:p.clientDistrict||p.deliveryDistrict})).sort((p,ie)=>new Date(ie.createdAt)-new Date(p.createdAt));console.log("🔍 Pedidos cargados:",se.length),console.log("🔍 Repartidores cargados:",i.length),console.log("🔍 Primer pedido completo:",se[0]),console.log("🔍 Estructura del cliente:",(te=se[0])==null?void 0:te.Client),console.log("🔍 Datos del cliente:",{clientName:(S=se[0])==null?void 0:S.clientName,clientPhone:(ee=se[0])==null?void 0:ee.clientPhone,clientAddress:(Be=se[0])==null?void 0:Be.clientAddress,Client:(ks=se[0])==null?void 0:ks.Client,deliveryAddress:(os=se[0])==null?void 0:os.deliveryAddress,deliveryDistrict:(Ve=se[0])==null?void 0:Ve.deliveryDistrict});const we=se.filter(p=>p.deliveryPersonId);console.log("🔍 Pedidos asignados:",we.length),we.forEach(p=>{console.log(`🔍 Pedido ${p.id} asignado a repartidor ${p.deliveryPersonId}:`,{id:p.id,status:p.status,deliveryPersonId:p.deliveryPersonId,deliveryPerson:p.deliveryPerson})}),console.log("🔍 Repartidores disponibles:",i.map(p=>({id:p.id,name:p.name,type:typeof p.id}))),se.forEach((p,ie)=>{ie<3&&console.log(`🔍 Pedido ${ie+1}:`,{id:p.id,type:p.type,clientName:p.clientName,clientPhone:p.clientPhone,Client:p.Client,customerName:p.customerName,customerPhone:p.customerPhone,deliveryAddress:p.deliveryAddress,products:p.products,orderDetails:p.orderDetails})});const xe=(se||[]).filter(p=>{var ys,ws,ke,Es;const ie=((ys=p.orderNumber)==null?void 0:ys.toLowerCase().includes(o.toLowerCase()))||((ws=p.clientName)==null?void 0:ws.toLowerCase().includes(o.toLowerCase()))||((Es=(ke=p.client)==null?void 0:ke.name)==null?void 0:Es.toLowerCase().includes(o.toLowerCase())),oe=d==="all"||p.status===d,cs=z==="all"||z==="efectivo"&&p.paymentType==="efectivo"||z==="plin"&&p.paymentType==="plin"||z==="vale"&&p.paymentMethod==="vale"||z==="suscripcion"&&p.paymentMethod==="suscripcion"||z==="contraentrega"&&p.paymentMethod==="contraentrega";return ie&&oe&&cs}),Ce={pending:xe.filter(p=>p.status==="pending")||[],confirmed:xe.filter(p=>p.status==="confirmed")||[],preparing:xe.filter(p=>p.status==="preparing")||[],ready:xe.filter(p=>p.status==="ready")||[],delivered:xe.filter(p=>p.status==="delivered")||[],cancelled:xe.filter(p=>p.status==="cancelled")||[]},_e=p=>{switch(p){case"pending":return"orange";case"confirmed":return"blue";case"preparing":return"yellow";case"ready":return"purple";case"delivered":return"green";case"cancelled":return"red";case"pendiente":return"orange";case"asignado":return"blue";case"en_camino":return"purple";case"entregado":return"green";case"cancelado":return"red";default:return"gray"}},w=p=>{switch(p){case"pending":return"Pendiente";case"confirmed":return"Asignado";case"preparing":return"Preparando";case"ready":return"Listo";case"delivered":return"Entregado";case"cancelled":return"Cancelado";case"pendiente":return"Pendiente";case"asignado":return"Asignado";case"en_camino":return"En Camino";case"entregado":return"Entregado";case"cancelado":return"Cancelado";default:return p}},X=(p,ie)=>{if(ie==="suscripcion")return Is;switch(p){case"cash":case"efectivo":return fs;case"plin":return Ys;case"yape":return Ys;case"transfer":return FaCreditCard;default:return fs}},be=p=>{let ie=[];return p.type==="regular"&&p.orderDetails&&(ie=p.orderDetails.map(oe=>{var cs,ys;return{name:((cs=oe.product)==null?void 0:cs.name)||((ys=oe.Product)==null?void 0:ys.name)||"Producto",quantity:oe.quantity||0,price:oe.unitPrice||oe.price||0}})),p.type==="guest"&&p.products&&(ie=p.products.map(oe=>{var cs;return{name:((cs=oe.product)==null?void 0:cs.name)||oe.name||"Producto",quantity:oe.quantity||0,price:oe.price||oe.unitPrice||0}})),ie.length===0?e.jsx(n,{fontSize:"xs",color:"gray.500",fontStyle:"italic",children:"Sin productos"}):e.jsx(u,{spacing:1,align:"start",w:"full",children:ie.map((oe,cs)=>e.jsxs(h,{justify:"space-between",w:"full",fontSize:"xs",children:[e.jsx(n,{noOfLines:1,flex:1,children:oe.name}),e.jsxs(n,{color:"gray.600",minW:"fit-content",children:["x",oe.quantity]}),e.jsxs(n,{color:"green.600",fontWeight:"medium",minW:"fit-content",children:["S/ ",(oe.price*oe.quantity).toFixed(2)]})]},cs))})},de=async()=>{if(!m||!C){q({title:"Datos incompletos",description:"Selecciona un repartidor",status:"warning",duration:3e3,isClosable:!0});return}if(m.status==="cancelled"){q({title:"Acción no permitida",description:"No se puede asignar repartidor a un pedido cancelado",status:"error",duration:3e3,isClosable:!0}),F();return}try{const p={status:"confirmed",deliveryPersonId:C,notes:P};console.log("🔍 Asignando repartidor:",{orderId:m.id,deliveryPersonId:C,updateData:p});const ie=await a(m.id,p);console.log("🔍 Resultado de la asignación:",ie),q({title:"Repartidor asignado",description:"El pedido ha sido asignado exitosamente",status:"success",duration:3e3,isClosable:!0}),r(),F(),T(null),I(""),E("")}catch{q({title:"Error",description:"No se pudo asignar el repartidor",status:"error",duration:3e3,isClosable:!0})}},A=p=>{T(p),x()},me=async()=>{if(m)try{const p={status:"cancelled"};await a(m.id,p),q({title:"Pedido anulado",description:`El pedido #${m.id} ha sido anulado exitosamente`,status:"success",duration:3e3,isClosable:!0}),$(),T(null),r()}catch{q({title:"Error",description:"No se pudo anular el pedido",status:"error",duration:3e3,isClosable:!0})}},ae=async(p,ie)=>{try{const oe={status:ie};await a(p.id,oe),q({title:"Estado actualizado",description:`El pedido ahora está ${w(ie).toLowerCase()}`,status:"success",duration:3e3,isClosable:!0})}catch{q({title:"Error",description:"No se pudo actualizar el estado",status:"error",duration:3e3,isClosable:!0})}},Q=p=>{if(p.status==="cancelled"){q({title:"Acción no permitida",description:"No se puede asignar repartidor a un pedido cancelado",status:"warning",duration:3e3,isClosable:!0});return}T(p),I(p.deliveryPersonId||""),E(p.notes||""),M()},B=p=>{console.log("🔍 Pedido seleccionado:",p),console.log("🔍 DeliveryPerson en el pedido:",p.deliveryPerson),console.log("🔍 DeliveryPersonId en el pedido:",p.deliveryPersonId),T(p),V()},ye=async p=>{var ie;try{console.log("🔍 Descargando boleta para pedido:",p);const oe=await fetch("/api/admin/generate-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({orderData:{id:p.id,customerName:p.clientName||p.customerName,customerPhone:p.clientPhone||p.customerPhone,customerEmail:p.customerEmail||((ie=p.client)==null?void 0:ie.email),deliveryAddress:p.clientAddress||p.deliveryAddress,deliveryDistrict:p.clientDistrict||p.deliveryDistrict,subtotal:p.subtotal||p.total||p.totalAmount,deliveryFee:p.deliveryFee||0,total:p.total||p.totalAmount,paymentMethod:p.paymentMethod,paymentType:p.paymentType,items:(p.products||p.orderDetails||[]).map(ke=>{var Es;return{name:((Es=ke.product)==null?void 0:Es.name)||ke.name||"Producto",quantity:ke.quantity||1,price:ke.price||ke.unitPrice||0,subtotal:ke.subtotal||(ke.price||ke.unitPrice||0)*(ke.quantity||1)}}),products:(p.products||p.orderDetails||[]).map(ke=>{var Es;return{name:((Es=ke.product)==null?void 0:Es.name)||ke.name||"Producto",quantity:ke.quantity||1,price:ke.price||ke.unitPrice||0,subtotal:ke.subtotal||(ke.price||ke.unitPrice||0)*(ke.quantity||1)}}),originalProducts:p.products,originalOrderDetails:p.orderDetails},documentType:"boleta"})});if(console.log("🔍 Respuesta del servidor:",oe.status,oe.statusText),!oe.ok){const ke=await oe.text();throw console.error("❌ Error del servidor:",ke),new Error(`Error al generar la boleta: ${oe.status} ${oe.statusText}`)}const cs=await oe.blob();console.log("✅ Blob generado, tamaño:",cs.size);const ys=window.URL.createObjectURL(cs),ws=document.createElement("a");ws.href=ys,ws.download=`boleta_${p.orderNumber||p.id}.pdf`,document.body.appendChild(ws),ws.click(),window.URL.revokeObjectURL(ys),document.body.removeChild(ws),q({title:"Boleta descargada",description:"La boleta se ha descargado correctamente",status:"success",duration:3e3,isClosable:!0})}catch(oe){console.error("Error al descargar boleta:",oe),q({title:"Error",description:"No se pudo descargar la boleta",status:"error",duration:3e3,isClosable:!0})}},_=p=>e.jsx(L,{variant:"outline",size:"sm",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",fontSize:"sm",children:p.orderNumber}),e.jsx(n,{fontSize:"xs",color:"gray.500",children:p.type==="regular"?"Cliente Frecuente":"Cliente Visitante"}),e.jsx(n,{fontSize:"2xs",color:"gray.400",children:p.createdAt?new Date(p.createdAt).toLocaleString("es-PE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"Sin fecha"})]}),e.jsx(Se,{colorScheme:_e(p.status),children:w(p.status)})]}),e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{spacing:2,children:[e.jsx(qs,{size:12,color:"#718096"}),e.jsx(n,{fontSize:"sm",fontWeight:"medium",children:p.clientName||"Sin nombre"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(Ks,{size:12,color:"#718096"}),e.jsx(n,{fontSize:"sm",children:p.clientPhone||"Sin teléfono"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(St,{size:12,color:"#718096"}),e.jsxs(u,{align:"start",spacing:0,children:[e.jsx(n,{fontSize:"sm",noOfLines:2,children:p.clientAddress||p.deliveryAddress||"Sin dirección"}),p.clientDistrict&&e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["📍 ",p.clientDistrict]}),p.deliveryReference&&e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["🔗 ",p.deliveryReference]})]})]})]}),e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsx(n,{fontSize:"sm",fontWeight:"medium",color:"gray.700",children:"🛒 Productos:"}),be(p)]}),e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsxs(h,{spacing:2,children:[e.jsx(ge,{as:X(p.paymentType,p.paymentMethod),size:14}),e.jsx(n,{fontSize:"sm",children:p.paymentMethod==="vale"?"A Crédito (Vale)":p.paymentMethod==="suscripcion"?"Suscripción":p.paymentMethod==="contraentrega"?p.paymentType==="plin"?"Contraentrega - PLIN":p.paymentType==="yape"?"Contraentrega - Yape":p.paymentType==="cash"?"Contraentrega - Efectivo":"Contraentrega":p.paymentType==="plin"?"PLIN":p.paymentType==="yape"?"Yape":(p.paymentType==="cash","Efectivo")})]}),e.jsxs(n,{fontWeight:"bold",fontSize:"sm",color:"green.600",children:["S/ ",parseFloat(p.total||p.totalAmount||0).toFixed(2)]})]}),p.paymentMethod==="suscripcion"&&p.subscriptionId&&e.jsx(h,{spacing:2,bg:"purple.50",p:2,borderRadius:"md",children:e.jsxs(n,{fontSize:"xs",color:"purple.600",fontWeight:"medium",children:["📅 Suscripción ID: ",p.subscriptionId]})}),p.paymentMethod==="vale"&&e.jsx(h,{spacing:2,bg:"orange.50",p:2,borderRadius:"md",children:e.jsx(n,{fontSize:"xs",color:"orange.600",fontWeight:"medium",children:"🎫 Pago a crédito - Se cobrará al final del mes"})})]}),p.deliveryPersonId&&e.jsxs(h,{spacing:2,children:[e.jsx(Ss,{size:12,color:"#3182CE"}),e.jsx(n,{fontSize:"sm",children:(()=>{const ie=i.find(oe=>oe.id===p.deliveryPersonId);return console.log(`🔍 Buscando repartidor para pedido ${p.id}:`,{deliveryPersonId:p.deliveryPersonId,type:typeof p.deliveryPersonId,foundDeliveryPerson:ie,allDeliveryPersons:i.map(oe=>({id:oe.id,type:typeof oe.id}))}),(ie==null?void 0:ie.name)||"Repartidor asignado"})()})]}),e.jsxs(h,{spacing:2,justify:"center",children:[e.jsx(Ne,{label:"Ver detalles",children:e.jsx(De,{size:"sm",icon:e.jsx(Nr,{}),onClick:()=>B(p),"aria-label":"Ver detalles"})}),e.jsx(Ne,{label:"Descargar boleta",children:e.jsx(De,{size:"sm",icon:e.jsx(Fr,{}),colorScheme:"green",onClick:()=>ye(p),"aria-label":"Descargar boleta"})}),(!p.deliveryPersonId||p.status==="pending")&&p.status!=="cancelled"&&e.jsx(Ne,{label:"Asignar repartidor",children:e.jsx(De,{size:"sm",icon:e.jsx(qt,{}),colorScheme:"blue",onClick:()=>Q(p),"aria-label":"Asignar repartidor"})}),p.status==="confirmed"&&e.jsx(O,{size:"sm",colorScheme:"purple",onClick:()=>ae(p,"preparing"),children:"Enviar"}),(p.status==="preparing"||p.status==="ready")&&e.jsx(O,{size:"sm",colorScheme:"green",onClick:()=>ae(p,"delivered"),children:"Entregado"}),(p.status==="pending"||p.status==="confirmed"||p.status==="preparing"||p.status==="ready")&&e.jsx(O,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>A(p),children:"Anular"})]})]})})},`${p.type}-${p.id}`),je=()=>{var p;return e.jsxs(qe,{isOpen:R,onClose:F,size:"md",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Asignar Repartidor"}),e.jsx(Ue,{}),e.jsx(Me,{children:e.jsxs(u,{spacing:4,children:[m&&e.jsxs(Ee,{status:"info",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(n,{fontWeight:"bold",children:["Pedido: ",m.orderNumber]}),e.jsxs(n,{fontSize:"sm",children:["Cliente: ",m.clientName||((p=m.client)==null?void 0:p.name)]}),e.jsxs(n,{fontSize:"sm",children:["Total: S/ ",parseFloat(m.total||m.totalAmount||0).toFixed(2)]})]})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Repartidor"}),e.jsx(es,{value:C,onChange:ie=>I(ie.target.value),placeholder:"Selecciona un repartidor",children:i.map(ie=>e.jsxs("option",{value:ie.id,children:[ie.name," - ",ie.phone]},ie.id))})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas adicionales"}),e.jsx(_s,{value:P,onChange:ie=>E(ie.target.value),placeholder:"Instrucciones especiales para el repartidor...",rows:3})]})]})}),e.jsxs(Ps,{children:[e.jsx(O,{variant:"outline",mr:3,onClick:F,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:de,children:"Asignar Repartidor"})]})]})]})},Ge=()=>{var p,ie,oe,cs;return e.jsxs(qe,{isOpen:g,onClose:b,size:"lg",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Detalles del Pedido"}),e.jsx(Ue,{}),e.jsx(Me,{children:m&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsx(L,{variant:"outline",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Pedido:"}),e.jsx(n,{children:m.orderNumber})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado:"}),e.jsx(Se,{colorScheme:_e(m.status),children:w(m.status)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Tipo:"}),e.jsx(n,{children:m.type==="regular"?"Cliente Frecuente":"Cliente Visitante"})]})]})})}),e.jsxs(L,{variant:"outline",children:[e.jsx(Pe,{children:e.jsx(K,{size:"sm",children:"Cliente"})}),e.jsx(W,{children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Nombre:"}),e.jsx(n,{children:m.clientName||((p=m.client)==null?void 0:p.name)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Teléfono:"}),e.jsx(n,{children:m.clientPhone||((ie=m.client)==null?void 0:ie.phone)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Dirección:"}),e.jsx(n,{children:m.clientAddress||((oe=m.client)==null?void 0:oe.address)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Distrito:"}),e.jsx(n,{children:m.clientDistrict||((cs=m.client)==null?void 0:cs.district)})]})]})})]}),e.jsxs(L,{variant:"outline",children:[e.jsx(Pe,{children:e.jsx(K,{size:"sm",children:"Pago"})}),e.jsx(W,{children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Método:"}),e.jsxs(h,{children:[e.jsx(ge,{as:X(m.paymentType,m.paymentMethod),size:16}),e.jsx(n,{children:m.paymentMethod==="vale"?"A Crédito (Vale)":m.paymentMethod==="suscripcion"?"Suscripción":m.paymentMethod==="contraentrega"?m.paymentType==="plin"?"Contraentrega - PLIN":m.paymentType==="yape"?"Contraentrega - Yape":m.paymentType==="cash"?"Contraentrega - Efectivo":"Contraentrega":m.paymentType==="plin"?"PLIN":m.paymentType==="yape"?"Yape":(m.paymentType==="cash","Efectivo")})]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(m.total||m.totalAmount||0).toFixed(2)]})]})]})})]}),e.jsxs(L,{variant:"outline",children:[e.jsx(Pe,{children:e.jsx(K,{size:"sm",children:"Repartidor"})}),e.jsx(W,{children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Nombre:"}),e.jsx(n,{children:m.deliveryPerson?m.deliveryPerson.username:"No asignado"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Teléfono:"}),e.jsx(n,{children:m.deliveryPerson?m.deliveryPerson.phone:"N/A"})]})]})})]}),m.notes&&e.jsxs(L,{variant:"outline",children:[e.jsx(Pe,{children:e.jsx(K,{size:"sm",children:"Notas"})}),e.jsx(W,{children:e.jsx(n,{children:m.notes})})]})]})}),e.jsx(Ps,{children:e.jsx(O,{onClick:b,children:"Cerrar"})})]})]})},$e=()=>e.jsxs(qe,{isOpen:ne,onClose:$,size:"md",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Confirmar Anulación"}),e.jsx(Ue,{}),e.jsx(Me,{children:m&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(Ee,{status:"warning",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"¿Estás seguro de que deseas anular este pedido?"}),e.jsx(n,{fontSize:"sm",children:"Esta acción no se puede deshacer."})]})]}),e.jsx(L,{variant:"outline",p:3,children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Pedido:"}),e.jsxs(n,{children:["#",m.id]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Cliente:"}),e.jsx(n,{children:m.clientName||"Sin nombre"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado actual:"}),e.jsx(Se,{colorScheme:_e(m.status),children:w(m.status)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(m.total||m.totalAmount||0).toFixed(2)]})]})]})})]})}),e.jsxs(Ps,{children:[e.jsx(O,{variant:"outline",mr:3,onClick:$,children:"Cancelar"}),e.jsx(O,{colorScheme:"red",onClick:me,children:"Sí, Anular Pedido"})]})]})]});return t?e.jsx(as,{h:"400px",children:e.jsx(bs,{size:"xl"})}):e.jsxs(N,{p:6,children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(js,{justify:"space-between",align:"center",children:[e.jsxs(N,{children:[e.jsx(K,{size:"lg",mb:2,children:"Gestión de Pedidos"}),e.jsx(n,{color:"gray.600",children:"Administra y asigna repartidores a los pedidos"}),e.jsxs(n,{color:"gray.400",fontSize:"xs",children:["Última actualización: ",k.toLocaleTimeString()]})]}),e.jsx(O,{size:"sm",colorScheme:"blue",variant:"outline",onClick:()=>{r(),y(new Date)},isLoading:t,children:"Actualizar"})]}),e.jsx(L,{children:e.jsx(W,{children:e.jsxs(is,{columns:{base:1,md:4},spacing:4,children:[e.jsxs(U,{children:[e.jsx(G,{children:"Buscar"}),e.jsxs(wt,{children:[e.jsx(kr,{children:e.jsx(Ya,{})}),e.jsx(re,{placeholder:"Buscar por pedido o cliente...",value:o,onChange:p=>c(p.target.value)})]})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Estado"}),e.jsxs(es,{value:d,onChange:p=>j(p.target.value),children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"pending",children:"Pendiente"}),e.jsx("option",{value:"confirmed",children:"Asignado"}),e.jsx("option",{value:"preparing",children:"Preparando"}),e.jsx("option",{value:"ready",children:"Listo"}),e.jsx("option",{value:"delivered",children:"Entregado"}),e.jsx("option",{value:"cancelled",children:"Cancelado"})]})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Pago"}),e.jsxs(es,{value:z,onChange:p=>D(p.target.value),children:[e.jsx("option",{value:"all",children:"Todos los pagos"}),e.jsx("option",{value:"contraentrega",children:"Contraentrega"}),e.jsx("option",{value:"vale",children:"A Crédito (Vale)"}),e.jsx("option",{value:"suscripcion",children:"Suscripción"}),e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"plin",children:"PLIN"})]})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Estadísticas"}),e.jsxs(u,{spacing:1,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Total:"}),e.jsx(Se,{colorScheme:"blue",children:xe.length})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Pendientes:"}),e.jsx(Se,{colorScheme:"orange",children:Ce.pending.length})]})]})]})]})})}),e.jsx(is,{columns:{base:1,md:2,lg:3},spacing:4,children:xe.map(_)}),xe.length===0&&e.jsx(as,{h:"200px",children:e.jsxs(u,{spacing:4,children:[e.jsx(n,{color:"gray.500",fontSize:"lg",children:"No hay pedidos que coincidan con los filtros"}),e.jsx(O,{variant:"outline",onClick:()=>{c(""),j("all"),D("all")},children:"Limpiar filtros"})]})})]}),je(),Ge(),$e()]})},Il=({isOpen:s,onClose:t,onAccept:r,onReject:a,title:i="Términos y Condiciones",showAcceptance:l=!0})=>{const[o,c]=v.useState(null),[d,j]=v.useState(!1),[z,D]=v.useState(!1),[m,T]=v.useState(!1),[C,I]=v.useState(null),k=ss("white","gray.800"),y=ss("gray.700","gray.200"),P=ss("gray.50","gray.700"),E=ss("gray.200","gray.600"),R=async()=>{var V,b,ne;try{j(!0),I(null),console.log("🔄 Cargando términos y condiciones activos...");const x=await ns.get("/api/terms-and-conditions/active");console.log("📦 Respuesta términos activos:",x.data),c(x.data.data),console.log("✅ Términos cargados:",x.data.data?"Sí":"No")}catch(x){console.error("❌ Error fetching terms:",x),console.error("❌ Status:",(V=x.response)==null?void 0:V.status),console.error("❌ Message:",(ne=(b=x.response)==null?void 0:b.data)==null?void 0:ne.message),I("No se pudieron cargar los términos y condiciones")}finally{j(!1)}};v.useEffect(()=>{s&&(console.log("🔍 Modal abierto, reseteando estado"),D(!1),T(!1),R())},[s]);const M=()=>{if(console.log("🔍 handleAccept llamado, accepted:",z,"onAccept:",!!r,"isProcessing:",m),m){console.log("❌ Ya se está procesando, ignorando clic");return}z&&r?(console.log("✅ Ejecutando onAccept"),T(!0),r(o)):console.log("❌ No se puede aceptar - accepted:",z,"onAccept:",!!r)},F=()=>{a?a():t()},g=V=>new Date(V).toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric"});return e.jsxs(qe,{isOpen:s,onClose:t,size:"xl",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{maxW:"800px",maxH:"90vh",bg:k,children:[e.jsx(We,{children:e.jsxs(u,{align:"stretch",spacing:2,children:[e.jsx(n,{fontSize:"xl",fontWeight:"bold",color:"blue.600",children:i}),o&&e.jsxs(h,{justify:"space-between",children:[e.jsxs(Se,{colorScheme:"blue",variant:"subtle",children:["Versión ",o.version]}),e.jsxs(n,{fontSize:"sm",color:"gray.500",children:["Vigente desde: ",g(o.effectiveDate)]})]})]})}),e.jsxs(Me,{overflowY:"auto",pb:4,children:[d&&e.jsx(as,{py:8,children:e.jsx(bs,{size:"xl"})}),C&&e.jsxs(Ee,{status:"error",borderRadius:"md",children:[e.jsx(Te,{}),e.jsx(n,{children:C})]}),o&&!d&&e.jsxs(N,{children:[e.jsx(n,{fontSize:"lg",fontWeight:"semibold",mb:4,color:y,children:o.title}),e.jsx(hs,{mb:4}),e.jsx(N,{whiteSpace:"pre-wrap",fontSize:"sm",lineHeight:"1.6",color:y,maxH:"400px",overflowY:"auto",p:4,bg:P,borderRadius:"md",border:"1px solid",borderColor:E,children:o.content})]})]}),l&&o&&!d&&e.jsx(Ps,{children:e.jsxs(u,{w:"full",spacing:4,children:[e.jsx(In,{isChecked:z,onChange:V=>{console.log("🔍 Checkbox cambiado a:",V.target.checked),D(V.target.checked)},colorScheme:"blue",size:"lg",children:e.jsx(n,{fontSize:"sm",children:"He leído y acepto los términos y condiciones"})}),e.jsxs(h,{w:"full",justify:"space-between",children:[e.jsx(O,{variant:"outline",onClick:F,colorScheme:"red",children:"Rechazar"}),e.jsx(O,{colorScheme:"blue",onClick:M,isDisabled:!z||m,isLoading:m,loadingText:"Procesando...",children:"Aceptar"})]})]})}),!l&&e.jsx(Ps,{children:e.jsx(O,{onClick:t,colorScheme:"blue",children:"Cerrar"})})]})]})},Ur=pt((s,t)=>({districts:[],loading:!1,error:null,fetchDistricts:async()=>{var r,a,i,l;s({loading:!0,error:null});try{const o=await Y.get("/api/districts"),c=o.data.success?o.data.data:o.data;return s({districts:c,loading:!1}),{success:!0,data:c}}catch(o){return console.error("Error al cargar distritos:",o),s({error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al cargar distritos",loading:!1}),{success:!1,error:((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al cargar distritos"}}},getDistrictById:r=>{const{districts:a}=t();return Array.isArray(a)?a.find(i=>i.id===r):null},getDistrictsByFee:r=>{const{districts:a}=t();return Array.isArray(a)?a.filter(i=>i.deliveryFee<=r):[]},updateDistrict:async(r,a)=>{var i,l,o,c;try{const d=await Y.put(`/api/districts/${r}`,a),j=d.data.data||d.data;return s(z=>({districts:Array.isArray(z.districts)?z.districts.map(D=>D.id===r?j:D):[]})),{success:!0,data:j}}catch(d){return console.error("Error al actualizar distrito:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar distrito"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar distrito"}}},createDistrict:async r=>{var a,i,l,o;try{console.log("🔄 Creando distrito con datos:",r);const c=await Y.post("/api/districts",r);console.log("📦 Respuesta del backend:",c.data);const d=c.data.data||c.data;return console.log("📦 Distrito procesado:",d),s(j=>{const z=[...Array.isArray(j.districts)?j.districts:[],d];return console.log("📦 Distritos actualizados en store:",z),{districts:z}}),{success:!0,data:d}}catch(c){return console.error("❌ Error al crear distrito:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al crear distrito"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al crear distrito"}}},clearError:()=>s({error:null})})),An="/assets/img_buyon-CC-6ZbJa.jpeg",_l="/assets/img_paquete_botellas-nUXaTVFq.jpeg",kl="/assets/plin_qr-Mn7UEP9b.jpeg",Nl=()=>{const s=tt(),t=ps();Hs({base:!0,md:!1});const{isOpen:r,onOpen:a,onClose:i}=Fe(),l=()=>{i(),os(!1),p(!1)},{products:o,fetchProducts:c,calculatePrice:d}=Ca(),{deliveryFees:j,fetchDeliveryFees:z}=sr(),{districts:D,fetchDistricts:m}=Ur(),[T,C]=v.useState(1),[I,k]=v.useState(!1),[y,P]=v.useState(!1),[E,R]=v.useState([]),[M,F]=v.useState(!1),[g,V]=v.useState(null),[b,ne]=v.useState(null),[x,$]=v.useState(!1),[q,se]=v.useState(!1),[we,xe]=v.useState(!1),[Ce,_e]=v.useState([]),[w,X]=v.useState(!1),[be,de]=v.useState(null),[A,me]=v.useState(""),[ae,Q]=v.useState(null),[B,ye]=v.useState({name:"",phone:"",email:"",address:"",district:"",reference:"",notes:""}),[_,je]=v.useState([]),[Ge,$e]=v.useState(new Set),[te,S]=v.useState("contraentrega"),[ee,Be]=v.useState("efectivo"),[ks,os]=v.useState(!1),[Ve,p]=v.useState(!1),[ie,oe]=v.useState(!1),[cs,ys]=v.useState(!1),ws=f=>{const H=f.toLowerCase();return H.includes("bidón")||H.includes("bidon")||H.includes("garrafa")?An:H.includes("paquete")||H.includes("pack")||H.includes("botellas")?_l:An};v.useEffect(()=>{c(),z(),m(),ke()},[c,z,m]);const ke=async()=>{try{X(!0),console.log("🔄 Cargando planes de suscripción...");const f=await Y.get("/api/subscription-plans");if(console.log("📦 Respuesta planes:",f.data),f.data.success){const H=f.data.data.map(J=>({id:J.id,name:J.name,bottles:J.totalBottles,price:parseFloat(J.monthlyPrice),bonus:J.bonusBottles,description:J.description,color:["blue","green","purple","orange","pink","teal","red"][J.sortOrder%7],popular:J.sortOrder===2,pricePerBottle:parseFloat(J.pricePerBottle),maxDailyDelivery:J.maxDailyDelivery}));console.log("✅ Planes transformados:",H),_e(H)}}catch(f){console.error("❌ Error al cargar planes de suscripción:",f),t({title:"Error",description:"No se pudieron cargar los planes de suscripción",status:"error",duration:3e3,isClosable:!0})}finally{X(!1)}};v.useEffect(()=>{if(be&&Ce.length>0){const f=Ce.find(H=>H.id===be);f&&(ne(f),F(!0),S("suscripcion"),de(null))}},[be,Ce]);const Es=async f=>{try{console.log("🔄 Buscando suscripciones para DNI:",f);const H=await Y.get(`/api/subscriptions/client/${f}`);return console.log("📦 Respuesta suscripciones:",H.data),H.data.success?(R(H.data.data),H.data.data):[]}catch(H){return console.error("❌ Error al buscar suscripciones:",H),[]}},Gr=async f=>{var H;P(!0);try{const J=await Y.get(`/api/clients/document/${f}`);if(J.data.success){const Z=J.data.data;Q(Z.id),ye({...B,name:Z.name,phone:Z.phone,email:Z.email||"",address:Z.address,district:Z.district,reference:"",notes:""});const Ye=(await Es(f)).filter(fe=>fe.status==="active"&&fe.remainingBottles>0);if(Ye.length>0)S("suscripcion"),F(!0),V(Ye[0]),oe(!0),ys(!1),t({title:"Suscripción activa encontrada",description:`Tienes ${Ye[0].remainingBottles} bidones disponibles de tu suscripción`,status:"success",duration:5e3,isClosable:!0});else try{const fe=await Y.get(`/api/client-preferences/dni/${f}`);if(fe.data.success&&fe.data.data){const Oe=fe.data.data;S(Oe.preferredPaymentMethod),oe(!0);const ds=new Date,Xe=new Date(Oe.validUntil);if(Xe>ds)if(ys(!1),Oe.preferredPaymentMethod==="suscripcion"){if(Oe.subscriptionPlanId){const Ls=Ce.find(mt=>mt.id===Oe.subscriptionPlanId);Ls?(ne(Ls),F(!0)):de(Oe.subscriptionPlanId)}t({title:"Preferencia de suscripción activa",description:"Puedes comprar una nueva suscripción",status:"info",duration:5e3,isClosable:!0})}else t({title:"Modalidad activa encontrada",description:`Tu modalidad de ${Oe.preferredPaymentMethod==="vale"?"vale":"suscripción"} está activa hasta ${Xe.toLocaleDateString()}`,status:"info",duration:5e3,isClosable:!0});else oe(!1),ys(!1),t({title:"Modalidad expirada",description:"Tu modalidad anterior expiró. Elige una nueva modalidad de pago.",status:"warning",duration:5e3,isClosable:!0})}}catch{console.log("No se encontraron preferencias para este cliente")}t({title:"Cliente encontrado",description:`Datos de ${Z.name} cargados automáticamente`,status:"success",duration:3e3,isClosable:!0}),C(3)}else t({title:"Cliente no encontrado",description:"Completa tus datos para registrarte automáticamente",status:"info",duration:5e3,isClosable:!0}),C(2)}catch(J){console.error("Error al buscar cliente:",J),((H=J.response)==null?void 0:H.status)===404?(t({title:"Cliente no encontrado",description:"Completa tus datos para registrarte automáticamente",status:"info",duration:5e3,isClosable:!0}),C(2)):(t({title:"Error al buscar cliente",description:"Intenta nuevamente o regístrate como nuevo cliente",status:"error",duration:5e3,isClosable:!0}),C(2))}finally{P(!1)}},wa=f=>{f.preventDefault(),A.length===8||A.length===11?Gr(A):t({title:"Documento inválido",description:"El DNI debe tener 8 dígitos o el RUC debe tener 11 dígitos",status:"warning",duration:3e3,isClosable:!0})},za=async()=>{var f,H;try{if(k(!0),!A||A.trim()===""){t({title:"DNI requerido",description:"Debes ingresar tu DNI para registrarte",status:"warning",duration:3e3,isClosable:!0});return}const J={name:B.name,document:A,phone:B.phone,email:B.email||"",address:B.address,district:B.district,reference:B.reference||"",notes:B.notes||"",status:"active"},Z=await Y.post("/api/clients",J);if(Z.data.success){const ve=Z.data.data.id;Q(ve),console.log("Cliente registrado con ID:",ve),t({title:"¡Registro exitoso!",description:"Te has registrado automáticamente. Ahora puedes elegir productos y modalidades de pago",status:"success",duration:5e3,isClosable:!0}),C(3),setTimeout(()=>{console.log("ClientId después del registro:",ve),console.log("ClientId en estado:",ae)},100)}else throw new Error(Z.data.message||"Error al registrar")}catch(J){console.error("Error al registrar:",J),t({title:"Error al registrar",description:((H=(f=J.response)==null?void 0:f.data)==null?void 0:H.message)||"No se pudo completar el registro",status:"error",duration:5e3,isClosable:!0})}finally{k(!1)}},Pa=async f=>{if(!Ge.has(f.id)){if(M&&f.type!=="bidon"){t({title:"Solo bidones en suscripción",description:"Con tu suscripción solo puedes pedir bidones de agua",status:"warning",duration:3e3,isClosable:!0});return}$e(H=>new Set(H).add(f.id));try{let H;if(M&&g){const Z=Ce.find(Ye=>Ye.name===g.subscriptionType),ve=Z?parseFloat(Z.pricePerBottle):5;H={unitPrice:ve,totalPrice:ve,originalPrice:ve,discountApplied:0,priceLevel:"subscription"}}else{const Z=await d(f.id,1);if(Z.success)H=Z.data;else throw new Error("Error al calcular precio")}const J=_.findIndex(Z=>Z.productId===f.id);if(J!==-1){const Z=[..._],ve=Z[J].quantity+1;if(M&&g){const Ye=Ce.find(Oe=>Oe.name===g.subscriptionType),fe=Ye?parseFloat(Ye.pricePerBottle):5;Z[J].quantity=ve,Z[J].unitPrice=fe,Z[J].subtotal=fe*ve,Z[J].pricing={unitPrice:fe,totalPrice:fe*ve,originalPrice:fe,discountApplied:0,priceLevel:"subscription"},je(Z)}else{const Ye=await d(f.id,ve);if(Ye.success){const fe=Ye.data;Z[J].quantity=ve,Z[J].unitPrice=parseFloat(fe.unitPrice),Z[J].subtotal=parseFloat(fe.unitPrice)*ve,Z[J].pricing=fe,je(Z)}}}else{const Z={id:`${f.id}-${Date.now()}`,productId:f.id,name:f.name,type:f.type,unitPrice:parseFloat(H.unitPrice),quantity:1,subtotal:parseFloat(H.unitPrice),pricing:H};je([..._,Z])}t({title:"Producto agregado",description:`${f.name} agregado al carrito`,status:"success",duration:2e3,isClosable:!0})}catch(H){console.error("Error al calcular precio:",H)}finally{$e(H=>{const J=new Set(H);return J.delete(f.id),J})}}},Et=async(f,H)=>{if(H<=0){je(_.filter(J=>J.id!==f));return}try{const J=_.find(ve=>ve.id===f);if(!J)return;let Z;if(M&&g){const ve=Ce.find(fe=>fe.name===g.subscriptionType),Ye=ve?parseFloat(ve.pricePerBottle):5;Z={unitPrice:Ye,totalPrice:Ye*H,originalPrice:Ye,discountApplied:0,priceLevel:"subscription"}}else{const ve=await d(J.productId,H);if(ve.success)Z=ve.data;else throw new Error("Error al calcular precio")}je(_.map(ve=>ve.id===f?{...ve,quantity:H,unitPrice:parseFloat(Z.unitPrice),subtotal:parseFloat(Z.unitPrice)*H,pricing:Z}:ve))}catch(J){console.error("Error al actualizar cantidad:",J)}},Aa=(f,H)=>{const J=parseInt(H)||0;J>0?Et(f,J):(H===""||H==="0")&&je(_.map(Z=>Z.id===f?{...Z,quantity:0}:Z))},Ea=(f,H)=>{const J=parseInt(H)||0;J<=0?je(_.filter(Z=>Z.id!==f)):Et(f,J)},gt=()=>{if(!B.district)return 0;const f=D.find(H=>H.name===B.district);return f?parseFloat(f.deliveryFee):0},Tt=()=>_.reduce((f,H)=>f+H.subtotal,0),Fs=()=>Tt()+gt(),tr=async()=>{if(console.log("Estado antes de crear pedido:",{clientId:ae,dni:A,paymentMethod:te,selectedSubscriptionPlan:b,cart:_}),!ae){t({title:"Cliente no registrado",description:"Debes registrarte como cliente para continuar",status:"error",duration:5e3,isClosable:!0}),C(2);return}if(te!=="suscripcion"&&_.length===0){t({title:"Carrito vacío",description:"Agrega al menos un producto al carrito",status:"warning",duration:3e3,isClosable:!0});return}if(te==="suscripcion"&&!b){t({title:"Plan no seleccionado",description:"Selecciona un plan de suscripción",status:"warning",duration:3e3,isClosable:!0});return}if(!B.name||!B.phone||!B.address||!B.district){t({title:"Datos incompletos",description:"Completa todos los campos obligatorios",status:"warning",duration:3e3,isClosable:!0});return}await rr()},Ta=async f=>{se(!0),xe(!1);try{await Xr(),t({title:"Términos aceptados",description:"Has aceptado los términos y condiciones",status:"success",duration:2e3,isClosable:!0})}catch(H){console.error("Error al crear pedido después de aceptar términos:",H),t({title:"Error",description:"Hubo un problema al crear el pedido",status:"error",duration:5e3,isClosable:!0})}},Da=()=>{se(!1),xe(!1),t({title:"Términos rechazados",description:"Debes aceptar los términos y condiciones para continuar",status:"error",duration:3e3,isClosable:!0})},rr=async()=>{var f,H,J,Z,ve,Ye;if(!q&&te!=="suscripcion"){t({title:"Términos y Condiciones",description:"Debes aceptar los términos y condiciones para continuar",status:"warning",duration:3e3,isClosable:!0}),xe(!0);return}k(!0);try{if(M&&g){const fe=_.reduce((Xe,us)=>{const Ls=o.find(mt=>mt.id===us.productId);return Ls&&Ls.type==="bidon"?Xe+us.quantity:Xe},0);if(g.remainingBottles<fe){t({title:"Bidones insuficientes",description:`Solo tienes ${g.remainingBottles} bidones disponibles. Necesitas ${fe} bidones.`,status:"error",duration:5e3,isClosable:!0});return}const Oe={customerName:B.name,customerPhone:B.phone,customerEmail:B.email||"",deliveryAddress:B.address,deliveryDistrict:B.district,deliveryReference:B.reference||"",deliveryNotes:B.notes||"",products:_.map(Xe=>({productId:Xe.productId,quantity:Xe.quantity,price:Xe.unitPrice})),subtotal:Tt(),deliveryFee:gt(),totalAmount:Fs(),paymentMethod:"suscripcion",paymentType:"cash",clientId:ae,subscriptionId:g.id};console.log("Enviando pedido con suscripción:",Oe);const ds=await Y.post("/api/guest-orders",Oe);if(ds.data.success){console.log("Datos para use-bottles:",{subscriptionId:g.id,bottlesToUse:fe,selectedSubscription:g}),console.log("🔍 Respuesta completa del pedido:",ds.data);const Xe=((f=ds.data.data)==null?void 0:f.id)||ds.data.id||"Sin ID";t({title:"¡Pedido creado exitosamente!",description:`Pedido #${Xe} registrado. Se usaron ${fe} bidones de tu suscripción.`,status:"success",duration:5e3,isClosable:!0});const us=((H=ds.data.data)==null?void 0:H.accessToken)||ds.data.accessToken;us?s(`/receipt/${us}`):console.error("❌ No se encontró accessToken en la respuesta")}else throw new Error(ds.data.message||"Error al crear el pedido")}else if(te==="suscripcion"&&b)try{if(console.log("Datos para crear suscripción:",{clientId:ae,dni:A,selectedSubscriptionPlan:b}),!ae)throw new Error("ClientId es requerido para crear suscripción");const fe={clientId:ae,clientDni:A,subscriptionType:b.id,totalBottles:b.bottles+b.bonus,totalAmount:b.price,paidAmount:b.price,expiryDate:null,notes:`Suscripción ${b.name} comprada`},Oe=await Y.post("/api/subscriptions",fe);if(console.log("Suscripción creada:",Oe.data),Oe.data.success){const ds=Oe.data.data;try{const Xe=new Date;Xe.setMonth(Xe.getMonth()+1);const us={dni:A,clientId:ae,preferredPaymentMethod:"suscripcion",subscriptionPlanId:b.id,subscriptionAmount:b.price,subscriptionQuantity:b.bottles+b.bonus,validUntil:Xe.toISOString()};await Y.post("/api/client-preferences",us),console.log("Preferencias de suscripción guardadas:",us),t({title:"Modalidad guardada",description:`Tu modalidad de suscripción estará activa hasta ${Xe.toLocaleDateString()}`,status:"success",duration:4e3,isClosable:!0})}catch(Xe){console.log("Error al guardar preferencias de suscripción:",Xe)}t({title:"🎉 ¡Suscripción activada!",description:`Tu suscripción ${b.name} está lista. Ahora puedes hacer pedidos usando tus ${b.bottles+b.bonus} bidones disponibles (sin costo adicional).`,status:"success",duration:8e3,isClosable:!0}),F(!0),V({id:ds.id,subscriptionType:b.name,totalBottles:b.bottles+b.bonus,remainingBottles:b.bottles+b.bonus,totalAmount:b.price,status:"active"}),ee==="plin"?(C(5),os(!0),p(!1),a()):(je([]),C(3),t({title:"¡Ahora puedes hacer pedidos!",description:`Tienes ${b.bottles+b.bonus} bidones disponibles. Agrega productos al carrito.`,status:"info",duration:6e3,isClosable:!0}))}}catch(fe){throw console.log("Error al crear suscripción:",fe),fe}else{const fe={customerName:B.name,customerPhone:B.phone,customerEmail:B.email||"",deliveryAddress:B.address,deliveryDistrict:B.district,deliveryReference:B.reference||"",deliveryNotes:B.notes||"",products:_.map(ds=>({productId:ds.productId,quantity:ds.quantity,price:ds.unitPrice})),subtotal:Tt(),deliveryFee:gt(),totalAmount:Fs(),paymentMethod:te,paymentType:ee==="efectivo"?"cash":ee,clientId:ae};console.log("Enviando pedido:",fe),console.log("ClientId actual:",ae);const Oe=await Y.post("/api/guest-orders",fe);if(Oe.data.success){if(te==="vale"||te==="suscripcion")try{if(ae){const us=new Date;us.setMonth(us.getMonth()+1);const Ls={dni:A,clientId:ae,preferredPaymentMethod:te,subscriptionPlanId:te==="suscripcion"?b==null?void 0:b.id:null,subscriptionAmount:te==="suscripcion"?Fs():null,subscriptionQuantity:te==="suscripcion"?_.reduce((mt,Wa)=>mt+Wa.quantity,0):null,validUntil:us.toISOString()};await Y.post("/api/client-preferences",Ls),console.log("Preferencias guardadas:",Ls),t({title:"Modalidad guardada",description:`Tu modalidad de ${te==="vale"?"vale":"suscripción"} estará activa hasta ${us.toLocaleDateString()}`,status:"success",duration:4e3,isClosable:!0})}}catch(us){console.log("Error al guardar preferencias:",us)}console.log("🔍 Respuesta completa del pedido normal:",Oe.data);const ds=((J=Oe.data.data)==null?void 0:J.id)||Oe.data.id||"Sin ID";t({title:"¡Pedido creado exitosamente!",description:`Pedido #${ds} registrado correctamente`,status:"success",duration:5e3,isClosable:!0});const Xe=((Z=Oe.data.data)==null?void 0:Z.accessToken)||Oe.data.accessToken;Xe?s(`/receipt/${Xe}`):console.error("❌ No se encontró accessToken en la respuesta")}else throw new Error(Oe.data.message||"Error al crear el pedido")}}catch(fe){console.error("Error al crear pedido:",fe),t({title:"Error al crear pedido",description:((Ye=(ve=fe.response)==null?void 0:ve.data)==null?void 0:Ye.message)||"Error interno del servidor",status:"error",duration:5e3,isClosable:!0})}finally{k(!1)}},Yr=()=>{os(!0),p(!1),a()},nr=async f=>{var H,J;try{if(!b||!ae||!A)throw new Error("Plan de suscripción, cliente o DNI no seleccionado");console.log("🔄 Creando suscripción con datos:",{clientDni:A,subscriptionType:b.name,totalBottles:b.bottles+b.bonus,totalAmount:b.price});const Z={clientDni:A,subscriptionType:b.name,totalBottles:b.bottles+b.bonus,totalAmount:b.price,paidAmount:b.price,notes:`Plan ${b.name} - ${b.bottles+b.bonus} bidones`},ve=await Y.post("/api/subscriptions",Z);if(ve.data.success){const Ye=ve.data.data;console.log("✅ Suscripción creada:",Ye),V({id:Ye.id,subscriptionType:b.name,totalBottles:b.bottles+b.bonus,remainingBottles:b.bottles+b.bonus,totalAmount:b.price,status:"active"}),F(!0),S("suscripcion"),se(!1),je([]),C(3),i(),os(!1),p(!1),t({title:"¡Suscripción creada exitosamente!",description:`Tienes ${b.bottles+b.bonus} bidones disponibles. Agrega productos al carrito.`,status:"success",duration:6e3,isClosable:!0})}}catch(Z){throw console.error("❌ Error al crear suscripción:",Z),t({title:"Error al crear suscripción",description:((J=(H=Z.response)==null?void 0:H.data)==null?void 0:J.message)||"No se pudo crear la suscripción. Inténtalo de nuevo.",status:"error",duration:5e3,isClosable:!0}),Z}},Xr=async()=>{try{te==="suscripcion"&&b?(je([]),C(3),i(),os(!1),p(!1),t({title:"¡Pago confirmado!",description:`Tu suscripción ${b.name} está activa. Ahora puedes hacer pedidos usando tus ${b.bottles+b.bonus} bidones disponibles.`,status:"success",duration:8e3,isClosable:!0})):(await rr(),i(),os(!1),p(!1))}catch(f){console.error("Error al confirmar pago PLIN:",f),t({title:"Error",description:"Hubo un problema al confirmar el pago",status:"error",duration:5e3,isClosable:!0})}},Ia=()=>{let f=`🧾 *COMPROBANTE DE PAGO PLIN*
    
👤 Cliente: ${B.name}
📱 Teléfono: ${B.phone}
🏠 Dirección: ${B.address}
📍 Distrito: ${B.district}

`;te==="suscripcion"&&b?f+=`🎯 *SUSCRIPCIÓN:*
📦 Plan: ${b.name}
💰 Precio: S/ ${b.price}
🔢 Bidones: ${b.bottles} + ${b.bonus} extra
📊 Total bidones: ${b.bottles+b.bonus}

✅ *PAGO REALIZADO VÍA PLIN*`:f+=`🛒 *PEDIDO:*
${_.map(J=>`• ${J.name} x${J.quantity} = S/ ${J.subtotal.toFixed(2)}`).join(`
`)}

💰 *TOTAL: S/ ${Fs().toFixed(2)}*
📦 Flete: S/ ${gt().toFixed(2)}

✅ *PAGO REALIZADO VÍA PLIN*`;const H=`https://wa.me/51961606183?text=${encodeURIComponent(f)}`;window.open(H,"_blank"),p(!0),t({title:"WhatsApp abierto",description:"Envía el comprobante y luego confirma el pago",status:"info",duration:3e3,isClosable:!0})},Qr=f=>{switch(f){case"bidon":return"blue";case"botella":return"green";default:return"gray"}},Jr=f=>{switch(f){case"bidon":return"Bidón";case"botella":return"Botella";default:return f}},_a=()=>e.jsxs(L,{maxW:{base:"100%",sm:"md"},mx:"auto",w:"100%",children:[e.jsx(Pe,{textAlign:"center",p:{base:4,md:6},children:e.jsxs(u,{spacing:{base:3,md:4},children:[e.jsx(ge,{as:Xn,boxSize:{base:8,md:12},color:"blue.500"}),e.jsx(K,{size:{base:"md",md:"lg"},children:"Ingresa tu DNI"}),e.jsx(n,{color:"gray.600",fontSize:{base:"sm",md:"md"},textAlign:"center",children:"Buscaremos tus datos automáticamente para agilizar tu pedido"})]})}),e.jsx(W,{p:{base:4,md:6},children:e.jsx("form",{onSubmit:wa,children:e.jsxs(u,{spacing:{base:3,md:4},children:[e.jsxs(U,{children:[e.jsx(G,{fontSize:{base:"sm",md:"md"},children:"Número de Documento (DNI o RUC)"}),e.jsx(re,{value:A,onChange:f=>me(f.target.value),placeholder:"12345678 (DNI) o 12345678901 (RUC)",size:{base:"md",md:"lg"},textAlign:"center",fontSize:{base:"md",md:"xl"},fontWeight:"bold",maxLength:11})]}),e.jsx(O,{type:"submit",colorScheme:"blue",size:{base:"md",md:"lg"},w:"full",isLoading:y,loadingText:"Buscando...",leftIcon:e.jsx(qs,{}),children:"Buscar Cliente"}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>C(2),children:"Completar datos manualmente"})]})})})]}),ka=()=>e.jsxs(L,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{children:e.jsxs(K,{size:"md",children:[e.jsx(qs,{style:{display:"inline",marginRight:"8px"}}),"Datos del Cliente"]})}),e.jsx(W,{children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Documento"}),e.jsx(re,{value:A,isDisabled:!0,placeholder:"Tu documento",bg:"gray.100"}),e.jsx(Xa,{children:"Documento ingresado en el paso anterior"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Nombre Completo"}),e.jsx(re,{value:B.name,onChange:f=>ye({...B,name:f.target.value}),placeholder:"Tu nombre completo"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Teléfono"}),e.jsx(re,{value:B.phone,onChange:f=>ye({...B,phone:f.target.value}),placeholder:"Tu número de teléfono"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Email (opcional)"}),e.jsx(re,{type:"email",value:B.email,onChange:f=>ye({...B,email:f.target.value}),placeholder:"Tu correo electrónico"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Dirección"}),e.jsx(_s,{value:B.address,onChange:f=>ye({...B,address:f.target.value}),placeholder:"Dirección completa de entrega",rows:3})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Distrito"}),e.jsx(es,{value:B.district,onChange:f=>ye({...B,district:f.target.value}),placeholder:"Selecciona tu distrito",children:Array.isArray(D)?D.map(f=>e.jsxs("option",{value:f.name,children:[f.name," - S/ ",parseFloat(f.deliveryFee).toFixed(2)]},f.id)):null})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Referencia"}),e.jsx(re,{value:B.reference,onChange:f=>ye({...B,reference:f.target.value}),placeholder:"Referencia del lugar (opcional)"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas Adicionales"}),e.jsx(_s,{value:B.notes,onChange:f=>ye({...B,notes:f.target.value}),placeholder:"Información adicional, preferencias especiales, etc. (opcional)",rows:3})]}),e.jsxs(u,{spacing:3,w:"full",children:[e.jsx(O,{colorScheme:"blue",size:"lg",w:"full",onClick:za,isDisabled:!B.name||!B.phone||!B.address||!B.district,children:"Registrarme y Continuar"}),e.jsxs(Ee,{status:"info",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontSize:"sm",fontWeight:"bold",children:"Registro Automático"}),e.jsx(n,{fontSize:"xs",children:"Al continuar, te registrarás automáticamente como cliente para acceder a beneficios especiales como vales y suscripciones."})]})]})]})]})})]}),Na=()=>e.jsxs(u,{spacing:6,w:"full",children:[e.jsxs(L,{w:"full",children:[e.jsxs(Pe,{children:[e.jsxs(K,{size:"md",children:[e.jsx(cr,{style:{display:"inline",marginRight:"8px"}}),M?"Bidones Disponibles (Suscripción)":"Productos Disponibles"]}),M&&e.jsxs(Ee,{status:"info",size:"sm",borderRadius:"md",mt:2,children:[e.jsx(Te,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Modo Suscripción:"})," Solo puedes pedir bidones de agua. Los bidones se descontarán de tu suscripción sin costo adicional."]})]})]}),e.jsx(W,{children:e.jsx(is,{columns:{base:1,md:2},spacing:4,children:o.filter(f=>!M||f.type==="bidon").map(f=>e.jsx(L,{variant:"outline",children:e.jsx(W,{children:e.jsxs(u,{align:"start",spacing:3,children:[e.jsxs(h,{spacing:4,align:"start",w:"full",children:[e.jsx(N,{flexShrink:0,children:e.jsx(_t,{src:ws(f.name),alt:f.name,boxSize:"80px",objectFit:"cover",borderRadius:"md",border:"2px solid #e2e8f0"})}),e.jsx(u,{align:"start",spacing:1,flex:1,children:e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:f.name}),e.jsx(n,{color:"gray.600",fontSize:"sm",children:f.description}),f.name==="Paquete de Botellas de Agua"&&e.jsx(Se,{colorScheme:"green",size:"sm",children:"¡50+ unidades = S/ 9.00 c/u!"})]}),e.jsx(Se,{colorScheme:Qr(f.type),children:Jr(f.type)})]})})]}),e.jsxs(h,{spacing:4,children:[e.jsxs(n,{fontWeight:"bold",color:"blue.600",fontSize:"lg",children:["S/ ",parseFloat(f.unitPrice).toFixed(2)]}),e.jsxs(n,{color:"gray.500",fontSize:"sm",children:["Stock: ",f.stock]})]}),e.jsx(O,{colorScheme:"blue",size:"sm",leftIcon:e.jsx(cr,{}),onClick:()=>Pa(f),isLoading:Ge.has(f.id),loadingText:"Agregando...",w:"full",children:"Agregar al Carrito"})]})})},f.id))})})]}),_.length>0&&e.jsxs(L,{w:"full",children:[e.jsx(Pe,{children:e.jsxs(K,{size:"md",children:[e.jsx(cr,{style:{display:"inline",marginRight:"8px"}}),"Tu Carrito (",_.length," ",_.length===1?"producto":"productos",")"]})}),e.jsx(W,{children:e.jsxs(u,{spacing:4,children:[_.map(f=>{var H;return e.jsx(N,{w:"full",p:3,border:"1px",borderColor:"gray.200",borderRadius:"md",children:e.jsxs(h,{spacing:3,align:"start",children:[e.jsx(_t,{src:ws(f.name),alt:f.name,boxSize:"50px",objectFit:"cover",borderRadius:"md",border:"1px solid #e2e8f0"}),e.jsxs(u,{spacing:2,flex:1,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:f.name}),e.jsx(Se,{colorScheme:Qr(f.type),children:Jr(f.type)})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(u,{align:"start",spacing:0,children:[e.jsxs(n,{color:"gray.600",fontSize:"sm",children:["S/ ",parseFloat(f.unitPrice).toFixed(2)," c/u"]}),((H=f.pricing)==null?void 0:H.priceLevel)==="especial50"&&e.jsx(Se,{colorScheme:"green",size:"sm",children:"¡Descuento 50+ unidades!"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(O,{size:"sm",onClick:()=>Et(f.id,f.quantity-1),children:"-"}),e.jsx(re,{value:f.quantity,onChange:J=>Aa(f.id,J.target.value),onBlur:J=>Ea(f.id,J.target.value),size:"sm",w:"60px",textAlign:"center",type:"number",min:"0",placeholder:"0"}),e.jsx(O,{size:"sm",onClick:()=>Et(f.id,f.quantity+1),children:"+"})]})]}),e.jsx(h,{justify:"space-between",w:"full",children:e.jsxs(n,{fontWeight:"bold",color:"blue.600",children:["Subtotal: S/ ",parseFloat(f.subtotal).toFixed(2)]})})]})]})},f.id)}),e.jsx(hs,{}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Subtotal:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(Tt()).toFixed(2)]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Flete:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(gt()).toFixed(2)]})]}),e.jsx(hs,{}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(Fs()).toFixed(2)]})]})]}),e.jsx(O,{colorScheme:"green",size:"lg",w:"full",onClick:()=>{C(M&&g?5:4)},leftIcon:e.jsx(Ss,{}),children:M&&g?"Continuar con Confirmación":"Continuar con Modalidad"})]})})]})]}),Ra=()=>M&&g?e.jsxs(L,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(ge,{as:Is,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Usar Suscripción"}),e.jsxs(n,{color:"gray.600",textAlign:"center",children:["Tienes ",g.remainingBottles," bidones disponibles de tu suscripción"]}),e.jsxs(Ee,{status:"success",size:"sm",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Suscripción activa:"})," ",g.remainingBottles," bidones disponibles"]})]})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsx(L,{variant:"filled",borderColor:"purple.500",bg:"purple.50",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Tipo de Suscripción:"}),e.jsx(n,{children:g.subscriptionType||"N/A"})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Bidones Totales:"}),e.jsx(n,{children:g.totalBottles||0})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Bidones Restantes:"}),e.jsx(n,{color:"green.600",fontWeight:"bold",children:g.remainingBottles||0})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Total Pagado:"}),e.jsxs(n,{children:["S/ ",g.totalAmount?parseFloat(g.totalAmount).toFixed(2):"0.00"]})]})]})})}),e.jsx(L,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:B.name})]}),e.jsxs(u,{spacing:1,w:"full",align:"stretch",children:[e.jsx(n,{children:"Productos:"}),_.map((f,H)=>e.jsxs(h,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["• ",f.name," x",f.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(f.subtotal).toFixed(2)]})]},H))]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total Bidones:"}),e.jsxs(n,{fontWeight:"bold",color:"purple.600",children:[_.reduce((f,H)=>f+H.quantity,0)," bidones"]})]})]})]})})}),e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:()=>C(5),leftIcon:e.jsx(zs,{}),children:"Usar Suscripción (Sin Pago)"})]})})]}):ie&&!cs?e.jsxs(L,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(ge,{as:fs,boxSize:12,color:"green.500"}),e.jsx(K,{size:"lg",children:"Modalidad de Pago"}),e.jsx(n,{color:"gray.600",textAlign:"center",children:"Tu modalidad de pago está activa este mes"}),e.jsxs(Ee,{status:"success",size:"sm",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Modalidad activa:"})," ",te==="vale"?"A Crédito (Vale)":te==="suscripcion"?"Suscripción Mensual":"Contraentrega"]})]})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsx(L,{variant:"filled",borderColor:"blue.500",bg:"blue.50",children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ws,{value:te,isChecked:!0}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:te==="vale"?"A Crédito (Vale)":te==="suscripcion"?"Suscripción con Beneficios":"Contraentrega"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:te==="vale"?"Paga al final del mes - Se anota en tu vale":te==="suscripcion"?"Pedido recurrente mensual con bidones extra":"Pagas en efectivo o PLIN cuando recibes tu pedido"})]})]})})}),e.jsx(O,{colorScheme:"blue",size:"lg",w:"full",onClick:()=>{te==="suscripcion"?(F(!0),C(3)):C(5)},leftIcon:e.jsx(Bs,{}),children:te==="vale"?"Continuar (Sin Pago Inmediato)":"Continuar con Forma de Pago"})]})})]}):te==="suscripcion"&&!b?(console.log("Mostrando planes de suscripción. Estado actual:",{clientId:ae,dni:A,paymentMethod:te,selectedSubscriptionPlan:b,isSubscriptionMode:M}),M||F(!0),ae?e.jsxs(L,{maxW:"4xl",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(ge,{as:Is,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Elige tu Plan de Suscripción"}),e.jsx(n,{color:"gray.600",textAlign:"center",children:"Selecciona el plan que mejor se adapte a tus necesidades"}),e.jsxs(Ee,{status:"info",size:"sm",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Beneficios de la suscripción:"})," Paga una vez al mes y recibe bidones extra gratis. Después solo pides la cantidad que necesites sin pagar nada más."]})]})]})}),e.jsxs(W,{children:[w?e.jsx(as,{py:8,children:e.jsxs(u,{spacing:4,children:[e.jsx(bs,{size:"xl",color:"blue.500"}),e.jsx(n,{color:"gray.500",children:"Cargando planes de suscripción..."})]})}):e.jsx(is,{columns:{base:1,md:3},spacing:6,children:Ce.map(f=>e.jsxs(L,{variant:(b==null?void 0:b.id)===f.id?"filled":"outline",borderColor:(b==null?void 0:b.id)===f.id?`${f.color}.500`:"gray.200",cursor:"pointer",onClick:()=>ne(f),position:"relative",_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:[f.popular&&e.jsx(Se,{position:"absolute",top:-2,right:4,colorScheme:f.color,variant:"solid",borderRadius:"full",px:3,py:1,children:"Más Popular"}),e.jsx(W,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsxs(u,{spacing:2,children:[e.jsx(n,{fontWeight:"bold",fontSize:"xl",color:`${f.color}.600`,children:f.name}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:f.description})]}),e.jsxs(u,{spacing:1,children:[e.jsxs(n,{fontSize:"3xl",fontWeight:"bold",color:`${f.color}.500`,children:["S/ ",f.price]}),e.jsx(n,{fontSize:"sm",color:"gray.500",children:"por mes"})]}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Bidones incluidos:"}),e.jsx(n,{fontWeight:"bold",children:f.bottles})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Bidones extra:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["+",f.bonus]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Total bidones:"}),e.jsx(n,{fontWeight:"bold",color:`${f.color}.600`,children:f.bottles+f.bonus})]})]}),e.jsx(O,{colorScheme:f.color,variant:(b==null?void 0:b.id)===f.id?"solid":"outline",w:"full",size:"sm",children:(b==null?void 0:b.id)===f.id?"Seleccionado":"Seleccionar"})]})})]},f.id))}),e.jsxs(u,{spacing:4,mt:6,children:[e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:async()=>{if(b)try{await nr("efectivo")}catch(f){console.error("Error al crear suscripción:",f),t({title:"Error",description:"No se pudo crear la suscripción. Inténtalo de nuevo.",status:"error",duration:5e3,isClosable:!0})}else C(5)},leftIcon:e.jsx(Bs,{}),isDisabled:!b,children:"Continuar con Forma de Pago"}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>{S("contraentrega"),F(!1)},children:"Cambiar a Contraentrega"})]})]})]}):e.jsx(L,{maxW:"lg",mx:"auto",children:e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(ge,{as:no,boxSize:12,color:"red.500"}),e.jsx(K,{size:"lg",color:"red.500",children:"Error de Cliente"}),e.jsx(n,{color:"gray.600",textAlign:"center",children:"No se pudo identificar al cliente. Por favor, regístrate nuevamente."}),e.jsx(O,{colorScheme:"blue",onClick:()=>C(2),children:"Volver al Registro"})]})})})):e.jsxs(L,{maxW:{base:"100%",sm:"lg"},mx:"auto",w:"100%",children:[e.jsx(Pe,{textAlign:"center",p:{base:4,md:6},children:e.jsxs(u,{spacing:{base:3,md:4},children:[e.jsx(ge,{as:fs,boxSize:{base:10,md:12},color:"green.500"}),e.jsx(K,{size:{base:"md",md:"lg"},children:"Modalidad de Pago"}),e.jsx(n,{color:"gray.600",textAlign:"center",fontSize:{base:"sm",md:"md"},children:ie?"Tu modalidad anterior expiró. Elige una nueva modalidad:":"Selecciona cómo deseas pagar tu pedido"}),e.jsxs(Ee,{status:ie?"warning":"info",size:"sm",borderRadius:"md",w:"100%",children:[e.jsx(Te,{}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},children:ie?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Modalidad expirada:"})," Tu modalidad anterior ya no está activa. Elige una nueva modalidad de pago para este mes."]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Contraentrega:"})," Pagas cuando recibes el pedido",e.jsx("br",{}),e.jsx("strong",{children:"A Crédito:"})," Se anota en tu vale y pagas al final del mes",e.jsx("br",{}),e.jsx("strong",{children:"Suscripción:"})," Pedido recurrente mensual"]})})]})]})}),e.jsx(W,{p:{base:4,md:6},children:e.jsxs(u,{spacing:{base:4,md:6},w:"100%",children:[e.jsx(ar,{value:te,onChange:f=>{S(f),f==="suscripcion"?g?F(!0):(F(!1),C(4)):F(!1)},w:"100%",children:e.jsxs(ir,{spacing:{base:3,md:4},w:"100%",children:[e.jsx(L,{variant:te==="contraentrega"?"filled":"outline",borderColor:te==="contraentrega"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>{S("contraentrega"),F(!1)},w:"100%",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(h,{spacing:{base:3,md:4},w:"100%",children:[e.jsx(Ws,{value:"contraentrega",flexShrink:0}),e.jsxs(u,{align:"start",spacing:1,flex:1,minW:0,children:[e.jsx(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:"Contraentrega"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},color:"gray.600",noOfLines:2,children:"Pagas en efectivo o PLIN cuando recibes tu pedido"})]})]})})}),e.jsx(L,{variant:te==="vale"?"filled":"outline",borderColor:te==="vale"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>{S("vale"),F(!1)},w:"100%",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(h,{spacing:{base:3,md:4},w:"100%",children:[e.jsx(Ws,{value:"vale",flexShrink:0}),e.jsxs(u,{align:"start",spacing:1,flex:1,minW:0,children:[e.jsx(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:"A Crédito (Vale)"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},color:"gray.600",noOfLines:2,children:"Paga al final del mes - Se anota en tu vale"})]})]})})}),e.jsx(L,{variant:te==="suscripcion"?"filled":"outline",borderColor:te==="suscripcion"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>{S("suscripcion"),g?F(!0):(F(!1),C(4))},w:"100%",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(h,{spacing:{base:3,md:4},w:"100%",align:"start",children:[e.jsx(Ws,{value:"suscripcion",flexShrink:0,mt:1}),e.jsx(u,{align:"start",spacing:1,flex:1,minW:0,children:e.jsx(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:"Suscripción con Beneficios"})})]})})})]})}),e.jsx(O,{colorScheme:"blue",size:"lg",w:"full",onClick:()=>C(5),leftIcon:e.jsx(Bs,{}),children:te==="vale"?"Continuar (Sin Pago Inmediato)":"Continuar con Forma de Pago"})]})})]}),Oa=()=>te==="suscripcion"&&b&&!g?e.jsxs(L,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(ge,{as:Wr,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Confirmar Suscripción"}),e.jsx(n,{color:"gray.600",children:"Revisa los detalles de tu plan de suscripción"})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsx(L,{variant:"outline",w:"full",borderColor:"purple.200",children:e.jsx(W,{children:e.jsxs(u,{spacing:4,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:b.name}),e.jsx(n,{fontSize:"sm",color:"gray.600",textAlign:"center",children:b.description}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones incluidos:"}),e.jsx(n,{fontWeight:"bold",children:b.bottles})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones extra:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["+",b.bonus]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total bidones:"}),e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:b.bottles+b.bonus})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Precio por bidón:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(b.pricePerBottle).toFixed(2)]})]}),e.jsx(hs,{}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",children:"Total a pagar:"}),e.jsxs(n,{fontSize:"xl",fontWeight:"bold",color:"purple.600",children:["S/ ",parseFloat(b.price).toFixed(2)]})]})]})]})})}),e.jsx(L,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Datos del Cliente"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Nombre:"}),e.jsx(n,{fontWeight:"bold",children:B.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"DNI:"}),e.jsx(n,{fontWeight:"bold",children:A})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Teléfono:"}),e.jsx(n,{fontWeight:"bold",children:B.phone})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Email:"}),e.jsx(n,{fontWeight:"bold",children:B.email})]})]})]})})}),e.jsxs(Ee,{status:"info",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"Cómo funciona la suscripción:"}),e.jsxs(n,{fontSize:"sm",children:["• Pagas una vez al mes por adelantado",e.jsx("br",{}),"• Recibes ",b.bottles+b.bonus," bidones inmediatamente",e.jsx("br",{}),"• Después solo pides la cantidad que necesites sin pagar",e.jsx("br",{}),"• Los bidones se descuentan de tu suscripción"]})]})]}),e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:()=>C(6),leftIcon:e.jsx(Bs,{}),children:"Proceder al Pago"})]})})]}):M&&g?e.jsxs(L,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(ge,{as:Is,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Confirmar Pedido con Suscripción"}),e.jsx(n,{color:"gray.600",children:"Usarás bidones de tu suscripción existente"})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(Ee,{status:"info",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"Cómo funciona con suscripción:"}),e.jsxs(n,{fontSize:"sm",children:["• Se descontarán ",_.reduce((f,H)=>{const J=o.find(Z=>Z.id===H.productId);return J&&J.type==="bidon"?f+H.quantity:f},0)," bidones de tu suscripción",e.jsx("br",{}),"• El repartidor NO cobrará nada en la entrega",e.jsx("br",{}),"• Los bidones se descontarán automáticamente",e.jsx("br",{}),"• Quedarán ",g.remainingBottles-_.reduce((f,H)=>{const J=o.find(Z=>Z.id===H.productId);return J&&J.type==="bidon"?f+H.quantity:f},0)," bidones disponibles"]})]})]}),e.jsx(L,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:B.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Modalidad:"}),e.jsx(Se,{colorScheme:"purple",children:"Suscripción (Sin Pago)"})]}),e.jsxs(u,{spacing:1,w:"full",align:"stretch",children:[e.jsx(n,{children:"Productos:"}),_.map((f,H)=>e.jsxs(h,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["• ",f.name," x",f.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(f.subtotal).toFixed(2)]})]},H))]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones a usar:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:[_.reduce((f,H)=>f+H.quantity,0)," bidones"]})]})]})]})})}),e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:rr,leftIcon:e.jsx(zs,{}),isLoading:I,loadingText:"Creando pedido...",children:"Confirmar Pedido con Suscripción"})]})})]}):te==="vale"?e.jsxs(L,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(ge,{as:fs,boxSize:12,color:"orange.500"}),e.jsx(K,{size:"lg",children:"Pago a Crédito"}),e.jsx(n,{color:"gray.600",children:"Tu pedido se anotará en tu vale de crédito"})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(Ee,{status:"info",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"Cómo funciona el pago a crédito:"}),e.jsxs(n,{fontSize:"sm",children:["• Tu pedido se anotará automáticamente en tu vale",e.jsx("br",{}),"• El repartidor NO cobrará nada en la entrega",e.jsx("br",{}),"• Debes pagar todos tus vales al final del mes",e.jsx("br",{}),"• Puedes pagar en efectivo o PLIN cuando sea el momento"]})]})]}),e.jsx(L,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:B.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Modalidad:"}),e.jsx(Se,{colorScheme:"orange",children:"A Crédito (Vale)"})]}),e.jsxs(u,{spacing:1,w:"full",align:"stretch",children:[e.jsx(n,{children:"Productos:"}),_.map((f,H)=>e.jsxs(h,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["• ",f.name," x",f.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(f.subtotal).toFixed(2)]})]},H))]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"orange.600",children:["S/ ",parseFloat(Fs()).toFixed(2)," (A Crédito)"]})]})]})]})})}),e.jsx(O,{colorScheme:"orange",size:"lg",w:"full",onClick:tr,leftIcon:e.jsx(zs,{}),isLoading:I,loadingText:"Creando pedido...",children:"Confirmar Pedido a Crédito"})]})})]}):te==="suscripcion"&&b?e.jsxs(L,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(ge,{as:Is,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Confirmar Suscripción"}),e.jsxs(n,{color:"gray.600",children:["Plan ",b.name," seleccionado"]})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(Ee,{status:"info",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"Cómo funciona la suscripción:"}),e.jsxs(n,{fontSize:"sm",children:["• Pagas una vez al mes por adelantado",e.jsx("br",{}),"• Recibes ",b.bottles+b.bonus," bidones inmediatamente",e.jsx("br",{}),"• Después solo pides la cantidad que necesites sin pagar",e.jsx("br",{}),"• Los bidones se descuentan de tu suscripción"]})]})]}),e.jsx(L,{variant:"outline",w:"full",borderColor:"purple.200",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:b.name}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Precio del plan:"}),e.jsxs(n,{fontWeight:"bold",color:"purple.600",children:["S/ ",b.price]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones incluidos:"}),e.jsx(n,{fontWeight:"bold",children:b.bottles})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones extra:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["+",b.bonus]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total bidones:"}),e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:b.bottles+b.bonus})]})]})]})})}),e.jsx(L,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:B.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Modalidad:"}),e.jsxs(Se,{colorScheme:"purple",children:["Suscripción ",b.name]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total a pagar:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:["S/ ",b.monthlyPrice]})]})]})]})})}),e.jsxs(u,{spacing:4,w:"full",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"¿Cómo deseas pagar?"}),e.jsx(ar,{value:ee,onChange:Be,children:e.jsxs(ir,{spacing:4,w:"full",children:[e.jsx(L,{variant:ee==="efectivo"?"filled":"outline",borderColor:ee==="efectivo"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>Be("efectivo"),children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ws,{value:"efectivo"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"Efectivo"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga en efectivo al repartidor"})]})]})})}),e.jsx(L,{variant:ee==="plin"?"filled":"outline",borderColor:ee==="plin"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>Be("plin"),children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ws,{value:"plin"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"PLIN"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga con PLIN"})]})]})})})]})}),e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:ee==="efectivo"?tr:Yr,leftIcon:e.jsx(zs,{}),isLoading:I,loadingText:"Creando suscripción...",children:ee==="efectivo"?"Confirmar Suscripción":"Pagar con PLIN"})]})]})})]}):e.jsxs(L,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(ge,{as:Bs,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Forma de Pago"}),e.jsx(n,{color:"gray.600",children:"¿Cómo deseas pagar?"})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsx(ar,{value:ee,onChange:Be,children:e.jsxs(ir,{spacing:4,children:[e.jsx(L,{variant:ee==="efectivo"?"filled":"outline",borderColor:ee==="efectivo"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>Be("efectivo"),children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ws,{value:"efectivo"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"Efectivo"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga en efectivo al repartidor"})]})]})})}),e.jsx(L,{variant:ee==="plin"?"filled":"outline",borderColor:ee==="plin"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>Be("plin"),children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ws,{value:"plin"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"PLIN"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Pago digital con QR"})]})]})})})]})}),e.jsx(L,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:B.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Modalidad:"}),e.jsx(Se,{colorScheme:"blue",children:te==="contraentrega"?"Contraentrega":te==="vale"?"A Crédito (Vale)":"Suscripción"})]}),e.jsxs(u,{spacing:1,w:"full",align:"stretch",children:[e.jsx(n,{children:"Productos:"}),_.map((f,H)=>e.jsxs(h,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["• ",f.name," x",f.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(f.subtotal).toFixed(2)]})]},H))]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(Fs()).toFixed(2)]})]})]})]})})}),e.jsx(L,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{spacing:4,children:[e.jsxs(h,{w:"full",justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Términos y Condiciones"}),e.jsx(O,{size:"sm",variant:"outline",colorScheme:"blue",onClick:()=>xe(!0),children:"Ver Términos"})]}),e.jsxs(h,{w:"full",spacing:3,children:[e.jsx(In,{isChecked:q,onChange:f=>se(f.target.checked),colorScheme:"blue",size:"lg"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"He leído y acepto los términos y condiciones del servicio"})]})]})})}),e.jsx(O,{colorScheme:"green",size:"lg",w:"full",onClick:ee==="efectivo"?tr:Yr,leftIcon:e.jsx(zs,{}),isLoading:I,loadingText:"Creando pedido...",isDisabled:!q,children:ee==="efectivo"?"Confirmar Pedido":"Pagar con PLIN"})]})})]}),Fa=()=>e.jsxs(L,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(ge,{as:Bs,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Pago de Suscripción"}),e.jsx(n,{color:"gray.600",children:"Selecciona tu método de pago para la suscripción"})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsx(L,{variant:"outline",w:"full",borderColor:"purple.200",children:e.jsx(W,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:b.name}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total bidones:"}),e.jsx(n,{fontWeight:"bold",children:b.bottles+b.bonus})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Precio por bidón:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(b.pricePerBottle).toFixed(2)]})]}),e.jsx(hs,{}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",children:"Total a pagar:"}),e.jsxs(n,{fontSize:"xl",fontWeight:"bold",color:"purple.600",children:["S/ ",parseFloat(b.price).toFixed(2)]})]})]})})}),e.jsxs(u,{spacing:4,w:"full",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Método de Pago"}),e.jsx(L,{variant:ee==="efectivo"?"filled":"outline",borderColor:ee==="efectivo"?"green.500":"gray.200",cursor:"pointer",onClick:()=>Be("efectivo"),_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(ge,{as:fs,boxSize:8,color:"green.500"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"Pago en Efectivo"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga cuando recibas tu suscripción"})]})]})})}),e.jsx(L,{variant:ee==="plin"?"filled":"outline",borderColor:ee==="plin"?"purple.500":"gray.200",cursor:"pointer",onClick:()=>Be("plin"),_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsx(ge,{as:Ys,boxSize:8,color:"purple.500"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"Pago con Plin"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga con QR de Plin"})]})]})})})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsx(O,{variant:"outline",flex:1,onClick:()=>C(5),children:"← Anterior"}),e.jsx(O,{colorScheme:"purple",flex:1,onClick:()=>{ee==="efectivo"?nr():ee==="plin"&&a()},leftIcon:ee==="efectivo"?e.jsx(zs,{}):e.jsx(Ys,{}),isLoading:I,loadingText:ee==="efectivo"?"Creando suscripción...":"Preparando pago...",children:ee==="efectivo"?"Confirmar Suscripción":"Pagar con Plin"})]})]})})]}),La=()=>e.jsxs(qe,{isOpen:r,onClose:l,size:{base:"full",sm:"md"},isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{mx:{base:0,sm:4},my:{base:0,sm:4},maxH:{base:"100vh",sm:"90vh"},maxW:{base:"100vw",sm:"500px"},w:{base:"100%",sm:"auto"},children:[e.jsx(We,{textAlign:"center",p:{base:3,md:4},children:e.jsxs(u,{spacing:2,children:[e.jsx(ge,{as:Ys,boxSize:{base:6,md:8},color:"purple.500"}),e.jsx(n,{fontSize:{base:"md",md:"lg"},children:"Pago con PLIN"})]})}),e.jsx(Ue,{}),e.jsx(Me,{pb:{base:3,md:4},px:{base:3,md:4},overflowY:"auto",children:e.jsxs(u,{spacing:{base:3,md:4},w:"100%",children:[e.jsxs(Ee,{status:"info",fontSize:{base:"xs",md:"sm"},w:"100%",children:[e.jsx(Te,{}),e.jsx(n,{children:"Escanea el código QR con tu app PLIN"})]}),e.jsx(N,{textAlign:"center",w:"100%",maxW:"250px",mx:"auto",children:e.jsx(_t,{src:kl,alt:"QR PLIN",w:"100%",h:"auto",borderRadius:"md"})}),e.jsxs(u,{spacing:2,w:"100%",children:[e.jsxs(n,{fontWeight:"bold",fontSize:{base:"md",md:"lg"},textAlign:"center",children:["Total a pagar: S/ ",te==="suscripcion"&&b?parseFloat(b.price).toFixed(2):parseFloat(Fs()).toFixed(2)]}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},color:"gray.600",textAlign:"center",children:te==="suscripcion"&&b?`Plan ${b.name} - ${b.bottles+b.bonus} bidones`:"Incluye productos + flete de envío"})]}),e.jsxs(Ee,{status:Ve?"success":"warning",fontSize:{base:"xs",md:"sm"},children:[e.jsx(Te,{}),e.jsx(n,{children:Ve?"✅ Comprobante enviado por WhatsApp. Ahora puedes confirmar el pago.":"Después de pagar, envía el comprobante por WhatsApp"})]}),te==="suscripcion"&&b&&e.jsxs(Ee,{status:"info",fontSize:{base:"xs",md:"sm"},children:[e.jsx(Te,{}),e.jsxs(n,{children:[e.jsx("strong",{children:"Importante:"})," Una vez pagada la suscripción, podrás hacer pedidos usando tus bidones sin costo adicional."]})]}),e.jsxs(u,{spacing:{base:2,md:3},w:"full",children:[e.jsx(O,{colorScheme:"green",size:{base:"md",md:"lg"},w:"full",leftIcon:e.jsx(it,{}),onClick:Ia,fontSize:{base:"sm",md:"md"},children:"Enviar Comprobante por WhatsApp"}),e.jsx(O,{colorScheme:"purple",size:{base:"md",md:"lg"},w:"full",leftIcon:e.jsx(zs,{}),onClick:async()=>{if(te==="suscripcion"&&b)try{k(!0),await nr("plin")}catch(f){console.error("Error en suscripción:",f)}finally{k(!1)}else await Xr()},isLoading:I,loadingText:te==="suscripcion"?"Creando suscripción...":"Creando pedido...",isDisabled:!Ve||I,opacity:Ve?1:.5,fontSize:{base:"sm",md:"md"},children:Ve?"Confirmar Pago y Crear Pedido":"Primero envía el comprobante por WhatsApp"})]})]})})]})]});return e.jsxs(N,{minH:"100vh",bg:"gray.50",py:{base:4,md:8},children:[e.jsx(N,{maxW:"1200px",mx:"auto",px:{base:2,sm:4},children:e.jsxs(u,{spacing:{base:4,md:8},children:[e.jsxs(N,{textAlign:"center",w:"100%",children:[e.jsx(K,{size:{base:"lg",md:"xl"},color:"blue.600",mb:2,children:"Pedido Rápido de Agua"}),e.jsx(n,{color:"gray.600",fontSize:{base:"md",md:"lg"},children:"Proceso simplificado en 5 pasos"})]}),e.jsx(N,{w:"100%",overflowX:"auto",pb:2,children:e.jsx(h,{spacing:{base:1,sm:2,md:4},justify:"center",minW:"max-content",px:{base:2,md:0},children:[1,2,3,4,5,6].map(f=>e.jsxs(u,{spacing:1,minW:{base:"60px",sm:"70px"},children:[e.jsx(N,{w:{base:8,sm:10,md:12},h:{base:8,sm:10,md:12},borderRadius:"full",bg:f<=T?"blue.500":"gray.200",color:f<=T?"white":"gray.500",display:"flex",alignItems:"center",justifyContent:"center",fontSize:{base:"xs",sm:"sm",md:"md"},fontWeight:"bold",flexShrink:0,children:f}),e.jsx(n,{fontSize:{base:"2xs",sm:"xs",md:"sm"},color:f<=T?"blue.600":"gray.500",textAlign:"center",whiteSpace:"nowrap",children:f===1?"DNI":f===2?"Datos":f===3?"Productos":f===4?"Modalidad":f===5?"Confirmar":f===6?"Pago":f})]},f))})}),T===1&&_a(),T===2&&ka(),T===3&&Na(),T===4&&Ra(),T===5&&Oa(),T===6&&Fa(),T>1&&e.jsxs(h,{spacing:4,children:[e.jsx(O,{variant:"outline",onClick:()=>C(T-1),children:"← Anterior"}),T<6&&e.jsx(O,{colorScheme:"blue",onClick:()=>{C(M&&g&&T===3?5:T+1)},children:"Siguiente →"})]})]})}),La(),e.jsx(Il,{isOpen:we,onClose:()=>xe(!1),onAccept:Ta,onReject:Da,title:"Términos y Condiciones - Planta de Agua Aquayara",showAcceptance:!0})]})},Rl=()=>{const[s,t]=v.useState(null),{isOpen:r,onOpen:a,onClose:i}=Fe(),l=ps();Hs({base:!0,md:!1});const o=(q,se=2)=>{if(q==null||q==="")return"0.00";const we=parseFloat(q);return isNaN(we)?"0.00":we.toFixed(se)},{deliveryFees:c,loading:d,error:j,fetchDeliveryFees:z,createDeliveryFee:D,updateDeliveryFee:m,deleteDeliveryFee:T,clearError:C}=sr(),{districts:I,loading:k,error:y,fetchDistricts:P,updateDistrict:E,createDistrict:R,clearError:M}=Ur(),[F,g]=v.useState({name:"",price:0});v.useEffect(()=>{console.log("🔄 Cargando tarifas de envío y distritos..."),z().then(q=>{console.log("📦 Resultado de fetchDeliveryFees:",q),console.log("📦 deliveryFees en estado:",c)}),P().then(q=>{console.log("📦 Resultado de fetchDistricts:",q),console.log("📦 districts en estado:",I)})},[z,P]),v.useEffect(()=>{j&&(l({title:"Error",description:j,status:"error",duration:3e3,isClosable:!0}),C())},[j,l,C]);const V=async q=>{q.preventDefault(),console.log("🔄 Enviando formulario con datos:",F),console.log("🔄 Editando distrito:",s);const se=s?await E(s.id,{name:F.name,deliveryFee:F.price}):await R({name:F.name,deliveryFee:F.price});console.log("📦 Resultado de la operación:",se),se.success&&(l({title:s?"Distrito actualizado":"Distrito creado",description:`El distrito ha sido ${s?"actualizado":"creado"}`,status:"success",duration:2e3,isClosable:!0}),x(),i())},b=q=>{t(q),g({name:q.name,price:q.deliveryFee||0}),a()},ne=async q=>{window.confirm("¿Estás seguro de que quieres eliminar este distrito?")&&l({title:"Función no disponible",description:"La eliminación de distritos no está disponible por el momento",status:"warning",duration:2e3,isClosable:!0})},x=()=>{g({name:"",price:0}),t(null)},$=()=>{x(),a()};return d?e.jsx(as,{h:"400px",children:e.jsx(bs,{size:"xl"})}):e.jsxs(N,{p:6,children:[e.jsxs(js,{justify:"space-between",align:"center",mb:6,children:[e.jsx(K,{size:"lg",color:"gray.700",children:"Gestión de Distritos y Fletes"}),e.jsx(O,{colorScheme:"blue",leftIcon:e.jsx(Rr,{}),onClick:$,children:"Nuevo Distrito"})]}),I.length===0?e.jsxs(Ee,{status:"info",children:[e.jsx(Te,{}),"No hay distritos configurados."]}):e.jsx(is,{columns:{base:1,md:2,lg:3},spacing:6,children:Array.isArray(I)?I.map((q,se)=>e.jsxs(L,{variant:"outline",children:[e.jsx(Pe,{children:e.jsxs(js,{justify:"space-between",align:"center",children:[e.jsx(K,{size:"md",children:q.name||"Sin nombre"}),e.jsx(Se,{colorScheme:"green",children:"Activo"})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:3,align:"start",children:[e.jsxs(h,{children:[e.jsx(fs,{color:"gray.500"}),e.jsxs(n,{fontSize:"lg",fontWeight:"bold",color:"blue.600",children:["S/ ",o(q.deliveryFee||0)]})]}),e.jsxs(h,{spacing:2,w:"full",justify:"end",children:[e.jsx(De,{size:"sm",icon:e.jsx(qt,{}),onClick:()=>b(q),colorScheme:"blue",variant:"outline"}),e.jsx(De,{size:"sm",icon:e.jsx(Or,{}),onClick:()=>ne(q.id),colorScheme:"red",variant:"outline"})]})]})})]},q.id||`district-${se}`)):null}),e.jsxs(qe,{isOpen:r,onClose:i,size:"lg",isCentered:!0,children:[e.jsx(Le,{}),e.jsx(He,{children:e.jsxs("form",{onSubmit:V,children:[e.jsx(We,{children:s?"Editar Distrito":"Nuevo Distrito"}),e.jsx(Ue,{}),e.jsx(Me,{children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Nombre del Distrito/Ciudad"}),e.jsx(re,{value:F.name,onChange:q=>g({...F,name:q.target.value}),placeholder:"Ej: San Isidro, Miraflores, Lima Centro"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Precio de Flete por Distrito (S/)"}),e.jsx(_n,{value:F.price,onChange:q=>g({...F,price:parseFloat(q)||0}),min:0,precision:2,children:e.jsx(kn,{})})]})]})}),e.jsxs(Ps,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:i,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",type:"submit",children:s?"Actualizar":"Crear"})]})]})})]})]})},Ol=()=>{const s=tt(),{id:t}=On(),r=ps(),a=Hs({base:!0,md:!1}),[i,l]=v.useState(null),[o,c]=v.useState(!0),[d,j]=v.useState("boleta");v.useEffect(()=>{(async()=>{var y;try{if(t){try{const E=await Y.get(`/api/guest-orders/token/${t}`);if(E.data.success){const R=E.data.data;console.log("🔍 OrderData recibido del servidor:",R),console.log("🔍 Products en orderData:",R.products),l({id:R.id,client:{name:R.customerName,phone:R.customerPhone,email:R.customerEmail,address:R.deliveryAddress,district:R.deliveryDistrict,reference:R.deliveryNotes,notes:R.deliveryNotes},items:((y=R.products)==null?void 0:y.map(M=>{var F;return{name:((F=M.product)==null?void 0:F.name)||"Producto",quantity:M.quantity,unitPrice:M.price,subtotal:M.subtotal}}))||[],paymentMethod:R.paymentMethod,paymentType:R.paymentType,subtotal:R.totalAmount-R.deliveryFee,deliveryFee:R.deliveryFee,total:R.totalAmount,status:R.status==="pending"?"pendiente":R.status,createdAt:R.createdAt});return}}catch{console.log("No se pudo cargar desde el servidor, intentando localStorage")}const P=localStorage.getItem("guestOrderData");if(P){const E=JSON.parse(P);l({id:t,...E,status:"pendiente",createdAt:new Date().toISOString()})}}else{const P=localStorage.getItem("guestOrderData");if(P){const E=JSON.parse(P);l({id:"temp",...E,status:"pendiente",createdAt:new Date().toISOString()})}}}catch(P){console.error("Error al cargar pedido:",P),r({title:"Error",description:"No se pudo cargar el pedido",status:"error",duration:3e3,isClosable:!0})}finally{c(!1)}})()},[t,r]);const z=async()=>{if(i)try{r({title:"Generando PDF",description:"Preparando el documento...",status:"info",duration:2e3,isClosable:!0}),console.log("Datos del order original:",i),console.log("Items del order:",i.items),console.log("Payment method del order:",i.paymentMethod);const k={};i.items.forEach((g,V)=>{const b=`${g.name}-${g.unitPrice}`;k[b]=(k[b]||0)+1,console.log(`🔍 Item ${V}:`,{name:g.name,quantity:g.quantity,unitPrice:g.unitPrice,subtotal:g.subtotal,key:b})}),console.log("Conteo de productos:",k);const y=Object.entries(k).filter(([g,V])=>V>1);y.length>0&&console.warn("⚠️ Productos duplicados detectados:",y);const P={id:i.id,customerName:i.client.name,customerPhone:i.client.phone,customerEmail:i.client.email||null,deliveryAddress:i.client.address,deliveryDistrict:i.client.district,deliveryNotes:i.client.reference||null,paymentMethod:i.paymentMethod||"contraentrega",paymentType:i.paymentType||"cash",orderDetails:i.items.map(g=>(console.log("Mapeando item para orderDetails:",g),{product:{name:g.name},productName:g.name,quantity:parseInt(g.quantity),unitPrice:parseFloat(g.unitPrice),subtotal:parseFloat(g.subtotal)})),items:[],subtotal:parseFloat(i.subtotal),deliveryFee:parseFloat(i.deliveryFee),total:parseFloat(i.total),status:i.status,createdAt:i.createdAt};console.log("Datos finales enviados al backend:",P),console.log("Datos del pedido que se envían al backend:",{order:i,orderData:P,items:i.items,subtotal:i.subtotal,deliveryFee:i.deliveryFee,total:i.total}),console.log("Llamando al endpoint del backend para generar PDF..."),console.log("URL:","/api/guest-payments/generate-pdf"),console.log("Datos enviados:",{orderData:P,documentType:"boleta"});const E=await Y.post("/api/guest-payments/generate-pdf",{orderData:P,documentType:d},{responseType:"blob"});console.log("Respuesta del backend:",{status:E.status,headers:E.headers,dataType:typeof E.data,dataLength:E.data.length});const R=new Blob([E.data],{type:"application/pdf"}),M=window.URL.createObjectURL(R),F=document.createElement("a");F.href=M,F.download=`${d}_${i.id}.pdf`,document.body.appendChild(F),F.click(),document.body.removeChild(F),window.URL.revokeObjectURL(M),r({title:"PDF Generado",description:"El documento se ha descargado exitosamente",status:"success",duration:3e3,isClosable:!0})}catch(k){console.error("Error al generar PDF:",k),r({title:"Error",description:"Error al generar el PDF",status:"error",duration:3e3,isClosable:!0})}},D=()=>{window.print()},m=()=>{const k=`Hola, tengo una consulta sobre mi pedido #${i==null?void 0:i.id}`,y=`https://wa.me/51961606183?text=${encodeURIComponent(k)}`;window.open(y,"_blank")},T=()=>{localStorage.removeItem("guestOrderData"),s("/guest-order")},C=k=>{switch(k){case"pendiente":return"yellow";case"confirmado":return"blue";case"en_preparacion":return"orange";case"en_camino":return"purple";case"entregado":return"green";case"cancelado":return"red";default:return"gray"}},I=k=>{switch(k){case"pendiente":return"Pendiente";case"confirmado":return"Confirmado";case"en_preparacion":return"En Preparación";case"en_camino":return"En Camino";case"entregado":return"Entregado";case"cancelado":return"Cancelado";default:return k}};return o?e.jsx(as,{h:"400px",children:e.jsx(bs,{size:"xl"})}):i?e.jsx(N,{minH:"100vh",bg:"gray.50",py:8,children:e.jsx(N,{maxW:"800px",mx:"auto",px:4,children:e.jsxs(u,{spacing:8,children:[e.jsxs(N,{textAlign:"center",children:[e.jsx(K,{size:"xl",color:"blue.600",mb:2,children:"Recibo de Pedido"}),e.jsx(n,{color:"gray.600",fontSize:"lg",children:"Comprobante de tu pedido de agua"})]}),e.jsxs(L,{w:"full",children:[e.jsx(Pe,{children:e.jsxs(js,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(K,{size:"md",color:"gray.700",children:["Pedido #",i.id]}),e.jsx(n,{fontSize:"sm",color:"gray.500",children:new Date(i.createdAt).toLocaleString()})]}),e.jsx(Se,{colorScheme:C(i.status),size:"lg",children:I(i.status)})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(N,{w:"full",p:4,bg:"gray.50",borderRadius:"md",children:[e.jsxs(n,{fontWeight:"bold",mb:3,color:"gray.700",children:[e.jsx(zr,{style:{display:"inline",marginRight:"8px"}}),"Información del Cliente"]}),e.jsxs(is,{columns:{base:1,md:2},spacing:3,children:[e.jsxs(N,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Nombre:"}),e.jsx(n,{fontWeight:"bold",children:i.client.name})]}),e.jsxs(N,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Teléfono:"}),e.jsx(n,{fontWeight:"bold",children:i.client.phone})]}),i.client.email&&e.jsxs(N,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Email:"}),e.jsx(n,{fontWeight:"bold",children:i.client.email})]}),e.jsxs(N,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Distrito:"}),e.jsx(n,{fontWeight:"bold",children:i.client.district})]})]}),e.jsxs(N,{mt:3,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Dirección:"}),e.jsx(n,{fontWeight:"bold",children:i.client.address})]}),i.client.reference&&e.jsxs(N,{mt:2,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Referencia:"}),e.jsx(n,{fontWeight:"bold",children:i.client.reference})]})]}),e.jsxs(N,{w:"full",children:[e.jsxs(n,{fontWeight:"bold",mb:3,color:"gray.700",children:[e.jsx(Ss,{style:{display:"inline",marginRight:"8px"}}),"Productos Solicitados"]}),a?e.jsx(u,{spacing:3,children:i.items.map((k,y)=>e.jsx(L,{variant:"outline",w:"full",children:e.jsx(W,{children:e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:k.name}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["Cantidad: ",k.quantity]}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["S/ ",parseFloat(k.unitPrice).toFixed(2)," c/u"]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Subtotal:"}),e.jsxs(n,{fontWeight:"bold",color:"blue.600",children:["S/ ",parseFloat(k.subtotal).toFixed(2)]})]})]})})},y))}):e.jsxs(Zs,{variant:"simple",children:[e.jsx(et,{children:e.jsxs(gs,{children:[e.jsx(le,{children:"Producto"}),e.jsx(le,{isNumeric:!0,children:"Cantidad"}),e.jsx(le,{isNumeric:!0,children:"Precio Unit."}),e.jsx(le,{isNumeric:!0,children:"Subtotal"})]})}),e.jsx(st,{children:i.items.map((k,y)=>e.jsxs(gs,{children:[e.jsx(ce,{children:e.jsx(u,{align:"start",spacing:1,children:e.jsx(n,{fontWeight:"bold",children:k.name})})}),e.jsx(ce,{isNumeric:!0,children:k.quantity}),e.jsxs(ce,{isNumeric:!0,children:["S/ ",parseFloat(k.unitPrice).toFixed(2)]}),e.jsxs(ce,{isNumeric:!0,fontWeight:"bold",color:"blue.600",children:["S/ ",parseFloat(k.subtotal).toFixed(2)]})]},y))})]})]}),e.jsx(N,{w:"full",p:4,border:"1px",borderColor:"gray.200",borderRadius:"md",children:e.jsxs(u,{spacing:2,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Subtotal:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(i.subtotal).toFixed(2)]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Flete:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(i.deliveryFee).toFixed(2)]})]}),e.jsx(hs,{}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(i.total).toFixed(2)]})]})]})}),i.client.notes&&e.jsxs(N,{w:"full",p:4,bg:"yellow.50",borderRadius:"md",children:[e.jsx(n,{fontWeight:"bold",mb:2,color:"gray.700",children:"Notas Adicionales:"}),e.jsx(n,{fontSize:"sm",children:i.client.notes})]}),e.jsx(N,{w:"full",maxW:"300px",children:e.jsxs(U,{children:[e.jsx(G,{children:"Tipo de Documento"}),e.jsxs(es,{value:d,onChange:k=>j(k.target.value),children:[e.jsx("option",{value:"boleta",children:"Boleta"}),e.jsx("option",{value:"factura",children:"Factura"})]})]})}),e.jsxs(is,{columns:{base:1,md:2,lg:4},spacing:4,w:"full",children:[e.jsx(O,{leftIcon:e.jsx(Fr,{}),colorScheme:"blue",variant:"outline",onClick:z,children:"Descargar PDF"}),e.jsx(O,{leftIcon:e.jsx(co,{}),colorScheme:"gray",variant:"outline",onClick:D,children:"Imprimir"}),e.jsx(O,{leftIcon:e.jsx(it,{}),colorScheme:"green",variant:"outline",onClick:m,children:"WhatsApp"}),e.jsx(O,{leftIcon:e.jsx(zr,{}),colorScheme:"purple",onClick:T,children:"Nuevo Pedido"})]})]})})]})]})})}):e.jsx(as,{h:"400px",children:e.jsxs(Ee,{status:"error",children:[e.jsx(Te,{}),"No se encontró el pedido"]})})},Fl=()=>{var k;const s=tt(),{id:t}=On(),r=ps();Hs({base:!0,md:!1});const[a,i]=v.useState(null),[l,o]=v.useState(!1),[c,d]=v.useState(t||""),[j,z]=v.useState(!1);v.useEffect(()=>{t&&D(t)},[t]);const D=async y=>{o(!0),z(!1);try{const P=await axios.get(`/api/guest-orders/${y}`),E=P.data.success?P.data.data:P.data;E?i(E):z(!0)}catch(P){console.error("Error al cargar pedido:",P),z(!0)}finally{o(!1)}},m=()=>{if(!c.trim()){r({title:"ID requerido",description:"Ingresa un número de pedido",status:"warning",duration:3e3,isClosable:!0});return}D(c.trim())},T=y=>{switch(y){case"pendiente":return{color:"yellow",text:"Pendiente",icon:ln,description:"Tu pedido está siendo procesado"};case"confirmado":return{color:"blue",text:"Confirmado",icon:lr,description:"Tu pedido ha sido confirmado"};case"en_preparacion":return{color:"orange",text:"En Preparación",icon:Ss,description:"Tu pedido está siendo preparado"};case"en_camino":return{color:"purple",text:"En Camino",icon:Ss,description:"Tu pedido está en camino"};case"entregado":return{color:"green",text:"Entregado",icon:lr,description:"Tu pedido ha sido entregado"};case"cancelado":return{color:"red",text:"Cancelado",icon:po,description:"Tu pedido ha sido cancelado"};default:return{color:"gray",text:y,icon:ln,description:"Estado desconocido"}}},C=y=>{switch(y){case"pendiente":return 20;case"confirmado":return 40;case"en_preparacion":return 60;case"en_camino":return 80;case"entregado":return 100;case"cancelado":return 0;default:return 0}},I=()=>[{key:"pendiente",label:"Pendiente",description:"Pedido recibido"},{key:"confirmado",label:"Confirmado",description:"Pedido confirmado"},{key:"en_preparacion",label:"En Preparación",description:"Preparando pedido"},{key:"en_camino",label:"En Camino",description:"Enviando pedido"},{key:"entregado",label:"Entregado",description:"Pedido entregado"}];return l?e.jsx(as,{h:"400px",children:e.jsx(bs,{size:"xl"})}):e.jsx(N,{minH:"100vh",bg:"gray.50",py:8,children:e.jsx(N,{maxW:"800px",mx:"auto",px:4,children:e.jsxs(u,{spacing:8,children:[e.jsxs(N,{textAlign:"center",children:[e.jsx(K,{size:"xl",color:"blue.600",mb:2,children:"Seguimiento de Pedido"}),e.jsx(n,{color:"gray.600",fontSize:"lg",children:"Consulta el estado de tu pedido"})]}),e.jsxs(L,{w:"full",children:[e.jsx(Pe,{children:e.jsx(K,{size:"md",color:"gray.700",children:"Buscar Pedido"})}),e.jsx(W,{children:e.jsxs(h,{spacing:4,children:[e.jsxs(wt,{flex:1,children:[e.jsx(kr,{pointerEvents:"none",children:e.jsx(Qn,{color:"gray.300"})}),e.jsx(re,{placeholder:"Ingresa el número de pedido",value:c,onChange:y=>d(y.target.value),onKeyPress:y=>y.key==="Enter"&&m()})]}),e.jsx(O,{colorScheme:"blue",onClick:m,isLoading:l,loadingText:"Buscando...",children:"Buscar"})]})})]}),j&&e.jsxs(Ee,{status:"error",borderRadius:"md",children:[e.jsx(Te,{}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",children:"Pedido no encontrado"}),e.jsx(n,{fontSize:"sm",children:"Verifica que el número de pedido sea correcto"})]})]}),a&&e.jsxs(L,{w:"full",children:[e.jsx(Pe,{children:e.jsxs(js,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(K,{size:"md",color:"gray.700",children:["Pedido #",a.id]}),e.jsx(n,{fontSize:"sm",color:"gray.500",children:new Date(a.createdAt).toLocaleString()})]}),e.jsx(Se,{colorScheme:T(a.status).color,size:"lg",children:T(a.status).text})]})}),e.jsx(W,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(N,{w:"full",p:4,bg:`${T(a.status).color}.50`,borderRadius:"md",children:[e.jsxs(h,{spacing:3,mb:3,children:[pe.createElement(T(a.status).icon,{color:`${T(a.status).color}.500`,size:"24px"}),e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:T(a.status).text})]}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:T(a.status).description}),e.jsx(Qa,{value:C(a.status),colorScheme:T(a.status).color,size:"sm",mt:3})]}),e.jsxs(N,{w:"full",children:[e.jsx(n,{fontWeight:"bold",mb:4,color:"gray.700",children:"Progreso del Pedido"}),e.jsx(u,{spacing:3,children:I().map((y,P)=>{const E=C(a.status)>C(y.key),R=a.status===y.key;return e.jsxs(h,{w:"full",spacing:4,children:[e.jsx(N,{w:"8",h:"8",borderRadius:"full",bg:E?"green.500":R?`${T(a.status).color}.500`:"gray.300",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"sm",children:E?e.jsx(lr,{}):P+1}),e.jsxs(u,{align:"start",spacing:1,flex:1,children:[e.jsx(n,{fontWeight:R?"bold":"normal",children:y.label}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:y.description})]})]},y.key)})})]}),e.jsxs(N,{w:"full",p:4,bg:"gray.50",borderRadius:"md",children:[e.jsx(n,{fontWeight:"bold",mb:3,color:"gray.700",children:"Información de Entrega"}),e.jsxs(is,{columns:{base:1,md:2},spacing:3,children:[e.jsxs(N,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:a.clientName||"N/A"})]}),e.jsxs(N,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Teléfono:"}),e.jsx(n,{fontWeight:"bold",children:a.clientPhone||"N/A"})]}),e.jsxs(N,{colSpan:{base:1,md:2},children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Dirección:"}),e.jsx(n,{fontWeight:"bold",children:a.deliveryAddress||"N/A"})]})]})]}),e.jsxs(N,{w:"full",children:[e.jsx(n,{fontWeight:"bold",mb:3,color:"gray.700",children:"Productos Solicitados"}),e.jsx(u,{spacing:2,children:((k=a.items)==null?void 0:k.map((y,P)=>e.jsxs(h,{justify:"space-between",w:"full",p:2,bg:"gray.50",borderRadius:"md",children:[e.jsxs(n,{fontSize:"sm",children:[y.name," x ",y.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(y.subtotal).toFixed(2)]})]},P)))||e.jsx(n,{fontSize:"sm",color:"gray.500",children:"No hay información de productos"})})]}),e.jsx(N,{w:"full",p:4,border:"1px",borderColor:"gray.200",borderRadius:"md",children:e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(a.total||0).toFixed(2)]})]})}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsx(O,{leftIcon:e.jsx(zr,{}),colorScheme:"blue",onClick:()=>s("/guest-order"),flex:1,children:"Nuevo Pedido"}),e.jsx(O,{leftIcon:e.jsx(Ss,{}),colorScheme:"green",variant:"outline",onClick:()=>s(`/receipt/${a.id}`),flex:1,children:"Ver Recibo"})]})]})})]})]})})})},Ll=()=>{const{user:s}=Rs(),{updateGuestOrder:t}=Hr(),r=ps(),[a,i]=v.useState(!0),[l,o]=v.useState([]),[c,d]=v.useState([]),[j,z]=v.useState([]),[D,m]=v.useState([]),[T,C]=v.useState("orders"),[I,k]=v.useState("all"),[y,P]=v.useState(null),[E,R]=v.useState(null),{isOpen:M,onOpen:F,onClose:g}=Fe(),{isOpen:V,onOpen:b,onClose:ne}=Fe(),{isOpen:x,onOpen:$,onClose:q}=Fe(),[se,we]=v.useState({clientId:"",productId:"",quantity:1,notes:""});v.useEffect(()=>{xe(),Ce(),_e(),w();const S=setInterval(xe,3e4);return()=>clearInterval(S)},[]);const xe=async()=>{try{console.log("🔍 DeliveryDashboard - Usuario actual:",s),console.log("🔍 DeliveryDashboard - ID del usuario:",s==null?void 0:s.id);const S=await Y.get("/api/delivery/orders");if(console.log("🔍 DeliveryDashboard - Respuesta del servidor:",S.data),S.data.success){const ee=S.data.data||[];console.log("🔍 DeliveryDashboard - Pedidos recibidos:",ee.length),o(Array.isArray(ee)?ee:[])}else console.error("Error en la respuesta:",S.data.message),o([])}catch(S){console.error("Error al cargar pedidos:",S),o([]),r({title:"Error",description:"No se pudieron cargar los pedidos",status:"error",duration:3e3,isClosable:!0})}finally{i(!1)}},Ce=async()=>{try{const S=await Y.get(`/api/vouchers/delivery-person/${s==null?void 0:s.id}`);if(console.log("🔍 DeliveryDashboard - Vales recibidos:",S.data),S.data.success){const ee=S.data.data||[];d(Array.isArray(ee)?ee:[])}else d([])}catch(S){console.error("Error al cargar vales:",S),d([])}},_e=async()=>{try{const S=await Y.get("/api/clients");S.data.success&&Array.isArray(S.data.data)?z(S.data.data):z([])}catch(S){console.error("Error al cargar clientes:",S),z([])}},w=async()=>{try{const S=await Y.get("/api/products");S.data.success&&Array.isArray(S.data.data)?m(S.data.data):m([])}catch(S){console.error("Error al cargar productos:",S),m([])}},X=S=>{switch(S){case"confirmed":return"blue";case"preparing":return"yellow";case"ready":return"purple";case"delivered":return"green";case"cancelled":return"red";default:return"gray"}},be=S=>{switch(S){case"confirmed":return"Confirmado";case"preparing":return"Preparando";case"ready":return"Listo";case"delivered":return"Entregado";case"cancelled":return"Cancelado";default:return"Desconocido"}},de=(S,ee)=>{if(ee==="suscripcion")return Is;switch(S){case"cash":case"efectivo":return fs;case"plin":return Ys;case"yape":return Ys;case"transfer":return Bs;default:return fs}},A={total:l.length,confirmed:l.filter(S=>S.status==="confirmed").length,preparing:l.filter(S=>S.status==="preparing").length,ready:l.filter(S=>S.status==="ready").length,delivered:l.filter(S=>S.status==="delivered").length,cancelled:l.filter(S=>S.status==="cancelled").length},me=l.filter(S=>I==="all"?!0:I==="asignado"?S.status==="confirmed":I==="en_camino"?S.status==="preparing"||S.status==="ready":I==="entregado"?S.status==="delivered":!0),ae=(S,ee)=>{const Be=encodeURIComponent(ee);window.open(`https://wa.me/51${S}?text=${Be}`,"_blank")},Q=S=>{const ee=encodeURIComponent(S);window.open(`https://www.google.com/maps/search/?api=1&query=${ee}`,"_blank")},B=S=>{P(S),b()},ye=(S,ee)=>{P({...S,newStatus:ee}),F()},_=async()=>{if(y)try{const S={status:y.newStatus};await t(y.id,S),r({title:"Estado actualizado",description:`El pedido ahora está ${be(y.newStatus).toLowerCase()}`,status:"success",duration:3e3,isClosable:!0}),g(),P(null),xe()}catch{r({title:"Error",description:"No se pudo actualizar el estado",status:"error",duration:3e3,isClosable:!0})}},je=S=>{var ee,Be,ks,os;return e.jsx(L,{variant:"outline",shadow:"sm",borderRadius:"lg",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(u,{spacing:{base:2,md:3},align:"stretch",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(u,{align:"start",spacing:.5,flex:1,minW:0,children:[e.jsx(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},noOfLines:1,children:S.orderNumber||`#${S.id}`}),e.jsx(n,{fontSize:{base:"2xs",md:"xs"},color:"gray.500",noOfLines:1,children:S.type==="regular"?"Cliente Frecuente":"Cliente Visitante"})]}),e.jsx(Se,{colorScheme:X(S.status),fontSize:{base:"2xs",md:"xs"},px:{base:1,md:2},py:.5,children:be(S.status)})]}),e.jsxs(u,{spacing:{base:1.5,md:2},align:"stretch",children:[e.jsxs(h,{spacing:2,w:"full",children:[e.jsx(qs,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},fontWeight:"medium",noOfLines:1,flex:1,children:S.clientName||((ee=S.client)==null?void 0:ee.name)||"Sin nombre"})]}),e.jsxs(h,{spacing:2,w:"full",children:[e.jsx(Ks,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,flex:1,children:S.clientPhone||((Be=S.client)==null?void 0:Be.phone)||"Sin teléfono"}),e.jsx(Ne,{label:"Enviar WhatsApp",children:e.jsx(De,{size:"sm",icon:e.jsx(it,{}),colorScheme:"green",variant:"ghost",onClick:()=>{var Ve;return ae(S.clientPhone||((Ve=S.client)==null?void 0:Ve.phone),`Hola! Soy el repartidor de AquaYara. Estoy en camino con tu pedido ${S.orderNumber||`#${S.id}`}. ¿Te parece bien?`)}})})]}),e.jsxs(h,{spacing:2,w:"full",children:[e.jsx(St,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:2,flex:1,children:S.clientAddress||((ks=S.client)==null?void 0:ks.address)||"Sin dirección"}),e.jsx(Ne,{label:"Abrir en Google Maps",children:e.jsx(De,{size:"sm",icon:e.jsx(to,{}),colorScheme:"blue",variant:"ghost",onClick:()=>{var Ve;return Q(S.clientAddress||((Ve=S.client)==null?void 0:Ve.address))}})})]}),e.jsxs(h,{spacing:2,w:"full",children:[e.jsx(St,{size:12,color:"#718096"}),e.jsxs(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,flex:1,children:["Distrito: ",S.clientDistrict||((os=S.client)==null?void 0:os.district)||S.deliveryDistrict||"Sin distrito"]})]})]}),e.jsxs(u,{spacing:2,align:"stretch",w:"full",children:[!1,e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(h,{spacing:2,flex:1,minW:0,children:[e.jsx(ge,{as:de(S.paymentType,S.paymentMethod),size:14}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,children:S.paymentMethod==="vale"?"A Crédito (Vale)":S.paymentMethod==="suscripcion"?"Suscripción":S.paymentMethod==="contraentrega"?S.paymentType==="plin"?"Contraentrega - PLIN":S.paymentType==="yape"?"Contraentrega - Yape":S.paymentType==="cash"?"Contraentrega - Efectivo":"Contraentrega":S.paymentType==="plin"?"PLIN":S.paymentType==="yape"?"Yape":(S.paymentType==="cash","Efectivo")})]}),e.jsx(n,{fontWeight:"bold",fontSize:{base:"xs",md:"sm"},color:S.paymentMethod==="vale"?"orange.600":"green.600",children:S.paymentMethod==="vale"?"Sin cobro":`S/ ${parseFloat(S.total||S.totalAmount||0).toFixed(2)}`})]}),e.jsx(Se,{colorScheme:S.paymentMethod==="vale"?"orange":S.paymentMethod==="suscripcion"?"purple":S.paymentType==="plin"||S.paymentType==="yape"?"blue":"green",fontSize:{base:"2xs",md:"xs"},px:2,py:1,borderRadius:"md",children:S.paymentMethod==="vale"?"💳 NO COBRAR - A Crédito":S.paymentMethod==="suscripcion"?"📅 NO COBRAR - Suscripción":S.paymentType==="plin"||S.paymentType==="yape"?"📱 NO COBRAR - Pago Digital":"💰 COBRAR - Efectivo"})]}),S.products&&S.products.length>0&&e.jsxs(u,{spacing:{base:1,md:1.5},align:"stretch",children:[e.jsx(n,{fontSize:{base:"2xs",md:"xs"},fontWeight:"bold",color:"gray.600",children:"Productos:"}),Array.isArray(S.products)&&S.products.map((Ve,p)=>e.jsxs(h,{justify:"space-between",fontSize:{base:"2xs",md:"xs"},w:"full",children:[e.jsx(n,{noOfLines:1,flex:1,minW:0,children:Ve.name||Ve.productName}),e.jsxs(n,{fontWeight:"bold",color:"blue.600",flexShrink:0,px:1,children:["x",Ve.quantity]}),e.jsxs(n,{color:"green.600",minW:"fit-content",textAlign:"right",flexShrink:0,children:["S/ ",parseFloat(Ve.unitPrice||Ve.price||0).toFixed(2)]})]},p))]}),S.paymentMethod==="vale"&&e.jsxs(Ee,{status:"warning",size:"sm",borderRadius:"md",children:[e.jsx(Te,{}),e.jsx(n,{fontSize:{base:"2xs",md:"xs"},fontWeight:"bold",noOfLines:1,children:"⚠️ PEDIDO A CRÉDITO - NO COBRAR NADA"})]}),S.notes&&e.jsxs(Ee,{status:"info",size:"sm",borderRadius:"md",children:[e.jsx(Te,{}),e.jsx(n,{fontSize:{base:"2xs",md:"xs"},noOfLines:2,children:S.notes})]}),e.jsxs(u,{spacing:{base:2,md:3},align:"stretch",children:[e.jsx(h,{spacing:2,justify:"center",children:e.jsx(Ne,{label:"Ver detalles",children:e.jsx(De,{size:{base:"sm",md:"md"},icon:e.jsx(Vs,{}),onClick:()=>B(S),"aria-label":"Ver detalles",colorScheme:"blue",variant:"outline"})})}),S.status==="confirmed"&&e.jsx(O,{size:{base:"sm",md:"md"},colorScheme:"purple",leftIcon:e.jsx(lo,{}),onClick:()=>ye(S,"preparing"),w:"full",fontSize:{base:"xs",md:"sm"},children:"Iniciar Preparación"}),S.status==="preparing"&&e.jsx(O,{size:{base:"sm",md:"md"},colorScheme:"blue",leftIcon:e.jsx(Ss,{}),onClick:()=>ye(S,"ready"),w:"full",fontSize:{base:"xs",md:"sm"},children:"Listo para Entrega"}),S.status==="ready"&&e.jsx(O,{size:{base:"sm",md:"md"},colorScheme:"green",leftIcon:e.jsx(zs,{}),onClick:()=>ye(S,"delivered"),w:"full",fontSize:{base:"xs",md:"sm"},children:"Marcar Entregado"})]})]})})},`${S.type}-${S.id}`)},Ge=()=>e.jsxs(qe,{isOpen:M,onClose:g,size:"md",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Actualizar Estado del Pedido"}),e.jsx(Ue,{}),e.jsx(Me,{children:e.jsx(u,{spacing:4,children:y&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{children:["¿Confirmar cambio de estado del pedido #",y.id,"?"]}),e.jsxs(n,{fontWeight:"bold",children:[y.newStatus==="preparing"&&"Iniciar Preparación",y.newStatus==="ready"&&"Marcar como Listo",y.newStatus==="delivered"&&"Marcar como Entregado"]})]})})}),e.jsxs(Ps,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:g,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:_,children:"Confirmar"})]})]})]}),$e=()=>{var S,ee,Be,ks;return e.jsxs(qe,{isOpen:V,onClose:ne,size:"lg",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Detalles del Pedido"}),e.jsx(Ue,{}),e.jsx(Me,{children:y&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(n,{fontWeight:"bold",fontSize:"lg",children:["Pedido #",y.id]}),e.jsx(hs,{}),e.jsxs(u,{spacing:3,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Cliente:"}),e.jsx(n,{children:y.clientName||((S=y.client)==null?void 0:S.name)||"Sin nombre"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Teléfono:"}),e.jsx(n,{children:y.clientPhone||((ee=y.client)==null?void 0:ee.phone)||"Sin teléfono"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Dirección:"}),e.jsx(n,{children:y.clientAddress||((Be=y.client)==null?void 0:Be.address)||"Sin dirección"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Distrito:"}),e.jsx(n,{children:y.clientDistrict||((ks=y.client)==null?void 0:ks.district)||y.deliveryDistrict||"Sin distrito"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado:"}),e.jsx(Se,{colorScheme:X(y.status),children:be(y.status)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Método de pago:"}),e.jsxs(h,{children:[e.jsx(ge,{as:de(y.paymentType,y.paymentMethod),size:16}),e.jsx(n,{children:y.paymentMethod==="vale"?"A Crédito (Vale)":y.paymentMethod==="suscripcion"?"Suscripción":y.paymentMethod==="contraentrega"?y.paymentType==="plin"?"Contraentrega - PLIN":y.paymentType==="yape"?"Contraentrega - Yape":y.paymentType==="cash"?"Contraentrega - Efectivo":"Contraentrega":y.paymentType==="plin"?"PLIN":y.paymentType==="yape"?"Yape":(y.paymentType==="cash","Efectivo")})]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Total:"}),e.jsx(n,{fontWeight:"bold",color:y.paymentMethod==="vale"?"orange.600":"green.600",children:y.paymentMethod==="vale"?"Sin cobro":`S/ ${parseFloat(y.total||y.totalAmount||0).toFixed(2)}`})]}),e.jsxs(Ee,{status:y.paymentMethod==="vale"?"warning":y.paymentMethod==="suscripcion"||y.paymentType==="plin"||y.paymentType==="yape"?"info":"success",borderRadius:"md",children:[e.jsx(Te,{}),e.jsx(n,{fontSize:"sm",fontWeight:"bold",children:y.paymentMethod==="vale"?"💳 NO COBRAR - Este pedido es a crédito":y.paymentMethod==="suscripcion"?"📅 NO COBRAR - Este pedido es por suscripción":y.paymentType==="plin"?"📱 NO COBRAR - El cliente pagará por PLIN":y.paymentType==="yape"?"📱 NO COBRAR - El cliente pagará por Yape":"💰 COBRAR - El cliente pagará en efectivo"})]})]}),y.products&&y.products.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(hs,{}),e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsx(n,{fontWeight:"bold",children:"Productos:"}),Array.isArray(y.products)&&y.products.map((os,Ve)=>{var p;return e.jsxs(h,{justify:"space-between",fontSize:"sm",children:[e.jsx(n,{flex:1,children:((p=os.product)==null?void 0:p.name)||os.name||"Producto desconocido"}),e.jsxs(n,{fontWeight:"bold",children:[os.quantity," x S/ ",parseFloat(os.price||os.unitPrice||0).toFixed(2)]})]},Ve)})]})]})]})}),e.jsx(Ps,{children:e.jsx(O,{onClick:ne,children:"Cerrar"})})]})]})},te=()=>e.jsxs(qe,{isOpen:x,onClose:q,size:"md",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Crear Nuevo Vale"}),e.jsx(Ue,{}),e.jsx(Me,{children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{children:[e.jsx(G,{children:"Cliente"}),e.jsx(es,{placeholder:"Seleccionar cliente",children:j.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Producto"}),e.jsx(es,{placeholder:"Seleccionar producto",children:D.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Cantidad"}),e.jsx(re,{type:"number",min:"1",defaultValue:"1"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas"}),e.jsx(_s,{placeholder:"Notas adicionales..."})]})]})}),e.jsxs(Ps,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:q,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:q,children:"Crear Vale"})]})]})]});return a?e.jsx(as,{h:"400px",children:e.jsx(bs,{size:"xl"})}):e.jsx(N,{p:{base:2,sm:3,md:6},minH:"100vh",bg:"gray.50",children:e.jsxs(u,{spacing:{base:3,md:6},align:"stretch",children:[e.jsx(N,{bg:"white",p:{base:3,md:4},borderRadius:"lg",shadow:"sm",children:e.jsxs(u,{spacing:2,align:"start",children:[e.jsx(K,{size:{base:"sm",md:"lg"},color:"gray.800",children:"Panel de Repartidor"}),e.jsxs(n,{color:"gray.600",fontSize:{base:"xs",md:"md"},children:["Bienvenido, ",(console.log("🔍 Verificando nombre del usuario:",{firstName:s==null?void 0:s.firstName,lastName:s==null?void 0:s.lastName,username:s==null?void 0:s.username,hasFirstName:!!(s!=null&&s.firstName),hasLastName:!!(s!=null&&s.lastName),bothNames:!!(s!=null&&s.firstName&&(s!=null&&s.lastName))}),s!=null&&s.firstName&&(s!=null&&s.lastName)?`${s.firstName} ${s.lastName}`:(s==null?void 0:s.username)||"Repartidor"),". Gestiona tus entregas asignadas."]})]})}),e.jsxs(is,{columns:{base:2,sm:4},spacing:{base:2,md:4},children:[e.jsx(L,{shadow:"sm",borderRadius:"lg",children:e.jsxs(W,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(n,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"blue.600",children:A.total}),e.jsx(n,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"Total Pedidos"})]})}),e.jsx(L,{shadow:"sm",borderRadius:"lg",children:e.jsxs(W,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(n,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"orange.600",children:A.confirmed+A.preparing+A.ready}),e.jsx(n,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"En Proceso"})]})}),e.jsx(L,{shadow:"sm",borderRadius:"lg",children:e.jsxs(W,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(n,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"green.600",children:A.delivered}),e.jsx(n,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"Entregados"})]})}),e.jsx(L,{shadow:"sm",borderRadius:"lg",children:e.jsxs(W,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(n,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"red.600",children:A.cancelled}),e.jsx(n,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"Cancelados"})]})})]}),e.jsx(N,{bg:"white",borderRadius:"lg",shadow:"sm",overflow:"hidden",children:e.jsxs(Ja,{index:T==="orders"?0:1,onChange:S=>C(S===0?"orders":"vouchers"),children:[e.jsxs(Ka,{bg:"gray.50",p:1,children:[e.jsx(en,{fontSize:{base:"xs",md:"sm"},px:{base:2,md:4},py:{base:2,md:3},_selected:{bg:"white",shadow:"sm"},flex:1,minW:0,children:e.jsxs(u,{spacing:1,children:[e.jsx(or,{size:12}),e.jsxs(n,{fontSize:{base:"2xs",md:"xs"},noOfLines:1,children:["Pedidos (",l.length,")"]})]})}),e.jsx(en,{fontSize:{base:"xs",md:"sm"},px:{base:2,md:4},py:{base:2,md:3},_selected:{bg:"white",shadow:"sm"},flex:1,minW:0,children:e.jsxs(u,{spacing:1,children:[e.jsx(fs,{size:12}),e.jsxs(n,{fontSize:{base:"2xs",md:"xs"},noOfLines:1,children:["Vales (",c.length,")"]})]})})]}),e.jsxs(Za,{children:[e.jsxs(sn,{px:{base:2,md:4},py:{base:3,md:4},children:[e.jsx(L,{shadow:"sm",mb:4,children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(u,{spacing:{base:3,md:4},align:"stretch",children:[e.jsxs(U,{children:[e.jsx(G,{fontSize:{base:"sm",md:"md"},children:"Filtrar por Estado"}),e.jsxs(es,{value:I,onChange:S=>k(S.target.value),size:{base:"sm",md:"md"},children:[e.jsx("option",{value:"all",children:"Todos los pedidos"}),e.jsx("option",{value:"asignado",children:"Asignados"}),e.jsx("option",{value:"en_camino",children:"En Camino"}),e.jsx("option",{value:"entregado",children:"Entregados"})]})]}),e.jsxs(n,{fontSize:{base:"xs",md:"sm"},color:"gray.600",textAlign:"center",children:["Mostrando ",me.length," de ",l.length," pedidos"]})]})})}),me.length>0?e.jsx(u,{spacing:{base:3,md:4},align:"stretch",children:me.map(je)}):e.jsx(as,{h:"200px",bg:"white",borderRadius:"lg",shadow:"sm",children:e.jsxs(u,{spacing:4,children:[e.jsx(ge,{as:or,boxSize:12,color:"gray.400"}),e.jsxs(n,{color:"gray.500",fontSize:{base:"sm",md:"lg"},textAlign:"center",children:["No hay pedidos ",I==="all"?"":`con estado ${be(I).toLowerCase()}`]}),e.jsx(O,{variant:"outline",size:{base:"sm",md:"md"},onClick:()=>k("all"),children:"Ver todos los pedidos"})]})})]}),e.jsx(sn,{px:{base:2,md:4},py:{base:3,md:4},children:e.jsxs(u,{spacing:{base:4,md:6},align:"stretch",children:[e.jsx(N,{bg:"white",p:{base:3,md:4},borderRadius:"lg",shadow:"sm",children:e.jsxs(u,{spacing:2,align:"start",children:[e.jsx(K,{size:{base:"sm",md:"md"},color:"gray.800",children:"Mis Vales"}),e.jsx(n,{color:"gray.600",fontSize:{base:"xs",md:"sm"},children:"Gestiona los vales que has creado"})]})}),e.jsx(N,{children:e.jsx(O,{colorScheme:"blue",leftIcon:e.jsx(ot,{}),onClick:$,size:{base:"sm",md:"md"},w:"full",children:"Crear Nuevo Vale"})}),c.length>0?e.jsx(u,{spacing:{base:3,md:4},align:"stretch",children:c.map(S=>{var ee,Be;return e.jsx(L,{variant:"outline",shadow:"sm",borderRadius:"lg",children:e.jsx(W,{p:{base:3,md:4},children:e.jsxs(u,{spacing:{base:2,md:3},align:"stretch",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:["Vale #",S.id]}),e.jsx(Se,{colorScheme:S.status==="pending"?"orange":S.status==="delivered"?"blue":"green",fontSize:{base:"2xs",md:"xs"},children:S.status==="pending"?"Pendiente":S.status==="delivered"?"Entregado":"Pagado"})]}),e.jsxs(u,{spacing:{base:1,md:2},align:"stretch",children:[e.jsxs(h,{spacing:2,children:[e.jsx(qs,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,children:((ee=S.Client)==null?void 0:ee.name)||"Cliente no encontrado"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(or,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,children:((Be=S.product)==null?void 0:Be.name)||"Producto no especificado"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(n,{fontSize:{base:"xs",md:"sm"},children:"Cantidad:"}),e.jsx(n,{fontWeight:"bold",fontSize:{base:"xs",md:"sm"},children:S.quantity})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:{base:"xs",md:"sm"},children:"Total:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",fontSize:{base:"xs",md:"sm"},children:["S/ ",parseFloat(S.totalAmount||0).toFixed(2)]})]})]})]})})},S.id)})}):e.jsx(as,{h:"200px",children:e.jsxs(u,{spacing:4,children:[e.jsx(ge,{as:fs,boxSize:12,color:"gray.400"}),e.jsx(n,{color:"gray.500",fontSize:"lg",children:"No has creado ningún vale aún"}),e.jsx(O,{colorScheme:"blue",leftIcon:e.jsx(ot,{}),onClick:$,children:"Crear tu primer vale"})]})})]})})]})]})}),Ge(),$e(),te()]})})},Wl=()=>{const[s,t]=v.useState({username:"",password:""}),[r,a]=v.useState(!1),[i,l]=v.useState(!1),{login:o,error:c}=Rs(),d=tt(),j=ps(),z=m=>{t({...s,[m.target.name]:m.target.value})},D=async m=>{m.preventDefault(),l(!0);try{if((await o(s.username,s.password)).success){const C=Rs.getState().user;C&&C.role==="repartidor"?(j({title:"Bienvenido",description:`Hola ${C.username}, bienvenido al panel de repartidor`,status:"success",duration:3e3,isClosable:!0}),d("/delivery-dashboard")):(j({title:"Acceso Denegado",description:"Esta cuenta no es de un repartidor",status:"error",duration:3e3,isClosable:!0}),Rs.getState().logout())}}catch(T){console.error("Error en login:",T)}finally{l(!1)}};return e.jsx(N,{minH:"100vh",bg:"gray.50",display:"flex",alignItems:"center",justifyContent:"center",p:4,children:e.jsxs(L,{maxW:"md",w:"full",boxShadow:"xl",children:[e.jsx(Pe,{textAlign:"center",pb:2,children:e.jsxs(u,{spacing:4,children:[e.jsx(N,{color:"purple.600",fontSize:"4xl",children:e.jsx(Ss,{})}),e.jsx(K,{size:"lg",color:"gray.700",children:"Panel de Repartidor"}),e.jsx(n,{color:"gray.600",fontSize:"sm",children:"Inicia sesión para gestionar tus pedidos asignados"})]})}),e.jsx(W,{pt:0,children:e.jsx("form",{onSubmit:D,children:e.jsxs(u,{spacing:4,children:[c&&e.jsxs(Ee,{status:"error",borderRadius:"md",children:[e.jsx(Te,{}),c]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Usuario"}),e.jsx(re,{name:"username",value:s.username,onChange:z,placeholder:"Ingresa tu usuario",size:"lg",autoComplete:"username"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Contraseña"}),e.jsxs(wt,{size:"lg",children:[e.jsx(re,{name:"password",type:r?"text":"password",value:s.password,onChange:z,placeholder:"Ingresa tu contraseña"}),e.jsx(Nn,{children:e.jsx(De,{"aria-label":r?"Ocultar contraseña":"Mostrar contraseña",icon:r?e.jsx(Gn,{}):e.jsx(Vs,{}),variant:"ghost",onClick:()=>a(!r)})})]})]}),e.jsx(O,{type:"submit",colorScheme:"purple",size:"lg",w:"full",isLoading:i,loadingText:"Iniciando sesión...",leftIcon:e.jsx(Ss,{}),children:"Iniciar Sesión"}),e.jsx(hs,{}),e.jsxs(u,{spacing:2,textAlign:"center",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"¿No eres repartidor?"}),e.jsxs(h,{spacing:4,children:[e.jsx(xr,{color:"blue.500",onClick:()=>d("/"),_hover:{textDecoration:"underline"},children:"Panel de Administración"}),e.jsx(n,{color:"gray.400",children:"|"}),e.jsx(xr,{color:"green.500",onClick:()=>d("/client-login"),_hover:{textDecoration:"underline"},children:"Área de Clientes"})]})]})]})})})]})})},Ml=()=>{const[s,t]=v.useState([]),[r,a]=v.useState(!0),i=ps(),l=ss("white","gray.800"),o=ss("gray.200","gray.600"),c=ss("gray.700","gray.200"),d=ss("blue.50","blue.900"),j=ss("green.500","green.300"),z=ss("blue.600","blue.300");v.useEffect(()=>{D()},[]);const D=async()=>{var C;try{a(!0),console.log("🔄 SubscriptionPlansCard: Cargando planes...");const I=await Y.get("/api/subscription-plans");console.log("📦 SubscriptionPlansCard: Respuesta:",I.data),t(I.data.data||[]),console.log("✅ SubscriptionPlansCard: Planes cargados:",((C=I.data.data)==null?void 0:C.length)||0)}catch(I){console.error("❌ SubscriptionPlansCard: Error al cargar planes:",I),i({title:"Error",description:"No se pudieron cargar los planes de suscripción",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}},m=C=>C===0?"Sin bonificación":C===1?"1 recarga mensual gratis":`${C} recargas mensual gratis`,T=C=>{const I=["blue","green","purple","orange","pink","teal","red"];return I[C%I.length]};return r?e.jsx(as,{py:10,children:e.jsxs(u,{spacing:4,children:[e.jsx(bs,{size:"xl",color:"blue.500"}),e.jsx(n,{color:"gray.500",children:"Cargando planes de suscripción..."})]})}):e.jsxs(N,{children:[e.jsx(L,{bg:d,borderColor:o,mb:6,children:e.jsx(W,{children:e.jsxs(u,{spacing:4,textAlign:"center",children:[e.jsx(K,{size:"lg",color:c,children:"🚰 Cartilla de Suscripciones AquaYara"}),e.jsx(n,{color:c,fontSize:"lg",children:"Por el pago mensual de cierta cantidad de bidones, recibe bonificaciones por ser un buen cliente"}),e.jsxs(h,{spacing:4,wrap:"wrap",justify:"center",children:[e.jsxs(h,{children:[e.jsx(ge,{as:zs,color:"green.500"}),e.jsx(n,{fontSize:"sm",children:"Válido solo para clientes que pagan adelantado una mensualidad"})]}),e.jsxs(h,{children:[e.jsx(ge,{as:Ss,color:"blue.500"}),e.jsx(n,{fontSize:"sm",children:"Control con sistema y cuaderno con firma"})]}),e.jsxs(h,{children:[e.jsx(ge,{as:io,color:"purple.500"}),e.jsx(n,{fontSize:"sm",children:"Contrato y factura mensual"})]})]})]})})}),e.jsx(is,{columns:{base:1,md:2,lg:3},spacing:6,children:s.map(C=>e.jsxs(L,{bg:l,borderColor:o,borderWidth:"2px",_hover:{transform:"translateY(-4px)",shadow:"lg",borderColor:T(C.sortOrder)+".300"},transition:"all 0.3s ease",position:"relative",children:[C.bonusBottles>0&&e.jsx(N,{position:"absolute",top:-2,right:4,children:e.jsxs(Se,{colorScheme:"green",fontSize:"xs",px:3,py:1,borderRadius:"full",transform:"rotate(15deg)",children:[e.jsx(ge,{as:Wr,mr:1}),parseFloat(C.bonusPercentage).toFixed(1),"% BONUS"]})}),e.jsx(Pe,{pb:2,children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsx(K,{size:"md",color:c,textAlign:"center",children:C.name}),e.jsx(n,{fontSize:"sm",color:"gray.500",textAlign:"center",children:C.description})]})}),e.jsx(W,{pt:0,children:e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(N,{textAlign:"center",children:[e.jsxs(n,{fontSize:"2xl",fontWeight:"bold",color:z,children:[C.totalBottles," Bidones"]}),C.bonusBottles>0&&e.jsxs(n,{fontSize:"sm",color:j,fontWeight:"semibold",children:["+ ",C.bonusBottles," bonus"]})]}),e.jsx(hs,{}),e.jsxs(u,{spacing:2,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Pago mensual:"}),e.jsxs(n,{fontSize:"lg",fontWeight:"bold",color:z,children:["S/ ",parseFloat(C.monthlyPrice).toFixed(2)]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Precio por bidón:"}),e.jsxs(n,{fontSize:"md",fontWeight:"semibold",color:c,children:["S/ ",parseFloat(C.pricePerBottle).toFixed(2)]})]})]}),e.jsx(hs,{}),e.jsxs(N,{textAlign:"center",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",mb:1,children:"Bonificación:"}),e.jsx(n,{fontSize:"md",fontWeight:"semibold",color:j,children:m(C.bonusBottles)})]}),e.jsx(N,{textAlign:"center",children:e.jsxs(h,{justify:"center",spacing:2,children:[e.jsx(ge,{as:Ss,color:"blue.500"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["Máx. ",C.maxDailyDelivery," entregas diarias"]})]})}),e.jsx(O,{colorScheme:T(C.sortOrder),size:"md",w:"full",mt:2,_hover:{transform:"scale(1.02)",shadow:"md"},transition:"all 0.2s ease",children:"Seleccionar Plan"})]})})]},C.id))}),e.jsx(L,{bg:l,borderColor:o,mt:6,children:e.jsx(W,{children:e.jsxs(u,{spacing:4,textAlign:"center",children:[e.jsx(K,{size:"md",color:c,children:"Información Importante"}),e.jsxs(is,{columns:{base:1,md:2},spacing:4,w:"full",children:[e.jsxs(N,{children:[e.jsx(n,{fontWeight:"semibold",color:c,mb:2,children:"Condiciones del Servicio:"}),e.jsxs(u,{spacing:1,align:"start",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"• Servicio para clientes domésticos y empresariales"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"• Válido solo para clientes que pagan adelantado una mensualidad"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"• Control con sistema y cuaderno con firma, fecha, hora y nombre de recepción"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"• Contrato y factura mensual"})]})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"semibold",color:c,mb:2,children:"Beneficios:"}),e.jsxs(u,{spacing:1,align:"start",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"• Descuentos progresivos según cantidad"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"• Bonificaciones en bidones adicionales"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"• Entregas programadas y controladas"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"• Atención prioritaria al cliente"})]})]})]})]})})})]})},$l=()=>{var B,ye;const[s,t]=v.useState([]),[r,a]=v.useState([]),[i,l]=v.useState([]),[o,c]=v.useState(!0),[d,j]=v.useState(""),[z,D]=v.useState("all"),[m,T]=v.useState(null),[C,I]=v.useState("management"),{isOpen:k,onOpen:y,onClose:P}=Fe(),{isOpen:E,onOpen:R,onClose:M}=Fe(),{isOpen:F,onOpen:g,onClose:V}=Fe(),[b,ne]=v.useState({clientId:"",planId:"",startDate:"",notes:""}),[x,$]=v.useState({id:"",status:"",remainingBottles:"",notes:""}),q=ps();Hs({base:!0,md:!1});const se=ss("white","gray.800"),we=ss("gray.200","gray.600");v.useEffect(()=>{xe()},[]);const xe=async()=>{c(!0);try{const[_,je]=await Promise.all([Y.get("/api/clients"),Y.get("/api/subscriptions")]);t(je.data.data||[]),a(_.data.data||[]),l([{id:1,name:"Plan Básico",bottles:20,bonus:2,price:100,description:"20 bidones + 2 extra"},{id:2,name:"Plan Intermedio",bottles:30,bonus:5,price:150,description:"30 bidones + 5 extra"},{id:3,name:"Plan Premium",bottles:50,bonus:10,price:250,description:"50 bidones + 10 extra"}])}catch(_){console.error("Error al cargar datos:",_),q({title:"Error",description:"No se pudieron cargar los datos",status:"error",duration:3e3,isClosable:!0})}finally{c(!1)}},Ce=(Array.isArray(s)?s:[]).filter(_=>{var $e,te,S,ee;const je=((te=($e=_.client)==null?void 0:$e.name)==null?void 0:te.toLowerCase().includes(d.toLowerCase()))||((ee=(S=_.client)==null?void 0:S.email)==null?void 0:ee.toLowerCase().includes(d.toLowerCase())),Ge=z==="all"||_.status===z;return je&&Ge}),_e=_=>{switch(_){case"active":return"green";case"paused":return"yellow";case"cancelled":return"red";case"expired":return"gray";default:return"gray"}},w=_=>{switch(_){case"active":return"Activa";case"paused":return"Pausada";case"cancelled":return"Cancelada";case"expired":return"Expirada";default:return"Desconocido"}},X=_=>new Date(_).toLocaleDateString("es-ES"),be=async()=>{try{const _=r.find($e=>$e.id===parseInt(b.clientId)),je=i.find($e=>$e.id===parseInt(b.planId));if(!_||!je){q({title:"Error",description:"Cliente o plan no encontrado",status:"error",duration:3e3,isClosable:!0});return}const Ge={clientId:_.id,clientDni:_.documentNumber,subscriptionType:je.name,totalBottles:je.bottles+je.bonus,totalAmount:je.price,paidAmount:je.price,expiryDate:null,notes:b.notes};await Y.post("/api/subscriptions",Ge),q({title:"Suscripción creada",description:"La suscripción se ha creado correctamente",status:"success",duration:3e3,isClosable:!0}),P(),ne({clientId:"",planId:"",startDate:"",notes:""}),xe()}catch(_){console.error("Error al crear suscripción:",_),q({title:"Error",description:"No se pudo crear la suscripción",status:"error",duration:3e3,isClosable:!0})}},de=async()=>{try{await Y.put(`/api/subscriptions/${x.id}`,x),q({title:"Suscripción actualizada",description:"La suscripción se ha actualizado correctamente",status:"success",duration:3e3,isClosable:!0}),M(),$({id:"",status:"",remainingBottles:"",notes:""}),xe()}catch(_){console.error("Error al actualizar suscripción:",_),q({title:"Error",description:"No se pudo actualizar la suscripción",status:"error",duration:3e3,isClosable:!0})}},A=_=>{T(_),g()},me=_=>{$({id:_.id,status:_.status,remainingBottles:_.remainingBottles,notes:_.notes||""}),R()},ae=s.filter(_=>_.status==="active").length,Q=s.filter(_=>_.status==="active").reduce((_,je)=>{var Ge;return _+(((Ge=je.plan)==null?void 0:Ge.price)||0)},0);return o?e.jsx(as,{h:"400px",children:e.jsx(bs,{size:"xl"})}):e.jsx(N,{p:6,children:e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(js,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(K,{size:"lg",children:[e.jsx(ge,{as:Is,mr:2}),"Gestión de Suscripciones"]}),e.jsx(n,{color:"gray.600",children:"Administra las suscripciones de clientes frecuentes"})]}),e.jsxs(h,{spacing:4,children:[e.jsx(O,{leftIcon:e.jsx(oo,{}),colorScheme:C==="management"?"blue":"gray",variant:C==="management"?"solid":"outline",onClick:()=>I("management"),children:"Gestión"}),e.jsx(O,{leftIcon:e.jsx(Wr,{}),colorScheme:C==="plans"?"blue":"gray",variant:C==="plans"?"solid":"outline",onClick:()=>I("plans"),children:"Cartilla de Planes"}),C==="management"&&e.jsx(O,{leftIcon:e.jsx(ot,{}),colorScheme:"blue",onClick:y,size:"lg",children:"Nueva Suscripción"})]})]}),C==="plans"?e.jsx(Ml,{}):e.jsxs(e.Fragment,{children:[e.jsxs(is,{columns:{base:1,md:3},spacing:4,children:[e.jsx(L,{bg:se,borderColor:we,children:e.jsx(W,{children:e.jsxs(Qe,{children:[e.jsx(Je,{children:"Total Suscripciones"}),e.jsx(Ke,{children:s.length}),e.jsxs(Ze,{children:[e.jsx(ei,{type:"increase"}),ae," activas"]})]})})}),e.jsx(L,{bg:se,borderColor:we,children:e.jsx(W,{children:e.jsxs(Qe,{children:[e.jsx(Je,{children:"Ingresos Mensuales"}),e.jsxs(Ke,{children:["S/ ",Q.toFixed(2)]}),e.jsx(Ze,{children:"De suscripciones activas"})]})})}),e.jsx(L,{bg:se,borderColor:we,children:e.jsx(W,{children:e.jsxs(Qe,{children:[e.jsx(Je,{children:"Planes Disponibles"}),e.jsx(Ke,{children:i.length}),e.jsx(Ze,{children:"Planes de suscripción"})]})})})]}),e.jsx(L,{bg:se,borderColor:we,children:e.jsx(W,{children:e.jsxs(h,{spacing:4,wrap:"wrap",children:[e.jsxs(wt,{maxW:"300px",children:[e.jsx(kr,{pointerEvents:"none",children:e.jsx(ge,{as:Qn,color:"gray.300"})}),e.jsx(re,{placeholder:"Buscar por cliente...",value:d,onChange:_=>j(_.target.value)})]}),e.jsxs(es,{value:z,onChange:_=>D(_.target.value),maxW:"200px",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"active",children:"Activas"}),e.jsx("option",{value:"paused",children:"Pausadas"}),e.jsx("option",{value:"cancelled",children:"Canceladas"}),e.jsx("option",{value:"expired",children:"Expiradas"})]})]})})}),e.jsxs(L,{bg:se,borderColor:we,children:[e.jsx(Pe,{children:e.jsx(K,{size:"md",children:"Suscripciones"})}),e.jsx(W,{children:Ce.length===0?e.jsx(as,{py:10,children:e.jsx(n,{color:"gray.500",fontSize:"lg",children:"No hay suscripciones registradas"})}):e.jsx(si,{children:e.jsxs(Zs,{variant:"simple",children:[e.jsx(et,{children:e.jsxs(gs,{children:[e.jsx(le,{children:"Cliente"}),e.jsx(le,{children:"Plan"}),e.jsx(le,{children:"Estado"}),e.jsx(le,{children:"Bidones Restantes"}),e.jsx(le,{children:"Fecha Inicio"}),e.jsx(le,{children:"Duración"}),e.jsx(le,{children:"Acciones"})]})}),e.jsx(st,{children:(Array.isArray(Ce)?Ce:[]).map(_=>{var je,Ge;return e.jsxs(gs,{children:[e.jsx(ce,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:((je=_.client)==null?void 0:je.name)||"N/A"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:((Ge=_.client)==null?void 0:Ge.email)||"N/A"})]})}),e.jsx(ce,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:_.subscriptionType||"N/A"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["S/ ",_.totalAmount||0]})]})}),e.jsx(ce,{children:e.jsx(Se,{colorScheme:_e(_.status),children:w(_.status)})}),e.jsx(ce,{children:e.jsx(n,{fontWeight:"bold",color:"blue.600",children:_.remainingBottles||0})}),e.jsx(ce,{children:X(_.purchaseDate)}),e.jsx(ce,{children:e.jsx(n,{color:"green.600",fontWeight:"bold",children:"Hasta agotar bidones"})}),e.jsx(ce,{children:e.jsxs(En,{children:[e.jsx(Tn,{as:O,size:"sm",variant:"ghost",children:e.jsx(ge,{as:ro})}),e.jsxs(Dn,{children:[e.jsx(gr,{icon:e.jsx(Vs,{}),onClick:()=>A(_),children:"Ver Detalles"}),e.jsx(gr,{icon:e.jsx(wr,{}),onClick:()=>me(_),children:"Editar"})]})]})})]},_.id)})})]})})})]}),e.jsxs(qe,{isOpen:k,onClose:P,size:"lg",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Nueva Suscripción"}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Cliente"}),e.jsx(es,{placeholder:"Seleccionar cliente",value:b.clientId,onChange:_=>ne({...b,clientId:_.target.value}),children:(Array.isArray(r)?r:[]).map(_=>e.jsxs("option",{value:_.id,children:[_.name," - ",_.email]},_.id))})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Plan de Suscripción"}),e.jsx(es,{placeholder:"Seleccionar plan",value:b.planId,onChange:_=>ne({...b,planId:_.target.value}),children:(Array.isArray(i)?i:[]).map(_=>e.jsxs("option",{value:_.id,children:[_.name," - S/ ",_.price," (",_.bottles+_.bonus," bidones)"]},_.id))})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Fecha de Inicio"}),e.jsx(re,{type:"date",value:b.startDate,onChange:_=>ne({...b,startDate:_.target.value})})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas"}),e.jsx(_s,{placeholder:"Notas adicionales...",value:b.notes,onChange:_=>ne({...b,notes:_.target.value})})]})]})}),e.jsxs(Ps,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:P,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:be,children:"Crear Suscripción"})]})]})]}),e.jsxs(qe,{isOpen:E,onClose:M,size:"lg",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Editar Suscripción"}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Estado"}),e.jsxs(es,{value:x.status,onChange:_=>$({...x,status:_.target.value}),children:[e.jsx("option",{value:"active",children:"Activa"}),e.jsx("option",{value:"paused",children:"Pausada"}),e.jsx("option",{value:"cancelled",children:"Cancelada"}),e.jsx("option",{value:"expired",children:"Expirada"})]})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Bidones Restantes"}),e.jsxs(_n,{value:x.remainingBottles,onChange:_=>$({...x,remainingBottles:_}),min:0,children:[e.jsx(kn,{}),e.jsxs(ti,{children:[e.jsx(ri,{}),e.jsx(ni,{})]})]})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas"}),e.jsx(_s,{placeholder:"Notas adicionales...",value:x.notes,onChange:_=>$({...x,notes:_.target.value})})]})]})}),e.jsxs(Ps,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:M,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:de,children:"Actualizar Suscripción"})]})]})]}),e.jsxs(qe,{isOpen:F,onClose:V,size:"lg",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Detalles de la Suscripción"}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:m&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(is,{columns:2,spacing:4,children:[e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Cliente:"}),e.jsx(n,{children:((B=m.client)==null?void 0:B.name)||"N/A"})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Email:"}),e.jsx(n,{children:((ye=m.client)==null?void 0:ye.email)||"N/A"})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Tipo de Suscripción:"}),e.jsx(n,{children:m.subscriptionType||"N/A"})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Total Pagado:"}),e.jsxs(n,{children:["S/ ",m.totalAmount||0]})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Estado:"}),e.jsx(Se,{colorScheme:_e(m.status),children:w(m.status)})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Bidones Restantes:"}),e.jsx(n,{fontWeight:"bold",color:"blue.600",children:m.remainingBottles||0})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Fecha de Compra:"}),e.jsx(n,{children:X(m.purchaseDate)})]}),e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Duración:"}),e.jsx(n,{color:"green.600",fontWeight:"bold",children:"Hasta agotar bidones"})]})]}),m.notes&&e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Notas:"}),e.jsx(n,{children:m.notes})]})]})})]})]})]}),e.jsx(Sa,{})]})})},Bl=()=>{var ne;const[s,t]=v.useState([]),[r,a]=v.useState(!1),[i,l]=v.useState(null),[o,c]=v.useState(new Date),{isOpen:d,onOpen:j,onClose:z}=Fe(),{isOpen:D,onOpen:m,onClose:T}=Fe();Fe();const C=ps(),[I,k]=v.useState({clientId:"",amount:"",description:"",dueDate:"",status:"active"}),[y,P]=v.useState([]);v.useEffect(()=>{R(),E();const x=setInterval(()=>{R(),c(new Date)},3e4);return()=>clearInterval(x)},[]);const E=async()=>{try{const x=await Y.get("/api/clients");x.data.success&&P(x.data.data||[])}catch(x){console.error("Error al cargar clientes:",x)}},R=async()=>{var x;try{a(!0),console.log("🔍 Cargando vales agrupados por pedido desde /api/vouchers/by-order...");const $=await Y.get("/api/vouchers/by-order");console.log("📦 Respuesta de vales agrupados:",$.data),$.data.success&&(t($.data.data||[]),console.log(`✅ Vales agrupados cargados: ${((x=$.data.data)==null?void 0:x.length)||0} pedidos`))}catch($){console.error("Error al cargar vales:",$),C({title:"Error",description:"No se pudieron cargar los vales",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}},M=async()=>{try{(await Y.post("/api/vouchers",I)).data.success&&(C({title:"Vale creado",description:"El vale se ha creado exitosamente",status:"success",duration:3e3,isClosable:!0}),R(),z(),k({clientId:"",amount:"",description:"",dueDate:"",status:"active"}))}catch(x){console.error("Error al crear vale:",x),C({title:"Error",description:"No se pudo crear el vale",status:"error",duration:3e3,isClosable:!0})}},F=x=>{switch(x){case"pending":return"yellow";case"delivered":return"green";case"paid":return"blue";case"cancelled":return"red";default:return"gray"}},g=x=>{switch(x){case"pending":return"Pendiente";case"delivered":return"Entregado";case"paid":return"Pagado";case"cancelled":return"Cancelado";default:return x}},V=x=>{switch(x){case"pending":return Is;case"delivered":return zs;case"paid":return fs;case"cancelled":return ho;default:return zs}},b={total:s.length,pending:s.filter(x=>x.status==="pending").length,delivered:s.filter(x=>x.status==="delivered").length,paid:s.filter(x=>x.status==="paid").length,totalAmount:s.reduce((x,$)=>x+parseFloat($.totalAmount||0),0),pendingAmount:s.filter(x=>x.status==="pending").reduce((x,$)=>x+parseFloat($.totalAmount||0),0),deliveredAmount:s.filter(x=>x.status==="delivered").reduce((x,$)=>x+parseFloat($.totalAmount||0),0)};return e.jsxs(N,{p:6,children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(js,{justify:"space-between",align:"center",children:[e.jsxs(N,{children:[e.jsx(K,{size:"lg",mb:2,children:"Gestión de Vales"}),e.jsx(n,{color:"gray.600",children:"Administra los vales de crédito de los clientes"}),e.jsxs(n,{color:"gray.400",fontSize:"xs",children:["Última actualización: ",o.toLocaleTimeString()]})]}),e.jsx(O,{size:"sm",colorScheme:"blue",variant:"outline",onClick:()=>{R(),c(new Date)},isLoading:r,children:"Actualizar"})]}),e.jsxs(is,{columns:{base:1,sm:2,lg:4},spacing:4,children:[e.jsx(L,{children:e.jsx(W,{children:e.jsxs(Qe,{children:[e.jsx(Je,{children:"Total Vales"}),e.jsx(Ke,{color:"blue.500",children:b.total}),e.jsx(Ze,{children:"Vales creados"})]})})}),e.jsx(L,{children:e.jsx(W,{children:e.jsxs(Qe,{children:[e.jsx(Je,{children:"Pendientes"}),e.jsx(Ke,{color:"yellow.500",children:b.pending}),e.jsx(Ze,{children:"Por entregar"})]})})}),e.jsx(L,{children:e.jsx(W,{children:e.jsxs(Qe,{children:[e.jsx(Je,{children:"Entregados"}),e.jsx(Ke,{color:"green.500",children:b.delivered}),e.jsx(Ze,{children:"Completados"})]})})}),e.jsx(L,{children:e.jsx(W,{children:e.jsxs(Qe,{children:[e.jsx(Je,{children:"Pagados"}),e.jsx(Ke,{color:"blue.500",children:b.paid}),e.jsx(Ze,{children:"Cobrados"})]})})}),e.jsx(L,{children:e.jsx(W,{children:e.jsxs(Qe,{children:[e.jsx(Je,{children:"Monto Total"}),e.jsxs(Ke,{color:"purple.500",children:["S/ ",b.totalAmount.toFixed(2)]}),e.jsx(Ze,{children:"En vales"})]})})}),e.jsx(L,{children:e.jsx(W,{children:e.jsxs(Qe,{children:[e.jsx(Je,{children:"Pendiente"}),e.jsxs(Ke,{color:"yellow.500",children:["S/ ",b.pendingAmount.toFixed(2)]}),e.jsx(Ze,{children:"Por entregar"})]})})})]}),e.jsxs(L,{children:[e.jsx(Pe,{children:e.jsxs(js,{justify:"space-between",align:"center",children:[e.jsx(K,{size:"md",children:"Lista de Vales"}),e.jsx(O,{leftIcon:e.jsx(ot,{}),colorScheme:"green",onClick:j,children:"Nuevo Vale"})]})}),e.jsx(W,{children:s.length===0?e.jsxs(Ee,{status:"info",children:[e.jsx(Te,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"No hay vales registrados"}),e.jsxs(n,{fontSize:"sm",children:['Los vales se crean automáticamente cuando los clientes eligen la modalidad "vale" en sus pedidos.',e.jsx("br",{}),'Puedes crear vales manualmente usando el botón "Crear Vale" arriba.']})]})]}):e.jsxs(Zs,{variant:"simple",children:[e.jsx(et,{children:e.jsxs(gs,{children:[e.jsx(le,{children:"Cliente"}),e.jsx(le,{children:"Productos del Pedido"}),e.jsx(le,{children:"Total del Pedido"}),e.jsx(le,{children:"Estado"}),e.jsx(le,{children:"Fecha Creación"}),e.jsx(le,{children:"Fecha Vencimiento"}),e.jsx(le,{children:"Acciones"})]})}),e.jsx(st,{children:s.map(x=>{var $,q;return e.jsxs(gs,{children:[e.jsx(ce,{children:e.jsxs(u,{spacing:1,align:"start",children:[e.jsxs(h,{children:[e.jsx(qs,{size:14,color:"#718096"}),e.jsx(n,{fontWeight:"medium",children:(($=x.client)==null?void 0:$.name)||"Cliente no encontrado"})]}),e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["DNI: ",((q=x.client)==null?void 0:q.documentNumber)||"N/A"]})]})}),e.jsx(ce,{children:e.jsxs(u,{spacing:1,align:"start",children:[(x.products||[]).map((se,we)=>e.jsxs(n,{fontSize:"sm",children:[se.name," x",se.quantity]},we)),(!x.products||x.products.length===0)&&e.jsx(n,{fontSize:"sm",color:"gray.500",children:"Sin productos"})]})}),e.jsxs(ce,{children:[e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(x.totalAmount||0).toFixed(2)]}),e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["Pedido #",x.guestOrderId||"Individual"]})]}),e.jsx(ce,{children:e.jsxs(mr,{colorScheme:F(x.status),children:[e.jsx(tn,{as:V(x.status)}),e.jsx(fr,{children:g(x.status)})]})}),e.jsxs(ce,{children:[e.jsx(n,{fontSize:"sm",children:x.createdAt?new Date(x.createdAt).toLocaleDateString():"Sin fecha"}),e.jsx(n,{fontSize:"xs",color:"gray.500",children:x.createdAt?new Date(x.createdAt).toLocaleTimeString():""})]}),e.jsxs(ce,{children:[e.jsx(n,{fontSize:"sm",color:x.dueDate&&new Date(x.dueDate)<new Date?"red.500":"gray.700",children:x.dueDate?new Date(x.dueDate).toLocaleDateString():"Sin vencimiento"}),x.dueDate&&new Date(x.dueDate)<new Date&&e.jsx(n,{fontSize:"xs",color:"red.500",fontWeight:"bold",children:"VENCIDO"})]}),e.jsx(ce,{children:e.jsx(h,{spacing:2,children:e.jsx(Ne,{label:"Ver detalles",children:e.jsx(De,{size:"sm",icon:e.jsx(Vs,{}),onClick:()=>{l(x),m()}})})})})]},x.id)})})]})})]})]}),e.jsxs(qe,{isOpen:d,onClose:z,size:"md",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Crear Nuevo Vale"}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Cliente"}),e.jsx(es,{value:I.clientId,onChange:x=>k({...I,clientId:x.target.value}),placeholder:"Selecciona un cliente",children:y.map(x=>e.jsxs("option",{value:x.id,children:[x.name," - ",x.email]},x.id))})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Monto"}),e.jsx(re,{type:"number",value:I.amount,onChange:x=>k({...I,amount:x.target.value}),placeholder:"0.00"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Descripción"}),e.jsx(_s,{value:I.description,onChange:x=>k({...I,description:x.target.value}),placeholder:"Descripción del vale"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Fecha de Vencimiento"}),e.jsx(re,{type:"date",value:I.dueDate,onChange:x=>k({...I,dueDate:x.target.value})})]}),e.jsx(O,{colorScheme:"green",w:"full",onClick:M,leftIcon:e.jsx(ot,{}),children:"Crear Vale"})]})})]})]}),e.jsxs(qe,{isOpen:D,onClose:T,size:"md",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Detalles del Vale"}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:i&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Cliente:"}),e.jsx(n,{children:((ne=i.client)==null?void 0:ne.name)||"Cliente no encontrado"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Monto:"}),e.jsxs(n,{color:"green.600",fontWeight:"bold",children:["S/ ",parseFloat(i.amount||0).toFixed(2)]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado:"}),e.jsxs(mr,{colorScheme:F(i.status),children:[e.jsx(tn,{as:V(i.status)}),e.jsx(fr,{children:g(i.status)})]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Fecha de Vencimiento:"}),e.jsx(n,{children:i.dueDate?new Date(i.dueDate).toLocaleDateString():"Sin fecha"})]}),i.description&&e.jsxs(N,{children:[e.jsx(n,{fontWeight:"bold",mb:2,children:"Descripción:"}),e.jsx(n,{children:i.description})]})]})})]})]})]})},Vl=()=>{const[s,t]=v.useState(null),[r,a]=v.useState(!1),[i,l]=v.useState(new Date().getFullYear()),[o,c]=v.useState(new Date().getMonth()+1),[d,j]=v.useState(null),{isOpen:z,onOpen:D,onClose:m}=Fe(),T=ps(),C=ss("white","gray.800"),I=ss("gray.200","gray.600");v.useEffect(()=>{k()},[i,o]);const k=async()=>{try{a(!0);const g=await Y.get(`/api/reports/collection?year=${i}&month=${o}`);g.data.success&&(console.log("🔍 Datos del reporte de cobranza recibidos:",g.data.data),g.data.data.clients&&g.data.data.clients.length>0&&console.log("🔍 Primer cliente:",g.data.data.clients[0]),t(g.data.data))}catch(g){console.error("Error al cargar reporte:",g),T({title:"Error",description:"No se pudo cargar el reporte de cobranza",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}},y=g=>["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][g-1],P=g=>{const V=parseFloat(g)||0;return new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN"}).format(V)},E=g=>new Date(g).toLocaleDateString("es-ES"),R=g=>{j(g),D()},M=()=>{const g=new Date().getFullYear(),V=[];for(let b=g;b>=g-2;b--)V.push(b);return V},F=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}];return r?e.jsx(as,{h:"400px",children:e.jsx(bs,{size:"xl"})}):e.jsx(N,{p:6,children:e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(js,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(N,{children:[e.jsx(K,{size:"lg",mb:2,children:e.jsxs(h,{children:[e.jsx(Yn,{}),e.jsx(n,{children:"Reporte de Cobranza Mensual"})]})}),e.jsx(n,{color:"gray.600",children:"Total de deudas por cliente en vales pendientes de pago"})]}),e.jsx(O,{leftIcon:e.jsx(Fr,{}),colorScheme:"blue",variant:"outline",onClick:k,isLoading:r,children:"Actualizar"})]}),e.jsx(L,{bg:C,borderColor:I,children:e.jsx(W,{children:e.jsxs(h,{spacing:4,wrap:"wrap",children:[e.jsx(es,{value:i,onChange:g=>l(parseInt(g.target.value)),maxW:"150px",children:M().map(g=>e.jsx("option",{value:g,children:g},g))}),e.jsx(es,{value:o,onChange:g=>c(parseInt(g.target.value)),maxW:"200px",children:F.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]})})}),s?e.jsxs(e.Fragment,{children:[e.jsxs(is,{columns:{base:1,md:3},spacing:4,children:[e.jsx(L,{bg:C,borderColor:I,children:e.jsx(W,{children:e.jsxs(Qe,{children:[e.jsx(Je,{children:"Período"}),e.jsxs(Ke,{fontSize:"lg",children:[y(s.period.month)," ",s.period.year]}),e.jsxs(Ze,{children:[e.jsx(Is,{style:{display:"inline",marginRight:"4px"}}),"Reporte mensual"]})]})})}),e.jsx(L,{bg:C,borderColor:I,children:e.jsx(W,{children:e.jsxs(Qe,{children:[e.jsx(Je,{children:"Clientes con Deuda"}),e.jsx(Ke,{color:"orange.500",children:s.summary.totalClients}),e.jsxs(Ze,{children:[e.jsx(Jn,{style:{display:"inline",marginRight:"4px"}}),"Clientes pendientes"]})]})})}),e.jsx(L,{bg:C,borderColor:I,children:e.jsx(W,{children:e.jsxs(Qe,{children:[e.jsx(Je,{children:"Total a Cobrar"}),e.jsx(Ke,{color:"red.500",children:P(s.summary.totalDebt)}),e.jsxs(Ze,{children:[e.jsx(fs,{style:{display:"inline",marginRight:"4px"}}),"Monto total"]})]})})})]}),e.jsxs(L,{bg:C,borderColor:I,children:[e.jsx(Pe,{children:e.jsx(K,{size:"md",children:"Clientes con Deuda Pendiente"})}),e.jsx(W,{children:s.clients.length===0?e.jsxs(Ee,{status:"success",children:[e.jsx(Te,{}),e.jsx(n,{children:"¡Excelente! No hay deudas pendientes para este período."})]}):e.jsxs(Zs,{variant:"simple",children:[e.jsx(et,{children:e.jsxs(gs,{children:[e.jsx(le,{children:"Cliente"}),e.jsx(le,{children:"Contacto"}),e.jsx(le,{children:"Total Deuda"}),e.jsx(le,{children:"Vales"}),e.jsx(le,{children:"Acciones"})]})}),e.jsx(st,{children:(s.clients||[]).map(g=>(console.log("🔍 Renderizando cliente:",{name:g.client.name,remainingAmount:g.remainingAmount,totalAmount:g.totalAmount,valesCount:g.valesCount}),e.jsxs(gs,{children:[e.jsx(ce,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:g.client.name}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["DNI: ",g.client.documentNumber]})]})}),e.jsx(ce,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(h,{children:[e.jsx(Ks,{size:12,color:"#718096"}),e.jsx(n,{fontSize:"sm",children:g.client.phone})]}),e.jsxs(h,{children:[e.jsx(Lr,{size:12,color:"#718096"}),e.jsx(n,{fontSize:"sm",children:g.client.email})]})]})}),e.jsx(ce,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",color:"red.600",fontSize:"lg",children:P(g.remainingAmount||0)}),e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["De ",P(g.totalAmount||0)," total"]})]})}),e.jsx(ce,{children:e.jsx(mr,{colorScheme:"blue",children:e.jsxs(fr,{children:[g.valesCount||0," vales"]})})}),e.jsx(ce,{children:e.jsx(Ne,{label:"Ver detalles de vales",children:e.jsx(De,{size:"sm",icon:e.jsx(Vs,{}),onClick:()=>R(g)})})})]},g.client.id)))})]})})]})]}):e.jsxs(Ee,{status:"info",children:[e.jsx(Te,{}),e.jsx(n,{children:"Selecciona un período para generar el reporte de cobranza."})]}),e.jsxs(qe,{isOpen:z,onClose:m,size:"lg",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsxs(We,{children:["Detalles de Vales - ",d==null?void 0:d.client.name]}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:d&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Cliente:"}),e.jsx(n,{children:d.client.name})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Total Deuda:"}),e.jsx(n,{color:"red.600",fontWeight:"bold",fontSize:"lg",children:P(d.remainingAmount)})]}),e.jsx(hs,{}),e.jsx(n,{fontWeight:"bold",children:"Detalle de Vales:"}),(d.vouchers||d.vales||[]).map((g,V)=>e.jsx(L,{variant:"outline",size:"sm",children:e.jsx(W,{children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsxs(n,{fontWeight:"bold",children:["Vale #",g.id]}),e.jsx(n,{fontSize:"sm",color:"gray.500",children:E(g.createdAt)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"sm",children:"Monto Original:"}),e.jsx(n,{fontSize:"sm",children:P(g.amount)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"sm",children:"Usado:"}),e.jsx(n,{fontSize:"sm",color:"green.600",children:P(g.usedAmount)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"sm",fontWeight:"bold",children:"Pendiente:"}),e.jsx(n,{fontSize:"sm",fontWeight:"bold",color:"red.600",children:P(g.remainingAmount)})]}),g.description&&e.jsx(n,{fontSize:"xs",color:"gray.500",children:g.description})]})})},g.id))]})})]})]})]})})},ql=()=>{const s=ps(),t=Hs({base:!0,md:!1}),{isOpen:r,onOpen:a,onClose:i}=Fe(),{isOpen:l,onOpen:o,onClose:c}=Fe(),{isOpen:d,onOpen:j,onClose:z}=Fe(),{districts:D,fetchDistricts:m}=Ur(),[T,C]=v.useState([]),[I,k]=v.useState(!0),[y,P]=v.useState(new Date),[E,R]=v.useState(null),[M,F]=v.useState(""),[g,V]=v.useState("all"),[b,ne]=v.useState("all"),[x,$]=v.useState({name:"",document:"",phone:"",email:"",address:"",district:"",reference:"",notes:""}),q=async()=>{try{k(!0);const A=await Y.get("/api/clients");A.data.success&&(C(A.data.data),P(new Date))}catch(A){console.error("Error al cargar clientes:",A),s({title:"Error",description:"No se pudieron cargar los clientes",status:"error",duration:3e3,isClosable:!0})}finally{k(!1)}};v.useEffect(()=>{q(),m();const A=setInterval(q,3e4);return()=>clearInterval(A)},[]);const se=async()=>{var A,me;try{(await Y.post("/api/clients",x)).data.success&&(s({title:"Cliente creado",description:"El cliente se ha registrado exitosamente",status:"success",duration:3e3,isClosable:!0}),q(),i(),w())}catch(ae){console.error("Error al crear cliente:",ae),s({title:"Error",description:((me=(A=ae.response)==null?void 0:A.data)==null?void 0:me.message)||"No se pudo crear el cliente",status:"error",duration:3e3,isClosable:!0})}},we=async()=>{var A,me;try{(await Y.put(`/api/clients/${E.id}`,x)).data.success&&(s({title:"Cliente actualizado",description:"Los datos del cliente se han actualizado",status:"success",duration:3e3,isClosable:!0}),q(),c(),w())}catch(ae){console.error("Error al actualizar cliente:",ae),s({title:"Error",description:((me=(A=ae.response)==null?void 0:A.data)==null?void 0:me.message)||"No se pudo actualizar el cliente",status:"error",duration:3e3,isClosable:!0})}},xe=async A=>{if(window.confirm("¿Estás seguro de que quieres eliminar este cliente?"))try{(await Y.delete(`/api/clients/${A}`)).data.success&&(s({title:"Cliente eliminado",description:"El cliente ha sido eliminado exitosamente",status:"success",duration:3e3,isClosable:!0}),q())}catch(me){console.error("Error al eliminar cliente:",me),s({title:"Error",description:"No se pudo eliminar el cliente",status:"error",duration:3e3,isClosable:!0})}},Ce=A=>{R(A),$({name:A.name||"",document:A.documentNumber||"",phone:A.phone||"",email:A.email||"",address:A.address||"",district:A.district||"",reference:A.reference||"",notes:A.notes||""}),o()},_e=A=>{R(A),j()},w=()=>{$({name:"",document:"",phone:"",email:"",address:"",district:"",reference:"",notes:""}),R(null)},X=T.filter(A=>{const me=A.name.toLowerCase().includes(M.toLowerCase())||A.documentNumber.includes(M)||A.phone.includes(M),ae=g==="all"||A.status===g,Q=b==="all"||A.district===b;return me&&ae&&Q}),be=T.length,de=T.filter(A=>A.status==="active").length;return I?e.jsx(as,{h:"400px",children:e.jsx(bs,{size:"xl"})}):e.jsxs(N,{p:6,children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(js,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(K,{size:"lg",color:"blue.600",children:"Gestión de Clientes"}),e.jsx(n,{color:"gray.600",children:"Administra la información de tus clientes"})]}),e.jsxs(h,{spacing:4,children:[e.jsx(O,{leftIcon:e.jsx(cn,{}),onClick:q,variant:"outline",children:"Actualizar"}),e.jsx(O,{leftIcon:e.jsx(ot,{}),onClick:a,colorScheme:"blue",children:"Nuevo Cliente"})]})]}),e.jsxs(is,{columns:{base:1,md:3},spacing:4,children:[e.jsx(L,{children:e.jsx(W,{children:e.jsxs(h,{justify:"space-between",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Total Clientes"}),e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:be})]}),e.jsx(qs,{size:24,color:"#3182CE"})]})})}),e.jsx(L,{children:e.jsx(W,{children:e.jsxs(h,{justify:"space-between",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Clientes Activos"}),e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"green.600",children:de})]}),e.jsx(qs,{size:24,color:"#38A169"})]})})}),e.jsx(L,{children:e.jsx(W,{children:e.jsxs(h,{justify:"space-between",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Última Actualización"}),e.jsx(n,{fontSize:"sm",fontWeight:"bold",color:"gray.600",children:y.toLocaleTimeString()})]}),e.jsx(cn,{size:20,color:"#718096"})]})})})]}),e.jsx(L,{children:e.jsx(W,{children:e.jsxs(h,{spacing:4,wrap:"wrap",children:[e.jsx(re,{placeholder:"Buscar por nombre, DNI o teléfono...",value:M,onChange:A=>F(A.target.value),maxW:"300px"}),e.jsxs(es,{value:g,onChange:A=>V(A.target.value),maxW:"200px",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"inactive",children:"Inactivos"})]}),e.jsxs(es,{value:b,onChange:A=>ne(A.target.value),maxW:"200px",placeholder:"Seleccionar distrito",children:[e.jsx("option",{value:"all",children:"Todos los distritos"}),D.map(A=>e.jsx("option",{value:A.name,children:A.name},A.id))]}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>{F(""),V("all"),ne("all")},children:"Limpiar Filtros"})]})})}),e.jsxs(L,{children:[e.jsx(Pe,{children:e.jsxs(h,{justify:"space-between",children:[e.jsx(K,{size:"md",children:"Lista de Clientes"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["Mostrando ",X.length," de ",be," clientes",b!=="all"&&` en ${b}`,g!=="all"&&` (${g==="active"?"Activos":"Inactivos"})`]})]})}),e.jsx(W,{children:t?e.jsx(u,{spacing:4,children:X.map(A=>e.jsx(L,{w:"full",variant:"outline",children:e.jsx(W,{children:e.jsxs(u,{align:"start",spacing:3,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:A.name}),e.jsx(Se,{colorScheme:A.status==="active"?"green":"gray",children:A.status==="active"?"Activo":"Inactivo"})]}),e.jsxs(u,{align:"start",spacing:1,w:"full",children:[e.jsxs(h,{children:[e.jsx(Xn,{size:14,color:"#718096"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["DNI: ",A.documentNumber]})]}),e.jsxs(h,{children:[e.jsx(Ks,{size:14,color:"#718096"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:A.phone})]}),e.jsxs(h,{children:[e.jsx(St,{size:14,color:"#718096"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:A.district})]})]}),e.jsxs(h,{spacing:2,children:[e.jsx(Ne,{label:"Ver detalles",children:e.jsx(De,{icon:e.jsx(Vs,{}),size:"sm",onClick:()=>_e(A)})}),e.jsx(Ne,{label:"Editar",children:e.jsx(De,{icon:e.jsx(wr,{}),size:"sm",colorScheme:"blue",onClick:()=>Ce(A)})}),e.jsx(Ne,{label:"Eliminar",children:e.jsx(De,{icon:e.jsx(dn,{}),size:"sm",colorScheme:"red",onClick:()=>xe(A.id)})})]})]})})},A.id))}):e.jsxs(Zs,{variant:"simple",children:[e.jsx(et,{children:e.jsxs(gs,{children:[e.jsx(le,{children:"Cliente"}),e.jsx(le,{children:"DNI"}),e.jsx(le,{children:"Teléfono"}),e.jsx(le,{children:"Distrito"}),e.jsx(le,{children:"Estado"}),e.jsx(le,{children:"Acciones"})]})}),e.jsx(st,{children:X.map(A=>e.jsxs(gs,{children:[e.jsx(ce,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:A.name}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:A.email})]})}),e.jsx(ce,{children:A.documentNumber}),e.jsx(ce,{children:A.phone}),e.jsx(ce,{children:A.district}),e.jsx(ce,{children:e.jsx(Se,{colorScheme:A.status==="active"?"green":"gray",children:A.status==="active"?"Activo":"Inactivo"})}),e.jsx(ce,{children:e.jsxs(h,{spacing:2,children:[e.jsx(Ne,{label:"Ver detalles",children:e.jsx(De,{icon:e.jsx(Vs,{}),size:"sm",onClick:()=>_e(A)})}),e.jsx(Ne,{label:"Editar",children:e.jsx(De,{icon:e.jsx(wr,{}),size:"sm",colorScheme:"blue",onClick:()=>Ce(A)})}),e.jsx(Ne,{label:"Eliminar",children:e.jsx(De,{icon:e.jsx(dn,{}),size:"sm",colorScheme:"red",onClick:()=>xe(A.id)})})]})})]},A.id))})]})})]})]}),e.jsxs(qe,{isOpen:r,onClose:i,size:"lg",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Nuevo Cliente"}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Nombre Completo"}),e.jsx(re,{value:x.name,onChange:A=>$({...x,name:A.target.value}),placeholder:"Ingresa el nombre completo"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"DNI"}),e.jsx(re,{value:x.document,onChange:A=>$({...x,document:A.target.value}),placeholder:"Ingresa el DNI"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Teléfono"}),e.jsx(re,{value:x.phone,onChange:A=>$({...x,phone:A.target.value}),placeholder:"Ingresa el teléfono"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Email"}),e.jsx(re,{type:"email",value:x.email,onChange:A=>$({...x,email:A.target.value}),placeholder:"Ingresa el email"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Dirección"}),e.jsx(re,{value:x.address,onChange:A=>$({...x,address:A.target.value}),placeholder:"Ingresa la dirección"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Distrito"}),e.jsx(re,{value:x.district,onChange:A=>$({...x,district:A.target.value}),placeholder:"Ingresa el distrito"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Referencia"}),e.jsx(re,{value:x.reference,onChange:A=>$({...x,reference:A.target.value}),placeholder:"Referencia de la dirección"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas"}),e.jsx(_s,{value:x.notes,onChange:A=>$({...x,notes:A.target.value}),placeholder:"Notas adicionales"})]}),e.jsx(O,{colorScheme:"blue",onClick:se,w:"full",children:"Crear Cliente"})]})})]})]}),e.jsxs(qe,{isOpen:l,onClose:c,size:"lg",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Editar Cliente"}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Nombre Completo"}),e.jsx(re,{value:x.name,onChange:A=>$({...x,name:A.target.value}),placeholder:"Ingresa el nombre completo"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"DNI"}),e.jsx(re,{value:x.document,onChange:A=>$({...x,document:A.target.value}),placeholder:"Ingresa el DNI"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Teléfono"}),e.jsx(re,{value:x.phone,onChange:A=>$({...x,phone:A.target.value}),placeholder:"Ingresa el teléfono"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Email"}),e.jsx(re,{type:"email",value:x.email,onChange:A=>$({...x,email:A.target.value}),placeholder:"Ingresa el email"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Dirección"}),e.jsx(re,{value:x.address,onChange:A=>$({...x,address:A.target.value}),placeholder:"Ingresa la dirección"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Distrito"}),e.jsx(re,{value:x.district,onChange:A=>$({...x,district:A.target.value}),placeholder:"Ingresa el distrito"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Referencia"}),e.jsx(re,{value:x.reference,onChange:A=>$({...x,reference:A.target.value}),placeholder:"Referencia de la dirección"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas"}),e.jsx(_s,{value:x.notes,onChange:A=>$({...x,notes:A.target.value}),placeholder:"Notas adicionales"})]}),e.jsx(O,{colorScheme:"blue",onClick:we,w:"full",children:"Actualizar Cliente"})]})})]})]}),e.jsxs(qe,{isOpen:d,onClose:z,size:"md",isCentered:!0,children:[e.jsx(Le,{}),e.jsxs(He,{children:[e.jsx(We,{children:"Detalles del Cliente"}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:E&&e.jsx(u,{spacing:4,align:"stretch",children:e.jsx(L,{children:e.jsx(W,{children:e.jsxs(u,{spacing:3,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Nombre:"}),e.jsx(n,{children:E.name})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"DNI:"}),e.jsx(n,{children:E.documentNumber})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Teléfono:"}),e.jsx(n,{children:E.phone})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Email:"}),e.jsx(n,{children:E.email||"No especificado"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Dirección:"}),e.jsx(n,{children:E.address})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Distrito:"}),e.jsx(n,{children:E.district})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Referencia:"}),e.jsx(n,{children:E.reference||"No especificada"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado:"}),e.jsx(Se,{colorScheme:E.status==="active"?"green":"gray",children:E.status==="active"?"Activo":"Inactivo"})]}),E.notes&&e.jsxs(u,{align:"stretch",children:[e.jsx(n,{fontWeight:"bold",children:"Notas:"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:E.notes})]})]})})})})})]})]})]})},Hl=()=>{const[s,t]=v.useState([]),[r,a]=v.useState(!0),[i,l]=v.useState(null),[o,c]=v.useState(!1),[d,j]=v.useState({version:"",title:"",content:"",effectiveDate:""}),[z,D]=v.useState({page:1,limit:10,total:0,pages:0}),[m,T]=v.useState("all"),{isOpen:C,onOpen:I,onClose:k}=Fe(),y=ps(),P=ss("white","gray.800");ss("gray.200","gray.600"),v.useEffect(()=>{E()},[z.page,m]);const E=async()=>{try{a(!0);const x=localStorage.getItem("token"),$=new URLSearchParams({page:z.page,limit:z.limit});m!=="all"&&$.append("status",m),console.log("🔄 Llamando a /api/terms-and-conditions con params:",$.toString());const q=await ns.get(`/api/terms-and-conditions?${$}`);console.log("📦 Respuesta términos:",q.data),t(q.data.data||[]),D(se=>{var we,xe;return{...se,total:((we=q.data.pagination)==null?void 0:we.total)||0,pages:((xe=q.data.pagination)==null?void 0:xe.pages)||1}})}catch(x){console.error("Error fetching terms:",x),y({title:"Error",description:"Error al cargar términos y condiciones",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}},R=()=>{l(null),c(!0),j({version:"",title:"",content:"",effectiveDate:new Date().toISOString().split("T")[0]}),I()},M=x=>{l(x),c(!0),j({version:x.version,title:x.title,content:x.content,effectiveDate:x.effectiveDate.split("T")[0]}),I()},F=x=>{l(x),c(!1),j({version:x.version,title:x.title,content:x.content,effectiveDate:x.effectiveDate.split("T")[0]}),I()},g=async x=>{var $,q;x.preventDefault();try{const se=localStorage.getItem("token");i?(await ns.put(`/api/terms-and-conditions/${i.id}`,d),y({title:"Éxito",description:"Términos y condiciones actualizados",status:"success",duration:3e3,isClosable:!0})):(await ns.post("/api/terms-and-conditions",d),y({title:"Éxito",description:"Términos y condiciones creados",status:"success",duration:3e3,isClosable:!0})),k(),E()}catch(se){console.error("Error saving terms:",se),y({title:"Error",description:((q=($=se.response)==null?void 0:$.data)==null?void 0:q.message)||"Error al guardar términos",status:"error",duration:3e3,isClosable:!0})}},V=async x=>{try{const $=localStorage.getItem("token");await ns.patch(`/api/terms-and-conditions/${x.id}/toggle`,{}),y({title:"Éxito",description:`Términos ${x.isActive?"desactivados":"activados"}`,status:"success",duration:3e3,isClosable:!0}),E()}catch($){console.error("Error toggling status:",$),y({title:"Error",description:"Error al cambiar estado",status:"error",duration:3e3,isClosable:!0})}},b=async x=>{var $,q;if(window.confirm("¿Estás seguro de eliminar estos términos y condiciones?"))try{const se=localStorage.getItem("token");await ns.delete(`/api/terms-and-conditions/${x.id}`),y({title:"Éxito",description:"Términos y condiciones eliminados",status:"success",duration:3e3,isClosable:!0}),E()}catch(se){console.error("Error deleting terms:",se),y({title:"Error",description:((q=($=se.response)==null?void 0:$.data)==null?void 0:q.message)||"Error al eliminar términos",status:"error",duration:3e3,isClosable:!0})}},ne=x=>new Date(x).toLocaleDateString("es-PE");return r?e.jsx(as,{h:"400px",children:e.jsx(bs,{size:"xl"})}):e.jsxs(N,{p:6,bg:P,borderRadius:"lg",boxShadow:"sm",children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:"Gestión de Términos y Condiciones"}),e.jsx(O,{leftIcon:e.jsx(Rr,{}),colorScheme:"blue",onClick:R,children:"Crear Nuevos Términos"})]}),e.jsx(h,{spacing:4,children:e.jsxs(U,{maxW:"200px",children:[e.jsx(G,{children:"Estado"}),e.jsxs(es,{value:m,onChange:x=>T(x.target.value),children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"inactive",children:"Inactivos"})]})]})}),e.jsx(N,{overflowX:"auto",children:e.jsxs(Zs,{variant:"simple",children:[e.jsx(et,{children:e.jsxs(gs,{children:[e.jsx(le,{children:"Versión"}),e.jsx(le,{children:"Título"}),e.jsx(le,{children:"Estado"}),e.jsx(le,{children:"Fecha Vigencia"}),e.jsx(le,{children:"Creado"}),e.jsx(le,{children:"Acciones"})]})}),e.jsx(st,{children:s.map(x=>e.jsxs(gs,{children:[e.jsx(ce,{fontWeight:"bold",children:x.version}),e.jsx(ce,{maxW:"300px",isTruncated:!0,children:x.title}),e.jsx(ce,{children:e.jsx(Se,{colorScheme:x.isActive?"green":"red",variant:"subtle",children:x.isActive?"Activo":"Inactivo"})}),e.jsx(ce,{children:ne(x.effectiveDate)}),e.jsx(ce,{children:ne(x.createdAt)}),e.jsx(ce,{children:e.jsxs(h,{spacing:2,children:[e.jsx(Ne,{label:"Ver",children:e.jsx(De,{icon:e.jsx(Nr,{}),size:"sm",variant:"ghost",onClick:()=>F(x)})}),e.jsx(Ne,{label:"Editar",children:e.jsx(De,{icon:e.jsx(qt,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:()=>M(x)})}),e.jsx(Ne,{label:x.isActive?"Desactivar":"Activar",children:e.jsx(jr,{isChecked:x.isActive,onChange:()=>V(x),colorScheme:"green"})}),!x.isActive&&e.jsx(Ne,{label:"Eliminar",children:e.jsx(De,{icon:e.jsx(Or,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>b(x)})})]})})]},x.id))})]})}),z.pages>1&&e.jsxs(h,{justify:"center",spacing:4,children:[e.jsx(O,{isDisabled:z.page===1,onClick:()=>D(x=>({...x,page:x.page-1})),children:"Anterior"}),e.jsxs(n,{children:["Página ",z.page," de ",z.pages]}),e.jsx(O,{isDisabled:z.page===z.pages,onClick:()=>D(x=>({...x,page:x.page+1})),children:"Siguiente"})]})]}),e.jsxs(qe,{isOpen:C,onClose:k,size:"xl",children:[e.jsx(Le,{}),e.jsxs(He,{maxW:"800px",children:[e.jsx(We,{children:o?"Editar Términos y Condiciones":"Ver Términos y Condiciones"}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:e.jsx("form",{onSubmit:g,children:e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(h,{children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Versión"}),e.jsx(re,{value:d.version,onChange:x=>j($=>({...$,version:x.target.value})),placeholder:"ej: 1.0, 2.0",isDisabled:!o})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Fecha de Vigencia"}),e.jsx(re,{type:"date",value:d.effectiveDate,onChange:x=>j($=>({...$,effectiveDate:x.target.value})),isDisabled:!o})]})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Título"}),e.jsx(re,{value:d.title,onChange:x=>j($=>({...$,title:x.target.value})),placeholder:"Título de los términos y condiciones",isDisabled:!o})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Contenido"}),e.jsx(_s,{value:d.content,onChange:x=>j($=>({...$,content:x.target.value})),placeholder:"Contenido completo de los términos y condiciones...",rows:15,isDisabled:!o})]}),o&&e.jsxs(h,{justify:"flex-end",children:[e.jsx(O,{variant:"ghost",onClick:k,children:"Cancelar"}),e.jsx(O,{type:"submit",colorScheme:"blue",children:i?"Actualizar":"Crear"})]}),!o&&e.jsx(h,{justify:"flex-end",children:e.jsx(O,{onClick:k,children:"Cerrar"})})]})})})]})]})]})},Ul=()=>{const[s,t]=di(),[r,a]=v.useState([]),[i,l]=v.useState(!0),{user:o}=Rs(),[c,d]=v.useState(null),[j,z]=v.useState(!1),[D,m]=v.useState(!1),[T,C]=v.useState({username:"",email:"",password:"",role:"repartidor",isActive:!0,firstName:"",lastName:"",documentNumber:"",phone:"",address:"",district:"",reference:"",vehicleType:"",vehiclePlate:"",licenseNumber:"",insuranceNumber:"",emergencyContact:"",emergencyPhone:""}),[I,k]=v.useState(!1),[y,P]=v.useState({page:1,limit:10,total:0,pages:0}),[E,R]=v.useState("all"),{isOpen:M,onOpen:F,onClose:g}=Fe(),V=ps(),b=ss("white","gray.800");ss("gray.200","gray.600"),v.useEffect(()=>{const w=s.get("role");w&&w!=="all"&&R(w)},[s]),v.useEffect(()=>{ne()},[y.page,E]);const ne=async()=>{var w,X,be;try{l(!0);const de=localStorage.getItem("token");console.log("🔑 Token para usuarios:",de?"Presente":"Ausente"),console.log("🔑 Token completo:",de),de&&!ns.defaults.headers.common.Authorization&&(ns.defaults.headers.common.Authorization=`Bearer ${de}`,console.log("🔑 Token configurado en axios")),console.log("🔑 Header Authorization actual:",ns.defaults.headers.common.Authorization),console.log("🔄 Llamando a /api/users/role con role:",E);let A;if(E==="all"){console.log("🔄 Obteniendo usuarios de todos los roles...");const[me,ae,Q]=await Promise.all([ns.get("/api/users/role?role=admin"),ns.get("/api/users/role?role=vendedor"),ns.get("/api/users/role?role=repartidor")]);console.log("📦 Admin users:",me.data),console.log("📦 Vendedor users:",ae.data),console.log("📦 Repartidor users:",Q.data),A={data:{success:!0,data:[...me.data.success?me.data.data:[],...ae.data.success?ae.data.data:[],...Q.data.success?Q.data.data:[]]}}}else console.log("🔄 Obteniendo usuarios del rol:",E),A=await ns.get(`/api/users/role?role=${E}`);console.log("📦 Respuesta usuarios:",A.data),A.data.success?(a(A.data.data||[]),P(me=>{var ae;return{...me,total:((ae=A.data.data)==null?void 0:ae.length)||0,pages:1}})):(a([]),P(me=>({...me,total:0,pages:1})))}catch(de){console.error("Error fetching users:",de),console.error("Error details:",(w=de.response)==null?void 0:w.data),console.error("Error status:",(X=de.response)==null?void 0:X.status),console.error("Error headers:",(be=de.response)==null?void 0:be.headers),V({title:"Error",description:"Error al cargar usuarios",status:"error",duration:3e3,isClosable:!0}),a([])}finally{l(!1)}},x=()=>{d(null),m(!0),z(!0),C({username:"",email:"",password:"",role:"repartidor",isActive:!0,firstName:"",lastName:"",documentNumber:"",phone:"",address:"",district:"",reference:"",vehicleType:"",vehiclePlate:"",licenseNumber:"",insuranceNumber:"",emergencyContact:"",emergencyPhone:""}),F()},$=w=>{d(w),m(!1),z(!0),C({username:w.username,email:w.email,password:"",role:w.role,isActive:w.isActive,firstName:w.firstName||"",lastName:w.lastName||"",documentNumber:w.documentNumber||"",phone:w.phone||"",address:w.address||"",district:w.district||"",reference:w.reference||"",vehicleType:w.vehicleType||"",vehiclePlate:w.vehiclePlate||"",licenseNumber:w.licenseNumber||"",insuranceNumber:w.insuranceNumber||"",emergencyContact:w.emergencyContact||"",emergencyPhone:w.emergencyPhone||""}),F()},q=w=>{d(w),m(!1),z(!1),C({username:w.username,email:w.email,password:"",role:w.role,isActive:w.isActive,firstName:w.firstName||"",lastName:w.lastName||"",documentNumber:w.documentNumber||"",phone:w.phone||"",address:w.address||"",district:w.district||"",reference:w.reference||"",vehicleType:w.vehicleType||"",vehiclePlate:w.vehiclePlate||"",licenseNumber:w.licenseNumber||"",insuranceNumber:w.insuranceNumber||"",emergencyContact:w.emergencyContact||"",emergencyPhone:w.emergencyPhone||""}),F()},se=async w=>{var X,be;w.preventDefault();try{const de=localStorage.getItem("token"),A={username:T.username,email:T.email,role:T.role,isActive:T.isActive};(D||T.password)&&(A.password=T.password),D?(await ns.post("/api/users",A),V({title:"Éxito",description:"Usuario creado exitosamente",status:"success",duration:3e3,isClosable:!0})):(await ns.put(`/api/users/${c.id}`,A),V({title:"Éxito",description:"Usuario actualizado exitosamente",status:"success",duration:3e3,isClosable:!0})),g(),ne()}catch(de){console.error("Error saving user:",de),V({title:"Error",description:((be=(X=de.response)==null?void 0:X.data)==null?void 0:be.message)||"Error al guardar usuario",status:"error",duration:3e3,isClosable:!0})}},we=async w=>{try{const X=localStorage.getItem("token");await ns.patch(`/api/users/${w.id}/toggle-status`,{}),V({title:"Éxito",description:`Usuario ${w.isActive?"desactivado":"activado"}`,status:"success",duration:3e3,isClosable:!0}),ne()}catch(X){console.error("Error toggling status:",X),V({title:"Error",description:"Error al cambiar estado del usuario",status:"error",duration:3e3,isClosable:!0})}},xe=async w=>{var X,be;if(o&&o.id===w.id){V({title:"Error",description:"No puedes eliminarte a ti mismo",status:"error",duration:3e3,isClosable:!0});return}if(window.confirm(`¿Estás seguro de eliminar al usuario "${w.username}"?`))try{const de=localStorage.getItem("token");await ns.delete(`/api/users/${w.id}`),V({title:"Éxito",description:"Usuario eliminado exitosamente",status:"success",duration:3e3,isClosable:!0}),ne()}catch(de){console.error("Error deleting user:",de),V({title:"Error",description:((be=(X=de.response)==null?void 0:X.data)==null?void 0:be.message)||"Error al eliminar usuario",status:"error",duration:3e3,isClosable:!0})}},Ce=w=>{switch(w){case"admin":return"red";case"vendedor":return"blue";case"repartidor":return"green";default:return"gray"}},_e=w=>{switch(w){case"admin":return"Administrador";case"vendedor":return"Vendedor";case"repartidor":return"Repartidor";default:return w}};return i?e.jsx(as,{h:"400px",children:e.jsx(bs,{size:"xl"})}):e.jsxs(N,{p:6,bg:b,borderRadius:"lg",boxShadow:"sm",children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:"Gestión de Usuarios"}),e.jsx(O,{leftIcon:e.jsx(Rr,{}),colorScheme:"blue",onClick:x,children:"Crear Usuario"})]}),e.jsx(h,{spacing:4,children:e.jsxs(U,{maxW:"200px",children:[e.jsx(G,{children:"Rol"}),e.jsxs(es,{value:E,onChange:w=>R(w.target.value),children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"admin",children:"Administrador"}),e.jsx("option",{value:"vendedor",children:"Vendedor"}),e.jsx("option",{value:"repartidor",children:"Repartidor"})]})]})}),e.jsx(N,{overflowX:"auto",children:e.jsxs(Zs,{variant:"simple",children:[e.jsx(et,{children:e.jsxs(gs,{children:[e.jsx(le,{children:"Usuario"}),e.jsx(le,{children:"Nombre"}),e.jsx(le,{children:"Email"}),e.jsx(le,{children:"Rol"}),e.jsx(le,{children:"Estado"}),e.jsx(le,{children:"Creado"}),e.jsx(le,{children:"Acciones"})]})}),e.jsx(st,{children:r.map(w=>e.jsxs(gs,{children:[e.jsx(ce,{fontWeight:"bold",children:w.username}),e.jsx(ce,{children:w.firstName&&w.lastName?`${w.firstName} ${w.lastName}`:w.firstName||w.lastName||"-"}),e.jsx(ce,{children:w.email}),e.jsx(ce,{children:e.jsx(Se,{colorScheme:Ce(w.role),variant:"subtle",children:_e(w.role)})}),e.jsx(ce,{children:e.jsx(Se,{colorScheme:w.isActive?"green":"red",variant:"subtle",children:w.isActive?"Activo":"Inactivo"})}),e.jsx(ce,{children:new Date(w.createdAt).toLocaleDateString("es-PE")}),e.jsx(ce,{children:e.jsxs(h,{spacing:2,children:[e.jsx(Ne,{label:"Ver",children:e.jsx(De,{icon:e.jsx(Nr,{}),size:"sm",variant:"ghost",onClick:()=>q(w)})}),e.jsx(Ne,{label:"Editar",children:e.jsx(De,{icon:e.jsx(qt,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:()=>$(w)})}),e.jsx(Ne,{label:w.isActive?"Desactivar":"Activar",children:e.jsx(jr,{isChecked:w.isActive,onChange:()=>we(w),colorScheme:"green"})}),e.jsx(Ne,{label:o&&o.id===w.id?"No puedes eliminarte a ti mismo":"Eliminar",children:e.jsx(De,{icon:e.jsx(Or,{}),size:"sm",variant:"ghost",colorScheme:"red",isDisabled:o&&o.id===w.id,onClick:()=>xe(w)})})]})})]},w.id))})]})}),y.pages>1&&e.jsxs(h,{justify:"center",spacing:4,children:[e.jsx(O,{isDisabled:y.page===1,onClick:()=>P(w=>({...w,page:w.page-1})),children:"Anterior"}),e.jsxs(n,{children:["Página ",y.page," de ",y.pages]}),e.jsx(O,{isDisabled:y.page===y.pages,onClick:()=>P(w=>({...w,page:w.page+1})),children:"Siguiente"})]})]}),e.jsxs(qe,{isOpen:M,onClose:g,size:"xl",children:[e.jsx(Le,{}),e.jsxs(He,{maxW:"800px",maxH:"90vh",overflowY:"auto",children:[e.jsx(We,{children:D?"Crear Usuario":j?"Editar Usuario":"Ver Usuario"}),e.jsx(Ue,{}),e.jsx(Me,{pb:6,children:e.jsx("form",{onSubmit:se,children:e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(N,{children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",mb:4,color:"blue.600",children:"Información Básica"}),e.jsxs(u,{spacing:4,children:[e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Nombre de Usuario"}),e.jsx(re,{value:T.username,onChange:w=>C(X=>({...X,username:w.target.value})),placeholder:"Nombre de usuario",isDisabled:!j})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Email"}),e.jsx(re,{type:"email",value:T.email,onChange:w=>C(X=>({...X,email:w.target.value})),placeholder:"correo@ejemplo.com",isDisabled:!j})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Nombre"}),e.jsx(re,{value:T.firstName,onChange:w=>C(X=>({...X,firstName:w.target.value})),placeholder:"Nombre",isDisabled:!j})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Apellido"}),e.jsx(re,{value:T.lastName,onChange:w=>C(X=>({...X,lastName:w.target.value})),placeholder:"Apellido",isDisabled:!j})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(G,{children:"DNI"}),e.jsx(re,{value:T.documentNumber,onChange:w=>C(X=>({...X,documentNumber:w.target.value})),placeholder:"12345678",isDisabled:!j})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Teléfono"}),e.jsx(re,{value:T.phone,onChange:w=>C(X=>({...X,phone:w.target.value})),placeholder:"987654321",isDisabled:!j})]})]}),e.jsxs(U,{isRequired:D,children:[e.jsxs(G,{children:["Contraseña ",!D&&"(dejar vacío para mantener la actual)"]}),e.jsxs(wt,{children:[e.jsx(re,{type:I?"text":"password",value:T.password,onChange:w=>C(X=>({...X,password:w.target.value})),placeholder:D?"Contraseña":"Nueva contraseña (opcional)",isDisabled:!j}),e.jsx(Nn,{children:e.jsx(De,{"aria-label":I?"Ocultar contraseña":"Mostrar contraseña",icon:I?e.jsx(Gn,{}):e.jsx(Vs,{}),variant:"ghost",size:"sm",onClick:()=>k(!I),isDisabled:!j})})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Rol"}),e.jsxs(es,{value:T.role,onChange:w=>C(X=>({...X,role:w.target.value})),isDisabled:!j,children:[e.jsx("option",{value:"repartidor",children:"Repartidor"}),e.jsx("option",{value:"vendedor",children:"Vendedor"}),e.jsx("option",{value:"admin",children:"Administrador"})]})]}),e.jsx(U,{children:e.jsxs(h,{justify:"space-between",children:[e.jsx(G,{mb:0,children:"Usuario Activo"}),e.jsx(jr,{isChecked:T.isActive,onChange:w=>C(X=>({...X,isActive:w.target.checked})),isDisabled:!j,colorScheme:"green"})]})})]})]})]}),e.jsxs(N,{children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",mb:4,color:"blue.600",children:"Dirección"}),e.jsxs(u,{spacing:4,children:[e.jsxs(U,{children:[e.jsx(G,{children:"Dirección"}),e.jsx(re,{value:T.address,onChange:w=>C(X=>({...X,address:w.target.value})),placeholder:"Jr. Las Flores 123",isDisabled:!j})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(G,{children:"Distrito"}),e.jsx(re,{value:T.district,onChange:w=>C(X=>({...X,district:w.target.value})),placeholder:"Callería",isDisabled:!j})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Referencia"}),e.jsx(re,{value:T.reference,onChange:w=>C(X=>({...X,reference:w.target.value})),placeholder:"Frente al parque",isDisabled:!j})]})]})]})]}),T.role==="repartidor"&&e.jsxs(N,{children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",mb:4,color:"green.600",children:"Datos de Repartidor"}),e.jsxs(u,{spacing:4,children:[e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(G,{children:"Tipo de Vehículo"}),e.jsxs(es,{value:T.vehicleType,onChange:w=>C(X=>({...X,vehicleType:w.target.value})),isDisabled:!j,children:[e.jsx("option",{value:"",children:"Seleccionar"}),e.jsx("option",{value:"motorcycle",children:"Motocicleta"}),e.jsx("option",{value:"bicycle",children:"Bicicleta"}),e.jsx("option",{value:"car",children:"Auto"}),e.jsx("option",{value:"truck",children:"Camión"})]})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Placa del Vehículo"}),e.jsx(re,{value:T.vehiclePlate,onChange:w=>C(X=>({...X,vehiclePlate:w.target.value})),placeholder:"ABC-123",isDisabled:!j})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(G,{children:"Número de Licencia"}),e.jsx(re,{value:T.licenseNumber,onChange:w=>C(X=>({...X,licenseNumber:w.target.value})),placeholder:"12345678",isDisabled:!j})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Número de Seguro"}),e.jsx(re,{value:T.insuranceNumber,onChange:w=>C(X=>({...X,insuranceNumber:w.target.value})),placeholder:"987654321",isDisabled:!j})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(G,{children:"Contacto de Emergencia"}),e.jsx(re,{value:T.emergencyContact,onChange:w=>C(X=>({...X,emergencyContact:w.target.value})),placeholder:"María García",isDisabled:!j})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Teléfono de Emergencia"}),e.jsx(re,{value:T.emergencyPhone,onChange:w=>C(X=>({...X,emergencyPhone:w.target.value})),placeholder:"987654321",isDisabled:!j})]})]})]})]}),j&&e.jsxs(h,{justify:"flex-end",children:[e.jsx(O,{variant:"ghost",onClick:g,children:"Cancelar"}),e.jsx(O,{type:"submit",colorScheme:"blue",children:D?"Crear":"Actualizar"})]}),!j&&e.jsx(h,{justify:"flex-end",children:e.jsx(O,{onClick:g,children:"Cerrar"})})]})})})]})]})]})},Gl=()=>{const{token:s,checkAuth:t}=Rs(),[r,a]=v.useState(!0);return v.useEffect(()=>{(async()=>{try{console.log("🔄 Iniciando verificación de autenticación...");const l=await t();console.log("✅ Verificación completada, autenticado:",l)}catch(l){console.error("❌ Error en verificación de autenticación:",l)}finally{a(!1)}})()},[t]),r?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Cargando..."})]}):e.jsxs(ui,{children:[e.jsx(rs,{path:"/",element:e.jsx(yl,{}),children:e.jsx(rs,{index:!0,element:e.jsx(Al,{})})}),e.jsx(rs,{path:"/guest-order",element:e.jsx(Nl,{})}),e.jsx(rs,{path:"/receipt/:id",element:e.jsx(Ol,{})}),e.jsx(rs,{path:"/track/:id",element:e.jsx(Fl,{})}),e.jsx(rs,{path:"/delivery-login",element:e.jsx(Wl,{})}),e.jsxs(rs,{path:"/dashboard",element:s?e.jsx(Pn,{}):e.jsx(jt,{to:"/",replace:!0}),children:[e.jsx(rs,{index:!0,element:e.jsx(Ts,{requiredRoles:["admin","vendedor"],children:e.jsx(Tl,{})})}),e.jsx(rs,{path:"orders-management",element:e.jsx(Ts,{requiredRoles:["admin"],children:e.jsx(Dl,{})})}),e.jsx(rs,{path:"delivery-fees",element:e.jsx(Ts,{requiredRoles:["admin"],children:e.jsx(Rl,{})})}),e.jsx(rs,{path:"subscriptions",element:e.jsx(Ts,{requiredRoles:["admin"],children:e.jsx($l,{})})}),e.jsx(rs,{path:"vales",element:e.jsx(Ts,{requiredRoles:["admin"],children:e.jsx(Bl,{})})}),e.jsx(rs,{path:"collection-report",element:e.jsx(Ts,{requiredRoles:["admin"],children:e.jsx(Vl,{})})}),e.jsx(rs,{path:"clients",element:e.jsx(Ts,{requiredRoles:["admin"],children:e.jsx(ql,{})})}),e.jsx(rs,{path:"terms-and-conditions",element:e.jsx(Ts,{requiredRoles:["admin"],children:e.jsx(Hl,{})})}),e.jsx(rs,{path:"users-management",element:e.jsx(Ts,{requiredRoles:["admin"],children:e.jsx(Ul,{})})})]}),e.jsx(rs,{path:"/delivery-dashboard",element:s?e.jsx(Pn,{}):e.jsx(jt,{to:"/delivery-login",replace:!0}),children:e.jsx(rs,{index:!0,element:e.jsx(Ts,{requiredRoles:["repartidor"],children:e.jsx(Ll,{})})})}),e.jsx(rs,{path:"*",element:e.jsx(jt,{to:"/",replace:!0})})]})},Ms={base:1,content:1,dropdown:100,sticky:200,banner:300,overlay:400,header:999,sidebar:1e3,modal:1300,popover:1400,tooltip:1500,notification:1600,toast:1700,skipLink:1800},Yl=ai`
  0% { opacity: 0.8; transform: scale(1); }
  50% { opacity: 0.4; transform: scale(1.2); }
  100% { opacity: 0.8; transform: scale(1); }
`,Xl=ii({zIndices:Ms,styles:{global:{".pulse-animation":{animation:`${Yl} 2s infinite`}}},components:{Modal:{baseStyle:{overlay:{zIndex:Ms.modal},dialogContainer:{zIndex:Ms.modal}}},Menu:{baseStyle:{list:{zIndex:Ms.dropdown}}},Popover:{baseStyle:{content:{zIndex:Ms.popover}}},Tooltip:{baseStyle:{zIndex:Ms.tooltip}},Drawer:{baseStyle:{overlay:{zIndex:Ms.modal},dialogContainer:{zIndex:Ms.modal}}}},colors:{brand:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1"}}});br.createRoot(document.getElementById("root")).render(e.jsx(pe.StrictMode,{children:e.jsx(oi,{theme:Xl,children:e.jsxs(hi,{children:[e.jsx(Gl,{}),e.jsx(Gi,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,style:{zIndex:1700}})]})})}));
