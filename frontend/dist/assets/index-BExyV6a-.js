import{j as e,V as u,T as n,H as h,I as Rt,u as Me,C as Lr,a as F,b as M,B as _,c as le,d as K,e as Ce,D as hs,f as O,_ as Ss,g as $t,h as xs,i as Oe,k as Ge,l as Ha,E as Ua,M as Ke,m as Ye,n as Ze,o as Xe,p as es,q as Qe,U as lt,L as _e,r as br,s as Gs,F as ys,t as ke,v as rn,w as nn,x as Ga,y as Ya,z as Xa,A as Rn,G as On,J as Qa,K as Ja,N as Ln,O as yr,P as ls,Q as Te,R as De,S as U,W as G,X as re,Y as as,Z as Ve,$ as qe,a0 as He,a1 as Ue,a2 as vs,a3 as Pt,a4 as Fr,a5 as Ka,a6 as rs,a7 as Ns,a8 as As,a9 as Pe,aa as Wr,ab as Yt,ac as Fn,ad as Za,ae as Ms,af as dr,ag as ur,ah as Mr,ai as $r,aj as Wn,ak as Mn,al as tt,am as rt,an as fs,ao as ue,ap as nt,aq as he,ar as ei,as as si,at as ti,au as an,av as ri,aw as on,ax as $n,ay as ni,az as ai,aA as ii,aB as oi,aC as li,aD as vr,aE as ln,aF as Sr,aG as Cr,aH as ci,aI as di,aJ as ui}from"./chakra-DhdMOvI-.js";import{a as hi,r as S,b as me}from"./vendor-Q3K9tvtn.js";import{u as Ys,O as Bn,N as pi,a as Vn,b as xi,R as gi,c as is,d as cn,B as mi}from"./router-DREMpGBD.js";import{a as os,c as ft}from"./utils-DzZC5mzC.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var wr={},dn=hi;wr.createRoot=dn.createRoot,wr.hydrateRoot=dn.hydrateRoot;function qn(s){var t,r,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(t=0;t<i;t++)s[t]&&(r=qn(s[t]))&&(a&&(a+=" "),a+=r)}else for(r in s)s[r]&&(a&&(a+=" "),a+=r);return a}function Js(){for(var s,t,r=0,a="",i=arguments.length;r<i;r++)(s=arguments[r])&&(t=qn(s))&&(a&&(a+=" "),a+=t);return a}function fi(s){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=s:r.appendChild(document.createTextNode(s))}fi(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var At=s=>typeof s=="number"&&!isNaN(s),st=s=>typeof s=="string",Ls=s=>typeof s=="function",ji=s=>st(s)||At(s),zr=s=>st(s)||Ls(s)?s:null,bi=(s,t)=>s===!1||At(s)&&s>0?s:t,Pr=s=>S.isValidElement(s)||st(s)||Ls(s)||At(s);function yi(s,t,r=300){let{scrollHeight:a,style:i}=s;requestAnimationFrame(()=>{i.minHeight="initial",i.height=a+"px",i.transition=`all ${r}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,r)})})}function vi({enter:s,exit:t,appendPosition:r=!1,collapse:a=!0,collapseDuration:i=300}){return function({children:l,position:o,preventExitTransition:c,done:d,nodeRef:x,isIn:P,playToast:A}){let R=r?`${s}--${o}`:s,f=r?`${t}--${o}`:t,p=S.useRef(0);return S.useLayoutEffect(()=>{let T=x.current,k=R.split(" "),y=w=>{w.target===x.current&&(A(),T.removeEventListener("animationend",y),T.removeEventListener("animationcancel",y),p.current===0&&w.type!=="animationcancel"&&T.classList.remove(...k))};T.classList.add(...k),T.addEventListener("animationend",y),T.addEventListener("animationcancel",y)},[]),S.useEffect(()=>{let T=x.current,k=()=>{T.removeEventListener("animationend",k),a?yi(T,d,i):d()};P||(c?k():(p.current=1,T.className+=` ${f}`,T.addEventListener("animationend",k)))},[P]),me.createElement(me.Fragment,null,l)}}function un(s,t){return{content:Hn(s.content,s.props),containerId:s.props.containerId,id:s.props.toastId,theme:s.props.theme,type:s.props.type,data:s.props.data||{},isLoading:s.props.isLoading,icon:s.props.icon,reason:s.removalReason,status:t}}function Hn(s,t,r=!1){return S.isValidElement(s)&&!st(s.type)?S.cloneElement(s,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):Ls(s)?s({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):s}function Si({closeToast:s,theme:t,ariaLabel:r="close"}){return me.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:a=>{a.stopPropagation(),s(!0)},"aria-label":r},me.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},me.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Ci({delay:s,isRunning:t,closeToast:r,type:a="default",hide:i,className:l,controlledProgress:o,progress:c,rtl:d,isIn:x,theme:P}){let A=i||o&&c===0,R={animationDuration:`${s}ms`,animationPlayState:t?"running":"paused"};o&&(R.transform=`scaleX(${c})`);let f=Js("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${P}`,`Toastify__progress-bar--${a}`,{"Toastify__progress-bar--rtl":d}),p=Ls(l)?l({rtl:d,type:a,defaultClassName:f}):Js(f,l),T={[o&&c>=1?"onTransitionEnd":"onAnimationEnd"]:o&&c<1?null:()=>{x&&r()}};return me.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":A},me.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${P} Toastify__progress-bar--${a}`}),me.createElement("div",{role:"progressbar","aria-hidden":A?"true":"false","aria-label":"notification timer",className:p,style:R,...T}))}var wi=1,Un=()=>`${wi++}`;function zi(s,t,r){let a=1,i=0,l=[],o=[],c=t,d=new Map,x=new Set,P=w=>(x.add(w),()=>x.delete(w)),A=()=>{o=Array.from(d.values()),x.forEach(w=>w())},R=({containerId:w,toastId:E,updateId:N})=>{let $=w?w!==s:s!==1,L=d.has(E)&&N==null;return $||L},f=(w,E)=>{d.forEach(N=>{var $;(E==null||E===N.props.toastId)&&(($=N.toggle)==null||$.call(N,w))})},p=w=>{var E,N;(N=(E=w.props)==null?void 0:E.onClose)==null||N.call(E,w.removalReason),w.isActive=!1},T=w=>{if(w==null)d.forEach(p);else{let E=d.get(w);E&&p(E)}A()},k=()=>{i-=l.length,l=[]},y=w=>{var E,N;let{toastId:$,updateId:L}=w.props,g=L==null;w.staleId&&d.delete(w.staleId),w.isActive=!0,d.set($,w),A(),r(un(w,g?"added":"updated")),g&&((N=(E=w.props).onOpen)==null||N.call(E))};return{id:s,props:c,observe:P,toggle:f,removeToast:T,toasts:d,clearQueue:k,buildToast:(w,E)=>{if(R(E))return;let{toastId:N,updateId:$,data:L,staleId:g,delay:q}=E,b=$==null;b&&i++;let ae={...c,style:c.toastStyle,key:a++,...Object.fromEntries(Object.entries(E).filter(([Q,W])=>W!=null)),toastId:N,updateId:$,data:L,isIn:!1,className:zr(E.className||c.toastClassName),progressClassName:zr(E.progressClassName||c.progressClassName),autoClose:E.isLoading?!1:bi(E.autoClose,c.autoClose),closeToast(Q){d.get(N).removalReason=Q,T(N)},deleteToast(){let Q=d.get(N);if(Q!=null){if(r(un(Q,"removed")),d.delete(N),i--,i<0&&(i=0),l.length>0){y(l.shift());return}A()}}};ae.closeButton=c.closeButton,E.closeButton===!1||Pr(E.closeButton)?ae.closeButton=E.closeButton:E.closeButton===!0&&(ae.closeButton=Pr(c.closeButton)?c.closeButton:!0);let v={content:w,props:ae,staleId:g};c.limit&&c.limit>0&&i>c.limit&&b?l.push(v):At(q)?setTimeout(()=>{y(v)},q):y(v)},setProps(w){c=w},setToggle:(w,E)=>{let N=d.get(w);N&&(N.toggle=E)},isToastActive:w=>{var E;return(E=d.get(w))==null?void 0:E.isActive},getSnapshot:()=>o}}var ms=new Map,Ct=[],Ar=new Set,Pi=s=>Ar.forEach(t=>t(s)),Gn=()=>ms.size>0;function Ai(){Ct.forEach(s=>Xn(s.content,s.options)),Ct=[]}var Ei=(s,{containerId:t})=>{var r;return(r=ms.get(t||1))==null?void 0:r.toasts.get(s)};function Yn(s,t){var r;if(t)return!!((r=ms.get(t))!=null&&r.isToastActive(s));let a=!1;return ms.forEach(i=>{i.isToastActive(s)&&(a=!0)}),a}function Ti(s){if(!Gn()){Ct=Ct.filter(t=>s!=null&&t.options.toastId!==s);return}if(s==null||ji(s))ms.forEach(t=>{t.removeToast(s)});else if(s&&("containerId"in s||"id"in s)){let t=ms.get(s.containerId);t?t.removeToast(s.id):ms.forEach(r=>{r.removeToast(s.id)})}}var Di=(s={})=>{ms.forEach(t=>{t.props.limit&&(!s.containerId||t.id===s.containerId)&&t.clearQueue()})};function Xn(s,t){Pr(s)&&(Gn()||Ct.push({content:s,options:t}),ms.forEach(r=>{r.buildToast(s,t)}))}function Ii(s){var t;(t=ms.get(s.containerId||1))==null||t.setToggle(s.id,s.fn)}function Qn(s,t){ms.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(s,t==null?void 0:t.id)})}function _i(s){let t=s.containerId||1;return{subscribe(r){let a=zi(t,s,Pi);ms.set(t,a);let i=a.observe(r);return Ai(),()=>{i(),ms.delete(t)}},setProps(r){var a;(a=ms.get(t))==null||a.setProps(r)},getSnapshot(){var r;return(r=ms.get(t))==null?void 0:r.getSnapshot()}}}function ki(s){return Ar.add(s),()=>{Ar.delete(s)}}function Ni(s){return s&&(st(s.toastId)||At(s.toastId))?s.toastId:Un()}function Et(s,t){return Xn(s,t),t.toastId}function Xt(s,t){return{...t,type:t&&t.type||s,toastId:Ni(t)}}function Qt(s){return(t,r)=>Et(t,Xt(s,r))}function Ne(s,t){return Et(s,Xt("default",t))}Ne.loading=(s,t)=>Et(s,Xt("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function Ri(s,{pending:t,error:r,success:a},i){let l;t&&(l=st(t)?Ne.loading(t,i):Ne.loading(t.render,{...i,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(x,P,A)=>{if(P==null){Ne.dismiss(l);return}let R={type:x,...o,...i,data:A},f=st(P)?{render:P}:P;return l?Ne.update(l,{...R,...f}):Ne(f.render,{...R,...f}),A},d=Ls(s)?s():s;return d.then(x=>c("success",a,x)).catch(x=>c("error",r,x)),d}Ne.promise=Ri;Ne.success=Qt("success");Ne.info=Qt("info");Ne.error=Qt("error");Ne.warning=Qt("warning");Ne.warn=Ne.warning;Ne.dark=(s,t)=>Et(s,Xt("default",{theme:"dark",...t}));function Oi(s){Ti(s)}Ne.dismiss=Oi;Ne.clearWaitingQueue=Di;Ne.isActive=Yn;Ne.update=(s,t={})=>{let r=Ei(s,t);if(r){let{props:a,content:i}=r,l={delay:100,...a,...t,toastId:t.toastId||s,updateId:Un()};l.toastId!==s&&(l.staleId=s);let o=l.render||i;delete l.render,Et(o,l)}};Ne.done=s=>{Ne.update(s,{progress:1})};Ne.onChange=ki;Ne.play=s=>Qn(!0,s);Ne.pause=s=>Qn(!1,s);function Li(s){var t;let{subscribe:r,getSnapshot:a,setProps:i}=S.useRef(_i(s)).current;i(s);let l=(t=S.useSyncExternalStore(r,a,a))==null?void 0:t.slice();function o(c){if(!l)return[];let d=new Map;return s.newestOnTop&&l.reverse(),l.forEach(x=>{let{position:P}=x.props;d.has(P)||d.set(P,[]),d.get(P).push(x)}),Array.from(d,x=>c(x[0],x[1]))}return{getToastToRender:o,isToastActive:Yn,count:l==null?void 0:l.length}}function Fi(s){let[t,r]=S.useState(!1),[a,i]=S.useState(!1),l=S.useRef(null),o=S.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:d,closeToast:x,onClick:P,closeOnClick:A}=s;Ii({id:s.toastId,containerId:s.containerId,fn:r}),S.useEffect(()=>{if(s.pauseOnFocusLoss)return R(),()=>{f()}},[s.pauseOnFocusLoss]);function R(){document.hasFocus()||y(),window.addEventListener("focus",k),window.addEventListener("blur",y)}function f(){window.removeEventListener("focus",k),window.removeEventListener("blur",y)}function p(g){if(s.draggable===!0||s.draggable===g.pointerType){w();let q=l.current;o.canCloseOnClick=!0,o.canDrag=!0,q.style.transition="none",s.draggableDirection==="x"?(o.start=g.clientX,o.removalDistance=q.offsetWidth*(s.draggablePercent/100)):(o.start=g.clientY,o.removalDistance=q.offsetHeight*(s.draggablePercent===80?s.draggablePercent*1.5:s.draggablePercent)/100)}}function T(g){let{top:q,bottom:b,left:ae,right:v}=l.current.getBoundingClientRect();g.nativeEvent.type!=="touchend"&&s.pauseOnHover&&g.clientX>=ae&&g.clientX<=v&&g.clientY>=q&&g.clientY<=b?y():k()}function k(){r(!0)}function y(){r(!1)}function w(){o.didMove=!1,document.addEventListener("pointermove",N),document.addEventListener("pointerup",$)}function E(){document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",$)}function N(g){let q=l.current;if(o.canDrag&&q){o.didMove=!0,t&&y(),s.draggableDirection==="x"?o.delta=g.clientX-o.start:o.delta=g.clientY-o.start,o.start!==g.clientX&&(o.canCloseOnClick=!1);let b=s.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;q.style.transform=`translate3d(${b},0)`,q.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function $(){E();let g=l.current;if(o.canDrag&&o.didMove&&g){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),s.closeToast(!0),s.collapseAll();return}g.style.transition="transform 0.2s, opacity 0.2s",g.style.removeProperty("transform"),g.style.removeProperty("opacity")}}let L={onPointerDown:p,onPointerUp:T};return c&&d&&(L.onMouseEnter=y,s.stacked||(L.onMouseLeave=k)),A&&(L.onClick=g=>{P&&P(g),o.canCloseOnClick&&x(!0)}),{playToast:k,pauseToast:y,isRunning:t,preventExitTransition:a,toastRef:l,eventHandlers:L}}var Wi=typeof window<"u"?S.useLayoutEffect:S.useEffect,Jt=({theme:s,type:t,isLoading:r,...a})=>me.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:s==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...a});function Mi(s){return me.createElement(Jt,{...s},me.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function $i(s){return me.createElement(Jt,{...s},me.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Bi(s){return me.createElement(Jt,{...s},me.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Vi(s){return me.createElement(Jt,{...s},me.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function qi(){return me.createElement("div",{className:"Toastify__spinner"})}var Er={info:$i,warning:Mi,success:Bi,error:Vi,spinner:qi},Hi=s=>s in Er;function Ui({theme:s,type:t,isLoading:r,icon:a}){let i=null,l={theme:s,type:t};return a===!1||(Ls(a)?i=a({...l,isLoading:r}):S.isValidElement(a)?i=S.cloneElement(a,l):r?i=Er.spinner():Hi(t)&&(i=Er[t](l))),i}var Gi=s=>{let{isRunning:t,preventExitTransition:r,toastRef:a,eventHandlers:i,playToast:l}=Fi(s),{closeButton:o,children:c,autoClose:d,onClick:x,type:P,hideProgressBar:A,closeToast:R,transition:f,position:p,className:T,style:k,progressClassName:y,updateId:w,role:E,progress:N,rtl:$,toastId:L,deleteToast:g,isIn:q,isLoading:b,closeOnClick:ae,theme:v,ariaLabel:Q}=s,W=Js("Toastify__toast",`Toastify__toast-theme--${v}`,`Toastify__toast--${P}`,{"Toastify__toast--rtl":$},{"Toastify__toast--close-on-click":ae}),Z=Ls(T)?T({rtl:$,position:p,type:P,defaultClassName:W}):Js(W,T),ve=Ui(s),oe=!!N||!d,pe={closeToast:R,type:P,theme:v},Le=null;return o===!1||(Ls(o)?Le=o(pe):S.isValidElement(o)?Le=S.cloneElement(o,pe):Le=Si(pe)),me.createElement(f,{isIn:q,done:g,position:p,preventExitTransition:r,nodeRef:a,playToast:l},me.createElement("div",{id:L,tabIndex:0,onClick:x,"data-in":q,className:Z,...i,style:k,ref:a,...q&&{role:E,"aria-label":Q}},ve!=null&&me.createElement("div",{className:Js("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!b})},ve),Hn(c,s,!t),Le,!s.customProgressBar&&me.createElement(Ci,{...w&&!oe?{key:`p-${w}`}:{},rtl:$,theme:v,delay:d,isRunning:t,isIn:q,closeToast:R,hide:A,type:P,className:y,controlledProgress:oe,progress:N||0})))},Yi=(s,t=!1)=>({enter:`Toastify--animate Toastify__${s}-enter`,exit:`Toastify--animate Toastify__${s}-exit`,appendPosition:t}),Xi=vi(Yi("bounce",!0)),Qi={position:"top-right",transition:Xi,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:s=>s.altKey&&s.code==="KeyT"};function Ji(s){let t={...Qi,...s},r=s.stacked,[a,i]=S.useState(!0),l=S.useRef(null),{getToastToRender:o,isToastActive:c,count:d}=Li(t),{className:x,style:P,rtl:A,containerId:R,hotKeys:f}=t;function p(k){let y=Js("Toastify__toast-container",`Toastify__toast-container--${k}`,{"Toastify__toast-container--rtl":A});return Ls(x)?x({position:k,rtl:A,defaultClassName:y}):Js(y,zr(x))}function T(){r&&(i(!0),Ne.play())}return Wi(()=>{var k;if(r){let y=l.current.querySelectorAll('[data-in="true"]'),w=12,E=(k=t.position)==null?void 0:k.includes("top"),N=0,$=0;Array.from(y).reverse().forEach((L,g)=>{let q=L;q.classList.add("Toastify__toast--stacked"),g>0&&(q.dataset.collapsed=`${a}`),q.dataset.pos||(q.dataset.pos=E?"top":"bot");let b=N*(a?.2:1)+(a?0:w*g);q.style.setProperty("--y",`${E?b:b*-1}px`),q.style.setProperty("--g",`${w}`),q.style.setProperty("--s",`${1-(a?$:0)}`),N+=q.offsetHeight,$+=.025})}},[a,d,r]),S.useEffect(()=>{function k(y){var w;let E=l.current;f(y)&&((w=E.querySelector('[tabIndex="0"]'))==null||w.focus(),i(!1),Ne.pause()),y.key==="Escape"&&(document.activeElement===E||E!=null&&E.contains(document.activeElement))&&(i(!0),Ne.play())}return document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}},[f]),me.createElement("section",{ref:l,className:"Toastify",id:R,onMouseEnter:()=>{r&&(i(!1),Ne.pause())},onMouseLeave:T,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((k,y)=>{let w=y.length?{...P}:{...P,pointerEvents:"none"};return me.createElement("div",{tabIndex:-1,className:p(k),"data-stacked":r,style:w,key:`c-${k}`},y.map(({content:E,props:N})=>me.createElement(Gi,{...N,stacked:r,collapseAll:T,isIn:c(N.toastId,N.containerId),key:`t-${N.key}`},E)))}))}const Y=os.create({baseURL:"https://aquayara.onrender.com",headers:{"Content-Type":"application/json"},withCredentials:!0});Y.interceptors.request.use(s=>{const t=localStorage.getItem("token");return console.log("ðŸŒ URL completa:",s.baseURL+s.url),console.log("ðŸŒ BaseURL configurado:",s.baseURL),console.log("ðŸŒ URL relativa:",s.url),console.log("ðŸ”‘ Token presente:",t?"SÃ­":"No"),console.log("ðŸ”‘ Token completo:",t),t?(s.headers.Authorization=`Bearer ${t}`,console.log("ðŸ”‘ Token enviado para:",s.url),console.log("ðŸ”‘ Header configurado:",s.headers.Authorization)):console.log("âŒ No hay token disponible"),s},s=>(console.error("âŒ Error en interceptor de request:",s),Promise.reject(s)));Y.interceptors.response.use(s=>(console.log("ðŸ“¦ Respuesta recibida de:",s.config.url),console.log("ðŸ“¦ Status:",s.status),console.log("ðŸ“¦ Content-Type:",s.headers["content-type"]),s),async s=>{var a,i,l;const t=s.config,r=localStorage.getItem("token");if(console.log("âŒ Error en respuesta:",(a=s.response)==null?void 0:a.status,(i=s.config)==null?void 0:i.url),s.response&&s.response.status===401&&!t._retry&&r&&!((l=t.url)!=null&&l.includes("/auth/profile"))){console.log("ðŸ”„ Token expirado, se reintentarÃ¡ automÃ¡ticamente"),t._retry=!0;try{const o=await os.post("https://aquayara.onrender.com/api/auth/refresh",{},{headers:{Authorization:`Bearer ${r}`}});if(o.data.success){const c=o.data.token;return localStorage.setItem("token",c),t.headers.Authorization=`Bearer ${c}`,console.log("âœ… Token renovado exitosamente"),Y(t)}}catch(o){return console.error("âŒ Error al renovar token:",o),localStorage.removeItem("token"),window.location.href="/login",Promise.reject(o)}}return s.response&&s.response.status===404&&console.log("Recurso no encontrado:",s.response.data),Promise.reject(s)});const Os=ft((s,t)=>({token:localStorage.getItem("token")||null,user:null,loading:!1,error:null,login:async(r,a)=>{var i,l,o,c;s({loading:!0,error:null});try{let d;try{d=await Y.post("/api/delivery/login",{username:r,password:a})}catch{d=await Y.post("/api/auth/login",{username:r,password:a})}const{token:x,user:P}=d.data;localStorage.setItem("token",x),Y.defaults.headers.common.Authorization=`Bearer ${x}`;try{const A=await Y.get("/api/auth/profile");s({token:x,user:A.data,loading:!1})}catch{s({token:x,user:P,loading:!1})}return{success:!0}}catch(d){return s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al iniciar sesiÃ³n",loading:!1}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al iniciar sesiÃ³n"}}},register:async r=>{var a,i,l,o;s({loading:!0,error:null});try{const c=await Y.post("/api/auth/register",r);return s({loading:!1}),{success:!0,data:c.data}}catch(c){return s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al registrar usuario",loading:!1}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al registrar usuario"}}},logout:()=>{localStorage.removeItem("token"),delete Y.defaults.headers.common.Authorization,s({token:null,user:null})},checkAuth:async()=>{var a,i,l;const r=localStorage.getItem("token");if(console.log("ðŸ” Token encontrado en localStorage:",!!r),!r)return console.log("âŒ No hay token, usuario no autenticado"),s({token:null,user:null}),!1;try{console.log("ðŸ”„ Verificando token con el servidor..."),Y.defaults.headers.common.Authorization=`Bearer ${r}`;const o=await Y.get("/api/auth/profile");return console.log("âœ… Token vÃ¡lido, usuario autenticado:",o.data),s({user:o.data,token:r}),!0}catch(o){return console.error("âŒ Token invÃ¡lido o error del servidor:",o),console.error("âŒ Status:",(a=o.response)==null?void 0:a.status),console.error("âŒ Message:",(l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message),localStorage.removeItem("token"),delete Y.defaults.headers.common.Authorization,s({token:null,user:null}),!1}},clearError:()=>s({error:null})})),_t=new Date("2025-09-24"),hn=2,Br=()=>{const[s,t]=S.useState(!1),[r,a]=S.useState(0),[i,l]=S.useState(!0);return S.useEffect(()=>{const o=()=>{try{const d=new Date,x=new Date(_t);if(x.setMonth(x.getMonth()+hn),console.log("ðŸ” Verificando expiraciÃ³n del sistema:"),console.log("ðŸ“… Fecha de inicio:",_t.toLocaleDateString()),console.log("â° Fecha de expiraciÃ³n:",x.toLocaleDateString()),console.log("ðŸ“… Fecha actual:",d.toLocaleDateString()),d>=x)console.log("âŒ Sistema expirado"),t(!0),a(0);else{const P=x.getTime()-d.getTime(),A=Math.ceil(P/(1e3*3600*24));console.log("âœ… Sistema activo, dÃ­as restantes:",A),t(!1),a(A)}}catch(d){console.error("Error verificando expiraciÃ³n:",d),t(!1),a(999)}finally{l(!1)}};o();const c=setInterval(o,60*60*1e3);return()=>clearInterval(c)},[]),{isExpired:s,daysRemaining:r,isLoading:i,expiryDate:new Date(new Date(_t).setMonth(new Date(_t).getMonth()+hn))}};var Jn={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},pn=me.createContext&&me.createContext(Jn),Ki=["attr","size","title"];function Zi(s,t){if(s==null)return{};var r=eo(s,t),a,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(i=0;i<l.length;i++)a=l[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function eo(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function Bt(){return Bt=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Bt.apply(this,arguments)}function xn(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),r.push.apply(r,a)}return r}function Vt(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xn(Object(r),!0).forEach(function(a){so(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function so(s,t,r){return t=to(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function to(s){var t=ro(s,"string");return typeof t=="symbol"?t:t+""}function ro(s,t){if(typeof s!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function Kn(s){return s&&s.map((t,r)=>me.createElement(t.tag,Vt({key:r},t.attr),Kn(t.child)))}function xe(s){return t=>me.createElement(no,Bt({attr:Vt({},s.attr)},t),Kn(s.child))}function no(s){var t=r=>{var{attr:a,size:i,title:l}=s,o=Zi(s,Ki),c=i||r.size||"1em",d;return r.className&&(d=r.className),s.className&&(d=(d?d+" ":"")+s.className),me.createElement("svg",Bt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,o,{className:d,style:Vt(Vt({color:s.color||r.color},r.style),s.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&me.createElement("title",null,l),s.children)};return pn!==void 0?me.createElement(pn.Consumer,null,r=>t(r)):t(Jn)}function ct(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(s)}function hr(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(s)}function ks(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(s)}function Ps(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(s)}function pr(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(s)}function gn(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(s)}function Vs(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(s)}function ao(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.61 233.32L278.68 9.39c-12.52-12.52-32.83-12.52-45.36 0L9.39 233.32c-12.52 12.53-12.52 32.83 0 45.36l223.93 223.93c12.52 12.53 32.83 12.53 45.36 0l223.93-223.93c12.52-12.53 12.52-32.83 0-45.36zm-100.98 12.56l-84.21 77.73c-5.12 4.73-13.43 1.1-13.43-5.88V264h-96v64c0 4.42-3.58 8-8 8h-32c-4.42 0-8-3.58-8-8v-80c0-17.67 14.33-32 32-32h112v-53.73c0-6.97 8.3-10.61 13.43-5.88l84.21 77.73c3.43 3.17 3.43 8.59 0 11.76z"},child:[]}]})(s)}function Vr(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(s)}function Tr(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(s)}function io(s){return xe({attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z"},child:[]}]})(s)}function qr(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(s)}function Zn(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(s)}function ea(s){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(s)}function qs(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(s)}function sa(s){return xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(s)}function oo(s){return xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm192.81 248H304c8.84 0 16 7.16 16 16s-7.16 16-16 16h-47.19c-16.45 0-31.27-9.14-38.64-23.86-2.95-5.92-8.09-6.52-10.17-6.52s-7.22.59-10.02 6.19l-7.67 15.34a15.986 15.986 0 0 1-14.31 8.84c-.38 0-.75-.02-1.14-.05-6.45-.45-12-4.75-14.03-10.89L144 354.59l-10.61 31.88c-5.89 17.66-22.38 29.53-41 29.53H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h12.39c4.83 0 9.11-3.08 10.64-7.66l18.19-54.64c3.3-9.81 12.44-16.41 22.78-16.41s19.48 6.59 22.77 16.41l13.88 41.64c19.77-16.19 54.05-9.7 66 14.16 2.02 4.06 5.96 6.5 10.16 6.5zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(s)}function Hr(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h160V320H32v128zm256 32h160c17.7 0 32-14.3 32-32V320H288v160zm192-320h-42.1c6.2-12.1 10.1-25.5 10.1-40 0-48.5-39.5-88-88-88-41.6 0-68.5 21.3-103 68.3-34.5-47-61.4-68.3-103-68.3-48.5 0-88 39.5-88 88 0 14.5 3.8 27.9 10.1 40H32c-17.7 0-32 14.3-32 32v80c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-80c0-17.7-14.3-32-32-32zm-326.1 0c-22.1 0-40-17.9-40-40s17.9-40 40-40c19.9 0 34.6 3.3 86.1 80h-86.1zm206.1 0h-86.1c51.4-76.5 65.7-80 86.1-80 22.1 0 40 17.9 40 40s-17.9 40-40 40z"},child:[]}]})(s)}function qt(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(s)}function ta(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 32H48C21.5 32 0 53.5 0 80v16h576V80c0-26.5-21.5-48-48-48zM0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V128H0v304zm352-232c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zM176 192c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zM67.1 396.2C75.5 370.5 99.6 352 128 352h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.9-5.2 19.8-15.6 19.8H82.7c-10.4 0-18.8-10-15.6-19.8z"},child:[]}]})(s)}function lo(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(s)}function co(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(s)}function uo(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(s)}function wt(s){return xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(s)}function bs(s){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(s)}function Hs(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(s)}function ho(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(s)}function ut(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(s)}function po(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(s)}function Ks(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"},child:[]}]})(s)}function xo(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(s)}function ra(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(s)}function xr(s){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(s)}function mn(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(s)}function go(s){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(s)}function mo(s){return xe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(s)}function fn(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(s)}function Cs(s){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"},child:[]}]})(s)}function fo(s){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(s)}function Us(s){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(s)}function na(s){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(s)}const jo="/assets/logo_aquayara2-iFhxOv8G.jpeg",dt=({size:s="md",showText:t=!0,variant:r="horizontal",color:a="blue.500",textColor:i="blue.500",taglineColor:l="teal.400"})=>{const o={xs:{logo:"20px",text:"xs",tagline:"xs"},sm:{logo:"30px",text:"sm",tagline:"xs"},md:{logo:"40px",text:"md",tagline:"sm"},lg:{logo:"60px",text:"lg",tagline:"md"},xl:{logo:"80px",text:"xl",tagline:"lg"}},c=o[s]||o.md,d=()=>e.jsx(Rt,{src:jo,alt:"AquaYara Logo",w:c.logo,h:c.logo,objectFit:"contain",borderRadius:"md",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"});return t?r==="vertical"?e.jsxs(u,{spacing:2,align:"center",children:[e.jsx(d,{}),e.jsxs(u,{spacing:0,align:"center",children:[e.jsxs(n,{fontSize:c.text,fontWeight:"bold",color:i,lineHeight:"1",children:["Aqua",e.jsx("span",{style:{color:"#38B2AC"},children:"Yara"})]}),e.jsx(n,{fontSize:c.tagline,color:l,fontStyle:"italic",lineHeight:"1",children:"Agua que encanta"})]})]}):e.jsxs(h,{spacing:3,align:"center",children:[e.jsx(d,{}),e.jsxs(u,{spacing:0,align:"start",children:[e.jsxs(n,{fontSize:c.text,fontWeight:"bold",color:i,lineHeight:"1",children:["Aqua",e.jsx("span",{style:{color:"#38B2AC"},children:"Yara"})]}),e.jsx(n,{fontSize:c.tagline,color:l,fontStyle:"italic",lineHeight:"1",children:"Agua que encanta"})]})]}):e.jsx(d,{})},Ur=()=>{const s=Me("white","gray.800"),t=Me("red.200","red.600"),r=Me("gray.700","gray.200");return e.jsx(Lr,{maxW:"md",centerContent:!0,children:e.jsxs(u,{spacing:6,py:8,children:[e.jsx(dt,{size:"lg",variant:"horizontal",color:"red.500",textColor:"red.600",taglineColor:"red.400"}),e.jsx(F,{bg:s,borderColor:t,borderWidth:"2px",boxShadow:"xl",borderRadius:"xl",w:"100%",children:e.jsx(M,{p:8,children:e.jsxs(u,{spacing:6,textAlign:"center",children:[e.jsx(_,{display:"flex",alignItems:"center",justifyContent:"center",w:"80px",h:"80px",borderRadius:"full",bg:"red.100",color:"red.500",children:e.jsx(le,{as:uo,boxSize:10})}),e.jsxs(u,{spacing:2,children:[e.jsx(K,{size:"lg",color:"red.500",children:"Sistema Expirado"}),e.jsxs(Ce,{colorScheme:"red",variant:"solid",fontSize:"sm",px:3,py:1,children:[e.jsx(le,{as:Zn,mr:1}),"Acceso Restringido"]})]}),e.jsxs(u,{spacing:4,children:[e.jsx(n,{fontSize:"md",color:r,lineHeight:"1.6",children:"El perÃ­odo de prueba del sistema ha expirado."}),e.jsx(n,{fontSize:"sm",color:"gray.500",lineHeight:"1.5",children:"Para continuar utilizando este sistema o resolver cualquier problema tÃ©cnico, contacta con el programador."})]}),e.jsx(hs,{}),e.jsxs(u,{spacing:4,w:"100%",children:[e.jsx(n,{fontSize:"sm",fontWeight:"bold",color:"gray.600",children:"ðŸ“ž Contacto del Programador"}),e.jsx(F,{bg:"blue.50",borderColor:"blue.200",w:"100%",children:e.jsx(M,{p:4,children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",color:"blue.600",children:"987654321"}),e.jsx(n,{fontSize:"sm",color:"blue.500",children:"Disponible para soporte tÃ©cnico y renovaciÃ³n del sistema"})]})})}),e.jsx(O,{colorScheme:"blue",size:"lg",w:"100%",leftIcon:e.jsx(le,{as:Hs}),onClick:()=>{window.open("https://wa.me/51987654321?text=Hola, necesito soporte tÃ©cnico para el sistema AquaYara","_blank")},_hover:{transform:"translateY(-2px)",boxShadow:"lg"},transition:"all 0.2s",children:"Contactar por WhatsApp"})]}),e.jsxs(u,{spacing:2,pt:4,children:[e.jsx(n,{fontSize:"xs",color:"gray.400",textAlign:"center",children:"Sistema desarrollado por: Programador de Software"}),e.jsx(n,{fontSize:"xs",color:"gray.400",children:"Â© 2024 AquaYara - Todos los derechos reservados"})]})]})})})]})})},Is=({children:s})=>{const{isExpired:t,isLoading:r}=Br();return r?null:t?e.jsx(Ur,{}):s},bo=({children:s})=>{const{isExpired:t,isLoading:r}=Br();return r?null:t?e.jsx(Ur,{}):s},yo=({type:s="404",title:t="PÃ¡gina no encontrada",description:r="La pÃ¡gina que buscas no existe",showRetry:a=!0})=>{const i=Ys(),l=Me("gray.50","gray.900"),o=Me("gray.700","gray.200"),d=(()=>{switch(s){case"404":return{icon:"ðŸ¦•",title:"Â¡Ups! PÃ¡gina no encontrada",description:"La pÃ¡gina que buscas se ha perdido en el desierto digital",action:"Volver al inicio",color:"blue"};case"offline":return{icon:"ðŸ“¡",title:"Sin conexiÃ³n a internet",description:"Parece que te has desconectado del mundo digital",action:"Reintentar",color:"orange"};case"500":return{icon:"âš ï¸",title:"Error del servidor",description:"Algo saliÃ³ mal en nuestro lado",action:"Reintentar",color:"red"};default:return{icon:"âŒ",title:t,description:r,action:"Volver al inicio",color:"gray"}}})(),x=()=>{s==="offline"?window.location.reload():i("/")},P=()=>{i("/")};return e.jsx(_,{minH:"100vh",bg:l,display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(Lr,{maxW:"md",centerContent:!0,children:e.jsxs(u,{spacing:8,textAlign:"center",py:12,children:[e.jsx(_,{fontSize:"8xl",mb:4,children:d.icon}),e.jsx(K,{size:"xl",color:o,fontWeight:"bold",children:d.title}),e.jsx(n,{fontSize:"lg",color:"gray.500",maxW:"md",lineHeight:"1.6",children:d.description}),s==="404"&&e.jsxs(u,{spacing:2,children:[e.jsx(n,{fontSize:"6xl",fontWeight:"bold",color:"blue.500",children:"404"}),e.jsx(n,{fontSize:"sm",color:"gray.400",children:"ERROR"})]}),e.jsxs(u,{spacing:4,w:"full",maxW:"sm",children:[a&&e.jsx(O,{colorScheme:d.color,size:"lg",w:"full",leftIcon:e.jsx(le,{as:xo}),onClick:x,_hover:{transform:"translateY(-2px)",boxShadow:"lg"},transition:"all 0.2s",children:d.action}),e.jsx(O,{variant:"outline",size:"lg",w:"full",leftIcon:e.jsx(le,{as:qt}),onClick:P,_hover:{transform:"translateY(-2px)",boxShadow:"md"},transition:"all 0.2s",children:"Ir al inicio"})]}),e.jsxs(u,{spacing:2,pt:4,children:[e.jsx(n,{fontSize:"sm",color:"gray.400",children:"Si el problema persiste, contacta al administrador"}),e.jsxs(h,{spacing:4,fontSize:"xs",color:"gray.400",children:[e.jsx(n,{children:"â€¢ Verifica tu conexiÃ³n"}),e.jsx(n,{children:"â€¢ Intenta mÃ¡s tarde"}),e.jsx(n,{children:"â€¢ Contacta soporte"})]})]})]})})})};var We="-ms-",St="-moz-",ze="-webkit-",aa="comm",Kt="rule",Gr="decl",vo="@import",ia="@keyframes",So="@layer",oa=Math.abs,Yr=String.fromCharCode,Dr=Object.assign;function Co(s,t){return cs(s,0)^45?(((t<<2^cs(s,0))<<2^cs(s,1))<<2^cs(s,2))<<2^cs(s,3):0}function la(s){return s.trim()}function Rs(s,t){return(s=t.exec(s))?s[0]:s}function ge(s,t,r){return s.replace(t,r)}function Ot(s,t,r){return s.indexOf(t,r)}function cs(s,t){return s.charCodeAt(t)|0}function ht(s,t,r){return s.slice(t,r)}function _s(s){return s.length}function ca(s){return s.length}function vt(s,t){return t.push(s),s}function wo(s,t){return s.map(t).join("")}function jn(s,t){return s.filter(function(r){return!Rs(r,t)})}var Zt=1,pt=1,da=0,ws=0,ns=0,jt="";function er(s,t,r,a,i,l,o,c){return{value:s,root:t,parent:r,type:a,props:i,children:l,line:Zt,column:pt,length:o,return:"",siblings:c}}function Bs(s,t){return Dr(er("",null,null,"",null,null,0,s.siblings),s,{length:-s.length},t)}function it(s){for(;s.root;)s=Bs(s.root,{children:[s]});vt(s,s.siblings)}function zo(){return ns}function Po(){return ns=ws>0?cs(jt,--ws):0,pt--,ns===10&&(pt=1,Zt--),ns}function Es(){return ns=ws<da?cs(jt,ws++):0,pt++,ns===10&&(pt=1,Zt++),ns}function Zs(){return cs(jt,ws)}function Lt(){return ws}function sr(s,t){return ht(jt,s,t)}function Ir(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ao(s){return Zt=pt=1,da=_s(jt=s),ws=0,[]}function Eo(s){return jt="",s}function gr(s){return la(sr(ws-1,_r(s===91?s+2:s===40?s+1:s)))}function To(s){for(;(ns=Zs())&&ns<33;)Es();return Ir(s)>2||Ir(ns)>3?"":" "}function Do(s,t){for(;--t&&Es()&&!(ns<48||ns>102||ns>57&&ns<65||ns>70&&ns<97););return sr(s,Lt()+(t<6&&Zs()==32&&Es()==32))}function _r(s){for(;Es();)switch(ns){case s:return ws;case 34:case 39:s!==34&&s!==39&&_r(ns);break;case 40:s===41&&_r(s);break;case 92:Es();break}return ws}function Io(s,t){for(;Es()&&s+ns!==57;)if(s+ns===84&&Zs()===47)break;return"/*"+sr(t,ws-1)+"*"+Yr(s===47?s:Es())}function _o(s){for(;!Ir(Zs());)Es();return sr(s,ws)}function ko(s){return Eo(Ft("",null,null,null,[""],s=Ao(s),0,[0],s))}function Ft(s,t,r,a,i,l,o,c,d){for(var x=0,P=0,A=o,R=0,f=0,p=0,T=1,k=1,y=1,w=0,E="",N=i,$=l,L=a,g=E;k;)switch(p=w,w=Es()){case 40:if(p!=108&&cs(g,A-1)==58){Ot(g+=ge(gr(w),"&","&\f"),"&\f",oa(x?c[x-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:g+=gr(w);break;case 9:case 10:case 13:case 32:g+=To(p);break;case 92:g+=Do(Lt()-1,7);continue;case 47:switch(Zs()){case 42:case 47:vt(No(Io(Es(),Lt()),t,r,d),d);break;default:g+="/"}break;case 123*T:c[x++]=_s(g)*y;case 125*T:case 59:case 0:switch(w){case 0:case 125:k=0;case 59+P:y==-1&&(g=ge(g,/\f/g,"")),f>0&&_s(g)-A&&vt(f>32?yn(g+";",a,r,A-1,d):yn(ge(g," ","")+";",a,r,A-2,d),d);break;case 59:g+=";";default:if(vt(L=bn(g,t,r,x,P,i,c,E,N=[],$=[],A,l),l),w===123)if(P===0)Ft(g,t,L,L,N,l,A,c,$);else switch(R===99&&cs(g,3)===110?100:R){case 100:case 108:case 109:case 115:Ft(s,L,L,a&&vt(bn(s,L,L,0,0,i,c,E,i,N=[],A,$),$),i,$,A,c,a?N:$);break;default:Ft(g,L,L,L,[""],$,0,c,$)}}x=P=f=0,T=y=1,E=g="",A=o;break;case 58:A=1+_s(g),f=p;default:if(T<1){if(w==123)--T;else if(w==125&&T++==0&&Po()==125)continue}switch(g+=Yr(w),w*T){case 38:y=P>0?1:(g+="\f",-1);break;case 44:c[x++]=(_s(g)-1)*y,y=1;break;case 64:Zs()===45&&(g+=gr(Es())),R=Zs(),P=A=_s(E=g+=_o(Lt())),w++;break;case 45:p===45&&_s(g)==2&&(T=0)}}return l}function bn(s,t,r,a,i,l,o,c,d,x,P,A){for(var R=i-1,f=i===0?l:[""],p=ca(f),T=0,k=0,y=0;T<a;++T)for(var w=0,E=ht(s,R+1,R=oa(k=o[T])),N=s;w<p;++w)(N=la(k>0?f[w]+" "+E:ge(E,/&\f/g,f[w])))&&(d[y++]=N);return er(s,t,r,i===0?Kt:c,d,x,P,A)}function No(s,t,r,a){return er(s,t,r,aa,Yr(zo()),ht(s,2,-2),0,a)}function yn(s,t,r,a,i){return er(s,t,r,Gr,ht(s,0,a),ht(s,a+1,-1),a,i)}function ua(s,t,r){switch(Co(s,t)){case 5103:return ze+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ze+s+s;case 4789:return St+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return ze+s+St+s+We+s+s;case 5936:switch(cs(s,t+11)){case 114:return ze+s+We+ge(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return ze+s+We+ge(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return ze+s+We+ge(s,/[svh]\w+-[tblr]{2}/,"lr")+s}case 6828:case 4268:case 2903:return ze+s+We+s+s;case 6165:return ze+s+We+"flex-"+s+s;case 5187:return ze+s+ge(s,/(\w+).+(:[^]+)/,ze+"box-$1$2"+We+"flex-$1$2")+s;case 5443:return ze+s+We+"flex-item-"+ge(s,/flex-|-self/g,"")+(Rs(s,/flex-|baseline/)?"":We+"grid-row-"+ge(s,/flex-|-self/g,""))+s;case 4675:return ze+s+We+"flex-line-pack"+ge(s,/align-content|flex-|-self/g,"")+s;case 5548:return ze+s+We+ge(s,"shrink","negative")+s;case 5292:return ze+s+We+ge(s,"basis","preferred-size")+s;case 6060:return ze+"box-"+ge(s,"-grow","")+ze+s+We+ge(s,"grow","positive")+s;case 4554:return ze+ge(s,/([^-])(transform)/g,"$1"+ze+"$2")+s;case 6187:return ge(ge(ge(s,/(zoom-|grab)/,ze+"$1"),/(image-set)/,ze+"$1"),s,"")+s;case 5495:case 3959:return ge(s,/(image-set\([^]*)/,ze+"$1$`$1");case 4968:return ge(ge(s,/(.+:)(flex-)?(.*)/,ze+"box-pack:$3"+We+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ze+s+s;case 4200:if(!Rs(s,/flex-|baseline/))return We+"grid-column-align"+ht(s,t)+s;break;case 2592:case 3360:return We+ge(s,"template-","")+s;case 4384:case 3616:return r&&r.some(function(a,i){return t=i,Rs(a.props,/grid-\w+-end/)})?~Ot(s+(r=r[t].value),"span",0)?s:We+ge(s,"-start","")+s+We+"grid-row-span:"+(~Ot(r,"span",0)?Rs(r,/\d+/):+Rs(r,/\d+/)-+Rs(s,/\d+/))+";":We+ge(s,"-start","")+s;case 4896:case 4128:return r&&r.some(function(a){return Rs(a.props,/grid-\w+-start/)})?s:We+ge(ge(s,"-end","-span"),"span ","")+s;case 4095:case 3583:case 4068:case 2532:return ge(s,/(.+)-inline(.+)/,ze+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_s(s)-1-t>6)switch(cs(s,t+1)){case 109:if(cs(s,t+4)!==45)break;case 102:return ge(s,/(.+:)(.+)-([^]+)/,"$1"+ze+"$2-$3$1"+St+(cs(s,t+3)==108?"$3":"$2-$3"))+s;case 115:return~Ot(s,"stretch",0)?ua(ge(s,"stretch","fill-available"),t,r)+s:s}break;case 5152:case 5920:return ge(s,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(a,i,l,o,c,d,x){return We+i+":"+l+x+(o?We+i+"-span:"+(c?d:+d-+l)+x:"")+s});case 4949:if(cs(s,t+6)===121)return ge(s,":",":"+ze)+s;break;case 6444:switch(cs(s,cs(s,14)===45?18:11)){case 120:return ge(s,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ze+(cs(s,14)===45?"inline-":"")+"box$3$1"+ze+"$2$3$1"+We+"$2box$3")+s;case 100:return ge(s,":",":"+We)+s}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ge(s,"scroll-","scroll-snap-")+s}return s}function Ht(s,t){for(var r="",a=0;a<s.length;a++)r+=t(s[a],a,s,t)||"";return r}function Ro(s,t,r,a){switch(s.type){case So:if(s.children.length)break;case vo:case Gr:return s.return=s.return||s.value;case aa:return"";case ia:return s.return=s.value+"{"+Ht(s.children,a)+"}";case Kt:if(!_s(s.value=s.props.join(",")))return""}return _s(r=Ht(s.children,a))?s.return=s.value+"{"+r+"}":""}function Oo(s){var t=ca(s);return function(r,a,i,l){for(var o="",c=0;c<t;c++)o+=s[c](r,a,i,l)||"";return o}}function Lo(s){return function(t){t.root||(t=t.return)&&s(t)}}function Fo(s,t,r,a){if(s.length>-1&&!s.return)switch(s.type){case Gr:s.return=ua(s.value,s.length,r);return;case ia:return Ht([Bs(s,{value:ge(s.value,"@","@"+ze)})],a);case Kt:if(s.length)return wo(r=s.props,function(i){switch(Rs(i,a=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":it(Bs(s,{props:[ge(i,/:(read-\w+)/,":"+St+"$1")]})),it(Bs(s,{props:[i]})),Dr(s,{props:jn(r,a)});break;case"::placeholder":it(Bs(s,{props:[ge(i,/:(plac\w+)/,":"+ze+"input-$1")]})),it(Bs(s,{props:[ge(i,/:(plac\w+)/,":"+St+"$1")]})),it(Bs(s,{props:[ge(i,/:(plac\w+)/,We+"input-$1")]})),it(Bs(s,{props:[i]})),Dr(s,{props:jn(r,a)});break}return""})}}var Wo={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},js={},xt=typeof process<"u"&&js!==void 0&&(js.REACT_APP_SC_ATTR||js.SC_ATTR)||"data-styled",ha="active",pa="data-styled-version",tr="6.1.19",Xr=`/*!sc*/
`,Ut=typeof window<"u"&&typeof document<"u",Mo=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&js!==void 0&&js.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&js.REACT_APP_SC_DISABLE_SPEEDY!==""?js.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&js.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&js!==void 0&&js.SC_DISABLE_SPEEDY!==void 0&&js.SC_DISABLE_SPEEDY!==""&&js.SC_DISABLE_SPEEDY!=="false"&&js.SC_DISABLE_SPEEDY),rr=Object.freeze([]),gt=Object.freeze({});function $o(s,t,r){return r===void 0&&(r=gt),s.theme!==r.theme&&s.theme||t||r.theme}var xa=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Bo=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Vo=/(^-|-$)/g;function vn(s){return s.replace(Bo,"-").replace(Vo,"")}var qo=/(a)(d)/gi,kt=52,Sn=function(s){return String.fromCharCode(s+(s>25?39:97))};function kr(s){var t,r="";for(t=Math.abs(s);t>kt;t=t/kt|0)r=Sn(t%kt)+r;return(Sn(t%kt)+r).replace(qo,"$1-$2")}var mr,ga=5381,ot=function(s,t){for(var r=t.length;r;)s=33*s^t.charCodeAt(--r);return s},ma=function(s){return ot(ga,s)};function Ho(s){return kr(ma(s)>>>0)}function Uo(s){return s.displayName||s.name||"Component"}function fr(s){return typeof s=="string"&&!0}var fa=typeof Symbol=="function"&&Symbol.for,ja=fa?Symbol.for("react.memo"):60115,Go=fa?Symbol.for("react.forward_ref"):60112,Yo={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Xo={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ba={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Qo=((mr={})[Go]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},mr[ja]=ba,mr);function Cn(s){return("type"in(t=s)&&t.type.$$typeof)===ja?ba:"$$typeof"in s?Qo[s.$$typeof]:Yo;var t}var Jo=Object.defineProperty,Ko=Object.getOwnPropertyNames,wn=Object.getOwnPropertySymbols,Zo=Object.getOwnPropertyDescriptor,el=Object.getPrototypeOf,zn=Object.prototype;function ya(s,t,r){if(typeof t!="string"){if(zn){var a=el(t);a&&a!==zn&&ya(s,a,r)}var i=Ko(t);wn&&(i=i.concat(wn(t)));for(var l=Cn(s),o=Cn(t),c=0;c<i.length;++c){var d=i[c];if(!(d in Xo||r&&r[d]||o&&d in o||l&&d in l)){var x=Zo(t,d);try{Jo(s,d,x)}catch{}}}}return s}function mt(s){return typeof s=="function"}function Qr(s){return typeof s=="object"&&"styledComponentId"in s}function Qs(s,t){return s&&t?"".concat(s," ").concat(t):s||t||""}function Pn(s,t){if(s.length===0)return"";for(var r=s[0],a=1;a<s.length;a++)r+=s[a];return r}function zt(s){return s!==null&&typeof s=="object"&&s.constructor.name===Object.name&&!("props"in s&&s.$$typeof)}function Nr(s,t,r){if(r===void 0&&(r=!1),!r&&!zt(s)&&!Array.isArray(s))return t;if(Array.isArray(t))for(var a=0;a<t.length;a++)s[a]=Nr(s[a],t[a]);else if(zt(t))for(var a in t)s[a]=Nr(s[a],t[a]);return s}function Jr(s,t){Object.defineProperty(s,"toString",{value:t})}function Tt(s){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(s," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var sl=function(){function s(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return s.prototype.indexOfGroup=function(t){for(var r=0,a=0;a<t;a++)r+=this.groupSizes[a];return r},s.prototype.insertRules=function(t,r){if(t>=this.groupSizes.length){for(var a=this.groupSizes,i=a.length,l=i;t>=l;)if((l<<=1)<0)throw Tt(16,"".concat(t));this.groupSizes=new Uint32Array(l),this.groupSizes.set(a),this.length=l;for(var o=i;o<l;o++)this.groupSizes[o]=0}for(var c=this.indexOfGroup(t+1),d=(o=0,r.length);o<d;o++)this.tag.insertRule(c,r[o])&&(this.groupSizes[t]++,c++)},s.prototype.clearGroup=function(t){if(t<this.length){var r=this.groupSizes[t],a=this.indexOfGroup(t),i=a+r;this.groupSizes[t]=0;for(var l=a;l<i;l++)this.tag.deleteRule(a)}},s.prototype.getGroup=function(t){var r="";if(t>=this.length||this.groupSizes[t]===0)return r;for(var a=this.groupSizes[t],i=this.indexOfGroup(t),l=i+a,o=i;o<l;o++)r+="".concat(this.tag.getRule(o)).concat(Xr);return r},s}(),Wt=new Map,Gt=new Map,Mt=1,Nt=function(s){if(Wt.has(s))return Wt.get(s);for(;Gt.has(Mt);)Mt++;var t=Mt++;return Wt.set(s,t),Gt.set(t,s),t},tl=function(s,t){Mt=t+1,Wt.set(s,t),Gt.set(t,s)},rl="style[".concat(xt,"][").concat(pa,'="').concat(tr,'"]'),nl=new RegExp("^".concat(xt,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),al=function(s,t,r){for(var a,i=r.split(","),l=0,o=i.length;l<o;l++)(a=i[l])&&s.registerName(t,a)},il=function(s,t){for(var r,a=((r=t.textContent)!==null&&r!==void 0?r:"").split(Xr),i=[],l=0,o=a.length;l<o;l++){var c=a[l].trim();if(c){var d=c.match(nl);if(d){var x=0|parseInt(d[1],10),P=d[2];x!==0&&(tl(P,x),al(s,P,d[3]),s.getTag().insertRules(x,i)),i.length=0}else i.push(c)}}},An=function(s){for(var t=document.querySelectorAll(rl),r=0,a=t.length;r<a;r++){var i=t[r];i&&i.getAttribute(xt)!==ha&&(il(s,i),i.parentNode&&i.parentNode.removeChild(i))}};function ol(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var va=function(s){var t=document.head,r=s||t,a=document.createElement("style"),i=function(c){var d=Array.from(c.querySelectorAll("style[".concat(xt,"]")));return d[d.length-1]}(r),l=i!==void 0?i.nextSibling:null;a.setAttribute(xt,ha),a.setAttribute(pa,tr);var o=ol();return o&&a.setAttribute("nonce",o),r.insertBefore(a,l),a},ll=function(){function s(t){this.element=va(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var a=document.styleSheets,i=0,l=a.length;i<l;i++){var o=a[i];if(o.ownerNode===r)return o}throw Tt(17)}(this.element),this.length=0}return s.prototype.insertRule=function(t,r){try{return this.sheet.insertRule(r,t),this.length++,!0}catch{return!1}},s.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},s.prototype.getRule=function(t){var r=this.sheet.cssRules[t];return r&&r.cssText?r.cssText:""},s}(),cl=function(){function s(t){this.element=va(t),this.nodes=this.element.childNodes,this.length=0}return s.prototype.insertRule=function(t,r){if(t<=this.length&&t>=0){var a=document.createTextNode(r);return this.element.insertBefore(a,this.nodes[t]||null),this.length++,!0}return!1},s.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},s.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},s}(),dl=function(){function s(t){this.rules=[],this.length=0}return s.prototype.insertRule=function(t,r){return t<=this.length&&(this.rules.splice(t,0,r),this.length++,!0)},s.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},s.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},s}(),En=Ut,ul={isServer:!Ut,useCSSOMInjection:!Mo},Sa=function(){function s(t,r,a){t===void 0&&(t=gt),r===void 0&&(r={});var i=this;this.options=Ss(Ss({},ul),t),this.gs=r,this.names=new Map(a),this.server=!!t.isServer,!this.server&&Ut&&En&&(En=!1,An(this)),Jr(this,function(){return function(l){for(var o=l.getTag(),c=o.length,d="",x=function(A){var R=function(y){return Gt.get(y)}(A);if(R===void 0)return"continue";var f=l.names.get(R),p=o.getGroup(A);if(f===void 0||!f.size||p.length===0)return"continue";var T="".concat(xt,".g").concat(A,'[id="').concat(R,'"]'),k="";f!==void 0&&f.forEach(function(y){y.length>0&&(k+="".concat(y,","))}),d+="".concat(p).concat(T,'{content:"').concat(k,'"}').concat(Xr)},P=0;P<c;P++)x(P);return d}(i)})}return s.registerId=function(t){return Nt(t)},s.prototype.rehydrate=function(){!this.server&&Ut&&An(this)},s.prototype.reconstructWithOptions=function(t,r){return r===void 0&&(r=!0),new s(Ss(Ss({},this.options),t),this.gs,r&&this.names||void 0)},s.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},s.prototype.getTag=function(){return this.tag||(this.tag=(t=function(r){var a=r.useCSSOMInjection,i=r.target;return r.isServer?new dl(i):a?new ll(i):new cl(i)}(this.options),new sl(t)));var t},s.prototype.hasNameForId=function(t,r){return this.names.has(t)&&this.names.get(t).has(r)},s.prototype.registerName=function(t,r){if(Nt(t),this.names.has(t))this.names.get(t).add(r);else{var a=new Set;a.add(r),this.names.set(t,a)}},s.prototype.insertRules=function(t,r,a){this.registerName(t,r),this.getTag().insertRules(Nt(t),a)},s.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},s.prototype.clearRules=function(t){this.getTag().clearGroup(Nt(t)),this.clearNames(t)},s.prototype.clearTag=function(){this.tag=void 0},s}(),hl=/&/g,pl=/^\s*\/\/.*$/gm;function Ca(s,t){return s.map(function(r){return r.type==="rule"&&(r.value="".concat(t," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(t," ")),r.props=r.props.map(function(a){return"".concat(t," ").concat(a)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=Ca(r.children,t)),r})}function xl(s){var t,r,a,i=gt,l=i.options,o=l===void 0?gt:l,c=i.plugins,d=c===void 0?rr:c,x=function(R,f,p){return p.startsWith(r)&&p.endsWith(r)&&p.replaceAll(r,"").length>0?".".concat(t):R},P=d.slice();P.push(function(R){R.type===Kt&&R.value.includes("&")&&(R.props[0]=R.props[0].replace(hl,r).replace(a,x))}),o.prefix&&P.push(Fo),P.push(Ro);var A=function(R,f,p,T){f===void 0&&(f=""),p===void 0&&(p=""),T===void 0&&(T="&"),t=T,r=f,a=new RegExp("\\".concat(r,"\\b"),"g");var k=R.replace(pl,""),y=ko(p||f?"".concat(p," ").concat(f," { ").concat(k," }"):k);o.namespace&&(y=Ca(y,o.namespace));var w=[];return Ht(y,Oo(P.concat(Lo(function(E){return w.push(E)})))),w};return A.hash=d.length?d.reduce(function(R,f){return f.name||Tt(15),ot(R,f.name)},ga).toString():"",A}var gl=new Sa,Rr=xl(),wa=me.createContext({shouldForwardProp:void 0,styleSheet:gl,stylis:Rr});wa.Consumer;me.createContext(void 0);function Tn(){return S.useContext(wa)}var ml=function(){function s(t,r){var a=this;this.inject=function(i,l){l===void 0&&(l=Rr);var o=a.name+l.hash;i.hasNameForId(a.id,o)||i.insertRules(a.id,o,l(a.rules,o,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=r,Jr(this,function(){throw Tt(12,String(a.name))})}return s.prototype.getName=function(t){return t===void 0&&(t=Rr),this.name+t.hash},s}(),fl=function(s){return s>="A"&&s<="Z"};function Dn(s){for(var t="",r=0;r<s.length;r++){var a=s[r];if(r===1&&a==="-"&&s[0]==="-")return s;fl(a)?t+="-"+a.toLowerCase():t+=a}return t.startsWith("ms-")?"-"+t:t}var za=function(s){return s==null||s===!1||s===""},Pa=function(s){var t,r,a=[];for(var i in s){var l=s[i];s.hasOwnProperty(i)&&!za(l)&&(Array.isArray(l)&&l.isCss||mt(l)?a.push("".concat(Dn(i),":"),l,";"):zt(l)?a.push.apply(a,$t($t(["".concat(i," {")],Pa(l),!1),["}"],!1)):a.push("".concat(Dn(i),": ").concat((t=i,(r=l)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||t in Wo||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return a};function et(s,t,r,a){if(za(s))return[];if(Qr(s))return[".".concat(s.styledComponentId)];if(mt(s)){if(!mt(l=s)||l.prototype&&l.prototype.isReactComponent||!t)return[s];var i=s(t);return et(i,t,r,a)}var l;return s instanceof ml?r?(s.inject(r,a),[s.getName(a)]):[s]:zt(s)?Pa(s):Array.isArray(s)?Array.prototype.concat.apply(rr,s.map(function(o){return et(o,t,r,a)})):[s.toString()]}function jl(s){for(var t=0;t<s.length;t+=1){var r=s[t];if(mt(r)&&!Qr(r))return!1}return!0}var bl=ma(tr),yl=function(){function s(t,r,a){this.rules=t,this.staticRulesId="",this.isStatic=(a===void 0||a.isStatic)&&jl(t),this.componentId=r,this.baseHash=ot(bl,r),this.baseStyle=a,Sa.registerId(r)}return s.prototype.generateAndInjectStyles=function(t,r,a){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,r,a):"";if(this.isStatic&&!a.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))i=Qs(i,this.staticRulesId);else{var l=Pn(et(this.rules,t,r,a)),o=kr(ot(this.baseHash,l)>>>0);if(!r.hasNameForId(this.componentId,o)){var c=a(l,".".concat(o),void 0,this.componentId);r.insertRules(this.componentId,o,c)}i=Qs(i,o),this.staticRulesId=o}else{for(var d=ot(this.baseHash,a.hash),x="",P=0;P<this.rules.length;P++){var A=this.rules[P];if(typeof A=="string")x+=A;else if(A){var R=Pn(et(A,t,r,a));d=ot(d,R+P),x+=R}}if(x){var f=kr(d>>>0);r.hasNameForId(this.componentId,f)||r.insertRules(this.componentId,f,a(x,".".concat(f),void 0,this.componentId)),i=Qs(i,f)}}return i},s}(),Aa=me.createContext(void 0);Aa.Consumer;var jr={};function vl(s,t,r){var a=Qr(s),i=s,l=!fr(s),o=t.attrs,c=o===void 0?rr:o,d=t.componentId,x=d===void 0?function(N,$){var L=typeof N!="string"?"sc":vn(N);jr[L]=(jr[L]||0)+1;var g="".concat(L,"-").concat(Ho(tr+L+jr[L]));return $?"".concat($,"-").concat(g):g}(t.displayName,t.parentComponentId):d,P=t.displayName,A=P===void 0?function(N){return fr(N)?"styled.".concat(N):"Styled(".concat(Uo(N),")")}(s):P,R=t.displayName&&t.componentId?"".concat(vn(t.displayName),"-").concat(t.componentId):t.componentId||x,f=a&&i.attrs?i.attrs.concat(c).filter(Boolean):c,p=t.shouldForwardProp;if(a&&i.shouldForwardProp){var T=i.shouldForwardProp;if(t.shouldForwardProp){var k=t.shouldForwardProp;p=function(N,$){return T(N,$)&&k(N,$)}}else p=T}var y=new yl(r,R,a?i.componentStyle:void 0);function w(N,$){return function(L,g,q){var b=L.attrs,ae=L.componentStyle,v=L.defaultProps,Q=L.foldedComponentIds,W=L.styledComponentId,Z=L.target,ve=me.useContext(Aa),oe=Tn(),pe=L.shouldForwardProp||oe.shouldForwardProp,Le=$o(g,ve,v)||gt,z=function(fe,D,B){for(var je,I=Ss(Ss({},D),{className:void 0,theme:B}),be=0;be<fe.length;be+=1){var $e=mt(je=fe[be])?je(I):je;for(var Fe in $e)I[Fe]=Fe==="className"?Qs(I[Fe],$e[Fe]):Fe==="style"?Ss(Ss({},I[Fe]),$e[Fe]):$e[Fe]}return D.className&&(I.className=Qs(I.className,D.className)),I}(b,g,Le),X=z.as||Z,Se={};for(var ie in z)z[ie]===void 0||ie[0]==="$"||ie==="as"||ie==="theme"&&z.theme===Le||(ie==="forwardedAs"?Se.as=z.forwardedAs:pe&&!pe(ie,X)||(Se[ie]=z[ie]));var ne=function(fe,D){var B=Tn(),je=fe.generateAndInjectStyles(D,B.styleSheet,B.stylis);return je}(ae,z),Ie=Qs(Q,W);return ne&&(Ie+=" "+ne),z.className&&(Ie+=" "+z.className),Se[fr(X)&&!xa.has(X)?"class":"className"]=Ie,q&&(Se.ref=q),S.createElement(X,Se)}(E,N,$)}w.displayName=A;var E=me.forwardRef(w);return E.attrs=f,E.componentStyle=y,E.displayName=A,E.shouldForwardProp=p,E.foldedComponentIds=a?Qs(i.foldedComponentIds,i.styledComponentId):"",E.styledComponentId=R,E.target=a?i.target:s,Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(N){this._foldedDefaultProps=a?function($){for(var L=[],g=1;g<arguments.length;g++)L[g-1]=arguments[g];for(var q=0,b=L;q<b.length;q++)Nr($,b[q],!0);return $}({},i.defaultProps,N):N}}),Jr(E,function(){return".".concat(E.styledComponentId)}),l&&ya(E,s,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),E}function In(s,t){for(var r=[s[0]],a=0,i=t.length;a<i;a+=1)r.push(t[a],s[a+1]);return r}var _n=function(s){return Object.assign(s,{isCss:!0})};function Sl(s){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(mt(s)||zt(s))return _n(et(In(rr,$t([s],t,!0))));var a=s;return t.length===0&&a.length===1&&typeof a[0]=="string"?et(a):_n(et(In(a,t)))}function Or(s,t,r){if(r===void 0&&(r=gt),!t)throw Tt(1,t);var a=function(i){for(var l=[],o=1;o<arguments.length;o++)l[o-1]=arguments[o];return s(t,r,Sl.apply(void 0,$t([i],l,!1)))};return a.attrs=function(i){return Or(s,t,Ss(Ss({},r),{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},a.withConfig=function(i){return Or(s,t,Ss(Ss({},r),i))},a}var Ea=function(s){return Or(vl,s)},nr=Ea;xa.forEach(function(s){nr[s]=Ea(s)});const Cl=nr.div`
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background-color: var(--background-color);
`,wl=nr.div`
  width: 100%;
  max-width: 450px;
  padding: 2rem;
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
`,zl=nr.div`
  text-align: center;
  margin-bottom: 2rem;
  
  h1 {
    color: var(--primary-color);
    font-size: 1.8rem;
    margin-bottom: 0.5rem;
  }
  
  p {
    color: var(--dark-gray);
    font-size: 1rem;
  }
`,Pl=()=>e.jsx(Cl,{children:e.jsxs(wl,{children:[e.jsxs(zl,{children:[e.jsx("h1",{children:"Sistema de GestiÃ³n"}),e.jsx("p",{children:"Planta de Agua"})]}),e.jsx(Bn,{})]})}),Al=()=>{const s=S.useRef(null),t=S.useRef(Date.now());S.useRef(null);const r=async()=>{try{const l=localStorage.getItem("token");if(!l)return;const o=JSON.parse(atob(l.split(".")[1])),c=Math.floor(Date.now()/1e3);if(o.exp-c<7200){console.log("ðŸ”„ Renovando token JWT...");const x=await Y.post("/api/auth/refresh");x.data.token&&(localStorage.setItem("token",x.data.token),console.log("âœ… Token renovado exitosamente"))}}catch(l){console.error("âŒ Error al renovar token:",l),l.response&&l.response.status===401&&(localStorage.removeItem("token"),window.location.href="/")}},a=()=>{t.current=Date.now()},i=()=>{const o=Date.now()-t.current,c=60*60*1e3;o>c&&(console.log("â° SesiÃ³n inactiva por mÃ¡s de 1 hora, cerrando sesiÃ³n..."),localStorage.removeItem("token"),window.location.href="/")};return S.useEffect(()=>{s.current=setInterval(r,30*60*1e3);const l=setInterval(i,10*60*1e3),o=["mousedown","mousemove","keypress","scroll","touchstart","click"];return o.forEach(c=>{document.addEventListener(c,a,!0)}),()=>{s.current&&clearInterval(s.current),clearInterval(l),o.forEach(c=>{document.removeEventListener(c,a,!0)})}},[]),{refreshToken:r}},El=()=>{const{user:s}=Os(),t=c=>!s||!s.role?!1:Array.isArray(c)?c.includes(s.role):s.role===c;return{user:s,hasRole:t,isAdmin:()=>t("admin"),isSeller:()=>t("vendedor"),isClient:()=>t("cliente"),isDeliveryPerson:()=>t("repartidor"),canAccess:c=>t(c)}},Ta=({variant:s="button",size:t="sm"})=>{const r=xs(),a="+51 961 606 183",i="aguademesaaquayara@gmail.com",l=()=>{const x=`https://wa.me/51961606183?text=${encodeURIComponent("Hola, necesito ayuda con el sistema de AquaYara")}`;window.open(x,"_blank")},o=()=>{window.open(`tel:${a}`,"_self")},c=(d,x)=>{navigator.clipboard.writeText(d).then(()=>{r({title:"Copiado",description:`${x} copiado al portapapeles`,status:"success",duration:2e3,isClosable:!0})})};return s==="badge"?e.jsxs(h,{spacing:2,children:[e.jsx(Oe,{label:"Contactar por WhatsApp",hasArrow:!0,children:e.jsx(O,{size:"xs",colorScheme:"green",leftIcon:e.jsx(le,{as:ct}),onClick:l,children:"WhatsApp"})}),e.jsx(Oe,{label:"Llamar",hasArrow:!0,children:e.jsx(O,{size:"xs",variant:"outline",leftIcon:e.jsx(le,{as:Hs}),onClick:o,children:a})})]}):s==="info"?e.jsxs(_,{p:3,bg:"blue.50",borderRadius:"md",border:"1px solid",borderColor:"blue.200",children:[e.jsx(n,{fontSize:"sm",fontWeight:"bold",color:"blue.700",mb:2,children:"ðŸ“ž Soporte TÃ©cnico"}),e.jsxs(u,{spacing:2,align:"start",children:[e.jsxs(h,{spacing:2,children:[e.jsx(le,{as:ct,color:"green.500"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["WhatsApp: ",a]}),e.jsx(O,{size:"xs",variant:"ghost",onClick:()=>c(a,"TelÃ©fono"),children:"Copiar"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(le,{as:qr,color:"blue.500"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["Email: ",i]}),e.jsx(O,{size:"xs",variant:"ghost",onClick:()=>c(i,"Email"),children:"Copiar"})]})]})]}):e.jsxs(h,{spacing:2,children:[e.jsx(Oe,{label:"Contactar por WhatsApp",hasArrow:!0,children:e.jsx(O,{size:t,colorScheme:"green",leftIcon:e.jsx(le,{as:ct}),onClick:l,children:"WhatsApp"})}),e.jsx(Oe,{label:"Llamar",hasArrow:!0,children:e.jsx(O,{size:t,variant:"outline",leftIcon:e.jsx(le,{as:Hs}),onClick:o,children:a})})]})},Tl=({isOpen:s,onClose:t,showAcceptButton:r=!1,onAccept:a})=>{const[i,l]=S.useState(!1),o=()=>{l(!0),a&&a(),t()};return e.jsxs(Ke,{isOpen:s,onClose:t,size:"xl",scrollBehavior:"inside",children:[e.jsx(Ye,{}),e.jsxs(Ze,{maxH:"90vh",children:[e.jsx(Xe,{children:e.jsx(K,{size:"md",children:"TÃ©rminos y Condiciones - AquaYara"})}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:[e.jsx("strong",{children:"Fecha de Ãºltima actualizaciÃ³n:"})," 10 de enero de 2025"]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"1. InformaciÃ³n General"}),e.jsxs(n,{fontSize:"sm",mb:2,children:[e.jsx("strong",{children:"AquaYara"})," es una empresa dedicada a la purificaciÃ³n y distribuciÃ³n de agua, con domicilio legal en Pucallpa, PerÃº."]}),e.jsx(n,{fontSize:"sm",children:"Proporcionamos servicios de purificaciÃ³n de agua, distribuciÃ³n, sistema de suscripciones, servicio de delivery y gestiÃ³n de clientes frecuentes."})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"2. AceptaciÃ³n de TÃ©rminos"}),e.jsx(n,{fontSize:"sm",mb:2,children:"Al utilizar nuestros servicios, usted acepta estos tÃ©rminos y condiciones en su totalidad. Si no estÃ¡ de acuerdo con alguna parte de estos tÃ©rminos, no debe utilizar nuestros servicios."}),e.jsx(n,{fontSize:"sm",children:"Nos reservamos el derecho de modificar estos tÃ©rminos en cualquier momento. Las modificaciones entrarÃ¡n en vigor inmediatamente despuÃ©s de su publicaciÃ³n."})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"3. Servicios Ofrecidos"}),e.jsxs(lt,{fontSize:"sm",spacing:1,children:[e.jsx(_e,{children:"BidÃ³n de Agua 20L y Paquete de Botellas"}),e.jsx(_e,{children:"Servicio de entrega a domicilio con tarifas segÃºn distrito"}),e.jsx(_e,{children:"Horarios de entrega: Lunes a SÃ¡bado de 8:00 AM a 6:00 PM"}),e.jsx(_e,{children:"Sistema de suscripciones con bonificaciones"}),e.jsx(_e,{children:"Control de botellas restantes y pagos mensuales automÃ¡ticos"})]})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"4. Precios y Pagos"}),e.jsx(n,{fontSize:"sm",mb:2,children:"Los precios estÃ¡n sujetos a cambios sin previo aviso. Aceptamos efectivo, tarjeta de crÃ©dito/dÃ©bito, Yape y Plin."}),e.jsx(n,{fontSize:"sm",children:"Los pagos deben realizarse al momento de la entrega. Los pagos mensuales de suscripciones se procesan automÃ¡ticamente."})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"5. Entregas y Devoluciones"}),e.jsx(n,{fontSize:"sm",mb:2,children:"Las entregas se realizan en el horario acordado. El cliente debe estar presente para recibir el pedido. En caso de ausencia, se reprogramarÃ¡ la entrega."}),e.jsx(n,{fontSize:"sm",children:"No se aceptan devoluciones de productos abiertos. Las devoluciones deben solicitarse dentro de las 24 horas posteriores a la entrega."})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"6. Responsabilidades del Cliente"}),e.jsxs(lt,{fontSize:"sm",spacing:1,children:[e.jsx(_e,{children:"Proporcionar informaciÃ³n veraz y actualizada"}),e.jsx(_e,{children:"No utilizar el sistema para fines ilegales"}),e.jsx(_e,{children:"No compartir credenciales de acceso"}),e.jsx(_e,{children:"Notificar cualquier uso no autorizado de su cuenta"})]})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"7. Privacidad y ProtecciÃ³n de Datos"}),e.jsx(n,{fontSize:"sm",mb:2,children:"Recopilamos datos personales, de uso y tÃ©cnicos para procesar pedidos, comunicarnos con usted y mejorar nuestros servicios."}),e.jsx(n,{fontSize:"sm",children:"Implementamos medidas de seguridad como encriptaciÃ³n de datos sensibles, acceso restringido y polÃ­ticas de confidencialidad."})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"8. Sus Derechos"}),e.jsxs(lt,{fontSize:"sm",spacing:1,children:[e.jsx(_e,{children:"Derecho de acceso a sus datos"}),e.jsx(_e,{children:"Derecho de rectificaciÃ³n de informaciÃ³n inexacta"}),e.jsx(_e,{children:"Derecho de eliminaciÃ³n de datos"}),e.jsx(_e,{children:"Derecho de portabilidad de datos"}),e.jsx(_e,{children:"Derecho de oposiciÃ³n al tratamiento"})]})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"9. Contacto"}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"TelÃ©fono:"})," +51 961 606 183"]}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Email:"})," aguademesaaquayara@gmail.com"]}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"DirecciÃ³n:"})," Pucallpa, PerÃº"]}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Horario:"})," Lunes a SÃ¡bado 8:00 AM - 6:00 PM"]})]}),e.jsx(hs,{}),e.jsx(n,{fontSize:"xs",color:"gray.500",textAlign:"center",children:"Al utilizar nuestros servicios, usted confirma que ha leÃ­do, entendido y aceptado estos tÃ©rminos y condiciones."}),r&&e.jsx(_,{textAlign:"center",pt:4,children:e.jsx(O,{colorScheme:"blue",onClick:o,isDisabled:i,size:"lg",width:"full",children:i?"Aceptado":"Acepto los TÃ©rminos y Condiciones"})})]})})]})]})},Dl=({onAccept:s,showAcceptButton:t=!1})=>{const{isOpen:r,onOpen:a,onClose:i}=Ge();return e.jsxs(e.Fragment,{children:[e.jsx(O,{variant:"link",size:"sm",color:"blue.500",onClick:a,leftIcon:e.jsx(Ha,{}),children:"TÃ©rminos y Condiciones"}),e.jsx(Tl,{isOpen:r,onClose:i,showAcceptButton:t,onAccept:s})]})},Il=()=>{const{isOpen:s,onOpen:t,onClose:r}=Ge();return e.jsxs(e.Fragment,{children:[e.jsx(O,{variant:"link",size:"sm",color:"blue.500",onClick:t,leftIcon:e.jsx(Ua,{}),children:"PolÃ­tica de Privacidad"}),e.jsxs(Ke,{isOpen:s,onClose:r,size:"xl",scrollBehavior:"inside",children:[e.jsx(Ye,{}),e.jsxs(Ze,{maxH:"90vh",children:[e.jsx(Xe,{children:e.jsx(K,{size:"md",children:"PolÃ­tica de Privacidad - AquaYara"})}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:[e.jsx("strong",{children:"Fecha de Ãºltima actualizaciÃ³n:"})," 10 de enero de 2025"]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"1. InformaciÃ³n General"}),e.jsxs(n,{fontSize:"sm",mb:2,children:[e.jsx("strong",{children:"AquaYara"})," es responsable del tratamiento de sus datos personales."]}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Contacto:"})," aguademesaaquayara@gmail.com | +51 961 606 183"]})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"2. Datos que Recopilamos"}),e.jsxs(lt,{fontSize:"sm",spacing:1,children:[e.jsxs(_e,{children:[e.jsx("strong",{children:"Datos Personales:"})," Nombre, DNI/RUC, email, telÃ©fono, direcciÃ³n"]}),e.jsxs(_e,{children:[e.jsx("strong",{children:"Datos de Uso:"})," Historial de pedidos, preferencias, patrones de compra"]}),e.jsxs(_e,{children:[e.jsx("strong",{children:"Datos TÃ©cnicos:"})," IP, dispositivo, navegador, fecha y hora"]})]})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"3. Finalidades del Tratamiento"}),e.jsxs(lt,{fontSize:"sm",spacing:1,children:[e.jsx(_e,{children:"Procesar pedidos y gestionar entregas"}),e.jsx(_e,{children:"Comunicarnos con usted"}),e.jsx(_e,{children:"Procesar pagos y generar comprobantes"}),e.jsx(_e,{children:"Mejorar nuestros servicios"}),e.jsx(_e,{children:"Prevenir fraudes y proteger el sistema"})]})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"4. Sus Derechos"}),e.jsxs(lt,{fontSize:"sm",spacing:1,children:[e.jsx(_e,{children:"Derecho de acceso a sus datos"}),e.jsx(_e,{children:"Derecho de rectificaciÃ³n"}),e.jsx(_e,{children:"Derecho de eliminaciÃ³n"}),e.jsx(_e,{children:"Derecho de portabilidad"}),e.jsx(_e,{children:"Derecho de oposiciÃ³n"})]})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"5. Seguridad"}),e.jsx(n,{fontSize:"sm",children:"Implementamos medidas de seguridad como encriptaciÃ³n de datos sensibles, acceso restringido, monitoreo continuo y polÃ­ticas de confidencialidad."})]}),e.jsxs(_,{children:[e.jsx(K,{size:"sm",mb:2,children:"6. Contacto"}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"Email:"})," aguademesaaquayara@gmail.com"]}),e.jsxs(n,{fontSize:"sm",mb:1,children:[e.jsx("strong",{children:"TelÃ©fono:"})," +51 961 606 183"]}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Autoridad de Control:"})," proteccion.datos@minjus.gob.pe"]})]}),e.jsx(hs,{}),e.jsx(n,{fontSize:"xs",color:"gray.500",textAlign:"center",children:"Esta polÃ­tica se rige por la Ley de ProtecciÃ³n de Datos Personales del PerÃº (Ley NÂ° 29733)."})]})})]})]})]})},_l=()=>e.jsx(_,{bg:"gray.50",py:8,mt:"auto",children:e.jsx(Lr,{maxW:"container.xl",children:e.jsxs(u,{spacing:6,children:[e.jsxs(h,{spacing:8,wrap:"wrap",justify:"center",children:[e.jsxs(h,{spacing:2,children:[e.jsx(le,{as:Hs,color:"blue.500"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"+51 961 606 183"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(le,{as:qr,color:"blue.500"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"aguademesaaquayara@gmail.com"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(le,{as:wt,color:"blue.500"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Pucallpa, PerÃº"})]})]}),e.jsx(hs,{}),e.jsxs(h,{spacing:6,wrap:"wrap",justify:"center",children:[e.jsx(Dl,{}),e.jsx(Il,{}),e.jsx(br,{href:"mailto:aguademesaaquayara@gmail.com",color:"blue.500",fontSize:"sm",_hover:{textDecoration:"underline"},children:"Soporte TÃ©cnico"})]}),e.jsx(hs,{}),e.jsxs(u,{spacing:2,children:[e.jsx(n,{fontSize:"sm",color:"gray.500",textAlign:"center",children:"Â© 2025 AquaYara - Agua Purificada de Calidad"}),e.jsx(n,{fontSize:"xs",color:"gray.400",textAlign:"center",children:"Todos los derechos reservados | Horario: Lunes a SÃ¡bado 8:00 AM - 6:00 PM"})]})]})})}),kn=()=>{const{user:s,logout:t}=Os(),{isAdmin:r,isDeliveryPerson:a}=El(),i=Ys();Ge();const[l,o]=S.useState(!1),[c,d]=S.useState(()=>{const w=localStorage.getItem("sidebarCollapsed");return w?JSON.parse(w):!1});Al();const x=Gs({base:!0,lg:!1});S.useEffect(()=>{localStorage.setItem("sidebarCollapsed",JSON.stringify(c))},[c]);const P=()=>{t(),i("/")},A=()=>!s||!s.username?"?":s.username.charAt(0).toUpperCase(),R=[{to:"/dashboard",label:"Dashboard",icon:"ðŸ "},{to:"/dashboard/orders-management",label:"GestiÃ³n de Pedidos",icon:"ðŸ“¦",adminOnly:!0},{to:"/dashboard/clients",label:"Clientes",icon:"ðŸ‘¥",adminOnly:!0},{to:"/dashboard/vales",label:"GestiÃ³n de Vales",icon:"ðŸŽ«",adminOnly:!0},{to:"/dashboard/collection-report",label:"Reporte de Cobranza",icon:"ðŸ’°",adminOnly:!0},{to:"/dashboard/subscriptions",label:"Suscripciones",icon:"ðŸ“…",adminOnly:!0},{to:"/dashboard/delivery-fees",label:"Tarifas de EnvÃ­o",icon:"ðŸšš",adminOnly:!0},{to:"/dashboard/terms-and-conditions",label:"TÃ©rminos y Condiciones",icon:"ðŸ“„",adminOnly:!0},{to:"/dashboard/users-management",label:"GestiÃ³n de Usuarios",icon:"ðŸ‘¥",adminOnly:!0}],f=[{to:"/delivery-dashboard",label:"Dashboard",icon:"ðŸ "},{to:"/delivery-dashboard#orders",label:"Mis Pedidos",icon:"ðŸ“¦"},{to:"/delivery-dashboard#stats",label:"EstadÃ­sticas",icon:"ðŸ“Š"},{to:"/delivery-dashboard#vouchers",label:"Vales",icon:"ðŸŽ«"}],T=a()?f:R.filter(w=>!w.adminOnly||r()),k=()=>{o(!1)},y=({isCollapsed:w=!1})=>e.jsxs(u,{spacing:0,h:"full",align:"stretch",children:[e.jsx(_,{p:w?3:6,borderBottom:"1px solid",borderColor:"whiteAlpha.200",children:w?e.jsx(n,{fontSize:"2xl",textAlign:"center",color:"white",children:"ðŸ "}):e.jsx(dt,{size:"md",variant:"vertical",color:"white",textColor:"white",taglineColor:"whiteAlpha.700"})}),e.jsx(u,{spacing:1,flex:1,align:"stretch",p:w?0:2,children:T.map(E=>e.jsx(O,{as:pi,to:E.to,variant:"ghost",color:"white",justifyContent:w?"center":"flex-start",leftIcon:w?void 0:e.jsx(n,{children:E.icon}),_hover:{bg:"whiteAlpha.200"},_active:{bg:"whiteAlpha.300"},size:"sm",h:"40px",onClick:k,title:w?E.label:void 0,px:w?2:4,minW:w?"40px":"auto",w:w?"40px":"100%",children:w?e.jsx(n,{children:E.icon}):E.label},E.to))}),e.jsx(_,{p:w?1:4,borderTop:"1px solid",borderColor:"whiteAlpha.200",children:e.jsxs(Rn,{children:[e.jsx(On,{as:O,variant:"ghost",color:"white",w:"full",justifyContent:w?"center":"flex-start",leftIcon:e.jsx(Ja,{size:"sm",name:A()}),rightIcon:w?void 0:e.jsx(Qa,{}),title:w?`${s==null?void 0:s.username} (${s==null?void 0:s.role})`:void 0,children:!w&&e.jsxs(u,{spacing:0,align:"flex-start",children:[e.jsx(n,{fontSize:"sm",fontWeight:"medium",children:s==null?void 0:s.username}),e.jsx(n,{fontSize:"xs",color:"whiteAlpha.700",children:s==null?void 0:s.role})]})}),e.jsx(Ln,{children:e.jsx(yr,{onClick:()=>{P(),k()},color:"red.500",children:"Cerrar SesiÃ³n"})})]})})]});return e.jsxs(ys,{minH:"100vh",bg:"gray.50",children:[!x&&e.jsxs(_,{w:c?"60px":"280px",bg:"purple.600",color:"white",position:"fixed",h:"100vh",overflowY:"auto",zIndex:1e3,left:0,top:0,transition:"width 0.3s ease",children:[e.jsx(y,{isCollapsed:c}),e.jsx(ke,{icon:c?e.jsx(rn,{}):e.jsx(nn,{}),variant:"ghost",color:"white",size:"sm",position:"absolute",right:"-12px",top:"50%",transform:"translateY(-50%)",bg:"purple.600",border:"2px solid",borderColor:"purple.600",borderRadius:"full",_hover:{bg:"purple.700"},onClick:()=>d(!c),zIndex:1001})]}),e.jsxs(Ga,{isOpen:l,onClose:()=>o(!1),placement:"left",size:"xs",closeOnOverlayClick:!0,closeOnEsc:!0,children:[e.jsx(Ye,{}),e.jsxs(Ya,{children:[e.jsx(es,{}),e.jsx(Xe,{bg:"purple.600",color:"white",children:e.jsx(dt,{size:"sm",variant:"horizontal",color:"white",textColor:"white",taglineColor:"whiteAlpha.700"})}),e.jsx(Qe,{p:0,children:e.jsx(_,{bg:"purple.600",color:"white",h:"full",children:e.jsx(y,{})})})]})]}),e.jsxs(_,{flex:1,ml:x?0:c?"60px":"280px",display:"flex",flexDirection:"column",transition:"margin-left 0.3s ease",children:[x||!c?e.jsx(_,{bg:"white",px:{base:4,md:6},py:4,boxShadow:"sm",borderBottom:"1px solid",borderColor:"gray.200",position:"sticky",top:0,zIndex:999,children:e.jsxs(ys,{align:"center",justify:"space-between",children:[e.jsxs(h,{spacing:4,children:[x?e.jsx(ke,{icon:e.jsx(Xa,{}),variant:"ghost",onClick:()=>o(!0),"aria-label":"Abrir menÃº"}):e.jsx(ke,{icon:c?e.jsx(rn,{}):e.jsx(nn,{}),variant:"ghost",onClick:()=>d(!c),"aria-label":c?"Expandir sidebar":"Colapsar sidebar",size:"sm"}),!c&&e.jsxs(e.Fragment,{children:[e.jsx(dt,{size:"sm",variant:"horizontal"}),e.jsx(n,{fontSize:"lg",fontWeight:"semibold",color:"gray.700",children:a()?"Panel de Repartidor":"Panel de AdministraciÃ³n"})]})]}),e.jsxs(h,{spacing:4,children:[e.jsx(Ta,{variant:"badge"}),e.jsx(Ce,{colorScheme:"green",variant:"subtle",children:"En lÃ­nea"})]})]})}):null,e.jsx(_,{flex:1,p:{base:4,md:6},overflowY:"auto",position:"relative",zIndex:1,children:e.jsx(Bn,{})}),e.jsx(_l,{})]})]})},kl=()=>{const[s,t]=S.useState({username:"",password:""}),[r,a]=S.useState(!1),i=Ys(),l=xs(),{login:o,error:c,clearError:d}=Os(),x=async A=>{A.preventDefault(),a(!0);try{(await o(s.username,s.password)).success&&(l({title:"Ã‰xito",description:"Inicio de sesiÃ³n exitoso",status:"success",duration:3e3,isClosable:!0}),i("/dashboard"))}catch(R){console.error("Error en login:",R)}finally{a(!1)}},P=A=>{t({...s,[A.target.name]:A.target.value}),c&&d()};return e.jsx(ls,{minH:"100vh",bg:"gray.50",children:e.jsx(_,{w:"full",maxW:"md",p:6,children:e.jsx(F,{children:e.jsx(M,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(_,{textAlign:"center",children:[e.jsx(dt,{size:"xl",variant:"vertical",color:"blue.500",textColor:"blue.600",taglineColor:"teal.500"}),e.jsx(n,{color:"gray.600",mt:2,children:"Sistema de GestiÃ³n"})]}),e.jsx(_,{w:"full",children:e.jsx("form",{onSubmit:x,children:e.jsxs(u,{spacing:4,children:[c&&e.jsxs(Te,{status:"error",borderRadius:"md",children:[e.jsx(De,{}),c]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Usuario"}),e.jsx(re,{name:"username",value:s.username,onChange:P,placeholder:"Ingresa tu usuario",size:"lg",autoComplete:"username"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"ContraseÃ±a"}),e.jsx(re,{name:"password",type:"password",value:s.password,onChange:P,placeholder:"Ingresa tu contraseÃ±a",size:"lg",autoComplete:"current-password"})]}),e.jsx(O,{type:"submit",colorScheme:"blue",size:"lg",w:"full",isLoading:r,loadingText:"Iniciando sesiÃ³n...",children:"Iniciar SesiÃ³n"})]})})}),e.jsx(_,{textAlign:"center",children:e.jsx(n,{fontSize:"sm",color:"gray.500",children:"Sistema de gestiÃ³n para planta de agua"})})]})})})})})},Da=ft((s,t)=>({products:[],loading:!1,error:null,fetchProducts:async()=>{s({loading:!0,error:null});try{const r=await Y.get("/api/products");s({products:r.data,loading:!1})}catch(r){console.error("Error al cargar productos:",r),s({error:r.message,loading:!1})}},createProduct:async r=>{s({loading:!0,error:null});try{const i=(await Y.post("/api/products",r)).data;return s(l=>({products:[...l.products,i],loading:!1})),{success:!0,data:i}}catch(a){return console.error("Error al crear producto:",a),s({error:a.message,loading:!1}),{success:!1,error:a.message}}},updateProduct:async(r,a)=>{s({loading:!0,error:null});try{const l=(await Y.put(`/api/products/${r}`,a)).data;return s(o=>({products:o.products.map(c=>c.id===r?l:c),loading:!1})),{success:!0,data:l}}catch(i){return console.error("Error al actualizar producto:",i),s({error:i.message,loading:!1}),{success:!1,error:i.message}}},deleteProduct:async r=>{s({loading:!0,error:null});try{return await Y.delete(`/api/products/${r}`),s(a=>({products:a.products.filter(i=>i.id!==r),loading:!1})),{success:!0}}catch(a){return console.error("Error al eliminar producto:",a),s({error:a.message,loading:!1}),{success:!1,error:a.message}}},calculatePrice:async(r,a)=>{try{return{success:!0,data:(await Y.post(`/api/products/${r}/calculate-price`,{quantity:a})).data.data.pricing}}catch(i){return console.error("Error al calcular precio:",i),{success:!1,error:i.message}}},getPricingInfo:async r=>{try{return{success:!0,data:(await Y.get(`/api/products/${r}/pricing-info`)).data.data.pricingInfo}}catch(a){return console.error("Error al obtener informaciÃ³n de precios:",a),{success:!1,error:a.message}}},getFilteredProducts:r=>{const{products:a}=t();return a.filter(i=>{const l=i.name.toLowerCase(),o=i.description?i.description.toLowerCase():"",c=i.type?i.type.toLowerCase():"";return l.includes(r.toLowerCase())||o.includes(r.toLowerCase())||c.includes(r.toLowerCase())})},getProductById:r=>{const{products:a}=t();return a.find(i=>i.id===r)},clearError:()=>s({error:null}),reset:()=>s({products:[],loading:!1,error:null})})),Nl=ft((s,t)=>({clients:[],loading:!1,error:null,fetchClients:async()=>{s({loading:!0,error:null});try{const r=await Y.get("/api/clients");console.log("ðŸ” API Clientes Response:",r.data);const a=r.data.success?r.data.data:r.data;console.log("ðŸ” Clientes Data:",a),s({clients:a||[],loading:!1})}catch(r){console.error("Error al cargar clientes:",r),s({error:r.message,loading:!1})}},createClient:async r=>{s({loading:!0,error:null});try{const i=(await Y.post("/api/clients",r)).data;return s(l=>({clients:[...l.clients,i],loading:!1})),{success:!0,data:i}}catch(a){return console.error("Error al crear cliente:",a),s({error:a.message,loading:!1}),{success:!1,error:a.message}}},updateClient:async(r,a)=>{s({loading:!0,error:null});try{const l=(await Y.put(`/api/clients/${r}`,a)).data;return s(o=>({clients:o.clients.map(c=>c.id===r?l:c),loading:!1})),{success:!0,data:l}}catch(i){return console.error("Error al actualizar cliente:",i),s({error:i.message,loading:!1}),{success:!1,error:i.message}}},deleteClient:async r=>{s({loading:!0,error:null});try{return await Y.delete(`/api/clients/${r}`),s(a=>({clients:a.clients.filter(i=>i.id!==r),loading:!1})),{success:!0}}catch(a){return console.error("Error al eliminar cliente:",a),s({error:a.message,loading:!1}),{success:!1,error:a.message}}},getFilteredClients:r=>{const{clients:a}=t();return a.filter(i=>{const l=i.name.toLowerCase(),o=i.documentNumber.toLowerCase(),c=i.email?i.email.toLowerCase():"";return l.includes(r.toLowerCase())||o.includes(r.toLowerCase())||c.includes(r.toLowerCase())})},getClientById:r=>{const{clients:a}=t();return a.find(i=>i.id===r)},fetchClientById:async r=>{try{return(await Y.get(`/api/clients/${r}`)).data}catch(a){return console.error("Error al obtener cliente:",a),null}},clearError:()=>s({error:null}),reset:()=>s({clients:[],loading:!1,error:null})})),ar=ft((s,t)=>({deliveryFees:[],deliveryPersons:[],loading:!1,error:null,fetchDeliveryFees:async()=>{var r,a,i,l;console.log("ðŸ”„ fetchDeliveryFees iniciado"),s({loading:!0,error:null});try{const o=await Y.get("/api/delivery-fees");console.log("ðŸ“¦ Respuesta del API:",o.data);const c=o.data.success?o.data.data:o.data;return s({deliveryFees:c,loading:!1}),console.log("âœ… deliveryFees actualizado en store:",c),{success:!0,data:c}}catch(o){return console.error("âŒ Error al cargar tarifas de envÃ­o:",o),s({error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al cargar tarifas",loading:!1}),{success:!1,error:((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al cargar tarifas"}}},createDeliveryFee:async r=>{var a,i,l,o;try{const c=await Y.post("/api/delivery-fees",r);return s(d=>({deliveryFees:[...Array.isArray(d.deliveryFees)?d.deliveryFees:[],c.data]})),{success:!0,data:c.data}}catch(c){return console.error("Error al crear tarifa:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al crear tarifa"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al crear tarifa"}}},updateDeliveryFee:async(r,a)=>{var i,l,o,c;try{const d=await Y.put(`/api/delivery-fees/${r}`,a);return s(x=>({deliveryFees:Array.isArray(x.deliveryFees)?x.deliveryFees.map(P=>P.id===r?d.data:P):[]})),{success:!0,data:d.data}}catch(d){return console.error("Error al actualizar tarifa:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar tarifa"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar tarifa"}}},deleteDeliveryFee:async r=>{var a,i,l,o;try{return await Y.delete(`/api/delivery-fees/${r}`),s(c=>({deliveryFees:Array.isArray(c.deliveryFees)?c.deliveryFees.filter(d=>d.id!==r):[]})),{success:!0}}catch(c){return console.error("Error al eliminar tarifa:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al eliminar tarifa"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al eliminar tarifa"}}},fetchDeliveryPersons:async()=>{var r,a,i,l,o,c,d;s({loading:!0,error:null});try{console.log("ðŸ”„ fetchDeliveryPersons iniciado");const x=await Y.get("/api/user-management");console.log("ðŸ“¦ Respuesta usuarios completos:",x.data);const A=(x.data.success?x.data.data:x.data).filter(R=>R.role==="repartidor");return s({deliveryPersons:A,loading:!1}),console.log("âœ… Repartidores cargados:",A.length),{success:!0,data:A}}catch(x){return console.error("âŒ Error al cargar repartidores:",x),console.error("âŒ Status:",(r=x.response)==null?void 0:r.status),console.error("âŒ Message:",(i=(a=x.response)==null?void 0:a.data)==null?void 0:i.message),s({error:((o=(l=x.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al cargar repartidores",loading:!1}),{success:!1,error:((d=(c=x.response)==null?void 0:c.data)==null?void 0:d.message)||"Error al cargar repartidores"}}},createDeliveryPerson:async r=>{var a,i,l,o;try{const c=await Y.post("/api/user-management",r);return s(d=>({deliveryPersons:[...Array.isArray(d.deliveryPersons)?d.deliveryPersons:[],c.data.data]})),{success:!0,data:c.data.data}}catch(c){return console.error("Error al crear repartidor:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al crear repartidor"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al crear repartidor"}}},updateDeliveryPerson:async(r,a)=>{var i,l,o,c;try{const d=await Y.put(`/api/user-management/${r}`,a);return s(x=>({deliveryPersons:Array.isArray(x.deliveryPersons)?x.deliveryPersons.map(P=>P.id===r?d.data.data:P):[]})),{success:!0,data:d.data.data}}catch(d){return console.error("Error al actualizar repartidor:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar repartidor"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar repartidor"}}},updateDeliveryPersonStatus:async(r,a)=>{var i,l,o,c;try{return await Y.patch(`/api/user-management/${r}/toggle-status`,{isActive:a==="available"}),s(d=>({deliveryPersons:Array.isArray(d.deliveryPersons)?d.deliveryPersons.map(x=>x.id===r?{...x,isActive:a==="available"}:x):[]})),{success:!0}}catch(d){return console.error("Error al actualizar estado:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar estado"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar estado"}}},deleteDeliveryPerson:async r=>{var a,i,l,o;try{return await Y.delete(`/api/user-management/${r}`),s(c=>({deliveryPersons:Array.isArray(c.deliveryPersons)?c.deliveryPersons.filter(d=>d.id!==r):[]})),{success:!0}}catch(c){return console.error("Error al eliminar repartidor:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al eliminar repartidor"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al eliminar repartidor"}}},getAvailableDeliveryPersons:()=>{const{deliveryPersons:r}=t();return Array.isArray(r)?r.filter(a=>a.isActive===!0):[]},getDeliveryStats:()=>{const{deliveryPersons:r,deliveryFees:a}=t(),i=Array.isArray(r)?r:[],l=Array.isArray(a)?a:[],o=i.length,c=i.filter(A=>A.isActive===!0).length,d=i.filter(A=>A.isActive===!1).length,x=l.length,P=l.filter(A=>A.isActive).length;return{totalPersons:o,availablePersons:c,inactivePersons:d,totalFees:x,activeFees:P}},clearError:()=>s({error:null})})),Kr=ft((s,t)=>({orders:[],loading:!1,error:null,createGuestOrder:async r=>{var a,i,l,o,c;s({loading:!0,error:null});try{console.log("Enviando datos al backend:",r);const d=await Y.post("/api/guest-orders",r);console.log("Respuesta completa del servidor:",d),console.log("Datos de la respuesta:",d.data);const x=d.data.data;return console.log("Procesando respuesta - newOrder:",x),s(P=>({orders:Array.isArray(P.orders)?[...P.orders,x]:[x],loading:!1})),{success:!0,data:x}}catch(d){return console.error("Error al crear pedido de invitado:",d),console.error("Detalles del error:",(a=d.response)==null?void 0:a.data),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al crear pedido",loading:!1}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al crear pedido"}}},fetchOrders:async()=>{var r,a,i,l;s({loading:!0,error:null});try{const o=await Y.get("/api/guest-orders?limit=1000");console.log("Respuesta completa del servidor:",o),console.log("Datos de la respuesta:",o.data);const c=o.data.success?o.data.data:o.data;return console.log("Procesando pedidos:",c),s({orders:Array.isArray(c)?c:[],loading:!1}),{success:!0,data:c}}catch(o){return console.error("Error al cargar pedidos de invitados:",o),s({error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al cargar pedidos",loading:!1}),{success:!1,error:((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al cargar pedidos"}}},fetchOrdersSilently:async()=>{var r,a;try{const i=await Y.get("/api/guest-orders?limit=1000");console.log("ðŸ”„ ActualizaciÃ³n silenciosa de pedidos");const l=i.data.success?i.data.data:i.data;return s({orders:Array.isArray(l)?l:[]}),{success:!0,data:l}}catch(i){return console.error("Error en actualizaciÃ³n silenciosa:",i),{success:!1,error:((a=(r=i.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al actualizar pedidos"}}},updateOrderStatus:async(r,a)=>{var i,l,o,c;try{return await Y.put(`/api/guest-orders/${r}/status`,{status:a}),s(d=>({orders:Array.isArray(d.orders)?d.orders.map(x=>x.id===r?{...x,status:a}:x):[]})),{success:!0}}catch(d){return console.error("Error al actualizar estado:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar estado"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar estado"}}},updateGuestOrder:async(r,a)=>{var i,l,o,c;s({loading:!0,error:null});try{if(a.deliveryPersonId){console.log("ðŸ” Asignando repartidor - Enviando peticiÃ³n:",{url:`/api/guest-orders/${r}/assign-delivery`,data:{deliveryPersonId:a.deliveryPersonId},headers:Y.defaults.headers.common});const d=await Y.put(`/api/guest-orders/${r}/assign-delivery`,{deliveryPersonId:a.deliveryPersonId}),x=d.data.data;return console.log("ðŸ” AsignaciÃ³n de repartidor - Respuesta recibida:",d.data),console.log("ðŸ” AsignaciÃ³n de repartidor - updatedOrder:",x),s(P=>({orders:Array.isArray(P.orders)?P.orders.map(A=>A.id===r?{...A,...x}:A):[],loading:!1})),{success:!0,data:x}}else{console.log("ðŸ” updateGuestOrder - Enviando peticiÃ³n:",{url:`/api/guest-orders/${r}`,data:a,headers:Y.defaults.headers.common});const d=await Y.put(`/api/guest-orders/${r}`,a),x=d.data;return console.log("ðŸ” updateGuestOrder - Respuesta recibida:",d.data),console.log("ðŸ” updateGuestOrder - updatedOrder:",x),s(P=>({orders:Array.isArray(P.orders)?P.orders.map(A=>A.id===r?{...A,...x}:A):[],loading:!1})),{success:!0,data:x}}}catch(d){return console.error("Error al actualizar pedido de invitado:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar pedido",loading:!1}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar pedido"}}},getOrderById:r=>{const{orders:a}=t();return Array.isArray(a)?a.find(i=>i.id===r):null},getOrdersByStatus:r=>{const{orders:a}=t();return Array.isArray(a)?a.filter(i=>i.status===r):[]},getOrderStats:()=>{const{orders:r}=t();return Array.isArray(r)?{total:r.length,pending:r.filter(a=>a.status==="pendiente").length,inProgress:r.filter(a=>a.status==="en_camino").length,delivered:r.filter(a=>a.status==="entregado").length,cancelled:r.filter(a=>a.status==="cancelado").length}:{total:0,pending:0,inProgress:0,delivered:0,cancelled:0}},clearError:()=>s({error:null})})),Rl=()=>{var Ie,fe,D,B,je,I,be,$e,Fe,te,C,ee;const s=Ys(),t=Me("white","gray.800"),r=Me("gray.200","gray.600");Gs({base:!0,md:!1});const[a,i]=S.useState(new Date),{isExpired:l,isLoading:o}=Br();if(!o&&l)return e.jsx(Ur,{});const{products:c,fetchProducts:d}=Da(),{clients:x,fetchClients:P}=Nl(),{getDeliveryStats:A,fetchDeliveryPersons:R,fetchDeliveryFees:f}=ar(),{orders:p,fetchOrders:T,getOrderStats:k}=Kr(),y=async()=>{try{const V=await Y.get("/api/vouchers/stats");console.log("ðŸ“¦ Respuesta vales:",V.data),V.data.success&&(pe(V.data.data),console.log("âœ… EstadÃ­sticas de vales actualizadas:",V.data.data))}catch(V){console.error("Error al cargar estadÃ­sticas de vales:",V)}},w=async()=>{try{const V=await Y.get("/api/subscriptions");if(console.log("ðŸ“¦ Respuesta suscripciones:",V.data),V.data.success){const Ae=V.data.data||[];z({total:Ae.length,active:Ae.filter(Ee=>Ee.status==="active").length}),console.log("âœ… EstadÃ­sticas de suscripciones actualizadas:",{total:Ae.length,active:Ae.filter(Ee=>Ee.status==="active").length})}}catch(V){console.error("Error al cargar estadÃ­sticas de suscripciones:",V)}};S.useEffect(()=>{(async()=>{try{await new Promise(Ee=>setTimeout(Ee,100)),d(),P(),f(),T(),y(),w()}catch(Ee){console.error("Error cargando datos del dashboard:",Ee)}})();const Ae=setInterval(()=>{T(),P(),y(),w(),i(new Date)},3e4);return()=>clearInterval(Ae)},[d,P,f,T]),k(),A();const E=(p==null?void 0:p.length)||0,N=((Ie=p==null?void 0:p.filter(V=>V.status==="pending"))==null?void 0:Ie.length)||0,$=((fe=p==null?void 0:p.filter(V=>V.status==="delivered"))==null?void 0:fe.length)||0,L=((D=p==null?void 0:p.filter(V=>V.status==="confirmed"))==null?void 0:D.length)||0,g=((B=p==null?void 0:p.filter(V=>V.status==="preparing"))==null?void 0:B.length)||0,q=((je=p==null?void 0:p.filter(V=>V.status==="ready"))==null?void 0:je.length)||0,b=((I=p==null?void 0:p.filter(V=>V.paymentMethod==="contraentrega"))==null?void 0:I.length)||0,ae=((be=p==null?void 0:p.filter(V=>V.paymentMethod==="vale"))==null?void 0:be.length)||0,v=(($e=p==null?void 0:p.filter(V=>V.paymentMethod==="suscripcion"))==null?void 0:$e.length)||0,Q=((Fe=p==null?void 0:p.filter(V=>V.paymentType==="plin"))==null?void 0:Fe.length)||0,W=((te=p==null?void 0:p.filter(V=>V.paymentType==="efectivo"||V.paymentType==="cash"))==null?void 0:te.length)||0,Z=((C=p==null?void 0:p.filter(V=>V.paymentType==="plin"))==null?void 0:C.reduce((V,Ae)=>V+(Ae.totalAmount||0),0))||0,ve=((ee=p==null?void 0:p.filter(V=>V.paymentType==="efectivo"||V.paymentType==="cash"))==null?void 0:ee.reduce((V,Ae)=>V+(Ae.totalAmount||0),0))||0,[oe,pe]=S.useState({total:0,pending:0}),[Le,z]=S.useState({total:0,active:0}),X=(x==null?void 0:x.length)||0;console.log("ðŸ” Dashboard Debug:",{clients:(x==null?void 0:x.length)||0,totalClients:X,valeOrders:ae,suscripcionOrders:v});const Se=(p==null?void 0:p.reduce((V,Ae)=>V+(parseFloat(Ae.totalAmount)||0),0))||0,ie=(p==null?void 0:p.filter(V=>{const Ae=new Date(V.createdAt),Ee=new Date;return Ae.toDateString()===Ee.toDateString()}).reduce((V,Ae)=>V+(parseFloat(Ae.totalAmount)||0),0))||0,ne=[{title:"Pedidos",icon:Cs,color:"orange",onClick:()=>s("/dashboard/orders-management"),count:E,description:"Gestionar pedidos"},{title:"Clientes",icon:na,color:"green",onClick:()=>s("/dashboard/clients"),count:X,description:"Base de clientes"},{title:"Suscripciones",icon:ks,color:"purple",onClick:()=>s("/dashboard/subscriptions"),count:Le.active,description:`${Le.total} total, ${Le.active} activas`},{title:"Vales",icon:Vs,color:"blue",onClick:()=>s("/dashboard/vales"),count:oe.pending,description:`${oe.total} total, ${oe.pending} pendientes`},{title:"Cobranza",icon:sa,color:"red",onClick:()=>s("/dashboard/collection-report"),count:oe.pending,description:"Vales por cobrar"},{title:"TÃ©rminos",icon:oo,color:"teal",onClick:()=>s("/dashboard/terms-and-conditions"),count:0,description:"TÃ©rminos y condiciones"},{title:"Usuarios",icon:fo,color:"cyan",onClick:()=>s("/dashboard/users-management"),count:0,description:"GestiÃ³n de usuarios"}];return e.jsxs(_,{p:{base:1,sm:2,md:4},maxW:"100%",overflow:"hidden",children:[e.jsxs(ys,{direction:{base:"column",sm:"row"},align:{base:"center",sm:"flex-start"},justify:"space-between",mb:{base:4,md:6},wrap:"wrap",gap:2,children:[e.jsxs(u,{align:{base:"center",sm:"flex-start"},spacing:{base:1,md:2},maxW:{base:"100%",sm:"70%"},children:[e.jsx(dt,{size:{base:"sm",md:"md"},variant:"horizontal",color:"blue.500",textColor:"blue.600",taglineColor:"teal.500"}),e.jsx(K,{size:{base:"md",md:"lg"},color:"gray.700",textAlign:{base:"center",sm:"left"},children:"Dashboard Administrativo"}),e.jsxs(n,{color:"gray.400",fontSize:"xs",textAlign:{base:"center",sm:"left"},children:["Ãšltima actualizaciÃ³n: ",a.toLocaleTimeString()]})]}),e.jsxs(u,{spacing:1,align:{base:"center",sm:"flex-end"},children:[e.jsx(Ce,{colorScheme:"green",variant:"subtle",fontSize:"xs",children:"Sistema Activo"}),e.jsx(O,{size:"xs",colorScheme:"blue",variant:"outline",onClick:()=>{T(),P(),R(),y(),w(),i(new Date)},children:"Actualizar"})]})]}),e.jsxs(as,{columns:{base:1,sm:2,lg:5},spacing:{base:2,md:4},mb:{base:4,md:8},maxW:"100%",children:[e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"orange.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ“¦ Pedidos Pendientes"}),e.jsx(He,{color:"orange.500",fontSize:{base:"xl",md:"2xl"},children:N}),e.jsxs(Ue,{fontSize:{base:"xs",md:"sm"},children:[L," confirmados"]})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"green.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ’° Ingresos Hoy"}),e.jsxs(He,{color:"green.500",fontSize:{base:"xl",md:"2xl"},children:["S/ ",ie.toFixed(2)]}),e.jsxs(Ue,{fontSize:{base:"xs",md:"sm"},children:["Total: S/ ",Se.toFixed(2)]})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"blue.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ‘¥ Clientes"}),e.jsx(He,{color:"blue.500",fontSize:{base:"xl",md:"2xl"},children:x.length}),e.jsx(Ue,{fontSize:{base:"xs",md:"sm"},children:"Clientes registrados"})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"purple.600",fontSize:{base:"xs",md:"sm"},children:"âœ… Entregados"}),e.jsx(He,{color:"purple.500",fontSize:{base:"xl",md:"2xl"},children:$}),e.jsxs(Ue,{fontSize:{base:"xs",md:"sm"},children:[q," listos para entregar"]})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"yellow.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ“Š Total Pedidos"}),e.jsx(He,{color:"yellow.500",fontSize:{base:"xl",md:"2xl"},children:E}),e.jsxs(Ue,{fontSize:{base:"xs",md:"sm"},children:[g," en preparaciÃ³n"]})]})})})]}),e.jsxs(as,{columns:{base:2,sm:2,lg:4},spacing:{base:2,md:4},mb:{base:4,md:8},maxW:"100%",children:[e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(M,{p:{base:2,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"blue.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ’µ Contraentrega"}),e.jsx(He,{color:"blue.500",fontSize:{base:"lg",md:"xl"},children:b}),e.jsx(Ue,{fontSize:{base:"xs",md:"sm"},children:"Pago al recibir"})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(M,{p:{base:2,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"orange.600",fontSize:{base:"xs",md:"sm"},children:"ðŸŽ« Vales"}),e.jsx(He,{color:"orange.500",fontSize:{base:"lg",md:"xl"},children:ae}),e.jsx(Ue,{fontSize:{base:"xs",md:"sm"},children:"Pago a crÃ©dito"})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(M,{p:{base:2,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"purple.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ“… Suscripciones"}),e.jsx(He,{color:"purple.500",fontSize:{base:"lg",md:"xl"},children:v}),e.jsx(Ue,{fontSize:{base:"xs",md:"sm"},children:"Pago mensual"})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(M,{p:{base:2,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"green.600",fontSize:{base:"xs",md:"sm"},children:"ðŸ’§ Productos"}),e.jsx(He,{color:"green.500",fontSize:{base:"lg",md:"xl"},children:c.length}),e.jsx(Ue,{fontSize:{base:"xs",md:"sm"},children:"En inventario"})]})})})]}),e.jsxs(as,{columns:{base:1,sm:2,lg:2},spacing:{base:2,md:4},mb:{base:4,md:8},maxW:"100%",children:[e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"blue.600",fontSize:{base:"sm",md:"md"},children:"ðŸ“± PLIN"}),e.jsx(He,{color:"blue.500",fontSize:{base:"xl",md:"2xl"},children:Q}),e.jsxs(Ue,{fontSize:{base:"xs",md:"sm"},children:["S/ ",Z.toFixed(2)," en total"]})]})})}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(Ve,{children:[e.jsx(qe,{color:"green.600",fontSize:{base:"sm",md:"md"},children:"ðŸ’µ Efectivo"}),e.jsx(He,{color:"green.500",fontSize:{base:"xl",md:"2xl"},children:W}),e.jsxs(Ue,{fontSize:{base:"xs",md:"sm"},children:["S/ ",ve.toFixed(2)," en total"]})]})})})]}),e.jsx(F,{bg:t,borderColor:r,boxShadow:"sm",maxW:"100%",children:e.jsxs(M,{p:{base:3,md:4},children:[e.jsx(K,{size:{base:"sm",md:"md"},mb:{base:3,md:4},color:"gray.700",children:"ðŸš€ Acciones RÃ¡pidas"}),e.jsx(as,{columns:{base:2,sm:3,md:4,lg:7},spacing:{base:2,md:3},maxW:"100%",children:ne.map((V,Ae)=>e.jsx(F,{borderColor:`${V.color}.200`,borderWidth:"2px",cursor:"pointer",onClick:V.onClick,_hover:{transform:"translateY(-2px)",boxShadow:"lg",borderColor:`${V.color}.300`,bg:`${V.color}.50`},transition:"all 0.2s",borderRadius:"lg",bg:"white",h:{base:"100px",md:"110px"},children:e.jsx(M,{p:{base:2,md:3},h:"100%",children:e.jsxs(u,{spacing:{base:1,md:2},h:"100%",justify:"space-between",align:"center",children:[e.jsx(_,{display:"flex",alignItems:"center",justifyContent:"center",h:{base:"24px",md:"28px"},w:{base:"24px",md:"28px"},borderRadius:"full",bg:`${V.color}.100`,flexShrink:0,children:e.jsx(V.icon,{size:{base:14,md:16},color:`${V.color}.600`})}),e.jsxs(u,{spacing:1,flex:1,w:"100%",textAlign:"center",children:[e.jsx(n,{fontSize:{base:"2xs",md:"xs"},fontWeight:"bold",color:"gray.700",noOfLines:2,lineHeight:"1.1",minH:{base:"20px",md:"24px"},display:"flex",alignItems:"center",justifyContent:"center",children:V.title}),e.jsx(n,{fontSize:{base:"3xs",md:"2xs"},color:"gray.500",noOfLines:2,lineHeight:"1.0",minH:{base:"16px",md:"18px"},children:V.description})]}),e.jsxs(_,{position:"relative",display:"inline-block",children:[e.jsx(_,{bg:`${V.color}.500`,color:"white",borderRadius:"full",px:{base:2,md:3},py:{base:1,md:1.5},fontSize:{base:"sm",md:"md"},fontWeight:"900",minW:{base:"28px",md:"32px"},h:{base:"28px",md:"32px"},display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"lg",border:"4px solid white",_hover:{transform:"scale(1.1)",boxShadow:"xl",bg:`${V.color}.600`},transition:"all 0.3s ease",cursor:"pointer",children:V.count}),e.jsx(_,{position:"absolute",top:"-2px",right:"-2px",w:"8px",h:"8px",bg:"white",borderRadius:"full",opacity:.8,className:"pulse-animation"})]})]})})},Ae))})]})})]})},Ol=()=>{var V,Ae,Ee,Je,gs,Xs,at;const{orders:s,loading:t,fetchOrders:r,fetchOrdersSilently:a,updateGuestOrder:i}=Kr(),{deliveryPersons:l,fetchDeliveryPersons:o}=ar(),[c,d]=S.useState(""),[x,P]=S.useState("all"),[A,R]=S.useState("all"),[f,p]=S.useState(null),[T,k]=S.useState(""),[y,w]=S.useState(new Date),[E,N]=S.useState(!1),[$,L]=S.useState(""),{isOpen:g,onOpen:q,onClose:b}=Ge(),{isOpen:ae,onOpen:v,onClose:Q}=Ge(),{isOpen:W,onOpen:Z,onClose:ve}=Ge(),oe=xs();S.useEffect(()=>{r(),o();const m=setInterval(async()=>{N(!0),await a(),w(new Date),N(!1)},3e4);return()=>clearInterval(m)},[r,o]);const pe=s.map(m=>({...m,type:"guest",orderNumber:m.orderNumber||`PED-${m.id}`,clientName:m.clientName||m.customerName,clientPhone:m.clientPhone||m.customerPhone,clientAddress:m.clientAddress||m.deliveryAddress,clientDistrict:m.clientDistrict||m.deliveryDistrict})).sort((m,ce)=>new Date(ce.createdAt)-new Date(m.createdAt));console.log("ðŸ” Pedidos cargados:",pe.length),console.log("ðŸ” Repartidores cargados:",l.length),console.log("ðŸ” Primer pedido completo:",pe[0]),console.log("ðŸ” Estructura del cliente:",(V=pe[0])==null?void 0:V.Client),console.log("ðŸ” Datos del cliente:",{clientName:(Ae=pe[0])==null?void 0:Ae.clientName,clientPhone:(Ee=pe[0])==null?void 0:Ee.clientPhone,clientAddress:(Je=pe[0])==null?void 0:Je.clientAddress,Client:(gs=pe[0])==null?void 0:gs.Client,deliveryAddress:(Xs=pe[0])==null?void 0:Xs.deliveryAddress,deliveryDistrict:(at=pe[0])==null?void 0:at.deliveryDistrict});const Le=pe.filter(m=>m.deliveryPersonId);console.log("ðŸ” Pedidos asignados:",Le.length),Le.forEach(m=>{console.log(`ðŸ” Pedido ${m.id} asignado a repartidor ${m.deliveryPersonId}:`,{id:m.id,status:m.status,deliveryPersonId:m.deliveryPersonId,deliveryPerson:m.deliveryPerson})}),console.log("ðŸ” Repartidores disponibles:",l.map(m=>({id:m.id,name:m.name,type:typeof m.id}))),pe.forEach((m,ce)=>{ce<3&&console.log(`ðŸ” Pedido ${ce+1}:`,{id:m.id,type:m.type,clientName:m.clientName,clientPhone:m.clientPhone,Client:m.Client,customerName:m.customerName,customerPhone:m.customerPhone,deliveryAddress:m.deliveryAddress,products:m.products,orderDetails:m.orderDetails})});const z=(pe||[]).filter(m=>{var Ts,zs,Re,Ds;const ce=((Ts=m.orderNumber)==null?void 0:Ts.toLowerCase().includes(c.toLowerCase()))||((zs=m.clientName)==null?void 0:zs.toLowerCase().includes(c.toLowerCase()))||((Ds=(Re=m.client)==null?void 0:Re.name)==null?void 0:Ds.toLowerCase().includes(c.toLowerCase())),de=x==="all"||m.status===x,ds=A==="all"||A==="efectivo"&&m.paymentType==="efectivo"||A==="plin"&&m.paymentType==="plin"||A==="vale"&&m.paymentMethod==="vale"||A==="suscripcion"&&m.paymentMethod==="suscripcion"||A==="contraentrega"&&m.paymentMethod==="contraentrega";return ce&&de&&ds}),X={pending:z.filter(m=>m.status==="pending")||[],confirmed:z.filter(m=>m.status==="confirmed")||[],preparing:z.filter(m=>m.status==="preparing")||[],ready:z.filter(m=>m.status==="ready")||[],delivered:z.filter(m=>m.status==="delivered")||[],cancelled:z.filter(m=>m.status==="cancelled")||[]},Se=m=>{switch(m){case"pending":return"orange";case"confirmed":return"blue";case"preparing":return"yellow";case"ready":return"purple";case"delivered":return"green";case"cancelled":return"red";case"pendiente":return"orange";case"asignado":return"blue";case"en_camino":return"purple";case"entregado":return"green";case"cancelado":return"red";default:return"gray"}},ie=m=>{switch(m){case"pending":return"Pendiente";case"confirmed":return"Asignado";case"preparing":return"Preparando";case"ready":return"Listo";case"delivered":return"Entregado";case"cancelled":return"Cancelado";case"pendiente":return"Pendiente";case"asignado":return"Asignado";case"en_camino":return"En Camino";case"entregado":return"Entregado";case"cancelado":return"Cancelado";default:return m}},ne=(m,ce)=>{if(ce==="suscripcion")return ks;switch(m){case"cash":case"efectivo":return bs;case"plin":return Ks;case"yape":return Ks;case"transfer":return FaCreditCard;default:return bs}},Ie=m=>{let ce=[];return m.type==="regular"&&m.orderDetails&&(ce=m.orderDetails.map(de=>{var ds,Ts;return{name:((ds=de.product)==null?void 0:ds.name)||((Ts=de.Product)==null?void 0:Ts.name)||"Producto",quantity:de.quantity||0,price:de.unitPrice||de.price||0}})),m.type==="guest"&&m.products&&(ce=m.products.map(de=>{var ds;return{name:((ds=de.product)==null?void 0:ds.name)||de.name||"Producto",quantity:de.quantity||0,price:de.price||de.unitPrice||0}})),ce.length===0?e.jsx(n,{fontSize:"xs",color:"gray.500",fontStyle:"italic",children:"Sin productos"}):e.jsx(u,{spacing:1,align:"start",w:"full",children:ce.map((de,ds)=>e.jsxs(h,{justify:"space-between",w:"full",fontSize:"xs",children:[e.jsx(n,{noOfLines:1,flex:1,children:de.name}),e.jsxs(n,{color:"gray.600",minW:"fit-content",children:["x",de.quantity]}),e.jsxs(n,{color:"green.600",fontWeight:"medium",minW:"fit-content",children:["S/ ",(de.price*de.quantity).toFixed(2)]})]},ds))})},fe=async()=>{if(!f||!T){oe({title:"Datos incompletos",description:"Selecciona un repartidor",status:"warning",duration:3e3,isClosable:!0});return}if(f.status==="cancelled"){oe({title:"AcciÃ³n no permitida",description:"No se puede asignar repartidor a un pedido cancelado",status:"error",duration:3e3,isClosable:!0}),b();return}try{const m={status:"confirmed",deliveryPersonId:T,notes:$};console.log("ðŸ” Asignando repartidor:",{orderId:f.id,deliveryPersonId:T,updateData:m});const ce=await i(f.id,m);console.log("ðŸ” Resultado de la asignaciÃ³n:",ce),oe({title:"Repartidor asignado",description:"El pedido ha sido asignado exitosamente",status:"success",duration:3e3,isClosable:!0}),r(),b(),p(null),k(""),L("")}catch{oe({title:"Error",description:"No se pudo asignar el repartidor",status:"error",duration:3e3,isClosable:!0})}},D=m=>{p(m),Z()},B=async()=>{if(f)try{const m={status:"cancelled"};await i(f.id,m),oe({title:"Pedido anulado",description:`El pedido #${f.id} ha sido anulado exitosamente`,status:"success",duration:3e3,isClosable:!0}),ve(),p(null),r()}catch{oe({title:"Error",description:"No se pudo anular el pedido",status:"error",duration:3e3,isClosable:!0})}},je=async(m,ce)=>{try{const de={status:ce};await i(m.id,de),oe({title:"Estado actualizado",description:`El pedido ahora estÃ¡ ${ie(ce).toLowerCase()}`,status:"success",duration:3e3,isClosable:!0})}catch{oe({title:"Error",description:"No se pudo actualizar el estado",status:"error",duration:3e3,isClosable:!0})}},I=m=>{if(m.status==="cancelled"){oe({title:"AcciÃ³n no permitida",description:"No se puede asignar repartidor a un pedido cancelado",status:"warning",duration:3e3,isClosable:!0});return}p(m),k(m.deliveryPersonId||""),L(m.notes||""),q()},be=m=>{console.log("ðŸ” Pedido seleccionado:",m),console.log("ðŸ” DeliveryPerson en el pedido:",m.deliveryPerson),console.log("ðŸ” DeliveryPersonId en el pedido:",m.deliveryPersonId),p(m),v()},$e=async m=>{var ce;try{console.log("ðŸ” Descargando boleta para pedido:",m);const de=await fetch("/api/admin/generate-pdf",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({orderData:{id:m.id,customerName:m.clientName||m.customerName,customerPhone:m.clientPhone||m.customerPhone,customerEmail:m.customerEmail||((ce=m.client)==null?void 0:ce.email),deliveryAddress:m.clientAddress||m.deliveryAddress,deliveryDistrict:m.clientDistrict||m.deliveryDistrict,subtotal:m.subtotal||m.total||m.totalAmount,deliveryFee:m.deliveryFee||0,total:m.total||m.totalAmount,paymentMethod:m.paymentMethod,paymentType:m.paymentType,items:(m.products||m.orderDetails||[]).map(Re=>{var Ds;return{name:((Ds=Re.product)==null?void 0:Ds.name)||Re.name||"Producto",quantity:Re.quantity||1,price:Re.price||Re.unitPrice||0,subtotal:Re.subtotal||(Re.price||Re.unitPrice||0)*(Re.quantity||1)}}),products:(m.products||m.orderDetails||[]).map(Re=>{var Ds;return{name:((Ds=Re.product)==null?void 0:Ds.name)||Re.name||"Producto",quantity:Re.quantity||1,price:Re.price||Re.unitPrice||0,subtotal:Re.subtotal||(Re.price||Re.unitPrice||0)*(Re.quantity||1)}}),originalProducts:m.products,originalOrderDetails:m.orderDetails},documentType:"boleta"})});if(console.log("ðŸ” Respuesta del servidor:",de.status,de.statusText),!de.ok){const Re=await de.text();throw console.error("âŒ Error del servidor:",Re),new Error(`Error al generar la boleta: ${de.status} ${de.statusText}`)}const ds=await de.blob();console.log("âœ… Blob generado, tamaÃ±o:",ds.size);const Ts=window.URL.createObjectURL(ds),zs=document.createElement("a");zs.href=Ts,zs.download=`boleta_${m.orderNumber||m.id}.pdf`,document.body.appendChild(zs),zs.click(),window.URL.revokeObjectURL(Ts),document.body.removeChild(zs),oe({title:"Boleta descargada",description:"La boleta se ha descargado correctamente",status:"success",duration:3e3,isClosable:!0})}catch(de){console.error("Error al descargar boleta:",de),oe({title:"Error",description:"No se pudo descargar la boleta",status:"error",duration:3e3,isClosable:!0})}},Fe=m=>e.jsx(F,{variant:"outline",size:"sm",children:e.jsx(M,{children:e.jsxs(u,{spacing:3,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",fontSize:"sm",children:m.orderNumber}),e.jsx(n,{fontSize:"xs",color:"gray.500",children:m.type==="regular"?"Cliente Frecuente":"Cliente Visitante"}),e.jsx(n,{fontSize:"2xs",color:"gray.400",children:m.createdAt?new Date(m.createdAt).toLocaleString("es-PE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"Sin fecha"})]}),e.jsx(Ce,{colorScheme:Se(m.status),children:ie(m.status)})]}),e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{spacing:2,children:[e.jsx(Us,{size:12,color:"#718096"}),e.jsx(n,{fontSize:"sm",fontWeight:"medium",children:m.clientName||"Sin nombre"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(Hs,{size:12,color:"#718096"}),e.jsx(n,{fontSize:"sm",children:m.clientPhone||"Sin telÃ©fono"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(wt,{size:12,color:"#718096"}),e.jsxs(u,{align:"start",spacing:0,children:[e.jsx(n,{fontSize:"sm",noOfLines:2,children:m.clientAddress||m.deliveryAddress||"Sin direcciÃ³n"}),m.clientDistrict&&e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["ðŸ“ ",m.clientDistrict]}),m.deliveryReference&&e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["ðŸ”— ",m.deliveryReference]})]})]})]}),e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsx(n,{fontSize:"sm",fontWeight:"medium",color:"gray.700",children:"ðŸ›’ Productos:"}),Ie(m)]}),e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsxs(h,{spacing:2,children:[e.jsx(le,{as:ne(m.paymentType,m.paymentMethod),size:14}),e.jsx(n,{fontSize:"sm",children:m.paymentMethod==="vale"?"A CrÃ©dito (Vale)":m.paymentMethod==="suscripcion"?"SuscripciÃ³n":m.paymentMethod==="contraentrega"?m.paymentType==="plin"?"Contraentrega - PLIN":m.paymentType==="yape"?"Contraentrega - Yape":m.paymentType==="cash"?"Contraentrega - Efectivo":"Contraentrega":m.paymentType==="plin"?"PLIN":m.paymentType==="yape"?"Yape":(m.paymentType==="cash","Efectivo")})]}),e.jsxs(n,{fontWeight:"bold",fontSize:"sm",color:"green.600",children:["S/ ",parseFloat(m.total||m.totalAmount||0).toFixed(2)]})]}),m.paymentMethod==="suscripcion"&&m.subscriptionId&&e.jsx(h,{spacing:2,bg:"purple.50",p:2,borderRadius:"md",children:e.jsxs(n,{fontSize:"xs",color:"purple.600",fontWeight:"medium",children:["ðŸ“… SuscripciÃ³n ID: ",m.subscriptionId]})}),m.paymentMethod==="vale"&&e.jsx(h,{spacing:2,bg:"orange.50",p:2,borderRadius:"md",children:e.jsx(n,{fontSize:"xs",color:"orange.600",fontWeight:"medium",children:"ðŸŽ« Pago a crÃ©dito - Se cobrarÃ¡ al final del mes"})})]}),m.deliveryPersonId&&e.jsxs(h,{spacing:2,children:[e.jsx(Cs,{size:12,color:"#3182CE"}),e.jsx(n,{fontSize:"sm",children:(()=>{const ce=l.find(de=>de.id===m.deliveryPersonId);return console.log(`ðŸ” Buscando repartidor para pedido ${m.id}:`,{deliveryPersonId:m.deliveryPersonId,type:typeof m.deliveryPersonId,foundDeliveryPerson:ce,allDeliveryPersons:l.map(de=>({id:de.id,type:typeof de.id}))}),(ce==null?void 0:ce.name)||"Repartidor asignado"})()})]}),e.jsxs(h,{spacing:2,justify:"center",children:[e.jsx(Oe,{label:"Ver detalles",children:e.jsx(ke,{size:"sm",icon:e.jsx(Wr,{}),onClick:()=>be(m),"aria-label":"Ver detalles"})}),e.jsx(Oe,{label:"Descargar boleta",children:e.jsx(ke,{size:"sm",icon:e.jsx(Vr,{}),colorScheme:"green",onClick:()=>$e(m),"aria-label":"Descargar boleta"})}),(!m.deliveryPersonId||m.status==="pending")&&m.status!=="cancelled"&&e.jsx(Oe,{label:"Asignar repartidor",children:e.jsx(ke,{size:"sm",icon:e.jsx(Yt,{}),colorScheme:"blue",onClick:()=>I(m),"aria-label":"Asignar repartidor"})}),m.status==="confirmed"&&e.jsx(O,{size:"sm",colorScheme:"purple",onClick:()=>je(m,"preparing"),children:"Enviar"}),(m.status==="preparing"||m.status==="ready")&&e.jsx(O,{size:"sm",colorScheme:"green",onClick:()=>je(m,"delivered"),children:"Entregado"}),(m.status==="pending"||m.status==="confirmed"||m.status==="preparing"||m.status==="ready")&&e.jsx(O,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>D(m),children:"Anular"})]})]})})},`${m.type}-${m.id}`),te=()=>{var m;return e.jsxs(Ke,{isOpen:g,onClose:b,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Asignar Repartidor"}),e.jsx(es,{}),e.jsx(Qe,{children:e.jsxs(u,{spacing:4,children:[f&&e.jsxs(Te,{status:"info",children:[e.jsx(De,{}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(n,{fontWeight:"bold",children:["Pedido: ",f.orderNumber]}),e.jsxs(n,{fontSize:"sm",children:["Cliente: ",f.clientName||((m=f.client)==null?void 0:m.name)]}),e.jsxs(n,{fontSize:"sm",children:["Total: S/ ",parseFloat(f.total||f.totalAmount||0).toFixed(2)]})]})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Repartidor"}),e.jsx(rs,{value:T,onChange:ce=>k(ce.target.value),placeholder:"Selecciona un repartidor",children:l.map(ce=>e.jsxs("option",{value:ce.id,children:[ce.firstName," ",ce.lastName]},ce.id))})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas adicionales"}),e.jsx(Ns,{value:$,onChange:ce=>L(ce.target.value),placeholder:"Instrucciones especiales para el repartidor...",rows:3})]})]})}),e.jsxs(As,{children:[e.jsx(O,{variant:"outline",mr:3,onClick:b,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:fe,children:"Asignar Repartidor"})]})]})]})},C=()=>{var m,ce,de,ds;return e.jsxs(Ke,{isOpen:ae,onClose:Q,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Detalles del Pedido"}),e.jsx(es,{}),e.jsx(Qe,{children:f&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsx(F,{variant:"outline",children:e.jsx(M,{children:e.jsxs(u,{spacing:3,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Pedido:"}),e.jsx(n,{children:f.orderNumber})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado:"}),e.jsx(Ce,{colorScheme:Se(f.status),children:ie(f.status)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Tipo:"}),e.jsx(n,{children:f.type==="regular"?"Cliente Frecuente":"Cliente Visitante"})]})]})})}),e.jsxs(F,{variant:"outline",children:[e.jsx(Pe,{children:e.jsx(K,{size:"sm",children:"Cliente"})}),e.jsx(M,{children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Nombre:"}),e.jsx(n,{children:f.clientName||((m=f.client)==null?void 0:m.name)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"TelÃ©fono:"}),e.jsx(n,{children:f.clientPhone||((ce=f.client)==null?void 0:ce.phone)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"DirecciÃ³n:"}),e.jsx(n,{children:f.clientAddress||((de=f.client)==null?void 0:de.address)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Distrito:"}),e.jsx(n,{children:f.clientDistrict||((ds=f.client)==null?void 0:ds.district)})]})]})})]}),e.jsxs(F,{variant:"outline",children:[e.jsx(Pe,{children:e.jsx(K,{size:"sm",children:"Pago"})}),e.jsx(M,{children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"MÃ©todo:"}),e.jsxs(h,{children:[e.jsx(le,{as:ne(f.paymentType,f.paymentMethod),size:16}),e.jsx(n,{children:f.paymentMethod==="vale"?"A CrÃ©dito (Vale)":f.paymentMethod==="suscripcion"?"SuscripciÃ³n":f.paymentMethod==="contraentrega"?f.paymentType==="plin"?"Contraentrega - PLIN":f.paymentType==="yape"?"Contraentrega - Yape":f.paymentType==="cash"?"Contraentrega - Efectivo":"Contraentrega":f.paymentType==="plin"?"PLIN":f.paymentType==="yape"?"Yape":(f.paymentType==="cash","Efectivo")})]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(f.total||f.totalAmount||0).toFixed(2)]})]})]})})]}),e.jsxs(F,{variant:"outline",children:[e.jsx(Pe,{children:e.jsx(K,{size:"sm",children:"Repartidor"})}),e.jsx(M,{children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Nombre:"}),e.jsx(n,{children:f.deliveryPerson?f.deliveryPerson.username:"No asignado"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"TelÃ©fono:"}),e.jsx(n,{children:f.deliveryPerson?f.deliveryPerson.phone:"N/A"})]})]})})]}),f.notes&&e.jsxs(F,{variant:"outline",children:[e.jsx(Pe,{children:e.jsx(K,{size:"sm",children:"Notas"})}),e.jsx(M,{children:e.jsx(n,{children:f.notes})})]})]})}),e.jsx(As,{children:e.jsx(O,{onClick:Q,children:"Cerrar"})})]})]})},ee=()=>e.jsxs(Ke,{isOpen:W,onClose:ve,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Confirmar AnulaciÃ³n"}),e.jsx(es,{}),e.jsx(Qe,{children:f&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(Te,{status:"warning",borderRadius:"md",children:[e.jsx(De,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"Â¿EstÃ¡s seguro de que deseas anular este pedido?"}),e.jsx(n,{fontSize:"sm",children:"Esta acciÃ³n no se puede deshacer."})]})]}),e.jsx(F,{variant:"outline",p:3,children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Pedido:"}),e.jsxs(n,{children:["#",f.id]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Cliente:"}),e.jsx(n,{children:f.clientName||"Sin nombre"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado actual:"}),e.jsx(Ce,{colorScheme:Se(f.status),children:ie(f.status)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(f.total||f.totalAmount||0).toFixed(2)]})]})]})})]})}),e.jsxs(As,{children:[e.jsx(O,{variant:"outline",mr:3,onClick:ve,children:"Cancelar"}),e.jsx(O,{colorScheme:"red",onClick:B,children:"SÃ­, Anular Pedido"})]})]})]});return t?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsxs(_,{p:6,children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(ys,{justify:"space-between",align:"center",children:[e.jsxs(_,{children:[e.jsx(K,{size:"lg",mb:2,children:"GestiÃ³n de Pedidos"}),e.jsx(n,{color:"gray.600",children:"Administra y asigna repartidores a los pedidos"}),e.jsxs(h,{spacing:2,children:[e.jsxs(n,{color:"gray.400",fontSize:"xs",children:["Ãšltima actualizaciÃ³n: ",y.toLocaleTimeString()]}),E&&e.jsx(_,{w:"8px",h:"8px",bg:"blue.400",borderRadius:"full",animation:"pulse 1s infinite"})]})]}),e.jsx(O,{size:"sm",colorScheme:"blue",variant:"outline",onClick:async()=>{N(!0),await a(),w(new Date),N(!1)},isLoading:E,children:"Actualizar"})]}),e.jsx(F,{children:e.jsx(M,{children:e.jsxs(as,{columns:{base:1,md:4},spacing:4,children:[e.jsxs(U,{children:[e.jsx(G,{children:"Buscar"}),e.jsxs(Pt,{children:[e.jsx(Fr,{children:e.jsx(Ka,{})}),e.jsx(re,{placeholder:"Buscar por pedido o cliente...",value:c,onChange:m=>d(m.target.value)})]})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Estado"}),e.jsxs(rs,{value:x,onChange:m=>P(m.target.value),children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"pending",children:"Pendiente"}),e.jsx("option",{value:"confirmed",children:"Asignado"}),e.jsx("option",{value:"preparing",children:"Preparando"}),e.jsx("option",{value:"ready",children:"Listo"}),e.jsx("option",{value:"delivered",children:"Entregado"}),e.jsx("option",{value:"cancelled",children:"Cancelado"})]})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Pago"}),e.jsxs(rs,{value:A,onChange:m=>R(m.target.value),children:[e.jsx("option",{value:"all",children:"Todos los pagos"}),e.jsx("option",{value:"contraentrega",children:"Contraentrega"}),e.jsx("option",{value:"vale",children:"A CrÃ©dito (Vale)"}),e.jsx("option",{value:"suscripcion",children:"SuscripciÃ³n"}),e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"plin",children:"PLIN"})]})]}),e.jsxs(U,{children:[e.jsx(G,{children:"EstadÃ­sticas"}),e.jsxs(u,{spacing:1,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Total:"}),e.jsx(Ce,{colorScheme:"blue",children:z.length})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Pendientes:"}),e.jsx(Ce,{colorScheme:"orange",children:X.pending.length})]})]})]})]})})}),e.jsx(as,{columns:{base:1,md:2,lg:3},spacing:4,children:z.map(Fe)}),z.length===0&&e.jsx(ls,{h:"200px",children:e.jsxs(u,{spacing:4,children:[e.jsx(n,{color:"gray.500",fontSize:"lg",children:"No hay pedidos que coincidan con los filtros"}),e.jsx(O,{variant:"outline",onClick:()=>{d(""),P("all"),R("all")},children:"Limpiar filtros"})]})})]}),te(),C(),ee()]})},Ll=({isOpen:s,onClose:t,onAccept:r,onReject:a,title:i="TÃ©rminos y Condiciones",showAcceptance:l=!0})=>{const[o,c]=S.useState(null),[d,x]=S.useState(!1),[P,A]=S.useState(!1),[R,f]=S.useState(!1),[p,T]=S.useState(null),k=Me("white","gray.800"),y=Me("gray.700","gray.200"),w=Me("gray.50","gray.700"),E=Me("gray.200","gray.600"),N=async()=>{var q,b,ae;try{x(!0),T(null),console.log("ðŸ”„ Cargando tÃ©rminos y condiciones activos...");const v=await os.get("/api/terms-and-conditions/active");console.log("ðŸ“¦ Respuesta tÃ©rminos activos:",v.data),c(v.data.data),console.log("âœ… TÃ©rminos cargados:",v.data.data?"SÃ­":"No")}catch(v){console.error("âŒ Error fetching terms:",v),console.error("âŒ Status:",(q=v.response)==null?void 0:q.status),console.error("âŒ Message:",(ae=(b=v.response)==null?void 0:b.data)==null?void 0:ae.message),T("No se pudieron cargar los tÃ©rminos y condiciones")}finally{x(!1)}};S.useEffect(()=>{s&&(console.log("ðŸ” Modal abierto, reseteando estado"),A(!1),f(!1),N())},[s]);const $=()=>{if(console.log("ðŸ” handleAccept llamado, accepted:",P,"onAccept:",!!r,"isProcessing:",R),R){console.log("âŒ Ya se estÃ¡ procesando, ignorando clic");return}P&&r?(console.log("âœ… Ejecutando onAccept"),f(!0),r(o)):console.log("âŒ No se puede aceptar - accepted:",P,"onAccept:",!!r)},L=()=>{a?a():t()},g=q=>new Date(q).toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric"});return e.jsxs(Ke,{isOpen:s,onClose:t,size:"xl",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{maxW:"800px",maxH:"90vh",bg:k,children:[e.jsx(Xe,{children:e.jsxs(u,{align:"stretch",spacing:2,children:[e.jsx(n,{fontSize:"xl",fontWeight:"bold",color:"blue.600",children:i}),o&&e.jsxs(h,{justify:"space-between",children:[e.jsxs(Ce,{colorScheme:"blue",variant:"subtle",children:["VersiÃ³n ",o.version]}),e.jsxs(n,{fontSize:"sm",color:"gray.500",children:["Vigente desde: ",g(o.effectiveDate)]})]})]})}),e.jsxs(Qe,{overflowY:"auto",pb:4,children:[d&&e.jsx(ls,{py:8,children:e.jsx(vs,{size:"xl"})}),p&&e.jsxs(Te,{status:"error",borderRadius:"md",children:[e.jsx(De,{}),e.jsx(n,{children:p})]}),o&&!d&&e.jsxs(_,{children:[e.jsx(n,{fontSize:"lg",fontWeight:"semibold",mb:4,color:y,children:o.title}),e.jsx(hs,{mb:4}),e.jsx(_,{whiteSpace:"pre-wrap",fontSize:"sm",lineHeight:"1.6",color:y,maxH:"400px",overflowY:"auto",p:4,bg:w,borderRadius:"md",border:"1px solid",borderColor:E,children:o.content})]})]}),l&&o&&!d&&e.jsx(As,{children:e.jsxs(u,{w:"full",spacing:4,children:[e.jsx(Fn,{isChecked:P,onChange:q=>{console.log("ðŸ” Checkbox cambiado a:",q.target.checked),A(q.target.checked)},colorScheme:"blue",size:"lg",children:e.jsx(n,{fontSize:"sm",children:"He leÃ­do y acepto los tÃ©rminos y condiciones"})}),e.jsxs(h,{w:"full",justify:"space-between",children:[e.jsx(O,{variant:"outline",onClick:L,colorScheme:"red",children:"Rechazar"}),e.jsx(O,{colorScheme:"blue",onClick:$,isDisabled:!P||R,isLoading:R,loadingText:"Procesando...",children:"Aceptar"})]})]})}),!l&&e.jsx(As,{children:e.jsx(O,{onClick:t,colorScheme:"blue",children:"Cerrar"})})]})]})},Zr=ft((s,t)=>({districts:[],loading:!1,error:null,fetchDistricts:async()=>{var r,a,i,l;s({loading:!0,error:null});try{const o=await Y.get("/api/districts"),c=o.data.success?o.data.data:o.data;return s({districts:c,loading:!1}),{success:!0,data:c}}catch(o){return console.error("Error al cargar distritos:",o),s({error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Error al cargar distritos",loading:!1}),{success:!1,error:((l=(i=o.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al cargar distritos"}}},getDistrictById:r=>{const{districts:a}=t();return Array.isArray(a)?a.find(i=>i.id===r):null},getDistrictsByFee:r=>{const{districts:a}=t();return Array.isArray(a)?a.filter(i=>i.deliveryFee<=r):[]},updateDistrict:async(r,a)=>{var i,l,o,c;try{const d=await Y.put(`/api/districts/${r}`,a),x=d.data.data||d.data;return s(P=>({districts:Array.isArray(P.districts)?P.districts.map(A=>A.id===r?x:A):[]})),{success:!0,data:x}}catch(d){return console.error("Error al actualizar distrito:",d),s({error:((l=(i=d.response)==null?void 0:i.data)==null?void 0:l.message)||"Error al actualizar distrito"}),{success:!1,error:((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Error al actualizar distrito"}}},createDistrict:async r=>{var a,i,l,o;try{console.log("ðŸ”„ Creando distrito con datos:",r);const c=await Y.post("/api/districts",r);console.log("ðŸ“¦ Respuesta del backend:",c.data);const d=c.data.data||c.data;return console.log("ðŸ“¦ Distrito procesado:",d),s(x=>{const P=[...Array.isArray(x.districts)?x.districts:[],d];return console.log("ðŸ“¦ Distritos actualizados en store:",P),{districts:P}}),{success:!0,data:d}}catch(c){return console.error("âŒ Error al crear distrito:",c),s({error:((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Error al crear distrito"}),{success:!1,error:((o=(l=c.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al crear distrito"}}},clearError:()=>s({error:null})})),Nn="/assets/img_buyon-CC-6ZbJa.jpeg",Fl="/assets/img_paquete_botellas-nUXaTVFq.jpeg",Wl="/assets/plin_qr-Mn7UEP9b.jpeg",Ml=()=>{const s=Ys(),t=xs();Gs({base:!0,md:!1});const{isOpen:r,onOpen:a,onClose:i}=Ge(),l=()=>{i(),Ee(!1),gs(!1)},{products:o,fetchProducts:c,calculatePrice:d}=Da(),{deliveryFees:x,fetchDeliveryFees:P}=ar(),{districts:A,fetchDistricts:R}=Zr(),[f,p]=S.useState(1),[T,k]=S.useState(!1),[y,w]=S.useState(!1),[E,N]=S.useState([]),[$,L]=S.useState(!1),[g,q]=S.useState(null),[b,ae]=S.useState(null),[v,Q]=S.useState(!1),[W,Z]=S.useState(!1),[ve,oe]=S.useState(!1),[pe,Le]=S.useState([]),[z,X]=S.useState(!1),[Se,ie]=S.useState(null),[ne,Ie]=S.useState(""),[fe,D]=S.useState(null),[B,je]=S.useState({name:"",phone:"",email:"",address:"",district:"",reference:"",notes:""}),[I,be]=S.useState([]),[$e,Fe]=S.useState(new Set),[te,C]=S.useState("contraentrega"),[ee,V]=S.useState("efectivo"),[Ae,Ee]=S.useState(!1),[Je,gs]=S.useState(!1),[Xs,at]=S.useState(!1),[m,ce]=S.useState(!1),de=j=>{const H=j.toLowerCase();return H.includes("bidÃ³n")||H.includes("bidon")||H.includes("garrafa")?Nn:H.includes("paquete")||H.includes("pack")||H.includes("botellas")?Fl:Nn};S.useEffect(()=>{c(),P(),R(),ds()},[c,P,R]);const ds=async()=>{try{X(!0),console.log("ðŸ”„ Cargando planes de suscripciÃ³n...");const j=await Y.get("/api/subscription-plans");if(console.log("ðŸ“¦ Respuesta planes:",j.data),j.data.success){const H=j.data.data.map(J=>({id:J.id,name:J.name,bottles:J.totalBottles,price:parseFloat(J.monthlyPrice),bonus:J.bonusBottles,description:J.description,color:["blue","green","purple","orange","pink","teal","red"][J.sortOrder%7],popular:J.sortOrder===2,pricePerBottle:parseFloat(J.pricePerBottle),maxDailyDelivery:J.maxDailyDelivery}));console.log("âœ… Planes transformados:",H),Le(H)}}catch(j){console.error("âŒ Error al cargar planes de suscripciÃ³n:",j),t({title:"Error",description:"No se pudieron cargar los planes de suscripciÃ³n",status:"error",duration:3e3,isClosable:!0})}finally{X(!1)}};S.useEffect(()=>{if(Se&&pe.length>0){const j=pe.find(H=>H.id===Se);j&&(ae(j),L(!0),C("suscripcion"),ie(null))}},[Se,pe]);const Ts=async j=>{try{console.log("ðŸ”„ Buscando suscripciones para DNI:",j);const H=await Y.get(`/api/subscriptions/client/${j}`);return console.log("ðŸ“¦ Respuesta suscripciones:",H.data),H.data.success?(N(H.data.data),H.data.data):[]}catch(H){return console.error("âŒ Error al buscar suscripciones:",H),[]}},zs=async j=>{var H;w(!0);try{const J=await Y.get(`/api/clients/document/${j}`);if(J.data.success){const se=J.data.data;D(se.id),je({...B,name:se.name,phone:se.phone,email:se.email||"",address:se.address,district:se.district,reference:"",notes:""});const ss=(await Ts(j)).filter(ye=>ye.status==="active"&&ye.remainingBottles>0);if(ss.length>0)C("suscripcion"),L(!0),q(ss[0]),at(!0),ce(!1),t({title:"SuscripciÃ³n activa encontrada",description:`Tienes ${ss[0].remainingBottles} bidones disponibles de tu suscripciÃ³n`,status:"success",duration:5e3,isClosable:!0});else try{const ye=await Y.get(`/api/client-preferences/dni/${j}`);if(ye.data.success&&ye.data.data){const Be=ye.data.data;C(Be.preferredPaymentMethod),at(!0);const us=new Date,ts=new Date(Be.validUntil);if(ts>us)if(ce(!1),Be.preferredPaymentMethod==="suscripcion"){if(Be.subscriptionPlanId){const Ws=pe.find(yt=>yt.id===Be.subscriptionPlanId);Ws?(ae(Ws),L(!0)):ie(Be.subscriptionPlanId)}t({title:"Preferencia de suscripciÃ³n activa",description:"Puedes comprar una nueva suscripciÃ³n",status:"info",duration:5e3,isClosable:!0})}else t({title:"Modalidad activa encontrada",description:`Tu modalidad de ${Be.preferredPaymentMethod==="vale"?"vale":"suscripciÃ³n"} estÃ¡ activa hasta ${ts.toLocaleDateString()}`,status:"info",duration:5e3,isClosable:!0});else at(!1),ce(!1),t({title:"Modalidad expirada",description:"Tu modalidad anterior expirÃ³. Elige una nueva modalidad de pago.",status:"warning",duration:5e3,isClosable:!0})}}catch{console.log("No se encontraron preferencias para este cliente")}t({title:"Cliente encontrado",description:`Datos de ${se.name} cargados automÃ¡ticamente`,status:"success",duration:3e3,isClosable:!0}),p(3)}else t({title:"Cliente no encontrado",description:"Completa tus datos para registrarte automÃ¡ticamente",status:"info",duration:5e3,isClosable:!0}),p(2)}catch(J){console.error("Error al buscar cliente:",J),((H=J.response)==null?void 0:H.status)===404?(t({title:"Cliente no encontrado",description:"Completa tus datos para registrarte automÃ¡ticamente",status:"info",duration:5e3,isClosable:!0}),p(2)):(t({title:"Error al buscar cliente",description:"Intenta nuevamente o regÃ­strate como nuevo cliente",status:"error",duration:5e3,isClosable:!0}),p(2))}finally{w(!1)}},Re=j=>{j.preventDefault(),ne.length===8||ne.length===11?zs(ne):t({title:"Documento invÃ¡lido",description:"El DNI debe tener 8 dÃ­gitos o el RUC debe tener 11 dÃ­gitos",status:"warning",duration:3e3,isClosable:!0})},Ds=async()=>{var j,H;try{if(k(!0),!ne||ne.trim()===""){t({title:"DNI requerido",description:"Debes ingresar tu DNI para registrarte",status:"warning",duration:3e3,isClosable:!0});return}const J={name:B.name,document:ne,phone:B.phone,email:B.email||"",address:B.address,district:B.district,reference:B.reference||"",notes:B.notes||"",status:"active"},se=await Y.post("/api/clients",J);if(se.data.success){const we=se.data.data.id;D(we),console.log("Cliente registrado con ID:",we),t({title:"Â¡Registro exitoso!",description:"Te has registrado automÃ¡ticamente. Ahora puedes elegir productos y modalidades de pago",status:"success",duration:5e3,isClosable:!0}),p(3),setTimeout(()=>{console.log("ClientId despuÃ©s del registro:",we),console.log("ClientId en estado:",fe)},100)}else throw new Error(se.data.message||"Error al registrar")}catch(J){console.error("Error al registrar:",J),t({title:"Error al registrar",description:((H=(j=J.response)==null?void 0:j.data)==null?void 0:H.message)||"No se pudo completar el registro",status:"error",duration:5e3,isClosable:!0})}finally{k(!1)}},Ia=async j=>{if(!$e.has(j.id)){if($&&j.type!=="bidon"){t({title:"Solo bidones en suscripciÃ³n",description:"Con tu suscripciÃ³n solo puedes pedir bidones de agua",status:"warning",duration:3e3,isClosable:!0});return}Fe(H=>new Set(H).add(j.id));try{let H;if($&&g){const se=pe.find(ss=>ss.name===g.subscriptionType),we=se?parseFloat(se.pricePerBottle):5;H={unitPrice:we,totalPrice:we,originalPrice:we,discountApplied:0,priceLevel:"subscription"}}else{const se=await d(j.id,1);if(se.success)H=se.data;else throw new Error("Error al calcular precio")}const J=I.findIndex(se=>se.productId===j.id);if(J!==-1){const se=[...I],we=se[J].quantity+1;if($&&g){const ss=pe.find(Be=>Be.name===g.subscriptionType),ye=ss?parseFloat(ss.pricePerBottle):5;se[J].quantity=we,se[J].unitPrice=ye,se[J].subtotal=ye*we,se[J].pricing={unitPrice:ye,totalPrice:ye*we,originalPrice:ye,discountApplied:0,priceLevel:"subscription"},be(se)}else{const ss=await d(j.id,we);if(ss.success){const ye=ss.data;se[J].quantity=we,se[J].unitPrice=parseFloat(ye.unitPrice),se[J].subtotal=parseFloat(ye.unitPrice)*we,se[J].pricing=ye,be(se)}}}else{const se={id:`${j.id}-${Date.now()}`,productId:j.id,name:j.name,type:j.type,unitPrice:parseFloat(H.unitPrice),quantity:1,subtotal:parseFloat(H.unitPrice),pricing:H};be([...I,se])}t({title:"Producto agregado",description:`${j.name} agregado al carrito`,status:"success",duration:2e3,isClosable:!0})}catch(H){console.error("Error al calcular precio:",H)}finally{Fe(H=>{const J=new Set(H);return J.delete(j.id),J})}}},Dt=async(j,H)=>{if(H<=0){be(I.filter(J=>J.id!==j));return}try{const J=I.find(we=>we.id===j);if(!J)return;let se;if($&&g){const we=pe.find(ye=>ye.name===g.subscriptionType),ss=we?parseFloat(we.pricePerBottle):5;se={unitPrice:ss,totalPrice:ss*H,originalPrice:ss,discountApplied:0,priceLevel:"subscription"}}else{const we=await d(J.productId,H);if(we.success)se=we.data;else throw new Error("Error al calcular precio")}be(I.map(we=>we.id===j?{...we,quantity:H,unitPrice:parseFloat(se.unitPrice),subtotal:parseFloat(se.unitPrice)*H,pricing:se}:we))}catch(J){console.error("Error al actualizar cantidad:",J)}},_a=(j,H)=>{const J=parseInt(H)||0;J>0?Dt(j,J):(H===""||H==="0")&&be(I.map(se=>se.id===j?{...se,quantity:0}:se))},ka=(j,H)=>{const J=parseInt(H)||0;J<=0?be(I.filter(se=>se.id!==j)):Dt(j,J)},bt=()=>{if(!B.district)return 0;const j=A.find(H=>H.name===B.district);return j?parseFloat(j.deliveryFee):0},It=()=>I.reduce((j,H)=>j+H.subtotal,0),Fs=()=>It()+bt(),ir=async()=>{if(console.log("Estado antes de crear pedido:",{clientId:fe,dni:ne,paymentMethod:te,selectedSubscriptionPlan:b,cart:I}),!fe){t({title:"Cliente no registrado",description:"Debes registrarte como cliente para continuar",status:"error",duration:5e3,isClosable:!0}),p(2);return}if(te!=="suscripcion"&&I.length===0){t({title:"Carrito vacÃ­o",description:"Agrega al menos un producto al carrito",status:"warning",duration:3e3,isClosable:!0});return}if(te==="suscripcion"&&!b){t({title:"Plan no seleccionado",description:"Selecciona un plan de suscripciÃ³n",status:"warning",duration:3e3,isClosable:!0});return}if(!B.name||!B.phone||!B.address||!B.district){t({title:"Datos incompletos",description:"Completa todos los campos obligatorios",status:"warning",duration:3e3,isClosable:!0});return}await or()},Na=async j=>{try{console.log("ðŸ” handleTermsAccept iniciado"),Z(!0),oe(!1),cr&&await cr(),t({title:"TÃ©rminos aceptados",description:"Has aceptado los tÃ©rminos y condiciones",status:"success",duration:2e3,isClosable:!0}),console.log("âœ… handleTermsAccept completado")}catch(H){console.error("âŒ Error al crear pedido despuÃ©s de aceptar tÃ©rminos:",H),t({title:"Error",description:"Hubo un problema al crear el pedido",status:"error",duration:5e3,isClosable:!0})}},Ra=()=>{Z(!1),oe(!1),t({title:"TÃ©rminos rechazados",description:"Debes aceptar los tÃ©rminos y condiciones para continuar",status:"error",duration:3e3,isClosable:!0})},or=async()=>{var j,H,J,se,we,ss;if(!W&&te!=="suscripcion"){t({title:"TÃ©rminos y Condiciones",description:"Debes aceptar los tÃ©rminos y condiciones para continuar",status:"warning",duration:3e3,isClosable:!0}),oe(!0);return}k(!0);try{if($&&g){const ye=I.reduce((ts,ps)=>{const Ws=o.find(yt=>yt.id===ps.productId);return Ws&&Ws.type==="bidon"?ts+ps.quantity:ts},0);if(g.remainingBottles<ye){t({title:"Bidones insuficientes",description:`Solo tienes ${g.remainingBottles} bidones disponibles. Necesitas ${ye} bidones.`,status:"error",duration:5e3,isClosable:!0});return}const Be={customerName:B.name,customerPhone:B.phone,customerEmail:B.email||"",deliveryAddress:B.address,deliveryDistrict:B.district,deliveryReference:B.reference||"",deliveryNotes:B.notes||"",products:I.map(ts=>({productId:ts.productId,quantity:ts.quantity,price:ts.unitPrice})),subtotal:It(),deliveryFee:bt(),totalAmount:Fs(),paymentMethod:"suscripcion",paymentType:"cash",clientId:fe,subscriptionId:g.id};console.log("Enviando pedido con suscripciÃ³n:",Be);const us=await Y.post("/api/guest-orders",Be);if(us.data.success){console.log("Datos para use-bottles:",{subscriptionId:g.id,bottlesToUse:ye,selectedSubscription:g}),console.log("ðŸ” Respuesta completa del pedido:",us.data);const ts=((j=us.data.data)==null?void 0:j.id)||us.data.id||"Sin ID";t({title:"Â¡Pedido creado exitosamente!",description:`Pedido #${ts} registrado. Se usaron ${ye} bidones de tu suscripciÃ³n.`,status:"success",duration:5e3,isClosable:!0});const ps=((H=us.data.data)==null?void 0:H.accessToken)||us.data.accessToken;ps?s(`/receipt/${ps}`):console.error("âŒ No se encontrÃ³ accessToken en la respuesta")}else throw new Error(us.data.message||"Error al crear el pedido")}else if(te==="suscripcion"&&b)try{if(console.log("Datos para crear suscripciÃ³n:",{clientId:fe,dni:ne,selectedSubscriptionPlan:b}),!fe)throw new Error("ClientId es requerido para crear suscripciÃ³n");const ye={clientId:fe,clientDni:ne,subscriptionType:b.id,totalBottles:b.bottles+b.bonus,totalAmount:b.price,paidAmount:b.price,expiryDate:null,notes:`SuscripciÃ³n ${b.name} comprada`},Be=await Y.post("/api/subscriptions",ye);if(console.log("SuscripciÃ³n creada:",Be.data),Be.data.success){const us=Be.data.data;try{const ts=new Date;ts.setMonth(ts.getMonth()+1);const ps={dni:ne,clientId:fe,preferredPaymentMethod:"suscripcion",subscriptionPlanId:b.id,subscriptionAmount:b.price,subscriptionQuantity:b.bottles+b.bonus,validUntil:ts.toISOString()};await Y.post("/api/client-preferences",ps),console.log("Preferencias de suscripciÃ³n guardadas:",ps),t({title:"Modalidad guardada",description:`Tu modalidad de suscripciÃ³n estarÃ¡ activa hasta ${ts.toLocaleDateString()}`,status:"success",duration:4e3,isClosable:!0})}catch(ts){console.log("Error al guardar preferencias de suscripciÃ³n:",ts)}t({title:"ðŸŽ‰ Â¡SuscripciÃ³n activada!",description:`Tu suscripciÃ³n ${b.name} estÃ¡ lista. Ahora puedes hacer pedidos usando tus ${b.bottles+b.bonus} bidones disponibles (sin costo adicional).`,status:"success",duration:8e3,isClosable:!0}),L(!0),q({id:us.id,subscriptionType:b.name,totalBottles:b.bottles+b.bonus,remainingBottles:b.bottles+b.bonus,totalAmount:b.price,status:"active"}),ee==="plin"?(p(5),Ee(!0),gs(!1),a()):(be([]),p(3),t({title:"Â¡Ahora puedes hacer pedidos!",description:`Tienes ${b.bottles+b.bonus} bidones disponibles. Agrega productos al carrito.`,status:"info",duration:6e3,isClosable:!0}))}}catch(ye){throw console.log("Error al crear suscripciÃ³n:",ye),ye}else{const ye={customerName:B.name,customerPhone:B.phone,customerEmail:B.email||"",deliveryAddress:B.address,deliveryDistrict:B.district,deliveryReference:B.reference||"",deliveryNotes:B.notes||"",products:I.map(us=>({productId:us.productId,quantity:us.quantity,price:us.unitPrice})),subtotal:It(),deliveryFee:bt(),totalAmount:Fs(),paymentMethod:te,paymentType:ee==="efectivo"?"cash":ee,clientId:fe};console.log("Enviando pedido:",ye),console.log("ClientId actual:",fe);const Be=await Y.post("/api/guest-orders",ye);if(Be.data.success){if(te==="vale"||te==="suscripcion")try{if(fe){const ps=new Date;ps.setMonth(ps.getMonth()+1);const Ws={dni:ne,clientId:fe,preferredPaymentMethod:te,subscriptionPlanId:te==="suscripcion"?b==null?void 0:b.id:null,subscriptionAmount:te==="suscripcion"?Fs():null,subscriptionQuantity:te==="suscripcion"?I.reduce((yt,qa)=>yt+qa.quantity,0):null,validUntil:ps.toISOString()};await Y.post("/api/client-preferences",Ws),console.log("Preferencias guardadas:",Ws),t({title:"Modalidad guardada",description:`Tu modalidad de ${te==="vale"?"vale":"suscripciÃ³n"} estarÃ¡ activa hasta ${ps.toLocaleDateString()}`,status:"success",duration:4e3,isClosable:!0})}}catch(ps){console.log("Error al guardar preferencias:",ps)}console.log("ðŸ” Respuesta completa del pedido normal:",Be.data);const us=((J=Be.data.data)==null?void 0:J.id)||Be.data.id||"Sin ID";t({title:"Â¡Pedido creado exitosamente!",description:`Pedido #${us} registrado correctamente`,status:"success",duration:5e3,isClosable:!0});const ts=((se=Be.data.data)==null?void 0:se.accessToken)||Be.data.accessToken;ts?s(`/receipt/${ts}`):console.error("âŒ No se encontrÃ³ accessToken en la respuesta")}else throw new Error(Be.data.message||"Error al crear el pedido")}}catch(ye){console.error("Error al crear pedido:",ye),t({title:"Error al crear pedido",description:((ss=(we=ye.response)==null?void 0:we.data)==null?void 0:ss.message)||"Error interno del servidor",status:"error",duration:5e3,isClosable:!0})}finally{k(!1)}},en=()=>{Ee(!0),gs(!1),a()},lr=async j=>{var H,J;try{if(!b||!fe||!ne)throw new Error("Plan de suscripciÃ³n, cliente o DNI no seleccionado");console.log("ðŸ”„ Creando suscripciÃ³n con datos:",{clientDni:ne,subscriptionType:b.name,totalBottles:b.bottles+b.bonus,totalAmount:b.price});const se={clientDni:ne,subscriptionType:b.name,totalBottles:b.bottles+b.bonus,totalAmount:b.price,paidAmount:b.price,notes:`Plan ${b.name} - ${b.bottles+b.bonus} bidones`},we=await Y.post("/api/subscriptions",se);if(we.data.success){const ss=we.data.data;console.log("âœ… SuscripciÃ³n creada:",ss),q({id:ss.id,subscriptionType:b.name,totalBottles:b.bottles+b.bonus,remainingBottles:b.bottles+b.bonus,totalAmount:b.price,status:"active"}),L(!0),C("suscripcion"),Z(!1),be([]),p(3),i(),Ee(!1),gs(!1),t({title:"Â¡SuscripciÃ³n creada exitosamente!",description:`Tienes ${b.bottles+b.bonus} bidones disponibles. Agrega productos al carrito.`,status:"success",duration:6e3,isClosable:!0})}}catch(se){throw console.error("âŒ Error al crear suscripciÃ³n:",se),t({title:"Error al crear suscripciÃ³n",description:((J=(H=se.response)==null?void 0:H.data)==null?void 0:J.message)||"No se pudo crear la suscripciÃ³n. IntÃ©ntalo de nuevo.",status:"error",duration:5e3,isClosable:!0}),se}},cr=async()=>{try{te==="suscripcion"&&b?(be([]),p(3),i(),Ee(!1),gs(!1),t({title:"Â¡Pago confirmado!",description:`Tu suscripciÃ³n ${b.name} estÃ¡ activa. Ahora puedes hacer pedidos usando tus ${b.bottles+b.bonus} bidones disponibles.`,status:"success",duration:8e3,isClosable:!0})):(await or(),i(),Ee(!1),gs(!1))}catch(j){console.error("Error al confirmar pago PLIN:",j),t({title:"Error",description:"Hubo un problema al confirmar el pago",status:"error",duration:5e3,isClosable:!0})}},Oa=()=>{let j=`ðŸ§¾ *COMPROBANTE DE PAGO PLIN*
    
ðŸ‘¤ Cliente: ${B.name}
ðŸ“± TelÃ©fono: ${B.phone}
ðŸ  DirecciÃ³n: ${B.address}
ðŸ“ Distrito: ${B.district}

`;te==="suscripcion"&&b?j+=`ðŸŽ¯ *SUSCRIPCIÃ“N:*
ðŸ“¦ Plan: ${b.name}
ðŸ’° Precio: S/ ${b.price}
ðŸ”¢ Bidones: ${b.bottles} + ${b.bonus} extra
ðŸ“Š Total bidones: ${b.bottles+b.bonus}

âœ… *PAGO REALIZADO VÃA PLIN*`:j+=`ðŸ›’ *PEDIDO:*
${I.map(J=>`â€¢ ${J.name} x${J.quantity} = S/ ${J.subtotal.toFixed(2)}`).join(`
`)}

ðŸ’° *TOTAL: S/ ${Fs().toFixed(2)}*
ðŸ“¦ Flete: S/ ${bt().toFixed(2)}

âœ… *PAGO REALIZADO VÃA PLIN*`;const H=`https://wa.me/51961606183?text=${encodeURIComponent(j)}`;window.open(H,"_blank"),gs(!0),t({title:"WhatsApp abierto",description:"EnvÃ­a el comprobante y luego confirma el pago",status:"info",duration:3e3,isClosable:!0})},sn=j=>{switch(j){case"bidon":return"blue";case"botella":return"green";default:return"gray"}},tn=j=>{switch(j){case"bidon":return"BidÃ³n";case"botella":return"Botella";default:return j}},La=()=>e.jsxs(F,{maxW:{base:"100%",sm:"md"},mx:"auto",w:"100%",children:[e.jsx(Pe,{textAlign:"center",p:{base:4,md:6},children:e.jsxs(u,{spacing:{base:3,md:4},children:[e.jsx(le,{as:ta,boxSize:{base:8,md:12},color:"blue.500"}),e.jsx(K,{size:{base:"md",md:"lg"},children:"Ingresa tu DNI"}),e.jsx(n,{color:"gray.600",fontSize:{base:"sm",md:"md"},textAlign:"center",children:"Buscaremos tus datos automÃ¡ticamente para agilizar tu pedido"})]})}),e.jsx(M,{p:{base:4,md:6},children:e.jsx("form",{onSubmit:Re,children:e.jsxs(u,{spacing:{base:3,md:4},children:[e.jsxs(U,{children:[e.jsx(G,{fontSize:{base:"sm",md:"md"},children:"NÃºmero de Documento (DNI o RUC)"}),e.jsx(re,{value:ne,onChange:j=>Ie(j.target.value),placeholder:"12345678 (DNI) o 12345678901 (RUC)",size:{base:"md",md:"lg"},textAlign:"center",fontSize:{base:"md",md:"xl"},fontWeight:"bold",maxLength:11})]}),e.jsx(O,{type:"submit",colorScheme:"blue",size:{base:"md",md:"lg"},w:"full",isLoading:y,loadingText:"Buscando...",leftIcon:e.jsx(Us,{}),children:"Buscar Cliente"}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>p(2),children:"Completar datos manualmente"})]})})})]}),Fa=()=>e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{children:e.jsxs(K,{size:"md",children:[e.jsx(Us,{style:{display:"inline",marginRight:"8px"}}),"Datos del Cliente"]})}),e.jsx(M,{children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Documento"}),e.jsx(re,{value:ne,isDisabled:!0,placeholder:"Tu documento",bg:"gray.100"}),e.jsx(Za,{children:"Documento ingresado en el paso anterior"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Nombre Completo"}),e.jsx(re,{value:B.name,onChange:j=>je({...B,name:j.target.value}),placeholder:"Tu nombre completo"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"TelÃ©fono"}),e.jsx(re,{value:B.phone,onChange:j=>je({...B,phone:j.target.value}),placeholder:"Tu nÃºmero de telÃ©fono"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Email (opcional)"}),e.jsx(re,{type:"email",value:B.email,onChange:j=>je({...B,email:j.target.value}),placeholder:"Tu correo electrÃ³nico"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"DirecciÃ³n"}),e.jsx(Ns,{value:B.address,onChange:j=>je({...B,address:j.target.value}),placeholder:"DirecciÃ³n completa de entrega",rows:3})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Distrito"}),e.jsx(rs,{value:B.district,onChange:j=>je({...B,district:j.target.value}),placeholder:"Selecciona tu distrito",children:Array.isArray(A)?A.map(j=>e.jsxs("option",{value:j.name,children:[j.name," - S/ ",parseFloat(j.deliveryFee).toFixed(2)]},j.id)):null})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Referencia"}),e.jsx(re,{value:B.reference,onChange:j=>je({...B,reference:j.target.value}),placeholder:"Referencia del lugar (opcional)"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas Adicionales"}),e.jsx(Ns,{value:B.notes,onChange:j=>je({...B,notes:j.target.value}),placeholder:"InformaciÃ³n adicional, preferencias especiales, etc. (opcional)",rows:3})]}),e.jsxs(u,{spacing:3,w:"full",children:[e.jsx(O,{colorScheme:"blue",size:"lg",w:"full",onClick:Ds,isDisabled:!B.name||!B.phone||!B.address||!B.district,children:"Registrarme y Continuar"}),e.jsxs(Te,{status:"info",borderRadius:"md",children:[e.jsx(De,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontSize:"sm",fontWeight:"bold",children:"Registro AutomÃ¡tico"}),e.jsx(n,{fontSize:"xs",children:"Al continuar, te registrarÃ¡s automÃ¡ticamente como cliente para acceder a beneficios especiales como vales y suscripciones."})]})]})]})]})})]}),Wa=()=>e.jsxs(u,{spacing:6,w:"full",children:[e.jsxs(F,{w:"full",children:[e.jsxs(Pe,{children:[e.jsxs(K,{size:"md",children:[e.jsx(xr,{style:{display:"inline",marginRight:"8px"}}),$?"Bidones Disponibles (SuscripciÃ³n)":"Productos Disponibles"]}),$&&e.jsxs(Te,{status:"info",size:"sm",borderRadius:"md",mt:2,children:[e.jsx(De,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Modo SuscripciÃ³n:"})," Solo puedes pedir bidones de agua. Los bidones se descontarÃ¡n de tu suscripciÃ³n sin costo adicional."]})]}),I.length===0&&e.jsxs(Te,{status:"warning",size:"sm",borderRadius:"md",mt:2,children:[e.jsx(De,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Â¡Recuerda!"})," Debes seleccionar al menos un producto para continuar con tu pedido."]})]})]}),e.jsx(M,{children:e.jsx(as,{columns:{base:1,md:2},spacing:4,children:o.filter(j=>!$||j.type==="bidon").map(j=>e.jsx(F,{variant:"outline",children:e.jsx(M,{children:e.jsxs(u,{align:"start",spacing:3,children:[e.jsxs(h,{spacing:4,align:"start",w:"full",children:[e.jsx(_,{flexShrink:0,children:e.jsx(Rt,{src:de(j.name),alt:j.name,boxSize:"80px",objectFit:"cover",borderRadius:"md",border:"2px solid #e2e8f0"})}),e.jsx(u,{align:"start",spacing:1,flex:1,children:e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:j.name}),e.jsx(n,{color:"gray.600",fontSize:"sm",children:j.description}),j.name==="Paquete de Botellas de Agua"&&e.jsx(Ce,{colorScheme:"green",size:"sm",fontSize:"xs",whiteSpace:"nowrap",children:"Â¡50+ = S/ 9.00 c/u!"})]}),e.jsx(Ce,{colorScheme:sn(j.type),children:tn(j.type)})]})})]}),e.jsxs(h,{spacing:4,children:[e.jsxs(n,{fontWeight:"bold",color:"blue.600",fontSize:"lg",children:["S/ ",parseFloat(j.unitPrice).toFixed(2)]}),e.jsxs(n,{color:"gray.500",fontSize:"sm",children:["Stock: ",j.stock]})]}),e.jsx(O,{colorScheme:"blue",size:"sm",leftIcon:e.jsx(xr,{}),onClick:()=>Ia(j),isLoading:$e.has(j.id),loadingText:"Agregando...",w:"full",children:"Agregar al Carrito"})]})})},j.id))})})]}),I.length>0&&e.jsxs(F,{w:"full",children:[e.jsx(Pe,{children:e.jsxs(K,{size:"md",children:[e.jsx(xr,{style:{display:"inline",marginRight:"8px"}}),"Tu Carrito (",I.length," ",I.length===1?"producto":"productos",")"]})}),e.jsx(M,{children:e.jsxs(u,{spacing:4,children:[I.map(j=>{var H;return e.jsx(_,{w:"full",p:3,border:"1px",borderColor:"gray.200",borderRadius:"md",children:e.jsxs(h,{spacing:3,align:"start",children:[e.jsx(Rt,{src:de(j.name),alt:j.name,boxSize:"50px",objectFit:"cover",borderRadius:"md",border:"1px solid #e2e8f0"}),e.jsxs(u,{spacing:2,flex:1,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:j.name}),e.jsx(Ce,{colorScheme:sn(j.type),children:tn(j.type)})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(u,{align:"start",spacing:0,children:[e.jsxs(n,{color:"gray.600",fontSize:"sm",children:["S/ ",parseFloat(j.unitPrice).toFixed(2)," c/u"]}),((H=j.pricing)==null?void 0:H.priceLevel)==="especial50"&&e.jsx(Ce,{colorScheme:"green",size:"sm",children:"Â¡Descuento 50+ unidades!"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(O,{size:"sm",onClick:()=>Dt(j.id,j.quantity-1),children:"-"}),e.jsx(re,{value:j.quantity,onChange:J=>_a(j.id,J.target.value),onBlur:J=>ka(j.id,J.target.value),size:"sm",w:"60px",textAlign:"center",type:"number",min:"0",placeholder:"0"}),e.jsx(O,{size:"sm",onClick:()=>Dt(j.id,j.quantity+1),children:"+"})]})]}),e.jsx(h,{justify:"space-between",w:"full",children:e.jsxs(n,{fontWeight:"bold",color:"blue.600",children:["Subtotal: S/ ",parseFloat(j.subtotal).toFixed(2)]})})]})]})},j.id)}),e.jsx(hs,{}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Subtotal:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(It()).toFixed(2)]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Flete:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(bt()).toFixed(2)]})]}),e.jsx(hs,{}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(Fs()).toFixed(2)]})]})]}),e.jsx(O,{colorScheme:"green",size:"lg",w:"full",onClick:()=>{p($&&g?5:4)},leftIcon:e.jsx(Cs,{}),children:$&&g?"Continuar con ConfirmaciÃ³n":"Continuar con Modalidad"})]})})]})]}),Ma=()=>$&&g?e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:ks,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Usar SuscripciÃ³n"}),e.jsxs(n,{color:"gray.600",textAlign:"center",children:["Tienes ",g.remainingBottles," bidones disponibles de tu suscripciÃ³n"]}),e.jsxs(Te,{status:"success",size:"sm",borderRadius:"md",children:[e.jsx(De,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"SuscripciÃ³n activa:"})," ",g.remainingBottles," bidones disponibles"]})]})]})}),e.jsx(M,{children:e.jsxs(u,{spacing:6,children:[e.jsx(F,{variant:"filled",borderColor:"purple.500",bg:"purple.50",children:e.jsx(M,{children:e.jsxs(u,{spacing:3,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Tipo de SuscripciÃ³n:"}),e.jsx(n,{children:g.subscriptionType||"N/A"})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Bidones Totales:"}),e.jsx(n,{children:g.totalBottles||0})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Bidones Restantes:"}),e.jsx(n,{color:"green.600",fontWeight:"bold",children:g.remainingBottles||0})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Total Pagado:"}),e.jsxs(n,{children:["S/ ",g.totalAmount?parseFloat(g.totalAmount).toFixed(2):"0.00"]})]})]})})}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(M,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:B.name})]}),e.jsxs(u,{spacing:1,w:"full",align:"stretch",children:[e.jsx(n,{children:"Productos:"}),I.map((j,H)=>e.jsxs(h,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["â€¢ ",j.name," x",j.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(j.subtotal).toFixed(2)]})]},H))]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total Bidones:"}),e.jsxs(n,{fontWeight:"bold",color:"purple.600",children:[I.reduce((j,H)=>j+H.quantity,0)," bidones"]})]})]})]})})}),e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:()=>p(5),leftIcon:e.jsx(Ps,{}),children:"Usar SuscripciÃ³n (Sin Pago)"})]})})]}):Xs&&!m?e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:bs,boxSize:12,color:"green.500"}),e.jsx(K,{size:"lg",children:"Modalidad de Pago"}),e.jsx(n,{color:"gray.600",textAlign:"center",children:"Tu modalidad de pago estÃ¡ activa este mes"}),e.jsxs(Te,{status:"success",size:"sm",borderRadius:"md",children:[e.jsx(De,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Modalidad activa:"})," ",te==="vale"?"A CrÃ©dito (Vale)":te==="suscripcion"?"SuscripciÃ³n Mensual":"Contraentrega"]})]})]})}),e.jsx(M,{children:e.jsxs(u,{spacing:6,children:[e.jsx(F,{variant:"filled",borderColor:"blue.500",bg:"blue.50",children:e.jsx(M,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ms,{value:te,isChecked:!0}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:te==="vale"?"A CrÃ©dito (Vale)":te==="suscripcion"?"SuscripciÃ³n con Beneficios":"Contraentrega"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:te==="vale"?"Paga al final del mes - Se anota en tu vale":te==="suscripcion"?"Pedido recurrente mensual con bidones extra":"Pagas en efectivo o PLIN cuando recibes tu pedido"})]})]})})}),e.jsx(O,{colorScheme:"blue",size:"lg",w:"full",onClick:()=>{te==="suscripcion"?(L(!0),p(3)):p(5)},leftIcon:e.jsx(Vs,{}),children:te==="vale"?"Continuar (Sin Pago Inmediato)":"Continuar con Forma de Pago"})]})})]}):te==="suscripcion"&&!b?(console.log("Mostrando planes de suscripciÃ³n. Estado actual:",{clientId:fe,dni:ne,paymentMethod:te,selectedSubscriptionPlan:b,isSubscriptionMode:$}),$||L(!0),fe?e.jsxs(F,{maxW:"4xl",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:ks,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Elige tu Plan de SuscripciÃ³n"}),e.jsx(n,{color:"gray.600",textAlign:"center",children:"Selecciona el plan que mejor se adapte a tus necesidades"}),e.jsxs(Te,{status:"info",size:"sm",borderRadius:"md",children:[e.jsx(De,{}),e.jsxs(n,{fontSize:"sm",children:[e.jsx("strong",{children:"Beneficios de la suscripciÃ³n:"})," Paga una vez al mes y recibe bidones extra gratis. DespuÃ©s solo pides la cantidad que necesites sin pagar nada mÃ¡s."]})]})]})}),e.jsxs(M,{children:[z?e.jsx(ls,{py:8,children:e.jsxs(u,{spacing:4,children:[e.jsx(vs,{size:"xl",color:"blue.500"}),e.jsx(n,{color:"gray.500",children:"Cargando planes de suscripciÃ³n..."})]})}):e.jsx(as,{columns:{base:1,md:3},spacing:6,children:pe.map(j=>e.jsxs(F,{variant:(b==null?void 0:b.id)===j.id?"filled":"outline",borderColor:(b==null?void 0:b.id)===j.id?`${j.color}.500`:"gray.200",cursor:"pointer",onClick:()=>ae(j),position:"relative",_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:[j.popular&&e.jsx(Ce,{position:"absolute",top:-2,right:4,colorScheme:j.color,variant:"solid",borderRadius:"full",px:3,py:1,children:"MÃ¡s Popular"}),e.jsx(M,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsxs(u,{spacing:2,children:[e.jsx(n,{fontWeight:"bold",fontSize:"xl",color:`${j.color}.600`,children:j.name}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:j.description})]}),e.jsxs(u,{spacing:1,children:[e.jsxs(n,{fontSize:"3xl",fontWeight:"bold",color:`${j.color}.500`,children:["S/ ",j.price]}),e.jsx(n,{fontSize:"sm",color:"gray.500",children:"por mes"})]}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Bidones incluidos:"}),e.jsx(n,{fontWeight:"bold",children:j.bottles})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Bidones extra:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["+",j.bonus]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",children:"Total bidones:"}),e.jsx(n,{fontWeight:"bold",color:`${j.color}.600`,children:j.bottles+j.bonus})]})]}),e.jsx(O,{colorScheme:j.color,variant:(b==null?void 0:b.id)===j.id?"solid":"outline",w:"full",size:"sm",children:(b==null?void 0:b.id)===j.id?"Seleccionado":"Seleccionar"})]})})]},j.id))}),e.jsxs(u,{spacing:4,mt:6,children:[e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:async()=>{if(b)try{await lr("efectivo")}catch(j){console.error("Error al crear suscripciÃ³n:",j),t({title:"Error",description:"No se pudo crear la suscripciÃ³n. IntÃ©ntalo de nuevo.",status:"error",duration:5e3,isClosable:!0})}else p(5)},leftIcon:e.jsx(Vs,{}),isDisabled:!b,children:"Continuar con Forma de Pago"}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>{C("contraentrega"),L(!1)},children:"Cambiar a Contraentrega"})]})]})]}):e.jsx(F,{maxW:"lg",mx:"auto",children:e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:Zn,boxSize:12,color:"red.500"}),e.jsx(K,{size:"lg",color:"red.500",children:"Error de Cliente"}),e.jsx(n,{color:"gray.600",textAlign:"center",children:"No se pudo identificar al cliente. Por favor, regÃ­strate nuevamente."}),e.jsx(O,{colorScheme:"blue",onClick:()=>p(2),children:"Volver al Registro"})]})})})):e.jsxs(F,{maxW:{base:"100%",sm:"lg"},mx:"auto",w:"100%",children:[e.jsx(Pe,{textAlign:"center",p:{base:4,md:6},children:e.jsxs(u,{spacing:{base:3,md:4},children:[e.jsx(le,{as:bs,boxSize:{base:10,md:12},color:"green.500"}),e.jsx(K,{size:{base:"md",md:"lg"},children:"Modalidad de Pago"}),e.jsx(n,{color:"gray.600",textAlign:"center",fontSize:{base:"sm",md:"md"},children:Xs?"Tu modalidad anterior expirÃ³. Elige una nueva modalidad:":"Selecciona cÃ³mo deseas pagar tu pedido"}),e.jsxs(Te,{status:Xs?"warning":"info",size:"sm",borderRadius:"md",w:"100%",children:[e.jsx(De,{}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},children:Xs?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Modalidad expirada:"})," Tu modalidad anterior ya no estÃ¡ activa. Elige una nueva modalidad de pago para este mes."]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Contraentrega:"})," Pagas cuando recibes el pedido",e.jsx("br",{}),e.jsx("strong",{children:"A CrÃ©dito:"})," Se anota en tu vale y pagas al final del mes",e.jsx("br",{}),e.jsx("strong",{children:"SuscripciÃ³n:"})," Pedido recurrente mensual"]})})]})]})}),e.jsx(M,{p:{base:4,md:6},children:e.jsxs(u,{spacing:{base:4,md:6},w:"100%",children:[e.jsx(dr,{value:te,onChange:j=>{C(j),j==="suscripcion"?g?L(!0):(L(!1),p(4)):L(!1)},w:"100%",children:e.jsxs(ur,{spacing:{base:3,md:4},w:"100%",children:[e.jsx(F,{variant:te==="contraentrega"?"filled":"outline",borderColor:te==="contraentrega"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>{C("contraentrega"),L(!1)},w:"100%",children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(h,{spacing:{base:3,md:4},w:"100%",children:[e.jsx(Ms,{value:"contraentrega",flexShrink:0}),e.jsxs(u,{align:"start",spacing:1,flex:1,minW:0,children:[e.jsx(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:"Contraentrega"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},color:"gray.600",noOfLines:2,children:"Pagas en efectivo o PLIN cuando recibes tu pedido"})]})]})})}),e.jsx(F,{variant:te==="vale"?"filled":"outline",borderColor:te==="vale"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>{C("vale"),L(!1)},w:"100%",children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(h,{spacing:{base:3,md:4},w:"100%",children:[e.jsx(Ms,{value:"vale",flexShrink:0}),e.jsxs(u,{align:"start",spacing:1,flex:1,minW:0,children:[e.jsx(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:"A CrÃ©dito (Vale)"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},color:"gray.600",noOfLines:2,children:"Paga al final del mes - Se anota en tu vale"})]})]})})}),e.jsx(F,{variant:te==="suscripcion"?"filled":"outline",borderColor:te==="suscripcion"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>{C("suscripcion"),g?L(!0):(L(!1),p(4))},w:"100%",children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(h,{spacing:{base:3,md:4},w:"100%",align:"start",children:[e.jsx(Ms,{value:"suscripcion",flexShrink:0,mt:1}),e.jsx(u,{align:"start",spacing:1,flex:1,minW:0,children:e.jsx(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:"SuscripciÃ³n con Beneficios"})})]})})})]})}),e.jsx(O,{colorScheme:"blue",size:"lg",w:"full",onClick:()=>p(5),leftIcon:e.jsx(Vs,{}),children:te==="vale"?"Continuar (Sin Pago Inmediato)":"Continuar con Forma de Pago"})]})})]}),$a=()=>te==="suscripcion"&&b&&!g?e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:Hr,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Confirmar SuscripciÃ³n"}),e.jsx(n,{color:"gray.600",children:"Revisa los detalles de tu plan de suscripciÃ³n"})]})}),e.jsx(M,{children:e.jsxs(u,{spacing:6,children:[e.jsx(F,{variant:"outline",w:"full",borderColor:"purple.200",children:e.jsx(M,{children:e.jsxs(u,{spacing:4,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:b.name}),e.jsx(n,{fontSize:"sm",color:"gray.600",textAlign:"center",children:b.description}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones incluidos:"}),e.jsx(n,{fontWeight:"bold",children:b.bottles})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones extra:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["+",b.bonus]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total bidones:"}),e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:b.bottles+b.bonus})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Precio por bidÃ³n:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(b.pricePerBottle).toFixed(2)]})]}),e.jsx(hs,{}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",children:"Total a pagar:"}),e.jsxs(n,{fontSize:"xl",fontWeight:"bold",color:"purple.600",children:["S/ ",parseFloat(b.price).toFixed(2)]})]})]})]})})}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(M,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Datos del Cliente"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Nombre:"}),e.jsx(n,{fontWeight:"bold",children:B.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"DNI:"}),e.jsx(n,{fontWeight:"bold",children:ne})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"TelÃ©fono:"}),e.jsx(n,{fontWeight:"bold",children:B.phone})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Email:"}),e.jsx(n,{fontWeight:"bold",children:B.email})]})]})]})})}),e.jsxs(Te,{status:"info",borderRadius:"md",children:[e.jsx(De,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"CÃ³mo funciona la suscripciÃ³n:"}),e.jsxs(n,{fontSize:"sm",children:["â€¢ Pagas una vez al mes por adelantado",e.jsx("br",{}),"â€¢ Recibes ",b.bottles+b.bonus," bidones inmediatamente",e.jsx("br",{}),"â€¢ DespuÃ©s solo pides la cantidad que necesites sin pagar",e.jsx("br",{}),"â€¢ Los bidones se descuentan de tu suscripciÃ³n"]})]})]}),e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:()=>p(6),leftIcon:e.jsx(Vs,{}),children:"Proceder al Pago"})]})})]}):$&&g?e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:ks,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Confirmar Pedido con SuscripciÃ³n"}),e.jsx(n,{color:"gray.600",children:"UsarÃ¡s bidones de tu suscripciÃ³n existente"})]})}),e.jsx(M,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(Te,{status:"info",borderRadius:"md",children:[e.jsx(De,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"CÃ³mo funciona con suscripciÃ³n:"}),e.jsxs(n,{fontSize:"sm",children:["â€¢ Se descontarÃ¡n ",I.reduce((j,H)=>{const J=o.find(se=>se.id===H.productId);return J&&J.type==="bidon"?j+H.quantity:j},0)," bidones de tu suscripciÃ³n",e.jsx("br",{}),"â€¢ El repartidor NO cobrarÃ¡ nada en la entrega",e.jsx("br",{}),"â€¢ Los bidones se descontarÃ¡n automÃ¡ticamente",e.jsx("br",{}),"â€¢ QuedarÃ¡n ",g.remainingBottles-I.reduce((j,H)=>{const J=o.find(se=>se.id===H.productId);return J&&J.type==="bidon"?j+H.quantity:j},0)," bidones disponibles"]})]})]}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(M,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:B.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Modalidad:"}),e.jsx(Ce,{colorScheme:"purple",children:"SuscripciÃ³n (Sin Pago)"})]}),e.jsxs(u,{spacing:1,w:"full",align:"stretch",children:[e.jsx(n,{children:"Productos:"}),I.map((j,H)=>e.jsxs(h,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["â€¢ ",j.name," x",j.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(j.subtotal).toFixed(2)]})]},H))]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones a usar:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:[I.reduce((j,H)=>j+H.quantity,0)," bidones"]})]})]})]})})}),e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:or,leftIcon:e.jsx(Ps,{}),isLoading:T,loadingText:"Creando pedido...",children:"Confirmar Pedido con SuscripciÃ³n"})]})})]}):te==="vale"?e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:bs,boxSize:12,color:"orange.500"}),e.jsx(K,{size:"lg",children:"Pago a CrÃ©dito"}),e.jsx(n,{color:"gray.600",children:"Tu pedido se anotarÃ¡ en tu vale de crÃ©dito"})]})}),e.jsx(M,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(Te,{status:"info",borderRadius:"md",children:[e.jsx(De,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"CÃ³mo funciona el pago a crÃ©dito:"}),e.jsxs(n,{fontSize:"sm",children:["â€¢ Tu pedido se anotarÃ¡ automÃ¡ticamente en tu vale",e.jsx("br",{}),"â€¢ El repartidor NO cobrarÃ¡ nada en la entrega",e.jsx("br",{}),"â€¢ Debes pagar todos tus vales al final del mes",e.jsx("br",{}),"â€¢ Puedes pagar en efectivo o PLIN cuando sea el momento"]})]})]}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(M,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:B.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Modalidad:"}),e.jsx(Ce,{colorScheme:"orange",children:"A CrÃ©dito (Vale)"})]}),e.jsxs(u,{spacing:1,w:"full",align:"stretch",children:[e.jsx(n,{children:"Productos:"}),I.map((j,H)=>e.jsxs(h,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["â€¢ ",j.name," x",j.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(j.subtotal).toFixed(2)]})]},H))]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"orange.600",children:["S/ ",parseFloat(Fs()).toFixed(2)," (A CrÃ©dito)"]})]})]})]})})}),e.jsx(O,{colorScheme:"orange",size:"lg",w:"full",onClick:ir,leftIcon:e.jsx(Ps,{}),isLoading:T,loadingText:"Creando pedido...",children:"Confirmar Pedido a CrÃ©dito"})]})})]}):te==="suscripcion"&&b?e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:ks,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Confirmar SuscripciÃ³n"}),e.jsxs(n,{color:"gray.600",children:["Plan ",b.name," seleccionado"]})]})}),e.jsx(M,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(Te,{status:"info",borderRadius:"md",children:[e.jsx(De,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"CÃ³mo funciona la suscripciÃ³n:"}),e.jsxs(n,{fontSize:"sm",children:["â€¢ Pagas una vez al mes por adelantado",e.jsx("br",{}),"â€¢ Recibes ",b.bottles+b.bonus," bidones inmediatamente",e.jsx("br",{}),"â€¢ DespuÃ©s solo pides la cantidad que necesites sin pagar",e.jsx("br",{}),"â€¢ Los bidones se descuentan de tu suscripciÃ³n"]})]})]}),e.jsx(F,{variant:"outline",w:"full",borderColor:"purple.200",children:e.jsx(M,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:b.name}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Precio del plan:"}),e.jsxs(n,{fontWeight:"bold",color:"purple.600",children:["S/ ",b.price]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones incluidos:"}),e.jsx(n,{fontWeight:"bold",children:b.bottles})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Bidones extra:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["+",b.bonus]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total bidones:"}),e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:b.bottles+b.bonus})]})]})]})})}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(M,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:B.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Modalidad:"}),e.jsxs(Ce,{colorScheme:"purple",children:["SuscripciÃ³n ",b.name]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total a pagar:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:["S/ ",b.monthlyPrice]})]})]})]})})}),e.jsxs(u,{spacing:4,w:"full",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Â¿CÃ³mo deseas pagar?"}),e.jsx(dr,{value:ee,onChange:V,children:e.jsxs(ur,{spacing:4,w:"full",children:[e.jsx(F,{variant:ee==="efectivo"?"filled":"outline",borderColor:ee==="efectivo"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>V("efectivo"),children:e.jsx(M,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ms,{value:"efectivo"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"Efectivo"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga en efectivo al repartidor"})]})]})})}),e.jsx(F,{variant:ee==="plin"?"filled":"outline",borderColor:ee==="plin"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>V("plin"),children:e.jsx(M,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ms,{value:"plin"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"PLIN"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga con PLIN"})]})]})})})]})}),e.jsx(O,{colorScheme:"purple",size:"lg",w:"full",onClick:ee==="efectivo"?ir:en,leftIcon:e.jsx(Ps,{}),isLoading:T,loadingText:"Creando suscripciÃ³n...",children:ee==="efectivo"?"Confirmar SuscripciÃ³n":"Pagar con PLIN"})]})]})})]}):e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:Vs,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Forma de Pago"}),e.jsx(n,{color:"gray.600",children:"Â¿CÃ³mo deseas pagar?"})]})}),e.jsx(M,{children:e.jsxs(u,{spacing:6,children:[e.jsx(dr,{value:ee,onChange:V,children:e.jsxs(ur,{spacing:4,children:[e.jsx(F,{variant:ee==="efectivo"?"filled":"outline",borderColor:ee==="efectivo"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>V("efectivo"),children:e.jsx(M,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ms,{value:"efectivo"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"Efectivo"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga en efectivo al repartidor"})]})]})})}),e.jsx(F,{variant:ee==="plin"?"filled":"outline",borderColor:ee==="plin"?"blue.500":"gray.200",cursor:"pointer",onClick:()=>V("plin"),children:e.jsx(M,{children:e.jsxs(h,{spacing:4,children:[e.jsx(Ms,{value:"plin"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"PLIN"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Pago digital con QR"})]})]})})})]})}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(M,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Resumen del Pedido"}),e.jsxs(u,{spacing:2,w:"full",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:B.name})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Modalidad:"}),e.jsx(Ce,{colorScheme:"blue",children:te==="contraentrega"?"Contraentrega":te==="vale"?"A CrÃ©dito (Vale)":"SuscripciÃ³n"})]}),e.jsxs(u,{spacing:1,w:"full",align:"stretch",children:[e.jsx(n,{children:"Productos:"}),I.map((j,H)=>e.jsxs(h,{justify:"space-between",w:"full",pl:2,children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["â€¢ ",j.name," x",j.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(j.subtotal).toFixed(2)]})]},H))]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(Fs()).toFixed(2)]})]})]})]})})}),e.jsx(F,{variant:"outline",w:"full",children:e.jsx(M,{children:e.jsxs(u,{spacing:4,children:[e.jsxs(h,{w:"full",justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"TÃ©rminos y Condiciones"}),e.jsx(O,{size:"sm",variant:"outline",colorScheme:"blue",onClick:()=>oe(!0),children:"Ver TÃ©rminos"})]}),e.jsxs(h,{w:"full",spacing:3,children:[e.jsx(Fn,{isChecked:W,onChange:j=>Z(j.target.checked),colorScheme:"blue",size:"lg"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"He leÃ­do y acepto los tÃ©rminos y condiciones del servicio"})]})]})})}),e.jsx(O,{colorScheme:"green",size:"lg",w:"full",onClick:ee==="efectivo"?ir:en,leftIcon:e.jsx(Ps,{}),isLoading:T,loadingText:"Creando pedido...",isDisabled:!W,children:ee==="efectivo"?"Confirmar Pedido":"Pagar con PLIN"})]})})]}),Ba=()=>e.jsxs(F,{maxW:"lg",mx:"auto",children:[e.jsx(Pe,{textAlign:"center",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:Vs,boxSize:12,color:"purple.500"}),e.jsx(K,{size:"lg",children:"Pago de SuscripciÃ³n"}),e.jsx(n,{color:"gray.600",children:"Selecciona tu mÃ©todo de pago para la suscripciÃ³n"})]})}),e.jsx(M,{children:e.jsxs(u,{spacing:6,children:[e.jsx(F,{variant:"outline",w:"full",borderColor:"purple.200",children:e.jsx(M,{children:e.jsxs(u,{spacing:3,children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",color:"purple.600",children:b.name}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Total bidones:"}),e.jsx(n,{fontWeight:"bold",children:b.bottles+b.bonus})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Precio por bidÃ³n:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(b.pricePerBottle).toFixed(2)]})]}),e.jsx(hs,{}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",children:"Total a pagar:"}),e.jsxs(n,{fontSize:"xl",fontWeight:"bold",color:"purple.600",children:["S/ ",parseFloat(b.price).toFixed(2)]})]})]})})}),e.jsxs(u,{spacing:4,w:"full",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"MÃ©todo de Pago"}),e.jsx(F,{variant:ee==="efectivo"?"filled":"outline",borderColor:ee==="efectivo"?"green.500":"gray.200",cursor:"pointer",onClick:()=>V("efectivo"),_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:e.jsx(M,{children:e.jsxs(h,{spacing:4,children:[e.jsx(le,{as:bs,boxSize:8,color:"green.500"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"Pago en Efectivo"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga cuando recibas tu suscripciÃ³n"})]})]})})}),e.jsx(F,{variant:ee==="plin"?"filled":"outline",borderColor:ee==="plin"?"purple.500":"gray.200",cursor:"pointer",onClick:()=>V("plin"),_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:e.jsx(M,{children:e.jsxs(h,{spacing:4,children:[e.jsx(le,{as:Ks,boxSize:8,color:"purple.500"}),e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:"Pago con Plin"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Paga con QR de Plin"})]})]})})})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsx(O,{variant:"outline",flex:1,onClick:()=>p(5),children:"â† Anterior"}),e.jsx(O,{colorScheme:"purple",flex:1,onClick:()=>{ee==="efectivo"?lr():ee==="plin"&&a()},leftIcon:ee==="efectivo"?e.jsx(Ps,{}):e.jsx(Ks,{}),isLoading:T,loadingText:ee==="efectivo"?"Creando suscripciÃ³n...":"Preparando pago...",children:ee==="efectivo"?"Confirmar SuscripciÃ³n":"Pagar con Plin"})]})]})})]}),Va=()=>e.jsxs(Ke,{isOpen:r,onClose:l,size:{base:"full",sm:"md"},isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{mx:{base:0,sm:4},my:{base:0,sm:4},maxH:{base:"100vh",sm:"90vh"},maxW:{base:"100vw",sm:"500px"},w:{base:"100%",sm:"auto"},children:[e.jsx(Xe,{textAlign:"center",p:{base:3,md:4},children:e.jsxs(u,{spacing:2,children:[e.jsx(le,{as:Ks,boxSize:{base:6,md:8},color:"purple.500"}),e.jsx(n,{fontSize:{base:"md",md:"lg"},children:"Pago con PLIN"})]})}),e.jsx(es,{}),e.jsx(Qe,{pb:{base:3,md:4},px:{base:3,md:4},overflowY:"auto",children:e.jsxs(u,{spacing:{base:3,md:4},w:"100%",children:[e.jsxs(Te,{status:"info",fontSize:{base:"xs",md:"sm"},w:"100%",children:[e.jsx(De,{}),e.jsx(n,{children:"Escanea el cÃ³digo QR con tu app PLIN"})]}),e.jsx(_,{textAlign:"center",w:"100%",maxW:"250px",mx:"auto",children:e.jsx(Rt,{src:Wl,alt:"QR PLIN",w:"100%",h:"auto",borderRadius:"md"})}),e.jsxs(u,{spacing:2,w:"100%",children:[e.jsxs(n,{fontWeight:"bold",fontSize:{base:"md",md:"lg"},textAlign:"center",children:["Total a pagar: S/ ",te==="suscripcion"&&b?parseFloat(b.price).toFixed(2):parseFloat(Fs()).toFixed(2)]}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},color:"gray.600",textAlign:"center",children:te==="suscripcion"&&b?`Plan ${b.name} - ${b.bottles+b.bonus} bidones`:"Incluye productos + flete de envÃ­o"})]}),e.jsxs(Te,{status:Je?"success":"warning",fontSize:{base:"xs",md:"sm"},children:[e.jsx(De,{}),e.jsx(n,{children:Je?"âœ… Comprobante enviado por WhatsApp. Ahora puedes confirmar el pago.":"DespuÃ©s de pagar, envÃ­a el comprobante por WhatsApp"})]}),te==="suscripcion"&&b&&e.jsxs(Te,{status:"info",fontSize:{base:"xs",md:"sm"},children:[e.jsx(De,{}),e.jsxs(n,{children:[e.jsx("strong",{children:"Importante:"})," Una vez pagada la suscripciÃ³n, podrÃ¡s hacer pedidos usando tus bidones sin costo adicional."]})]}),e.jsxs(u,{spacing:{base:2,md:3},w:"full",children:[e.jsx(O,{colorScheme:"green",size:{base:"md",md:"lg"},w:"full",leftIcon:e.jsx(ct,{}),onClick:Oa,fontSize:{base:"sm",md:"md"},children:"Enviar Comprobante por WhatsApp"}),e.jsx(O,{colorScheme:"purple",size:{base:"md",md:"lg"},w:"full",leftIcon:e.jsx(Ps,{}),onClick:async()=>{if(te==="suscripcion"&&b)try{k(!0),await lr("plin")}catch(j){console.error("Error en suscripciÃ³n:",j)}finally{k(!1)}else await cr()},isLoading:T,loadingText:te==="suscripcion"?"Creando suscripciÃ³n...":"Creando pedido...",isDisabled:!Je||T,opacity:Je?1:.5,fontSize:{base:"sm",md:"md"},children:Je?"Confirmar Pago y Crear Pedido":"Primero envÃ­a el comprobante por WhatsApp"})]})]})})]})]});return e.jsxs(_,{minH:"100vh",bg:"gray.50",py:{base:4,md:8},children:[e.jsx(_,{maxW:"1200px",mx:"auto",px:{base:2,sm:4},children:e.jsxs(u,{spacing:{base:4,md:8},children:[e.jsxs(_,{textAlign:"center",w:"100%",children:[e.jsx(K,{size:{base:"lg",md:"xl"},color:"blue.600",mb:2,children:"Pedido RÃ¡pido de Agua"}),e.jsx(n,{color:"gray.600",fontSize:{base:"md",md:"lg"},children:"Proceso simplificado en 5 pasos"})]}),e.jsx(_,{w:"100%",overflowX:"auto",pb:2,px:{base:2,md:0},children:e.jsx(h,{spacing:{base:.5,sm:1,md:2},justify:"center",minW:"max-content",w:"100%",children:[1,2,3,4,5,6].map(j=>e.jsxs(u,{spacing:.5,minW:{base:"50px",sm:"60px"},flex:1,children:[e.jsx(_,{w:{base:6,sm:8,md:10},h:{base:6,sm:8,md:10},borderRadius:"full",bg:j<=f?"blue.500":"gray.200",color:j<=f?"white":"gray.500",display:"flex",alignItems:"center",justifyContent:"center",fontSize:{base:"2xs",sm:"xs",md:"sm"},fontWeight:"bold",flexShrink:0,children:j}),e.jsx(n,{fontSize:{base:"3xs",sm:"2xs",md:"xs"},color:j<=f?"blue.600":"gray.500",textAlign:"center",whiteSpace:"nowrap",noOfLines:1,maxW:"100%",children:j===1?"DNI":j===2?"Datos":j===3?"Productos":j===4?"Modalidad":j===5?"Confirmar":j===6?"Pago":j})]},j))})}),f===1&&La(),f===2&&Fa(),f===3&&Wa(),f===4&&Ma(),f===5&&$a(),f===6&&Ba(),f>1&&e.jsxs(h,{spacing:4,children:[e.jsx(O,{variant:"outline",onClick:()=>p(f-1),children:"â† Anterior"}),f<6&&f!==5&&e.jsx(O,{colorScheme:"blue",isDisabled:f===3&&I.length===0,onClick:()=>{if(f===3&&I.length===0){t({title:"Â¡Productos requeridos!",description:"Por favor, selecciona al menos un producto para continuar con tu pedido.",status:"warning",duration:4e3,isClosable:!0});return}p($&&g&&f===3?5:f+1)},children:f===3&&I.length===0?"Selecciona productos â†’":"Siguiente â†’"})]})]})}),Va(),e.jsx(Ll,{isOpen:ve,onClose:()=>oe(!1),onAccept:Na,onReject:Ra,title:"TÃ©rminos y Condiciones - Planta de Agua Aquayara",showAcceptance:!0})]})},$l=()=>{const[s,t]=S.useState(null),{isOpen:r,onOpen:a,onClose:i}=Ge(),l=xs();Gs({base:!0,md:!1});const o=(W,Z=2)=>{if(W==null||W==="")return"0.00";const ve=parseFloat(W);return isNaN(ve)?"0.00":ve.toFixed(Z)},{deliveryFees:c,loading:d,error:x,fetchDeliveryFees:P,createDeliveryFee:A,updateDeliveryFee:R,deleteDeliveryFee:f,clearError:p}=ar(),{districts:T,loading:k,error:y,fetchDistricts:w,updateDistrict:E,createDistrict:N,clearError:$}=Zr(),[L,g]=S.useState({name:"",price:0});S.useEffect(()=>{console.log("ðŸ”„ Cargando tarifas de envÃ­o y distritos..."),P().then(W=>{console.log("ðŸ“¦ Resultado de fetchDeliveryFees:",W),console.log("ðŸ“¦ deliveryFees en estado:",c)}),w().then(W=>{console.log("ðŸ“¦ Resultado de fetchDistricts:",W),console.log("ðŸ“¦ districts en estado:",T)})},[P,w]),S.useEffect(()=>{x&&(l({title:"Error",description:x,status:"error",duration:3e3,isClosable:!0}),p())},[x,l,p]);const q=async W=>{W.preventDefault(),console.log("ðŸ”„ Enviando formulario con datos:",L),console.log("ðŸ”„ Editando distrito:",s);const Z=s?await E(s.id,{name:L.name,deliveryFee:L.price}):await N({name:L.name,deliveryFee:L.price});console.log("ðŸ“¦ Resultado de la operaciÃ³n:",Z),Z.success&&(l({title:s?"Distrito actualizado":"Distrito creado",description:`El distrito ha sido ${s?"actualizado":"creado"}`,status:"success",duration:2e3,isClosable:!0}),v(),i())},b=W=>{t(W),g({name:W.name,price:W.deliveryFee||0}),a()},ae=async W=>{window.confirm("Â¿EstÃ¡s seguro de que quieres eliminar este distrito?")&&l({title:"FunciÃ³n no disponible",description:"La eliminaciÃ³n de distritos no estÃ¡ disponible por el momento",status:"warning",duration:2e3,isClosable:!0})},v=()=>{g({name:"",price:0}),t(null)},Q=()=>{v(),a()};return d?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsxs(_,{p:6,children:[e.jsxs(ys,{justify:"space-between",align:"center",mb:6,children:[e.jsx(K,{size:"lg",color:"gray.700",children:"GestiÃ³n de Distritos y Fletes"}),e.jsx(O,{colorScheme:"blue",leftIcon:e.jsx(Mr,{}),onClick:Q,children:"Nuevo Distrito"})]}),T.length===0?e.jsxs(Te,{status:"info",children:[e.jsx(De,{}),"No hay distritos configurados."]}):e.jsx(as,{columns:{base:1,md:2,lg:3},spacing:6,children:Array.isArray(T)?T.map((W,Z)=>e.jsxs(F,{variant:"outline",children:[e.jsx(Pe,{children:e.jsxs(ys,{justify:"space-between",align:"center",children:[e.jsx(K,{size:"md",children:W.name||"Sin nombre"}),e.jsx(Ce,{colorScheme:"green",children:"Activo"})]})}),e.jsx(M,{children:e.jsxs(u,{spacing:3,align:"start",children:[e.jsxs(h,{children:[e.jsx(bs,{color:"gray.500"}),e.jsxs(n,{fontSize:"lg",fontWeight:"bold",color:"blue.600",children:["S/ ",o(W.deliveryFee||0)]})]}),e.jsxs(h,{spacing:2,w:"full",justify:"end",children:[e.jsx(ke,{size:"sm",icon:e.jsx(Yt,{}),onClick:()=>b(W),colorScheme:"blue",variant:"outline"}),e.jsx(ke,{size:"sm",icon:e.jsx($r,{}),onClick:()=>ae(W.id),colorScheme:"red",variant:"outline"})]})]})})]},W.id||`district-${Z}`)):null}),e.jsxs(Ke,{isOpen:r,onClose:i,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsx(Ze,{children:e.jsxs("form",{onSubmit:q,children:[e.jsx(Xe,{children:s?"Editar Distrito":"Nuevo Distrito"}),e.jsx(es,{}),e.jsx(Qe,{children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Nombre del Distrito/Ciudad"}),e.jsx(re,{value:L.name,onChange:W=>g({...L,name:W.target.value}),placeholder:"Ej: San Isidro, Miraflores, Lima Centro"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Precio de Flete por Distrito (S/)"}),e.jsx(Wn,{value:L.price,onChange:W=>g({...L,price:parseFloat(W)||0}),min:0,precision:2,children:e.jsx(Mn,{})})]})]})}),e.jsxs(As,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:i,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",type:"submit",children:s?"Actualizar":"Crear"})]})]})})]})]})},Bl=()=>{const s=Ys(),{id:t}=Vn(),r=xs(),a=Gs({base:!0,md:!1}),[i,l]=S.useState(null),[o,c]=S.useState(!0),[d,x]=S.useState("boleta");S.useEffect(()=>{(async()=>{var y;try{if(t){try{const E=await Y.get(`/api/guest-orders/token/${t}`);if(E.data.success){const N=E.data.data;console.log("ðŸ” OrderData recibido del servidor:",N),console.log("ðŸ” Products en orderData:",N.products),l({id:N.id,client:{name:N.customerName,phone:N.customerPhone,email:N.customerEmail,address:N.deliveryAddress,district:N.deliveryDistrict,reference:N.deliveryNotes,notes:N.deliveryNotes},items:((y=N.products)==null?void 0:y.map($=>{var L;return{name:((L=$.product)==null?void 0:L.name)||"Producto",quantity:$.quantity,unitPrice:$.price,subtotal:$.subtotal}}))||[],paymentMethod:N.paymentMethod,paymentType:N.paymentType,subtotal:N.totalAmount-N.deliveryFee,deliveryFee:N.deliveryFee,total:N.totalAmount,status:N.status==="pending"?"pendiente":N.status,createdAt:N.createdAt});return}}catch{console.log("No se pudo cargar desde el servidor, intentando localStorage")}const w=localStorage.getItem("guestOrderData");if(w){const E=JSON.parse(w);l({id:t,...E,status:"pendiente",createdAt:new Date().toISOString()})}}else{const w=localStorage.getItem("guestOrderData");if(w){const E=JSON.parse(w);l({id:"temp",...E,status:"pendiente",createdAt:new Date().toISOString()})}}}catch(w){console.error("Error al cargar pedido:",w),r({title:"Error",description:"No se pudo cargar el pedido",status:"error",duration:3e3,isClosable:!0})}finally{c(!1)}})()},[t,r]);const P=async()=>{if(i)try{r({title:"Generando PDF",description:"Preparando el documento...",status:"info",duration:2e3,isClosable:!0}),console.log("Datos del order original:",i),console.log("Items del order:",i.items),console.log("Payment method del order:",i.paymentMethod);const k={};i.items.forEach((g,q)=>{const b=`${g.name}-${g.unitPrice}`;k[b]=(k[b]||0)+1,console.log(`ðŸ” Item ${q}:`,{name:g.name,quantity:g.quantity,unitPrice:g.unitPrice,subtotal:g.subtotal,key:b})}),console.log("Conteo de productos:",k);const y=Object.entries(k).filter(([g,q])=>q>1);y.length>0&&console.warn("âš ï¸ Productos duplicados detectados:",y);const w={id:i.id,customerName:i.client.name,customerPhone:i.client.phone,customerEmail:i.client.email||null,deliveryAddress:i.client.address,deliveryDistrict:i.client.district,deliveryNotes:i.client.reference||null,paymentMethod:i.paymentMethod||"contraentrega",paymentType:i.paymentType||"cash",orderDetails:i.items.map(g=>(console.log("Mapeando item para orderDetails:",g),{product:{name:g.name},productName:g.name,quantity:parseInt(g.quantity),unitPrice:parseFloat(g.unitPrice),subtotal:parseFloat(g.subtotal)})),items:[],subtotal:parseFloat(i.subtotal),deliveryFee:parseFloat(i.deliveryFee),total:parseFloat(i.total),status:i.status,createdAt:i.createdAt};console.log("Datos finales enviados al backend:",w),console.log("Datos del pedido que se envÃ­an al backend:",{order:i,orderData:w,items:i.items,subtotal:i.subtotal,deliveryFee:i.deliveryFee,total:i.total}),console.log("Llamando al endpoint del backend para generar PDF..."),console.log("URL:","/api/guest-payments/generate-pdf"),console.log("Datos enviados:",{orderData:w,documentType:"boleta"});const E=await Y.post("/api/guest-payments/generate-pdf",{orderData:w,documentType:d},{responseType:"blob"});console.log("Respuesta del backend:",{status:E.status,headers:E.headers,dataType:typeof E.data,dataLength:E.data.length});const N=new Blob([E.data],{type:"application/pdf"}),$=window.URL.createObjectURL(N),L=document.createElement("a");L.href=$,L.download=`${d}_${i.id}.pdf`,document.body.appendChild(L),L.click(),document.body.removeChild(L),window.URL.revokeObjectURL($),r({title:"PDF Generado",description:"El documento se ha descargado exitosamente",status:"success",duration:3e3,isClosable:!0})}catch(k){console.error("Error al generar PDF:",k),r({title:"Error",description:"Error al generar el PDF",status:"error",duration:3e3,isClosable:!0})}},A=()=>{window.print()},R=()=>{const k=`Hola, tengo una consulta sobre mi pedido #${i==null?void 0:i.id}`,y=`https://wa.me/51961606183?text=${encodeURIComponent(k)}`;window.open(y,"_blank")},f=()=>{localStorage.removeItem("guestOrderData"),s("/guest-order")},p=k=>{switch(k){case"pendiente":return"yellow";case"confirmado":return"blue";case"en_preparacion":return"orange";case"en_camino":return"purple";case"entregado":return"green";case"cancelado":return"red";default:return"gray"}},T=k=>{switch(k){case"pendiente":return"Pendiente";case"confirmado":return"Confirmado";case"en_preparacion":return"En PreparaciÃ³n";case"en_camino":return"En Camino";case"entregado":return"Entregado";case"cancelado":return"Cancelado";default:return k}};return o?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):i?e.jsx(_,{minH:"100vh",bg:"gray.50",py:8,children:e.jsx(_,{maxW:"800px",mx:"auto",px:4,children:e.jsxs(u,{spacing:8,children:[e.jsxs(_,{textAlign:"center",children:[e.jsx(K,{size:"xl",color:"blue.600",mb:2,children:"Recibo de Pedido"}),e.jsx(n,{color:"gray.600",fontSize:"lg",children:"Comprobante de tu pedido de agua"})]}),e.jsxs(F,{w:"full",children:[e.jsx(Pe,{children:e.jsxs(ys,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(K,{size:"md",color:"gray.700",children:["Pedido #",i.id]}),e.jsx(n,{fontSize:"sm",color:"gray.500",children:new Date(i.createdAt).toLocaleString()})]}),e.jsx(Ce,{colorScheme:p(i.status),size:"lg",children:T(i.status)})]})}),e.jsx(M,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(_,{w:"full",p:4,bg:"gray.50",borderRadius:"md",children:[e.jsxs(n,{fontWeight:"bold",mb:3,color:"gray.700",children:[e.jsx(qt,{style:{display:"inline",marginRight:"8px"}}),"InformaciÃ³n del Cliente"]}),e.jsxs(as,{columns:{base:1,md:2},spacing:3,children:[e.jsxs(_,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Nombre:"}),e.jsx(n,{fontWeight:"bold",children:i.client.name})]}),e.jsxs(_,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"TelÃ©fono:"}),e.jsx(n,{fontWeight:"bold",children:i.client.phone})]}),i.client.email&&e.jsxs(_,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Email:"}),e.jsx(n,{fontWeight:"bold",children:i.client.email})]}),e.jsxs(_,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Distrito:"}),e.jsx(n,{fontWeight:"bold",children:i.client.district})]})]}),e.jsxs(_,{mt:3,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"DirecciÃ³n:"}),e.jsx(n,{fontWeight:"bold",children:i.client.address})]}),i.client.reference&&e.jsxs(_,{mt:2,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Referencia:"}),e.jsx(n,{fontWeight:"bold",children:i.client.reference})]})]}),e.jsxs(_,{w:"full",children:[e.jsxs(n,{fontWeight:"bold",mb:3,color:"gray.700",children:[e.jsx(Cs,{style:{display:"inline",marginRight:"8px"}}),"Productos Solicitados"]}),a?e.jsx(u,{spacing:3,children:i.items.map((k,y)=>e.jsx(F,{variant:"outline",w:"full",children:e.jsx(M,{children:e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:k.name}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["Cantidad: ",k.quantity]}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["S/ ",parseFloat(k.unitPrice).toFixed(2)," c/u"]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:"Subtotal:"}),e.jsxs(n,{fontWeight:"bold",color:"blue.600",children:["S/ ",parseFloat(k.subtotal).toFixed(2)]})]})]})})},y))}):e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(ue,{children:"Producto"}),e.jsx(ue,{isNumeric:!0,children:"Cantidad"}),e.jsx(ue,{isNumeric:!0,children:"Precio Unit."}),e.jsx(ue,{isNumeric:!0,children:"Subtotal"})]})}),e.jsx(nt,{children:i.items.map((k,y)=>e.jsxs(fs,{children:[e.jsx(he,{children:e.jsx(u,{align:"start",spacing:1,children:e.jsx(n,{fontWeight:"bold",children:k.name})})}),e.jsx(he,{isNumeric:!0,children:k.quantity}),e.jsxs(he,{isNumeric:!0,children:["S/ ",parseFloat(k.unitPrice).toFixed(2)]}),e.jsxs(he,{isNumeric:!0,fontWeight:"bold",color:"blue.600",children:["S/ ",parseFloat(k.subtotal).toFixed(2)]})]},y))})]})]}),e.jsx(_,{w:"full",p:4,border:"1px",borderColor:"gray.200",borderRadius:"md",children:e.jsxs(u,{spacing:2,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Subtotal:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(i.subtotal).toFixed(2)]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{children:"Flete:"}),e.jsxs(n,{fontWeight:"bold",children:["S/ ",parseFloat(i.deliveryFee).toFixed(2)]})]}),e.jsx(hs,{}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(i.total).toFixed(2)]})]})]})}),i.client.notes&&e.jsxs(_,{w:"full",p:4,bg:"yellow.50",borderRadius:"md",children:[e.jsx(n,{fontWeight:"bold",mb:2,color:"gray.700",children:"Notas Adicionales:"}),e.jsx(n,{fontSize:"sm",children:i.client.notes})]}),e.jsx(_,{w:"full",maxW:"300px",children:e.jsxs(U,{children:[e.jsx(G,{children:"Tipo de Documento"}),e.jsxs(rs,{value:d,onChange:k=>x(k.target.value),children:[e.jsx("option",{value:"boleta",children:"Boleta"}),e.jsx("option",{value:"factura",children:"Factura"})]})]})}),e.jsxs(as,{columns:{base:1,md:2,lg:4},spacing:4,w:"full",children:[e.jsx(O,{leftIcon:e.jsx(Vr,{}),colorScheme:"blue",variant:"outline",onClick:P,children:"Descargar PDF"}),e.jsx(O,{leftIcon:e.jsx(po,{}),colorScheme:"gray",variant:"outline",onClick:A,children:"Imprimir"}),e.jsx(O,{leftIcon:e.jsx(ct,{}),colorScheme:"green",variant:"outline",onClick:R,children:"WhatsApp"}),e.jsx(O,{leftIcon:e.jsx(qt,{}),colorScheme:"purple",onClick:f,children:"Nuevo Pedido"})]})]})})]})]})})}):e.jsx(ls,{h:"400px",children:e.jsxs(Te,{status:"error",children:[e.jsx(De,{}),"No se encontrÃ³ el pedido"]})})},Vl=()=>{var k;const s=Ys(),{id:t}=Vn(),r=xs();Gs({base:!0,md:!1});const[a,i]=S.useState(null),[l,o]=S.useState(!1),[c,d]=S.useState(t||""),[x,P]=S.useState(!1);S.useEffect(()=>{t&&A(t)},[t]);const A=async y=>{o(!0),P(!1);try{const w=await axios.get(`/api/guest-orders/${y}`),E=w.data.success?w.data.data:w.data;E?i(E):P(!0)}catch(w){console.error("Error al cargar pedido:",w),P(!0)}finally{o(!1)}},R=()=>{if(!c.trim()){r({title:"ID requerido",description:"Ingresa un nÃºmero de pedido",status:"warning",duration:3e3,isClosable:!0});return}A(c.trim())},f=y=>{switch(y){case"pendiente":return{color:"yellow",text:"Pendiente",icon:gn,description:"Tu pedido estÃ¡ siendo procesado"};case"confirmado":return{color:"blue",text:"Confirmado",icon:pr,description:"Tu pedido ha sido confirmado"};case"en_preparacion":return{color:"orange",text:"En PreparaciÃ³n",icon:Cs,description:"Tu pedido estÃ¡ siendo preparado"};case"en_camino":return{color:"purple",text:"En Camino",icon:Cs,description:"Tu pedido estÃ¡ en camino"};case"entregado":return{color:"green",text:"Entregado",icon:pr,description:"Tu pedido ha sido entregado"};case"cancelado":return{color:"red",text:"Cancelado",icon:mo,description:"Tu pedido ha sido cancelado"};default:return{color:"gray",text:y,icon:gn,description:"Estado desconocido"}}},p=y=>{switch(y){case"pendiente":return 20;case"confirmado":return 40;case"en_preparacion":return 60;case"en_camino":return 80;case"entregado":return 100;case"cancelado":return 0;default:return 0}},T=()=>[{key:"pendiente",label:"Pendiente",description:"Pedido recibido"},{key:"confirmado",label:"Confirmado",description:"Pedido confirmado"},{key:"en_preparacion",label:"En PreparaciÃ³n",description:"Preparando pedido"},{key:"en_camino",label:"En Camino",description:"Enviando pedido"},{key:"entregado",label:"Entregado",description:"Pedido entregado"}];return l?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsx(_,{minH:"100vh",bg:"gray.50",py:8,children:e.jsx(_,{maxW:"800px",mx:"auto",px:4,children:e.jsxs(u,{spacing:8,children:[e.jsxs(_,{textAlign:"center",children:[e.jsx(K,{size:"xl",color:"blue.600",mb:2,children:"Seguimiento de Pedido"}),e.jsx(n,{color:"gray.600",fontSize:"lg",children:"Consulta el estado de tu pedido"})]}),e.jsxs(F,{w:"full",children:[e.jsx(Pe,{children:e.jsx(K,{size:"md",color:"gray.700",children:"Buscar Pedido"})}),e.jsx(M,{children:e.jsxs(h,{spacing:4,children:[e.jsxs(Pt,{flex:1,children:[e.jsx(Fr,{pointerEvents:"none",children:e.jsx(ra,{color:"gray.300"})}),e.jsx(re,{placeholder:"Ingresa el nÃºmero de pedido",value:c,onChange:y=>d(y.target.value),onKeyPress:y=>y.key==="Enter"&&R()})]}),e.jsx(O,{colorScheme:"blue",onClick:R,isLoading:l,loadingText:"Buscando...",children:"Buscar"})]})})]}),x&&e.jsxs(Te,{status:"error",borderRadius:"md",children:[e.jsx(De,{}),e.jsxs(_,{children:[e.jsx(n,{fontWeight:"bold",children:"Pedido no encontrado"}),e.jsx(n,{fontSize:"sm",children:"Verifica que el nÃºmero de pedido sea correcto"})]})]}),a&&e.jsxs(F,{w:"full",children:[e.jsx(Pe,{children:e.jsxs(ys,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(K,{size:"md",color:"gray.700",children:["Pedido #",a.id]}),e.jsx(n,{fontSize:"sm",color:"gray.500",children:new Date(a.createdAt).toLocaleString()})]}),e.jsx(Ce,{colorScheme:f(a.status).color,size:"lg",children:f(a.status).text})]})}),e.jsx(M,{children:e.jsxs(u,{spacing:6,children:[e.jsxs(_,{w:"full",p:4,bg:`${f(a.status).color}.50`,borderRadius:"md",children:[e.jsxs(h,{spacing:3,mb:3,children:[me.createElement(f(a.status).icon,{color:`${f(a.status).color}.500`,size:"24px"}),e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:f(a.status).text})]}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:f(a.status).description}),e.jsx(ei,{value:p(a.status),colorScheme:f(a.status).color,size:"sm",mt:3})]}),e.jsxs(_,{w:"full",children:[e.jsx(n,{fontWeight:"bold",mb:4,color:"gray.700",children:"Progreso del Pedido"}),e.jsx(u,{spacing:3,children:T().map((y,w)=>{const E=p(a.status)>p(y.key),N=a.status===y.key;return e.jsxs(h,{w:"full",spacing:4,children:[e.jsx(_,{w:"8",h:"8",borderRadius:"full",bg:E?"green.500":N?`${f(a.status).color}.500`:"gray.300",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"sm",children:E?e.jsx(pr,{}):w+1}),e.jsxs(u,{align:"start",spacing:1,flex:1,children:[e.jsx(n,{fontWeight:N?"bold":"normal",children:y.label}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:y.description})]})]},y.key)})})]}),e.jsxs(_,{w:"full",p:4,bg:"gray.50",borderRadius:"md",children:[e.jsx(n,{fontWeight:"bold",mb:3,color:"gray.700",children:"InformaciÃ³n de Entrega"}),e.jsxs(as,{columns:{base:1,md:2},spacing:3,children:[e.jsxs(_,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Cliente:"}),e.jsx(n,{fontWeight:"bold",children:a.clientName||"N/A"})]}),e.jsxs(_,{children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"TelÃ©fono:"}),e.jsx(n,{fontWeight:"bold",children:a.clientPhone||"N/A"})]}),e.jsxs(_,{colSpan:{base:1,md:2},children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"DirecciÃ³n:"}),e.jsx(n,{fontWeight:"bold",children:a.deliveryAddress||"N/A"})]})]})]}),e.jsxs(_,{w:"full",children:[e.jsx(n,{fontWeight:"bold",mb:3,color:"gray.700",children:"Productos Solicitados"}),e.jsx(u,{spacing:2,children:((k=a.items)==null?void 0:k.map((y,w)=>e.jsxs(h,{justify:"space-between",w:"full",p:2,bg:"gray.50",borderRadius:"md",children:[e.jsxs(n,{fontSize:"sm",children:[y.name," x ",y.quantity]}),e.jsxs(n,{fontSize:"sm",fontWeight:"bold",children:["S/ ",parseFloat(y.subtotal).toFixed(2)]})]},w)))||e.jsx(n,{fontSize:"sm",color:"gray.500",children:"No hay informaciÃ³n de productos"})})]}),e.jsx(_,{w:"full",p:4,border:"1px",borderColor:"gray.200",borderRadius:"md",children:e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",children:"Total:"}),e.jsxs(n,{fontWeight:"bold",fontSize:"lg",color:"blue.600",children:["S/ ",parseFloat(a.total||0).toFixed(2)]})]})}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsx(O,{leftIcon:e.jsx(qt,{}),colorScheme:"blue",onClick:()=>s("/guest-order"),flex:1,children:"Nuevo Pedido"}),e.jsx(O,{leftIcon:e.jsx(Cs,{}),colorScheme:"green",variant:"outline",onClick:()=>s(`/receipt/${a.id}`),flex:1,children:"Ver Recibo"})]})]})})]})]})})})},ql=()=>{const{user:s}=Os(),{updateGuestOrder:t}=Kr(),r=xs(),[a,i]=S.useState(!0),[l,o]=S.useState([]),[c,d]=S.useState([]),[x,P]=S.useState([]),[A,R]=S.useState([]),[f,p]=S.useState("orders"),[T,k]=S.useState("all"),[y,w]=S.useState(null),[E,N]=S.useState(null),{isOpen:$,onOpen:L,onClose:g}=Ge(),{isOpen:q,onOpen:b,onClose:ae}=Ge(),{isOpen:v,onOpen:Q,onClose:W}=Ge(),[Z,ve]=S.useState({clientId:"",productId:"",quantity:1,notes:""});S.useEffect(()=>{oe(),pe(),Le(),z();const C=setInterval(oe,3e4);return()=>clearInterval(C)},[]);const oe=async()=>{try{console.log("ðŸ” DeliveryDashboard - Usuario actual:",s),console.log("ðŸ” DeliveryDashboard - ID del usuario:",s==null?void 0:s.id);const C=await Y.get("/api/delivery/orders");if(console.log("ðŸ” DeliveryDashboard - Respuesta del servidor:",C.data),C.data.success){const ee=C.data.data||[];console.log("ðŸ” DeliveryDashboard - Pedidos recibidos:",ee.length),o(Array.isArray(ee)?ee:[])}else console.error("Error en la respuesta:",C.data.message),o([])}catch(C){console.error("Error al cargar pedidos:",C),o([]),r({title:"Error",description:"No se pudieron cargar los pedidos",status:"error",duration:3e3,isClosable:!0})}finally{i(!1)}},pe=async()=>{try{const C=await Y.get(`/api/vouchers/delivery-person/${s==null?void 0:s.id}`);if(console.log("ðŸ” DeliveryDashboard - Vales recibidos:",C.data),C.data.success){const ee=C.data.data||[];d(Array.isArray(ee)?ee:[])}else d([])}catch(C){console.error("Error al cargar vales:",C),d([])}},Le=async()=>{try{const C=await Y.get("/api/clients");C.data.success&&Array.isArray(C.data.data)?P(C.data.data):P([])}catch(C){console.error("Error al cargar clientes:",C),P([])}},z=async()=>{try{const C=await Y.get("/api/products");C.data.success&&Array.isArray(C.data.data)?R(C.data.data):R([])}catch(C){console.error("Error al cargar productos:",C),R([])}},X=C=>{switch(C){case"confirmed":return"blue";case"preparing":return"yellow";case"ready":return"purple";case"delivered":return"green";case"cancelled":return"red";default:return"gray"}},Se=C=>{switch(C){case"confirmed":return"Confirmado";case"preparing":return"Preparando";case"ready":return"Listo";case"delivered":return"Entregado";case"cancelled":return"Cancelado";default:return"Desconocido"}},ie=(C,ee)=>{if(ee==="suscripcion")return ks;switch(C){case"cash":case"efectivo":return bs;case"plin":return Ks;case"yape":return Ks;case"transfer":return Vs;default:return bs}},ne={total:l.length,confirmed:l.filter(C=>C.status==="confirmed").length,preparing:l.filter(C=>C.status==="preparing").length,ready:l.filter(C=>C.status==="ready").length,delivered:l.filter(C=>C.status==="delivered").length,cancelled:l.filter(C=>C.status==="cancelled").length},Ie=l.filter(C=>T==="all"?!0:T==="asignado"?C.status==="confirmed":T==="en_camino"?C.status==="preparing"||C.status==="ready":T==="entregado"?C.status==="delivered":!0),fe=(C,ee)=>{const V=encodeURIComponent(ee);window.open(`https://wa.me/51${C}?text=${V}`,"_blank")},D=C=>{const ee=encodeURIComponent(C);window.open(`https://www.google.com/maps/search/?api=1&query=${ee}`,"_blank")},B=C=>{w(C),b()},je=(C,ee)=>{w({...C,newStatus:ee}),L()},I=async()=>{if(y)try{const C={status:y.newStatus};await t(y.id,C),r({title:"Estado actualizado",description:`El pedido ahora estÃ¡ ${Se(y.newStatus).toLowerCase()}`,status:"success",duration:3e3,isClosable:!0}),g(),w(null),oe()}catch{r({title:"Error",description:"No se pudo actualizar el estado",status:"error",duration:3e3,isClosable:!0})}},be=C=>{var ee,V,Ae,Ee;return e.jsx(F,{variant:"outline",shadow:"sm",borderRadius:"lg",children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(u,{spacing:{base:2,md:3},align:"stretch",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(u,{align:"start",spacing:.5,flex:1,minW:0,children:[e.jsx(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},noOfLines:1,children:C.orderNumber||`#${C.id}`}),e.jsx(n,{fontSize:{base:"2xs",md:"xs"},color:"gray.500",noOfLines:1,children:C.type==="regular"?"Cliente Frecuente":"Cliente Visitante"})]}),e.jsx(Ce,{colorScheme:X(C.status),fontSize:{base:"2xs",md:"xs"},px:{base:1,md:2},py:.5,children:Se(C.status)})]}),e.jsxs(u,{spacing:{base:1.5,md:2},align:"stretch",children:[e.jsxs(h,{spacing:2,w:"full",children:[e.jsx(Us,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},fontWeight:"medium",noOfLines:1,flex:1,children:C.clientName||((ee=C.client)==null?void 0:ee.name)||"Sin nombre"})]}),e.jsxs(h,{spacing:2,w:"full",children:[e.jsx(Hs,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,flex:1,children:C.clientPhone||((V=C.client)==null?void 0:V.phone)||"Sin telÃ©fono"}),e.jsx(Oe,{label:"Enviar WhatsApp",children:e.jsx(ke,{size:"sm",icon:e.jsx(ct,{}),colorScheme:"green",variant:"ghost",onClick:()=>{var Je;return fe(C.clientPhone||((Je=C.client)==null?void 0:Je.phone),`Hola! Soy el repartidor de AquaYara. Estoy en camino con tu pedido ${C.orderNumber||`#${C.id}`}. Â¿Te parece bien?`)}})})]}),e.jsxs(h,{spacing:2,w:"full",children:[e.jsx(wt,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:2,flex:1,children:C.clientAddress||((Ae=C.client)==null?void 0:Ae.address)||"Sin direcciÃ³n"}),e.jsx(Oe,{label:"Abrir en Google Maps",children:e.jsx(ke,{size:"sm",icon:e.jsx(ao,{}),colorScheme:"blue",variant:"ghost",onClick:()=>{var Je;return D(C.clientAddress||((Je=C.client)==null?void 0:Je.address))}})})]}),e.jsxs(h,{spacing:2,w:"full",children:[e.jsx(wt,{size:12,color:"#718096"}),e.jsxs(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,flex:1,children:["Distrito: ",C.clientDistrict||((Ee=C.client)==null?void 0:Ee.district)||C.deliveryDistrict||"Sin distrito"]})]})]}),e.jsxs(u,{spacing:2,align:"stretch",w:"full",children:[!1,e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(h,{spacing:2,flex:1,minW:0,children:[e.jsx(le,{as:ie(C.paymentType,C.paymentMethod),size:14}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,children:C.paymentMethod==="vale"?"A CrÃ©dito (Vale)":C.paymentMethod==="suscripcion"?"SuscripciÃ³n":C.paymentMethod==="contraentrega"?C.paymentType==="plin"?"Contraentrega - PLIN":C.paymentType==="yape"?"Contraentrega - Yape":C.paymentType==="cash"?"Contraentrega - Efectivo":"Contraentrega":C.paymentType==="plin"?"PLIN":C.paymentType==="yape"?"Yape":(C.paymentType==="cash","Efectivo")})]}),e.jsx(n,{fontWeight:"bold",fontSize:{base:"xs",md:"sm"},color:C.paymentMethod==="vale"?"orange.600":"green.600",children:C.paymentMethod==="vale"?"Sin cobro":`S/ ${parseFloat(C.total||C.totalAmount||0).toFixed(2)}`})]}),e.jsx(Ce,{colorScheme:C.paymentMethod==="vale"?"orange":C.paymentMethod==="suscripcion"?"purple":C.paymentType==="plin"||C.paymentType==="yape"?"blue":"green",fontSize:{base:"2xs",md:"xs"},px:2,py:1,borderRadius:"md",children:C.paymentMethod==="vale"?"ðŸ’³ NO COBRAR - A CrÃ©dito":C.paymentMethod==="suscripcion"?"ðŸ“… NO COBRAR - SuscripciÃ³n":C.paymentType==="plin"||C.paymentType==="yape"?"ðŸ“± NO COBRAR - Pago Digital":"ðŸ’° COBRAR - Efectivo"})]}),C.products&&C.products.length>0&&e.jsxs(u,{spacing:{base:1,md:1.5},align:"stretch",children:[e.jsx(n,{fontSize:{base:"2xs",md:"xs"},fontWeight:"bold",color:"gray.600",children:"Productos:"}),Array.isArray(C.products)&&C.products.map((Je,gs)=>e.jsxs(h,{justify:"space-between",fontSize:{base:"2xs",md:"xs"},w:"full",children:[e.jsx(n,{noOfLines:1,flex:1,minW:0,children:Je.name||Je.productName}),e.jsxs(n,{fontWeight:"bold",color:"blue.600",flexShrink:0,px:1,children:["x",Je.quantity]}),e.jsxs(n,{color:"green.600",minW:"fit-content",textAlign:"right",flexShrink:0,children:["S/ ",parseFloat(Je.unitPrice||Je.price||0).toFixed(2)]})]},gs))]}),C.paymentMethod==="vale"&&e.jsxs(Te,{status:"warning",size:"sm",borderRadius:"md",children:[e.jsx(De,{}),e.jsx(n,{fontSize:{base:"2xs",md:"xs"},fontWeight:"bold",noOfLines:1,children:"âš ï¸ PEDIDO A CRÃ‰DITO - NO COBRAR NADA"})]}),C.notes&&e.jsxs(Te,{status:"info",size:"sm",borderRadius:"md",children:[e.jsx(De,{}),e.jsx(n,{fontSize:{base:"2xs",md:"xs"},noOfLines:2,children:C.notes})]}),e.jsxs(u,{spacing:{base:2,md:3},align:"stretch",children:[e.jsx(h,{spacing:2,justify:"center",children:e.jsx(Oe,{label:"Ver detalles",children:e.jsx(ke,{size:{base:"sm",md:"md"},icon:e.jsx(qs,{}),onClick:()=>B(C),"aria-label":"Ver detalles",colorScheme:"blue",variant:"outline"})})}),C.status==="confirmed"&&e.jsx(O,{size:{base:"sm",md:"md"},colorScheme:"purple",leftIcon:e.jsx(ho,{}),onClick:()=>je(C,"preparing"),w:"full",fontSize:{base:"xs",md:"sm"},children:"Iniciar PreparaciÃ³n"}),C.status==="preparing"&&e.jsx(O,{size:{base:"sm",md:"md"},colorScheme:"blue",leftIcon:e.jsx(Cs,{}),onClick:()=>je(C,"ready"),w:"full",fontSize:{base:"xs",md:"sm"},children:"Listo para Entrega"}),C.status==="ready"&&e.jsx(O,{size:{base:"sm",md:"md"},colorScheme:"green",leftIcon:e.jsx(Ps,{}),onClick:()=>je(C,"delivered"),w:"full",fontSize:{base:"xs",md:"sm"},children:"Marcar Entregado"})]})]})})},`${C.type}-${C.id}`)},$e=()=>e.jsxs(Ke,{isOpen:$,onClose:g,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Actualizar Estado del Pedido"}),e.jsx(es,{}),e.jsx(Qe,{children:e.jsx(u,{spacing:4,children:y&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{children:["Â¿Confirmar cambio de estado del pedido #",y.id,"?"]}),e.jsxs(n,{fontWeight:"bold",children:[y.newStatus==="preparing"&&"Iniciar PreparaciÃ³n",y.newStatus==="ready"&&"Marcar como Listo",y.newStatus==="delivered"&&"Marcar como Entregado"]})]})})}),e.jsxs(As,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:g,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:I,children:"Confirmar"})]})]})]}),Fe=()=>{var C,ee,V,Ae;return e.jsxs(Ke,{isOpen:q,onClose:ae,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Detalles del Pedido"}),e.jsx(es,{}),e.jsx(Qe,{children:y&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(n,{fontWeight:"bold",fontSize:"lg",children:["Pedido #",y.id]}),e.jsx(hs,{}),e.jsxs(u,{spacing:3,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Cliente:"}),e.jsx(n,{children:y.clientName||((C=y.client)==null?void 0:C.name)||"Sin nombre"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"TelÃ©fono:"}),e.jsx(n,{children:y.clientPhone||((ee=y.client)==null?void 0:ee.phone)||"Sin telÃ©fono"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"DirecciÃ³n:"}),e.jsx(n,{children:y.clientAddress||((V=y.client)==null?void 0:V.address)||"Sin direcciÃ³n"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Distrito:"}),e.jsx(n,{children:y.clientDistrict||((Ae=y.client)==null?void 0:Ae.district)||y.deliveryDistrict||"Sin distrito"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado:"}),e.jsx(Ce,{colorScheme:X(y.status),children:Se(y.status)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"MÃ©todo de pago:"}),e.jsxs(h,{children:[e.jsx(le,{as:ie(y.paymentType,y.paymentMethod),size:16}),e.jsx(n,{children:y.paymentMethod==="vale"?"A CrÃ©dito (Vale)":y.paymentMethod==="suscripcion"?"SuscripciÃ³n":y.paymentMethod==="contraentrega"?y.paymentType==="plin"?"Contraentrega - PLIN":y.paymentType==="yape"?"Contraentrega - Yape":y.paymentType==="cash"?"Contraentrega - Efectivo":"Contraentrega":y.paymentType==="plin"?"PLIN":y.paymentType==="yape"?"Yape":(y.paymentType==="cash","Efectivo")})]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Total:"}),e.jsx(n,{fontWeight:"bold",color:y.paymentMethod==="vale"?"orange.600":"green.600",children:y.paymentMethod==="vale"?"Sin cobro":`S/ ${parseFloat(y.total||y.totalAmount||0).toFixed(2)}`})]}),e.jsxs(Te,{status:y.paymentMethod==="vale"?"warning":y.paymentMethod==="suscripcion"||y.paymentType==="plin"||y.paymentType==="yape"?"info":"success",borderRadius:"md",children:[e.jsx(De,{}),e.jsx(n,{fontSize:"sm",fontWeight:"bold",children:y.paymentMethod==="vale"?"ðŸ’³ NO COBRAR - Este pedido es a crÃ©dito":y.paymentMethod==="suscripcion"?"ðŸ“… NO COBRAR - Este pedido es por suscripciÃ³n":y.paymentType==="plin"?"ðŸ“± NO COBRAR - El cliente pagarÃ¡ por PLIN":y.paymentType==="yape"?"ðŸ“± NO COBRAR - El cliente pagarÃ¡ por Yape":"ðŸ’° COBRAR - El cliente pagarÃ¡ en efectivo"})]})]}),y.products&&y.products.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(hs,{}),e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsx(n,{fontWeight:"bold",children:"Productos:"}),Array.isArray(y.products)&&y.products.map((Ee,Je)=>{var gs;return e.jsxs(h,{justify:"space-between",fontSize:"sm",children:[e.jsx(n,{flex:1,children:((gs=Ee.product)==null?void 0:gs.name)||Ee.name||"Producto desconocido"}),e.jsxs(n,{fontWeight:"bold",children:[Ee.quantity," x S/ ",parseFloat(Ee.price||Ee.unitPrice||0).toFixed(2)]})]},Je)})]})]})]})}),e.jsx(As,{children:e.jsx(O,{onClick:ae,children:"Cerrar"})})]})]})},te=()=>e.jsxs(Ke,{isOpen:v,onClose:W,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Crear Nuevo Vale"}),e.jsx(es,{}),e.jsx(Qe,{children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{children:[e.jsx(G,{children:"Cliente"}),e.jsx(rs,{placeholder:"Seleccionar cliente",children:x.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Producto"}),e.jsx(rs,{placeholder:"Seleccionar producto",children:A.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Cantidad"}),e.jsx(re,{type:"number",min:"1",defaultValue:"1"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas"}),e.jsx(Ns,{placeholder:"Notas adicionales..."})]})]})}),e.jsxs(As,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:W,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:W,children:"Crear Vale"})]})]})]});return a?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsx(_,{p:{base:2,sm:3,md:6},minH:"100vh",bg:"gray.50",children:e.jsxs(u,{spacing:{base:3,md:6},align:"stretch",children:[e.jsx(_,{bg:"white",p:{base:3,md:4},borderRadius:"lg",shadow:"sm",children:e.jsxs(u,{spacing:2,align:"start",children:[e.jsx(K,{size:{base:"sm",md:"lg"},color:"gray.800",children:"Panel de Repartidor"}),e.jsxs(n,{color:"gray.600",fontSize:{base:"xs",md:"md"},children:["Bienvenido, ",(console.log("ðŸ” Verificando nombre del usuario:",{firstName:s==null?void 0:s.firstName,lastName:s==null?void 0:s.lastName,username:s==null?void 0:s.username,hasFirstName:!!(s!=null&&s.firstName),hasLastName:!!(s!=null&&s.lastName),bothNames:!!(s!=null&&s.firstName&&(s!=null&&s.lastName))}),s!=null&&s.firstName&&(s!=null&&s.lastName)?`${s.firstName} ${s.lastName}`:(s==null?void 0:s.username)||"Repartidor"),". Gestiona tus entregas asignadas."]})]})}),e.jsxs(as,{columns:{base:2,sm:4},spacing:{base:2,md:4},children:[e.jsx(F,{shadow:"sm",borderRadius:"lg",children:e.jsxs(M,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(n,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"blue.600",children:ne.total}),e.jsx(n,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"Total Pedidos"})]})}),e.jsx(F,{shadow:"sm",borderRadius:"lg",children:e.jsxs(M,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(n,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"orange.600",children:ne.confirmed+ne.preparing+ne.ready}),e.jsx(n,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"En Proceso"})]})}),e.jsx(F,{shadow:"sm",borderRadius:"lg",children:e.jsxs(M,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(n,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"green.600",children:ne.delivered}),e.jsx(n,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"Entregados"})]})}),e.jsx(F,{shadow:"sm",borderRadius:"lg",children:e.jsxs(M,{textAlign:"center",p:{base:2,md:4},children:[e.jsx(n,{fontSize:{base:"xl",md:"2xl"},fontWeight:"bold",color:"red.600",children:ne.cancelled}),e.jsx(n,{fontSize:{base:"2xs",md:"sm"},color:"gray.600",noOfLines:1,children:"Cancelados"})]})})]}),e.jsx(_,{bg:"white",borderRadius:"lg",shadow:"sm",overflow:"hidden",children:e.jsxs(si,{index:f==="orders"?0:1,onChange:C=>p(C===0?"orders":"vouchers"),children:[e.jsxs(ti,{bg:"gray.50",p:1,children:[e.jsx(an,{fontSize:{base:"xs",md:"sm"},px:{base:2,md:4},py:{base:2,md:3},_selected:{bg:"white",shadow:"sm"},flex:1,minW:0,children:e.jsxs(u,{spacing:1,children:[e.jsx(hr,{size:12}),e.jsxs(n,{fontSize:{base:"2xs",md:"xs"},noOfLines:1,children:["Pedidos (",l.length,")"]})]})}),e.jsx(an,{fontSize:{base:"xs",md:"sm"},px:{base:2,md:4},py:{base:2,md:3},_selected:{bg:"white",shadow:"sm"},flex:1,minW:0,children:e.jsxs(u,{spacing:1,children:[e.jsx(bs,{size:12}),e.jsxs(n,{fontSize:{base:"2xs",md:"xs"},noOfLines:1,children:["Vales (",c.length,")"]})]})})]}),e.jsxs(ri,{children:[e.jsxs(on,{px:{base:2,md:4},py:{base:3,md:4},children:[e.jsx(F,{shadow:"sm",mb:4,children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(u,{spacing:{base:3,md:4},align:"stretch",children:[e.jsxs(U,{children:[e.jsx(G,{fontSize:{base:"sm",md:"md"},children:"Filtrar por Estado"}),e.jsxs(rs,{value:T,onChange:C=>k(C.target.value),size:{base:"sm",md:"md"},children:[e.jsx("option",{value:"all",children:"Todos los pedidos"}),e.jsx("option",{value:"asignado",children:"Asignados"}),e.jsx("option",{value:"en_camino",children:"En Camino"}),e.jsx("option",{value:"entregado",children:"Entregados"})]})]}),e.jsxs(n,{fontSize:{base:"xs",md:"sm"},color:"gray.600",textAlign:"center",children:["Mostrando ",Ie.length," de ",l.length," pedidos"]})]})})}),Ie.length>0?e.jsx(u,{spacing:{base:3,md:4},align:"stretch",children:Ie.map(be)}):e.jsx(ls,{h:"200px",bg:"white",borderRadius:"lg",shadow:"sm",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:hr,boxSize:12,color:"gray.400"}),e.jsxs(n,{color:"gray.500",fontSize:{base:"sm",md:"lg"},textAlign:"center",children:["No hay pedidos ",T==="all"?"":`con estado ${Se(T).toLowerCase()}`]}),e.jsx(O,{variant:"outline",size:{base:"sm",md:"md"},onClick:()=>k("all"),children:"Ver todos los pedidos"})]})})]}),e.jsx(on,{px:{base:2,md:4},py:{base:3,md:4},children:e.jsxs(u,{spacing:{base:4,md:6},align:"stretch",children:[e.jsx(_,{bg:"white",p:{base:3,md:4},borderRadius:"lg",shadow:"sm",children:e.jsxs(u,{spacing:2,align:"start",children:[e.jsx(K,{size:{base:"sm",md:"md"},color:"gray.800",children:"Mis Vales"}),e.jsx(n,{color:"gray.600",fontSize:{base:"xs",md:"sm"},children:"Gestiona los vales que has creado"})]})}),e.jsx(_,{children:e.jsx(O,{colorScheme:"blue",leftIcon:e.jsx(ut,{}),onClick:Q,size:{base:"sm",md:"md"},w:"full",children:"Crear Nuevo Vale"})}),c.length>0?e.jsx(u,{spacing:{base:3,md:4},align:"stretch",children:c.map(C=>{var ee,V;return e.jsx(F,{variant:"outline",shadow:"sm",borderRadius:"lg",children:e.jsx(M,{p:{base:3,md:4},children:e.jsxs(u,{spacing:{base:2,md:3},align:"stretch",children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsxs(n,{fontWeight:"bold",fontSize:{base:"sm",md:"md"},children:["Vale #",C.id]}),e.jsx(Ce,{colorScheme:C.status==="pending"?"orange":C.status==="delivered"?"blue":"green",fontSize:{base:"2xs",md:"xs"},children:C.status==="pending"?"Pendiente":C.status==="delivered"?"Entregado":"Pagado"})]}),e.jsxs(u,{spacing:{base:1,md:2},align:"stretch",children:[e.jsxs(h,{spacing:2,children:[e.jsx(Us,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,children:((ee=C.Client)==null?void 0:ee.name)||"Cliente no encontrado"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(hr,{size:12,color:"#718096"}),e.jsx(n,{fontSize:{base:"xs",md:"sm"},noOfLines:1,children:((V=C.product)==null?void 0:V.name)||"Producto no especificado"})]}),e.jsxs(h,{spacing:2,children:[e.jsx(n,{fontSize:{base:"xs",md:"sm"},children:"Cantidad:"}),e.jsx(n,{fontWeight:"bold",fontSize:{base:"xs",md:"sm"},children:C.quantity})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:{base:"xs",md:"sm"},children:"Total:"}),e.jsxs(n,{fontWeight:"bold",color:"green.600",fontSize:{base:"xs",md:"sm"},children:["S/ ",parseFloat(C.totalAmount||0).toFixed(2)]})]})]})]})})},C.id)})}):e.jsx(ls,{h:"200px",children:e.jsxs(u,{spacing:4,children:[e.jsx(le,{as:bs,boxSize:12,color:"gray.400"}),e.jsx(n,{color:"gray.500",fontSize:"lg",children:"No has creado ningÃºn vale aÃºn"}),e.jsx(O,{colorScheme:"blue",leftIcon:e.jsx(ut,{}),onClick:Q,children:"Crear tu primer vale"})]})})]})})]})]})}),$e(),Fe(),te()]})})},Hl=()=>{const[s,t]=S.useState({username:"",password:""}),[r,a]=S.useState(!1),[i,l]=S.useState(!1),{login:o,error:c}=Os(),d=Ys(),x=xs(),P=R=>{t({...s,[R.target.name]:R.target.value})},A=async R=>{R.preventDefault(),l(!0);try{if((await o(s.username,s.password)).success){const p=Os.getState().user;p&&p.role==="repartidor"?(x({title:"Bienvenido",description:`Hola ${p.username}, bienvenido al panel de repartidor`,status:"success",duration:3e3,isClosable:!0}),d("/delivery-dashboard")):(x({title:"Acceso Denegado",description:"Esta cuenta no es de un repartidor",status:"error",duration:3e3,isClosable:!0}),Os.getState().logout())}}catch(f){console.error("Error en login:",f)}finally{l(!1)}};return e.jsx(_,{minH:"100vh",bg:"gray.50",display:"flex",alignItems:"center",justifyContent:"center",p:4,children:e.jsxs(F,{maxW:"md",w:"full",boxShadow:"xl",children:[e.jsx(Pe,{textAlign:"center",pb:2,children:e.jsxs(u,{spacing:4,children:[e.jsx(_,{color:"purple.600",fontSize:"4xl",children:e.jsx(Cs,{})}),e.jsx(K,{size:"lg",color:"gray.700",children:"Panel de Repartidor"}),e.jsx(n,{color:"gray.600",fontSize:"sm",children:"Inicia sesiÃ³n para gestionar tus pedidos asignados"})]})}),e.jsx(M,{pt:0,children:e.jsx("form",{onSubmit:A,children:e.jsxs(u,{spacing:4,children:[c&&e.jsxs(Te,{status:"error",borderRadius:"md",children:[e.jsx(De,{}),c]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Usuario"}),e.jsx(re,{name:"username",value:s.username,onChange:P,placeholder:"Ingresa tu usuario",size:"lg",autoComplete:"username"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"ContraseÃ±a"}),e.jsxs(Pt,{size:"lg",children:[e.jsx(re,{name:"password",type:r?"text":"password",value:s.password,onChange:P,placeholder:"Ingresa tu contraseÃ±a"}),e.jsx($n,{children:e.jsx(ke,{"aria-label":r?"Ocultar contraseÃ±a":"Mostrar contraseÃ±a",icon:r?e.jsx(ea,{}):e.jsx(qs,{}),variant:"ghost",onClick:()=>a(!r)})})]})]}),e.jsx(O,{type:"submit",colorScheme:"purple",size:"lg",w:"full",isLoading:i,loadingText:"Iniciando sesiÃ³n...",leftIcon:e.jsx(Cs,{}),children:"Iniciar SesiÃ³n"}),e.jsx(hs,{}),e.jsxs(u,{spacing:2,textAlign:"center",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Â¿No eres repartidor?"}),e.jsxs(h,{spacing:4,children:[e.jsx(br,{color:"blue.500",onClick:()=>d("/"),_hover:{textDecoration:"underline"},children:"Panel de AdministraciÃ³n"}),e.jsx(n,{color:"gray.400",children:"|"}),e.jsx(br,{color:"green.500",onClick:()=>d("/client-login"),_hover:{textDecoration:"underline"},children:"Ãrea de Clientes"})]})]})]})})})]})})},Ul=()=>{const[s,t]=S.useState([]),[r,a]=S.useState(!0),i=xs(),l=Me("white","gray.800"),o=Me("gray.200","gray.600"),c=Me("gray.700","gray.200"),d=Me("blue.50","blue.900"),x=Me("green.500","green.300"),P=Me("blue.600","blue.300");S.useEffect(()=>{A()},[]);const A=async()=>{var p;try{a(!0),console.log("ðŸ”„ SubscriptionPlansCard: Cargando planes...");const T=await Y.get("/api/subscription-plans");console.log("ðŸ“¦ SubscriptionPlansCard: Respuesta:",T.data),t(T.data.data||[]),console.log("âœ… SubscriptionPlansCard: Planes cargados:",((p=T.data.data)==null?void 0:p.length)||0)}catch(T){console.error("âŒ SubscriptionPlansCard: Error al cargar planes:",T),i({title:"Error",description:"No se pudieron cargar los planes de suscripciÃ³n",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}},R=p=>p===0?"Sin bonificaciÃ³n":p===1?"1 recarga mensual gratis":`${p} recargas mensual gratis`,f=p=>{const T=["blue","green","purple","orange","pink","teal","red"];return T[p%T.length]};return r?e.jsx(ls,{py:10,children:e.jsxs(u,{spacing:4,children:[e.jsx(vs,{size:"xl",color:"blue.500"}),e.jsx(n,{color:"gray.500",children:"Cargando planes de suscripciÃ³n..."})]})}):e.jsxs(_,{children:[e.jsx(F,{bg:d,borderColor:o,mb:6,children:e.jsx(M,{children:e.jsxs(u,{spacing:4,textAlign:"center",children:[e.jsx(K,{size:"lg",color:c,children:"ðŸš° Cartilla de Suscripciones AquaYara"}),e.jsx(n,{color:c,fontSize:"lg",children:"Por el pago mensual de cierta cantidad de bidones, recibe bonificaciones por ser un buen cliente"}),e.jsxs(h,{spacing:4,wrap:"wrap",justify:"center",children:[e.jsxs(h,{children:[e.jsx(le,{as:Ps,color:"green.500"}),e.jsx(n,{fontSize:"sm",children:"VÃ¡lido solo para clientes que pagan adelantado una mensualidad"})]}),e.jsxs(h,{children:[e.jsx(le,{as:Cs,color:"blue.500"}),e.jsx(n,{fontSize:"sm",children:"Control con sistema y cuaderno con firma"})]}),e.jsxs(h,{children:[e.jsx(le,{as:lo,color:"purple.500"}),e.jsx(n,{fontSize:"sm",children:"Contrato y factura mensual"})]})]})]})})}),e.jsx(as,{columns:{base:1,md:2,lg:3},spacing:6,children:s.map(p=>e.jsxs(F,{bg:l,borderColor:o,borderWidth:"2px",_hover:{transform:"translateY(-4px)",shadow:"lg",borderColor:f(p.sortOrder)+".300"},transition:"all 0.3s ease",position:"relative",children:[p.bonusBottles>0&&e.jsx(_,{position:"absolute",top:-2,right:4,children:e.jsxs(Ce,{colorScheme:"green",fontSize:"xs",px:3,py:1,borderRadius:"full",transform:"rotate(15deg)",children:[e.jsx(le,{as:Hr,mr:1}),parseFloat(p.bonusPercentage).toFixed(1),"% BONUS"]})}),e.jsx(Pe,{pb:2,children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsx(K,{size:"md",color:c,textAlign:"center",children:p.name}),e.jsx(n,{fontSize:"sm",color:"gray.500",textAlign:"center",children:p.description})]})}),e.jsx(M,{pt:0,children:e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(_,{textAlign:"center",children:[e.jsxs(n,{fontSize:"2xl",fontWeight:"bold",color:P,children:[p.totalBottles," Bidones"]}),p.bonusBottles>0&&e.jsxs(n,{fontSize:"sm",color:x,fontWeight:"semibold",children:["+ ",p.bonusBottles," bonus"]})]}),e.jsx(hs,{}),e.jsxs(u,{spacing:2,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Pago mensual:"}),e.jsxs(n,{fontSize:"lg",fontWeight:"bold",color:P,children:["S/ ",parseFloat(p.monthlyPrice).toFixed(2)]})]}),e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Precio por bidÃ³n:"}),e.jsxs(n,{fontSize:"md",fontWeight:"semibold",color:c,children:["S/ ",parseFloat(p.pricePerBottle).toFixed(2)]})]})]}),e.jsx(hs,{}),e.jsxs(_,{textAlign:"center",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",mb:1,children:"BonificaciÃ³n:"}),e.jsx(n,{fontSize:"md",fontWeight:"semibold",color:x,children:R(p.bonusBottles)})]}),e.jsx(_,{textAlign:"center",children:e.jsxs(h,{justify:"center",spacing:2,children:[e.jsx(le,{as:Cs,color:"blue.500"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["MÃ¡x. ",p.maxDailyDelivery," entregas diarias"]})]})}),e.jsx(O,{colorScheme:f(p.sortOrder),size:"md",w:"full",mt:2,_hover:{transform:"scale(1.02)",shadow:"md"},transition:"all 0.2s ease",children:"Seleccionar Plan"})]})})]},p.id))}),e.jsx(F,{bg:l,borderColor:o,mt:6,children:e.jsx(M,{children:e.jsxs(u,{spacing:4,textAlign:"center",children:[e.jsx(K,{size:"md",color:c,children:"InformaciÃ³n Importante"}),e.jsxs(as,{columns:{base:1,md:2},spacing:4,w:"full",children:[e.jsxs(_,{children:[e.jsx(n,{fontWeight:"semibold",color:c,mb:2,children:"Condiciones del Servicio:"}),e.jsxs(u,{spacing:1,align:"start",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ Servicio para clientes domÃ©sticos y empresariales"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ VÃ¡lido solo para clientes que pagan adelantado una mensualidad"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ Control con sistema y cuaderno con firma, fecha, hora y nombre de recepciÃ³n"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ Contrato y factura mensual"})]})]}),e.jsxs(_,{children:[e.jsx(n,{fontWeight:"semibold",color:c,mb:2,children:"Beneficios:"}),e.jsxs(u,{spacing:1,align:"start",children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ Descuentos progresivos segÃºn cantidad"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ Bonificaciones en bidones adicionales"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ Entregas programadas y controladas"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:"â€¢ AtenciÃ³n prioritaria al cliente"})]})]})]})]})})})]})},Gl=()=>{var B,je;const[s,t]=S.useState([]),[r,a]=S.useState([]),[i,l]=S.useState([]),[o,c]=S.useState(!0),[d,x]=S.useState(""),[P,A]=S.useState("all"),[R,f]=S.useState(null),[p,T]=S.useState("management"),{isOpen:k,onOpen:y,onClose:w}=Ge(),{isOpen:E,onOpen:N,onClose:$}=Ge(),{isOpen:L,onOpen:g,onClose:q}=Ge(),[b,ae]=S.useState({clientId:"",planId:"",startDate:"",notes:""}),[v,Q]=S.useState({id:"",status:"",remainingBottles:"",notes:""}),W=xs();Gs({base:!0,md:!1});const Z=Me("white","gray.800"),ve=Me("gray.200","gray.600");S.useEffect(()=>{oe()},[]);const oe=async()=>{c(!0);try{const[I,be]=await Promise.all([Y.get("/api/clients"),Y.get("/api/subscriptions")]);t(be.data.data||[]),a(I.data.data||[]),l([{id:1,name:"Plan BÃ¡sico",bottles:20,bonus:2,price:100,description:"20 bidones + 2 extra"},{id:2,name:"Plan Intermedio",bottles:30,bonus:5,price:150,description:"30 bidones + 5 extra"},{id:3,name:"Plan Premium",bottles:50,bonus:10,price:250,description:"50 bidones + 10 extra"}])}catch(I){console.error("Error al cargar datos:",I),W({title:"Error",description:"No se pudieron cargar los datos",status:"error",duration:3e3,isClosable:!0})}finally{c(!1)}},pe=(Array.isArray(s)?s:[]).filter(I=>{var Fe,te,C,ee;const be=((te=(Fe=I.client)==null?void 0:Fe.name)==null?void 0:te.toLowerCase().includes(d.toLowerCase()))||((ee=(C=I.client)==null?void 0:C.email)==null?void 0:ee.toLowerCase().includes(d.toLowerCase())),$e=P==="all"||I.status===P;return be&&$e}),Le=I=>{switch(I){case"active":return"green";case"paused":return"yellow";case"cancelled":return"red";case"expired":return"gray";default:return"gray"}},z=I=>{switch(I){case"active":return"Activa";case"paused":return"Pausada";case"cancelled":return"Cancelada";case"expired":return"Expirada";default:return"Desconocido"}},X=I=>new Date(I).toLocaleDateString("es-ES"),Se=async()=>{try{const I=r.find(Fe=>Fe.id===parseInt(b.clientId)),be=i.find(Fe=>Fe.id===parseInt(b.planId));if(!I||!be){W({title:"Error",description:"Cliente o plan no encontrado",status:"error",duration:3e3,isClosable:!0});return}const $e={clientId:I.id,clientDni:I.documentNumber,subscriptionType:be.name,totalBottles:be.bottles+be.bonus,totalAmount:be.price,paidAmount:be.price,expiryDate:null,notes:b.notes};await Y.post("/api/subscriptions",$e),W({title:"SuscripciÃ³n creada",description:"La suscripciÃ³n se ha creado correctamente",status:"success",duration:3e3,isClosable:!0}),w(),ae({clientId:"",planId:"",startDate:"",notes:""}),oe()}catch(I){console.error("Error al crear suscripciÃ³n:",I),W({title:"Error",description:"No se pudo crear la suscripciÃ³n",status:"error",duration:3e3,isClosable:!0})}},ie=async()=>{try{await Y.put(`/api/subscriptions/${v.id}`,v),W({title:"SuscripciÃ³n actualizada",description:"La suscripciÃ³n se ha actualizado correctamente",status:"success",duration:3e3,isClosable:!0}),$(),Q({id:"",status:"",remainingBottles:"",notes:""}),oe()}catch(I){console.error("Error al actualizar suscripciÃ³n:",I),W({title:"Error",description:"No se pudo actualizar la suscripciÃ³n",status:"error",duration:3e3,isClosable:!0})}},ne=I=>{f(I),g()},Ie=I=>{Q({id:I.id,status:I.status,remainingBottles:I.remainingBottles,notes:I.notes||""}),N()},fe=s.filter(I=>I.status==="active").length,D=s.filter(I=>I.status==="active").reduce((I,be)=>{var $e;return I+((($e=be.plan)==null?void 0:$e.price)||0)},0);return o?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsx(_,{p:6,children:e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(ys,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(K,{size:"lg",children:[e.jsx(le,{as:ks,mr:2}),"GestiÃ³n de Suscripciones"]}),e.jsx(n,{color:"gray.600",children:"Administra las suscripciones de clientes frecuentes"})]}),e.jsxs(h,{spacing:4,children:[e.jsx(O,{leftIcon:e.jsx(co,{}),colorScheme:p==="management"?"blue":"gray",variant:p==="management"?"solid":"outline",onClick:()=>T("management"),children:"GestiÃ³n"}),e.jsx(O,{leftIcon:e.jsx(Hr,{}),colorScheme:p==="plans"?"blue":"gray",variant:p==="plans"?"solid":"outline",onClick:()=>T("plans"),children:"Cartilla de Planes"}),p==="management"&&e.jsx(O,{leftIcon:e.jsx(ut,{}),colorScheme:"blue",onClick:y,size:"lg",children:"Nueva SuscripciÃ³n"})]})]}),p==="plans"?e.jsx(Ul,{}):e.jsxs(e.Fragment,{children:[e.jsxs(as,{columns:{base:1,md:3},spacing:4,children:[e.jsx(F,{bg:Z,borderColor:ve,children:e.jsx(M,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Total Suscripciones"}),e.jsx(He,{children:s.length}),e.jsxs(Ue,{children:[e.jsx(ni,{type:"increase"}),fe," activas"]})]})})}),e.jsx(F,{bg:Z,borderColor:ve,children:e.jsx(M,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Ingresos Mensuales"}),e.jsxs(He,{children:["S/ ",D.toFixed(2)]}),e.jsx(Ue,{children:"De suscripciones activas"})]})})}),e.jsx(F,{bg:Z,borderColor:ve,children:e.jsx(M,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Planes Disponibles"}),e.jsx(He,{children:i.length}),e.jsx(Ue,{children:"Planes de suscripciÃ³n"})]})})})]}),e.jsx(F,{bg:Z,borderColor:ve,children:e.jsx(M,{children:e.jsxs(h,{spacing:4,wrap:"wrap",children:[e.jsxs(Pt,{maxW:"300px",children:[e.jsx(Fr,{pointerEvents:"none",children:e.jsx(le,{as:ra,color:"gray.300"})}),e.jsx(re,{placeholder:"Buscar por cliente...",value:d,onChange:I=>x(I.target.value)})]}),e.jsxs(rs,{value:P,onChange:I=>A(I.target.value),maxW:"200px",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"active",children:"Activas"}),e.jsx("option",{value:"paused",children:"Pausadas"}),e.jsx("option",{value:"cancelled",children:"Canceladas"}),e.jsx("option",{value:"expired",children:"Expiradas"})]})]})})}),e.jsxs(F,{bg:Z,borderColor:ve,children:[e.jsx(Pe,{children:e.jsx(K,{size:"md",children:"Suscripciones"})}),e.jsx(M,{children:pe.length===0?e.jsx(ls,{py:10,children:e.jsx(n,{color:"gray.500",fontSize:"lg",children:"No hay suscripciones registradas"})}):e.jsx(ai,{children:e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(ue,{children:"Cliente"}),e.jsx(ue,{children:"Plan"}),e.jsx(ue,{children:"Estado"}),e.jsx(ue,{children:"Bidones Restantes"}),e.jsx(ue,{children:"Fecha Inicio"}),e.jsx(ue,{children:"DuraciÃ³n"}),e.jsx(ue,{children:"Acciones"})]})}),e.jsx(nt,{children:(Array.isArray(pe)?pe:[]).map(I=>{var be,$e;return e.jsxs(fs,{children:[e.jsx(he,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:((be=I.client)==null?void 0:be.name)||"N/A"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:(($e=I.client)==null?void 0:$e.email)||"N/A"})]})}),e.jsx(he,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:I.subscriptionType||"N/A"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["S/ ",I.totalAmount||0]})]})}),e.jsx(he,{children:e.jsx(Ce,{colorScheme:Le(I.status),children:z(I.status)})}),e.jsx(he,{children:e.jsx(n,{fontWeight:"bold",color:"blue.600",children:I.remainingBottles||0})}),e.jsx(he,{children:X(I.purchaseDate)}),e.jsx(he,{children:e.jsx(n,{color:"green.600",fontWeight:"bold",children:"Hasta agotar bidones"})}),e.jsx(he,{children:e.jsxs(Rn,{children:[e.jsx(On,{as:O,size:"sm",variant:"ghost",children:e.jsx(le,{as:io})}),e.jsxs(Ln,{children:[e.jsx(yr,{icon:e.jsx(qs,{}),onClick:()=>ne(I),children:"Ver Detalles"}),e.jsx(yr,{icon:e.jsx(Tr,{}),onClick:()=>Ie(I),children:"Editar"})]})]})})]},I.id)})})]})})})]}),e.jsxs(Ke,{isOpen:k,onClose:w,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Nueva SuscripciÃ³n"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Cliente"}),e.jsx(rs,{placeholder:"Seleccionar cliente",value:b.clientId,onChange:I=>ae({...b,clientId:I.target.value}),children:(Array.isArray(r)?r:[]).map(I=>e.jsxs("option",{value:I.id,children:[I.name," - ",I.email]},I.id))})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Plan de SuscripciÃ³n"}),e.jsx(rs,{placeholder:"Seleccionar plan",value:b.planId,onChange:I=>ae({...b,planId:I.target.value}),children:(Array.isArray(i)?i:[]).map(I=>e.jsxs("option",{value:I.id,children:[I.name," - S/ ",I.price," (",I.bottles+I.bonus," bidones)"]},I.id))})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Fecha de Inicio"}),e.jsx(re,{type:"date",value:b.startDate,onChange:I=>ae({...b,startDate:I.target.value})})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas"}),e.jsx(Ns,{placeholder:"Notas adicionales...",value:b.notes,onChange:I=>ae({...b,notes:I.target.value})})]})]})}),e.jsxs(As,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:w,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:Se,children:"Crear SuscripciÃ³n"})]})]})]}),e.jsxs(Ke,{isOpen:E,onClose:$,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Editar SuscripciÃ³n"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Estado"}),e.jsxs(rs,{value:v.status,onChange:I=>Q({...v,status:I.target.value}),children:[e.jsx("option",{value:"active",children:"Activa"}),e.jsx("option",{value:"paused",children:"Pausada"}),e.jsx("option",{value:"cancelled",children:"Cancelada"}),e.jsx("option",{value:"expired",children:"Expirada"})]})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Bidones Restantes"}),e.jsxs(Wn,{value:v.remainingBottles,onChange:I=>Q({...v,remainingBottles:I}),min:0,children:[e.jsx(Mn,{}),e.jsxs(ii,{children:[e.jsx(oi,{}),e.jsx(li,{})]})]})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas"}),e.jsx(Ns,{placeholder:"Notas adicionales...",value:v.notes,onChange:I=>Q({...v,notes:I.target.value})})]})]})}),e.jsxs(As,{children:[e.jsx(O,{variant:"ghost",mr:3,onClick:$,children:"Cancelar"}),e.jsx(O,{colorScheme:"blue",onClick:ie,children:"Actualizar SuscripciÃ³n"})]})]})]}),e.jsxs(Ke,{isOpen:L,onClose:q,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Detalles de la SuscripciÃ³n"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:R&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(as,{columns:2,spacing:4,children:[e.jsxs(_,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Cliente:"}),e.jsx(n,{children:((B=R.client)==null?void 0:B.name)||"N/A"})]}),e.jsxs(_,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Email:"}),e.jsx(n,{children:((je=R.client)==null?void 0:je.email)||"N/A"})]}),e.jsxs(_,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Tipo de SuscripciÃ³n:"}),e.jsx(n,{children:R.subscriptionType||"N/A"})]}),e.jsxs(_,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Total Pagado:"}),e.jsxs(n,{children:["S/ ",R.totalAmount||0]})]}),e.jsxs(_,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Estado:"}),e.jsx(Ce,{colorScheme:Le(R.status),children:z(R.status)})]}),e.jsxs(_,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Bidones Restantes:"}),e.jsx(n,{fontWeight:"bold",color:"blue.600",children:R.remainingBottles||0})]}),e.jsxs(_,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Fecha de Compra:"}),e.jsx(n,{children:X(R.purchaseDate)})]}),e.jsxs(_,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"DuraciÃ³n:"}),e.jsx(n,{color:"green.600",fontWeight:"bold",children:"Hasta agotar bidones"})]})]}),R.notes&&e.jsxs(_,{children:[e.jsx(n,{fontWeight:"bold",color:"gray.600",children:"Notas:"}),e.jsx(n,{children:R.notes})]})]})})]})]})]}),e.jsx(Ta,{})]})})},Yl=()=>{var ae;const[s,t]=S.useState([]),[r,a]=S.useState(!1),[i,l]=S.useState(null),[o,c]=S.useState(new Date),{isOpen:d,onOpen:x,onClose:P}=Ge(),{isOpen:A,onOpen:R,onClose:f}=Ge();Ge();const p=xs(),[T,k]=S.useState({clientId:"",amount:"",description:"",dueDate:"",status:"active"}),[y,w]=S.useState([]);S.useEffect(()=>{N(),E();const v=setInterval(()=>{N(),c(new Date)},3e4);return()=>clearInterval(v)},[]);const E=async()=>{try{const v=await Y.get("/api/clients");v.data.success&&w(v.data.data||[])}catch(v){console.error("Error al cargar clientes:",v)}},N=async()=>{var v;try{a(!0),console.log("ðŸ” Cargando vales agrupados por pedido desde /api/vouchers/by-order...");const Q=await Y.get("/api/vouchers/by-order");console.log("ðŸ“¦ Respuesta de vales agrupados:",Q.data),Q.data.success&&(t(Q.data.data||[]),console.log(`âœ… Vales agrupados cargados: ${((v=Q.data.data)==null?void 0:v.length)||0} pedidos`))}catch(Q){console.error("Error al cargar vales:",Q),p({title:"Error",description:"No se pudieron cargar los vales",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}},$=async()=>{try{(await Y.post("/api/vouchers",T)).data.success&&(p({title:"Vale creado",description:"El vale se ha creado exitosamente",status:"success",duration:3e3,isClosable:!0}),N(),P(),k({clientId:"",amount:"",description:"",dueDate:"",status:"active"}))}catch(v){console.error("Error al crear vale:",v),p({title:"Error",description:"No se pudo crear el vale",status:"error",duration:3e3,isClosable:!0})}},L=v=>{switch(v){case"pending":return"yellow";case"delivered":return"green";case"paid":return"blue";case"cancelled":return"red";default:return"gray"}},g=v=>{switch(v){case"pending":return"Pendiente";case"delivered":return"Entregado";case"paid":return"Pagado";case"cancelled":return"Cancelado";default:return v}},q=v=>{switch(v){case"pending":return ks;case"delivered":return Ps;case"paid":return bs;case"cancelled":return go;default:return Ps}},b={total:s.length,pending:s.filter(v=>v.status==="pending").length,delivered:s.filter(v=>v.status==="delivered").length,paid:s.filter(v=>v.status==="paid").length,totalAmount:s.reduce((v,Q)=>v+parseFloat(Q.totalAmount||0),0),pendingAmount:s.filter(v=>v.status==="pending").reduce((v,Q)=>v+parseFloat(Q.totalAmount||0),0),deliveredAmount:s.filter(v=>v.status==="delivered").reduce((v,Q)=>v+parseFloat(Q.totalAmount||0),0)};return e.jsxs(_,{p:6,children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(ys,{justify:"space-between",align:"center",children:[e.jsxs(_,{children:[e.jsx(K,{size:"lg",mb:2,children:"GestiÃ³n de Vales"}),e.jsx(n,{color:"gray.600",children:"Administra los vales de crÃ©dito de los clientes"}),e.jsxs(n,{color:"gray.400",fontSize:"xs",children:["Ãšltima actualizaciÃ³n: ",o.toLocaleTimeString()]})]}),e.jsx(O,{size:"sm",colorScheme:"blue",variant:"outline",onClick:()=>{N(),c(new Date)},isLoading:r,children:"Actualizar"})]}),e.jsxs(as,{columns:{base:1,sm:2,lg:4},spacing:4,children:[e.jsx(F,{children:e.jsx(M,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Total Vales"}),e.jsx(He,{color:"blue.500",children:b.total}),e.jsx(Ue,{children:"Vales creados"})]})})}),e.jsx(F,{children:e.jsx(M,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Pendientes"}),e.jsx(He,{color:"yellow.500",children:b.pending}),e.jsx(Ue,{children:"Por entregar"})]})})}),e.jsx(F,{children:e.jsx(M,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Entregados"}),e.jsx(He,{color:"green.500",children:b.delivered}),e.jsx(Ue,{children:"Completados"})]})})}),e.jsx(F,{children:e.jsx(M,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Pagados"}),e.jsx(He,{color:"blue.500",children:b.paid}),e.jsx(Ue,{children:"Cobrados"})]})})}),e.jsx(F,{children:e.jsx(M,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Monto Total"}),e.jsxs(He,{color:"purple.500",children:["S/ ",b.totalAmount.toFixed(2)]}),e.jsx(Ue,{children:"En vales"})]})})}),e.jsx(F,{children:e.jsx(M,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Pendiente"}),e.jsxs(He,{color:"yellow.500",children:["S/ ",b.pendingAmount.toFixed(2)]}),e.jsx(Ue,{children:"Por entregar"})]})})})]}),e.jsxs(F,{children:[e.jsx(Pe,{children:e.jsxs(ys,{justify:"space-between",align:"center",children:[e.jsx(K,{size:"md",children:"Lista de Vales"}),e.jsx(O,{leftIcon:e.jsx(ut,{}),colorScheme:"green",onClick:x,children:"Nuevo Vale"})]})}),e.jsx(M,{children:s.length===0?e.jsxs(Te,{status:"info",children:[e.jsx(De,{}),e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(n,{fontWeight:"bold",children:"No hay vales registrados"}),e.jsxs(n,{fontSize:"sm",children:['Los vales se crean automÃ¡ticamente cuando los clientes eligen la modalidad "vale" en sus pedidos.',e.jsx("br",{}),'Puedes crear vales manualmente usando el botÃ³n "Crear Vale" arriba.']})]})]}):e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(ue,{children:"Cliente"}),e.jsx(ue,{children:"Productos del Pedido"}),e.jsx(ue,{children:"Total del Pedido"}),e.jsx(ue,{children:"Estado"}),e.jsx(ue,{children:"Fecha CreaciÃ³n"}),e.jsx(ue,{children:"Fecha Vencimiento"}),e.jsx(ue,{children:"Acciones"})]})}),e.jsx(nt,{children:s.map(v=>{var Q,W;return e.jsxs(fs,{children:[e.jsx(he,{children:e.jsxs(u,{spacing:1,align:"start",children:[e.jsxs(h,{children:[e.jsx(Us,{size:14,color:"#718096"}),e.jsx(n,{fontWeight:"medium",children:((Q=v.client)==null?void 0:Q.name)||"Cliente no encontrado"})]}),e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["DNI: ",((W=v.client)==null?void 0:W.documentNumber)||"N/A"]})]})}),e.jsx(he,{children:e.jsxs(u,{spacing:1,align:"start",children:[(v.products||[]).map((Z,ve)=>e.jsxs(n,{fontSize:"sm",children:[Z.name," x",Z.quantity]},ve)),(!v.products||v.products.length===0)&&e.jsx(n,{fontSize:"sm",color:"gray.500",children:"Sin productos"})]})}),e.jsxs(he,{children:[e.jsxs(n,{fontWeight:"bold",color:"green.600",children:["S/ ",parseFloat(v.totalAmount||0).toFixed(2)]}),e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["Pedido #",v.guestOrderId||"Individual"]})]}),e.jsx(he,{children:e.jsxs(vr,{colorScheme:L(v.status),children:[e.jsx(ln,{as:q(v.status)}),e.jsx(Sr,{children:g(v.status)})]})}),e.jsxs(he,{children:[e.jsx(n,{fontSize:"sm",children:v.createdAt?new Date(v.createdAt).toLocaleDateString():"Sin fecha"}),e.jsx(n,{fontSize:"xs",color:"gray.500",children:v.createdAt?new Date(v.createdAt).toLocaleTimeString():""})]}),e.jsxs(he,{children:[e.jsx(n,{fontSize:"sm",color:v.dueDate&&new Date(v.dueDate)<new Date?"red.500":"gray.700",children:v.dueDate?new Date(v.dueDate).toLocaleDateString():"Sin vencimiento"}),v.dueDate&&new Date(v.dueDate)<new Date&&e.jsx(n,{fontSize:"xs",color:"red.500",fontWeight:"bold",children:"VENCIDO"})]}),e.jsx(he,{children:e.jsx(h,{spacing:2,children:e.jsx(Oe,{label:"Ver detalles",children:e.jsx(ke,{size:"sm",icon:e.jsx(qs,{}),onClick:()=>{l(v),R()}})})})})]},v.id)})})]})})]})]}),e.jsxs(Ke,{isOpen:d,onClose:P,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Crear Nuevo Vale"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Cliente"}),e.jsx(rs,{value:T.clientId,onChange:v=>k({...T,clientId:v.target.value}),placeholder:"Selecciona un cliente",children:y.map(v=>e.jsxs("option",{value:v.id,children:[v.name," - ",v.email]},v.id))})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Monto"}),e.jsx(re,{type:"number",value:T.amount,onChange:v=>k({...T,amount:v.target.value}),placeholder:"0.00"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"DescripciÃ³n"}),e.jsx(Ns,{value:T.description,onChange:v=>k({...T,description:v.target.value}),placeholder:"DescripciÃ³n del vale"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Fecha de Vencimiento"}),e.jsx(re,{type:"date",value:T.dueDate,onChange:v=>k({...T,dueDate:v.target.value})})]}),e.jsx(O,{colorScheme:"green",w:"full",onClick:$,leftIcon:e.jsx(ut,{}),children:"Crear Vale"})]})})]})]}),e.jsxs(Ke,{isOpen:A,onClose:f,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Detalles del Vale"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:i&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Cliente:"}),e.jsx(n,{children:((ae=i.client)==null?void 0:ae.name)||"Cliente no encontrado"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Monto:"}),e.jsxs(n,{color:"green.600",fontWeight:"bold",children:["S/ ",parseFloat(i.amount||0).toFixed(2)]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado:"}),e.jsxs(vr,{colorScheme:L(i.status),children:[e.jsx(ln,{as:q(i.status)}),e.jsx(Sr,{children:g(i.status)})]})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Fecha de Vencimiento:"}),e.jsx(n,{children:i.dueDate?new Date(i.dueDate).toLocaleDateString():"Sin fecha"})]}),i.description&&e.jsxs(_,{children:[e.jsx(n,{fontWeight:"bold",mb:2,children:"DescripciÃ³n:"}),e.jsx(n,{children:i.description})]})]})})]})]})]})},Xl=()=>{const[s,t]=S.useState(null),[r,a]=S.useState(!1),[i,l]=S.useState(new Date().getFullYear()),[o,c]=S.useState(new Date().getMonth()+1),[d,x]=S.useState(null),{isOpen:P,onOpen:A,onClose:R}=Ge(),f=xs(),p=Me("white","gray.800"),T=Me("gray.200","gray.600");S.useEffect(()=>{k()},[i,o]);const k=async()=>{try{a(!0);const g=await Y.get(`/api/reports/collection?year=${i}&month=${o}`);g.data.success&&(console.log("ðŸ” Datos del reporte de cobranza recibidos:",g.data.data),g.data.data.clients&&g.data.data.clients.length>0&&console.log("ðŸ” Primer cliente:",g.data.data.clients[0]),t(g.data.data))}catch(g){console.error("Error al cargar reporte:",g),f({title:"Error",description:"No se pudo cargar el reporte de cobranza",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}},y=g=>["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][g-1],w=g=>{const q=parseFloat(g)||0;return new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN"}).format(q)},E=g=>new Date(g).toLocaleDateString("es-ES"),N=g=>{x(g),A()},$=()=>{const g=new Date().getFullYear(),q=[];for(let b=g;b>=g-2;b--)q.push(b);return q},L=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}];return r?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsx(_,{p:6,children:e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(ys,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(_,{children:[e.jsx(K,{size:"lg",mb:2,children:e.jsxs(h,{children:[e.jsx(sa,{}),e.jsx(n,{children:"Reporte de Cobranza Mensual"})]})}),e.jsx(n,{color:"gray.600",children:"Total de deudas por cliente en vales pendientes de pago"})]}),e.jsx(O,{leftIcon:e.jsx(Vr,{}),colorScheme:"blue",variant:"outline",onClick:k,isLoading:r,children:"Actualizar"})]}),e.jsx(F,{bg:p,borderColor:T,children:e.jsx(M,{children:e.jsxs(h,{spacing:4,wrap:"wrap",children:[e.jsx(rs,{value:i,onChange:g=>l(parseInt(g.target.value)),maxW:"150px",children:$().map(g=>e.jsx("option",{value:g,children:g},g))}),e.jsx(rs,{value:o,onChange:g=>c(parseInt(g.target.value)),maxW:"200px",children:L.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]})})}),s?e.jsxs(e.Fragment,{children:[e.jsxs(as,{columns:{base:1,md:3},spacing:4,children:[e.jsx(F,{bg:p,borderColor:T,children:e.jsx(M,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"PerÃ­odo"}),e.jsxs(He,{fontSize:"lg",children:[y(s.period.month)," ",s.period.year]}),e.jsxs(Ue,{children:[e.jsx(ks,{style:{display:"inline",marginRight:"4px"}}),"Reporte mensual"]})]})})}),e.jsx(F,{bg:p,borderColor:T,children:e.jsx(M,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Clientes con Deuda"}),e.jsx(He,{color:"orange.500",children:s.summary.totalClients}),e.jsxs(Ue,{children:[e.jsx(na,{style:{display:"inline",marginRight:"4px"}}),"Clientes pendientes"]})]})})}),e.jsx(F,{bg:p,borderColor:T,children:e.jsx(M,{children:e.jsxs(Ve,{children:[e.jsx(qe,{children:"Total a Cobrar"}),e.jsx(He,{color:"red.500",children:w(s.summary.totalDebt)}),e.jsxs(Ue,{children:[e.jsx(bs,{style:{display:"inline",marginRight:"4px"}}),"Monto total"]})]})})})]}),e.jsxs(F,{bg:p,borderColor:T,children:[e.jsx(Pe,{children:e.jsx(K,{size:"md",children:"Clientes con Deuda Pendiente"})}),e.jsx(M,{children:s.clients.length===0?e.jsxs(Te,{status:"success",children:[e.jsx(De,{}),e.jsx(n,{children:"Â¡Excelente! No hay deudas pendientes para este perÃ­odo."})]}):e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(ue,{children:"Cliente"}),e.jsx(ue,{children:"Contacto"}),e.jsx(ue,{children:"Total Deuda"}),e.jsx(ue,{children:"Vales"}),e.jsx(ue,{children:"Acciones"})]})}),e.jsx(nt,{children:(s.clients||[]).map(g=>(console.log("ðŸ” Renderizando cliente:",{name:g.client.name,remainingAmount:g.remainingAmount,totalAmount:g.totalAmount,valesCount:g.valesCount}),e.jsxs(fs,{children:[e.jsx(he,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:g.client.name}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["DNI: ",g.client.documentNumber]})]})}),e.jsx(he,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsxs(h,{children:[e.jsx(Hs,{size:12,color:"#718096"}),e.jsx(n,{fontSize:"sm",children:g.client.phone})]}),e.jsxs(h,{children:[e.jsx(qr,{size:12,color:"#718096"}),e.jsx(n,{fontSize:"sm",children:g.client.email})]})]})}),e.jsx(he,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",color:"red.600",fontSize:"lg",children:w(g.remainingAmount||0)}),e.jsxs(n,{fontSize:"xs",color:"gray.500",children:["De ",w(g.totalAmount||0)," total"]})]})}),e.jsx(he,{children:e.jsx(vr,{colorScheme:"blue",children:e.jsxs(Sr,{children:[g.valesCount||0," vales"]})})}),e.jsx(he,{children:e.jsx(Oe,{label:"Ver detalles de vales",children:e.jsx(ke,{size:"sm",icon:e.jsx(qs,{}),onClick:()=>N(g)})})})]},g.client.id)))})]})})]})]}):e.jsxs(Te,{status:"info",children:[e.jsx(De,{}),e.jsx(n,{children:"Selecciona un perÃ­odo para generar el reporte de cobranza."})]}),e.jsxs(Ke,{isOpen:P,onClose:R,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsxs(Xe,{children:["Detalles de Vales - ",d==null?void 0:d.client.name]}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:d&&e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Cliente:"}),e.jsx(n,{children:d.client.name})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Total Deuda:"}),e.jsx(n,{color:"red.600",fontWeight:"bold",fontSize:"lg",children:w(d.remainingAmount)})]}),e.jsx(hs,{}),e.jsx(n,{fontWeight:"bold",children:"Detalle de Vales:"}),(d.vouchers||d.vales||[]).map((g,q)=>e.jsx(F,{variant:"outline",size:"sm",children:e.jsx(M,{children:e.jsxs(u,{spacing:2,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsxs(n,{fontWeight:"bold",children:["Vale #",g.id]}),e.jsx(n,{fontSize:"sm",color:"gray.500",children:E(g.createdAt)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"sm",children:"Monto Original:"}),e.jsx(n,{fontSize:"sm",children:w(g.amount)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"sm",children:"Usado:"}),e.jsx(n,{fontSize:"sm",color:"green.600",children:w(g.usedAmount)})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"sm",fontWeight:"bold",children:"Pendiente:"}),e.jsx(n,{fontSize:"sm",fontWeight:"bold",color:"red.600",children:w(g.remainingAmount)})]}),g.description&&e.jsx(n,{fontSize:"xs",color:"gray.500",children:g.description})]})})},g.id))]})})]})]})]})})},Ql=()=>{const s=xs(),t=Gs({base:!0,md:!1}),{isOpen:r,onOpen:a,onClose:i}=Ge(),{isOpen:l,onOpen:o,onClose:c}=Ge(),{isOpen:d,onOpen:x,onClose:P}=Ge(),{districts:A,fetchDistricts:R}=Zr(),[f,p]=S.useState([]),[T,k]=S.useState(!0),[y,w]=S.useState(!1),[E,N]=S.useState(new Date),[$,L]=S.useState(null),[g,q]=S.useState(""),[b,ae]=S.useState("all"),[v,Q]=S.useState("all"),[W,Z]=S.useState({name:"",document:"",phone:"",email:"",address:"",district:"",reference:"",notes:""}),ve=async()=>{try{k(!0);const D=await Y.get("/api/clients");D.data.success&&(p(D.data.data),N(new Date))}catch(D){console.error("Error al cargar clientes:",D),s({title:"Error",description:"No se pudieron cargar los clientes",status:"error",duration:3e3,isClosable:!0})}finally{k(!1)}},oe=async()=>{try{w(!0);const D=await Y.get("/api/clients");D.data.success&&(p(D.data.data),N(new Date),console.log("ðŸ”„ ActualizaciÃ³n silenciosa de clientes"))}catch(D){console.error("Error en actualizaciÃ³n silenciosa de clientes:",D)}finally{w(!1)}};S.useEffect(()=>{ve(),R();const D=setInterval(oe,3e4);return()=>clearInterval(D)},[]);const pe=async()=>{var D,B;try{(await Y.post("/api/clients",W)).data.success&&(s({title:"Cliente creado",description:"El cliente se ha registrado exitosamente",status:"success",duration:3e3,isClosable:!0}),ve(),i(),ie())}catch(je){console.error("Error al crear cliente:",je),s({title:"Error",description:((B=(D=je.response)==null?void 0:D.data)==null?void 0:B.message)||"No se pudo crear el cliente",status:"error",duration:3e3,isClosable:!0})}},Le=async()=>{var D,B;try{(await Y.put(`/api/clients/${$.id}`,W)).data.success&&(s({title:"Cliente actualizado",description:"Los datos del cliente se han actualizado",status:"success",duration:3e3,isClosable:!0}),ve(),c(),ie())}catch(je){console.error("Error al actualizar cliente:",je),s({title:"Error",description:((B=(D=je.response)==null?void 0:D.data)==null?void 0:B.message)||"No se pudo actualizar el cliente",status:"error",duration:3e3,isClosable:!0})}},z=async D=>{if(window.confirm("Â¿EstÃ¡s seguro de que quieres eliminar este cliente?"))try{(await Y.delete(`/api/clients/${D}`)).data.success&&(s({title:"Cliente eliminado",description:"El cliente ha sido eliminado exitosamente",status:"success",duration:3e3,isClosable:!0}),ve())}catch(B){console.error("Error al eliminar cliente:",B),s({title:"Error",description:"No se pudo eliminar el cliente",status:"error",duration:3e3,isClosable:!0})}},X=D=>{L(D),Z({name:D.name||"",document:D.documentNumber||"",phone:D.phone||"",email:D.email||"",address:D.address||"",district:D.district||"",reference:D.reference||"",notes:D.notes||""}),o()},Se=D=>{L(D),x()},ie=()=>{Z({name:"",document:"",phone:"",email:"",address:"",district:"",reference:"",notes:""}),L(null)},ne=f.filter(D=>{const B=D.name.toLowerCase().includes(g.toLowerCase())||D.documentNumber.includes(g)||D.phone.includes(g),je=b==="all"||D.status===b,I=v==="all"||D.district===v;return B&&je&&I}),Ie=f.length,fe=f.filter(D=>D.status==="active").length;return T?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsxs(_,{p:6,children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(ys,{justify:"space-between",align:"center",wrap:"wrap",gap:4,children:[e.jsxs(u,{align:"start",spacing:2,children:[e.jsx(K,{size:"lg",color:"blue.600",children:"GestiÃ³n de Clientes"}),e.jsx(n,{color:"gray.600",children:"Administra la informaciÃ³n de tus clientes"})]}),e.jsxs(h,{spacing:4,children:[e.jsx(O,{leftIcon:e.jsx(mn,{}),onClick:oe,variant:"outline",isLoading:y,children:"Actualizar"}),e.jsx(O,{leftIcon:e.jsx(ut,{}),onClick:a,colorScheme:"blue",children:"Nuevo Cliente"})]})]}),e.jsxs(as,{columns:{base:1,md:3},spacing:4,children:[e.jsx(F,{children:e.jsx(M,{children:e.jsxs(h,{justify:"space-between",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Total Clientes"}),e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:Ie})]}),e.jsx(Us,{size:24,color:"#3182CE"})]})})}),e.jsx(F,{children:e.jsx(M,{children:e.jsxs(h,{justify:"space-between",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Clientes Activos"}),e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"green.600",children:fe})]}),e.jsx(Us,{size:24,color:"#38A169"})]})})}),e.jsx(F,{children:e.jsx(M,{children:e.jsxs(h,{justify:"space-between",children:[e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontSize:"sm",color:"gray.600",children:"Ãšltima ActualizaciÃ³n"}),e.jsxs(h,{spacing:2,children:[e.jsx(n,{fontSize:"sm",fontWeight:"bold",color:"gray.600",children:E.toLocaleTimeString()}),y&&e.jsx(_,{w:"8px",h:"8px",bg:"blue.500",borderRadius:"50%",animation:"pulse 1.5s ease-in-out infinite"})]})]}),e.jsx(mn,{size:20,color:"#718096"})]})})})]}),e.jsx(F,{children:e.jsx(M,{children:e.jsxs(h,{spacing:4,wrap:"wrap",children:[e.jsx(re,{placeholder:"Buscar por nombre, DNI o telÃ©fono...",value:g,onChange:D=>q(D.target.value),maxW:"300px"}),e.jsxs(rs,{value:b,onChange:D=>ae(D.target.value),maxW:"200px",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"inactive",children:"Inactivos"})]}),e.jsxs(rs,{value:v,onChange:D=>Q(D.target.value),maxW:"200px",placeholder:"Seleccionar distrito",children:[e.jsx("option",{value:"all",children:"Todos los distritos"}),A.map(D=>e.jsx("option",{value:D.name,children:D.name},D.id))]}),e.jsx(O,{variant:"outline",size:"sm",onClick:()=>{q(""),ae("all"),Q("all")},children:"Limpiar Filtros"})]})})}),e.jsxs(F,{children:[e.jsx(Pe,{children:e.jsxs(h,{justify:"space-between",children:[e.jsx(K,{size:"md",children:"Lista de Clientes"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["Mostrando ",ne.length," de ",Ie," clientes",v!=="all"&&` en ${v}`,b!=="all"&&` (${b==="active"?"Activos":"Inactivos"})`]})]})}),e.jsx(M,{children:t?e.jsx(u,{spacing:4,children:ne.map(D=>e.jsx(F,{w:"full",variant:"outline",children:e.jsx(M,{children:e.jsxs(u,{align:"start",spacing:3,children:[e.jsxs(h,{justify:"space-between",w:"full",children:[e.jsx(n,{fontWeight:"bold",children:D.name}),e.jsx(Ce,{colorScheme:D.status==="active"?"green":"gray",children:D.status==="active"?"Activo":"Inactivo"})]}),e.jsxs(u,{align:"start",spacing:1,w:"full",children:[e.jsxs(h,{children:[e.jsx(ta,{size:14,color:"#718096"}),e.jsxs(n,{fontSize:"sm",color:"gray.600",children:["DNI: ",D.documentNumber]})]}),e.jsxs(h,{children:[e.jsx(Hs,{size:14,color:"#718096"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:D.phone})]}),e.jsxs(h,{children:[e.jsx(wt,{size:14,color:"#718096"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:D.district})]})]}),e.jsxs(h,{spacing:2,children:[e.jsx(Oe,{label:"Ver detalles",children:e.jsx(ke,{icon:e.jsx(qs,{}),size:"sm",onClick:()=>Se(D)})}),e.jsx(Oe,{label:"Editar",children:e.jsx(ke,{icon:e.jsx(Tr,{}),size:"sm",colorScheme:"blue",onClick:()=>X(D)})}),e.jsx(Oe,{label:"Eliminar",children:e.jsx(ke,{icon:e.jsx(fn,{}),size:"sm",colorScheme:"red",onClick:()=>z(D.id)})})]})]})})},D.id))}):e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(ue,{children:"Cliente"}),e.jsx(ue,{children:"DNI"}),e.jsx(ue,{children:"TelÃ©fono"}),e.jsx(ue,{children:"Distrito"}),e.jsx(ue,{children:"Estado"}),e.jsx(ue,{children:"Acciones"})]})}),e.jsx(nt,{children:ne.map(D=>e.jsxs(fs,{children:[e.jsx(he,{children:e.jsxs(u,{align:"start",spacing:1,children:[e.jsx(n,{fontWeight:"bold",children:D.name}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:D.email})]})}),e.jsx(he,{children:D.documentNumber}),e.jsx(he,{children:D.phone}),e.jsx(he,{children:D.district}),e.jsx(he,{children:e.jsx(Ce,{colorScheme:D.status==="active"?"green":"gray",children:D.status==="active"?"Activo":"Inactivo"})}),e.jsx(he,{children:e.jsxs(h,{spacing:2,children:[e.jsx(Oe,{label:"Ver detalles",children:e.jsx(ke,{icon:e.jsx(qs,{}),size:"sm",onClick:()=>Se(D)})}),e.jsx(Oe,{label:"Editar",children:e.jsx(ke,{icon:e.jsx(Tr,{}),size:"sm",colorScheme:"blue",onClick:()=>X(D)})}),e.jsx(Oe,{label:"Eliminar",children:e.jsx(ke,{icon:e.jsx(fn,{}),size:"sm",colorScheme:"red",onClick:()=>z(D.id)})})]})})]},D.id))})]})})]})]}),e.jsxs(Ke,{isOpen:r,onClose:i,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Nuevo Cliente"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Nombre Completo"}),e.jsx(re,{value:W.name,onChange:D=>Z({...W,name:D.target.value}),placeholder:"Ingresa el nombre completo"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"DNI"}),e.jsx(re,{value:W.document,onChange:D=>Z({...W,document:D.target.value}),placeholder:"Ingresa el DNI"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"TelÃ©fono"}),e.jsx(re,{value:W.phone,onChange:D=>Z({...W,phone:D.target.value}),placeholder:"Ingresa el telÃ©fono"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Email"}),e.jsx(re,{type:"email",value:W.email,onChange:D=>Z({...W,email:D.target.value}),placeholder:"Ingresa el email"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"DirecciÃ³n"}),e.jsx(re,{value:W.address,onChange:D=>Z({...W,address:D.target.value}),placeholder:"Ingresa la direcciÃ³n"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Distrito"}),e.jsx(re,{value:W.district,onChange:D=>Z({...W,district:D.target.value}),placeholder:"Ingresa el distrito"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Referencia"}),e.jsx(re,{value:W.reference,onChange:D=>Z({...W,reference:D.target.value}),placeholder:"Referencia de la direcciÃ³n"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas"}),e.jsx(Ns,{value:W.notes,onChange:D=>Z({...W,notes:D.target.value}),placeholder:"Notas adicionales"})]}),e.jsx(O,{colorScheme:"blue",onClick:pe,w:"full",children:"Crear Cliente"})]})})]})]}),e.jsxs(Ke,{isOpen:l,onClose:c,size:"lg",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Editar Cliente"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsxs(u,{spacing:4,children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Nombre Completo"}),e.jsx(re,{value:W.name,onChange:D=>Z({...W,name:D.target.value}),placeholder:"Ingresa el nombre completo"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"DNI"}),e.jsx(re,{value:W.document,onChange:D=>Z({...W,document:D.target.value}),placeholder:"Ingresa el DNI"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"TelÃ©fono"}),e.jsx(re,{value:W.phone,onChange:D=>Z({...W,phone:D.target.value}),placeholder:"Ingresa el telÃ©fono"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Email"}),e.jsx(re,{type:"email",value:W.email,onChange:D=>Z({...W,email:D.target.value}),placeholder:"Ingresa el email"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"DirecciÃ³n"}),e.jsx(re,{value:W.address,onChange:D=>Z({...W,address:D.target.value}),placeholder:"Ingresa la direcciÃ³n"})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Distrito"}),e.jsx(re,{value:W.district,onChange:D=>Z({...W,district:D.target.value}),placeholder:"Ingresa el distrito"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Referencia"}),e.jsx(re,{value:W.reference,onChange:D=>Z({...W,reference:D.target.value}),placeholder:"Referencia de la direcciÃ³n"})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Notas"}),e.jsx(Ns,{value:W.notes,onChange:D=>Z({...W,notes:D.target.value}),placeholder:"Notas adicionales"})]}),e.jsx(O,{colorScheme:"blue",onClick:Le,w:"full",children:"Actualizar Cliente"})]})})]})]}),e.jsxs(Ke,{isOpen:d,onClose:P,size:"md",isCentered:!0,children:[e.jsx(Ye,{}),e.jsxs(Ze,{children:[e.jsx(Xe,{children:"Detalles del Cliente"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:$&&e.jsx(u,{spacing:4,align:"stretch",children:e.jsx(F,{children:e.jsx(M,{children:e.jsxs(u,{spacing:3,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Nombre:"}),e.jsx(n,{children:$.name})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"DNI:"}),e.jsx(n,{children:$.documentNumber})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"TelÃ©fono:"}),e.jsx(n,{children:$.phone})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Email:"}),e.jsx(n,{children:$.email||"No especificado"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"DirecciÃ³n:"}),e.jsx(n,{children:$.address})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Distrito:"}),e.jsx(n,{children:$.district})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Referencia:"}),e.jsx(n,{children:$.reference||"No especificada"})]}),e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontWeight:"bold",children:"Estado:"}),e.jsx(Ce,{colorScheme:$.status==="active"?"green":"gray",children:$.status==="active"?"Activo":"Inactivo"})]}),$.notes&&e.jsxs(u,{align:"stretch",children:[e.jsx(n,{fontWeight:"bold",children:"Notas:"}),e.jsx(n,{fontSize:"sm",color:"gray.600",children:$.notes})]})]})})})})})]})]})]})},Jl=()=>{const[s,t]=S.useState([]),[r,a]=S.useState(!0),[i,l]=S.useState(null),[o,c]=S.useState(!1),[d,x]=S.useState({version:"",title:"",content:"",effectiveDate:""}),[P,A]=S.useState({page:1,limit:10,total:0,pages:0}),[R,f]=S.useState("all"),{isOpen:p,onOpen:T,onClose:k}=Ge(),y=xs(),w=Me("white","gray.800");Me("gray.200","gray.600"),S.useEffect(()=>{E()},[P.page,R]);const E=async()=>{try{a(!0);const v=localStorage.getItem("token"),Q=new URLSearchParams({page:P.page,limit:P.limit});R!=="all"&&Q.append("status",R),console.log("ðŸ”„ Llamando a /api/terms-and-conditions con params:",Q.toString());const W=await os.get(`/api/terms-and-conditions?${Q}`);console.log("ðŸ“¦ Respuesta tÃ©rminos:",W.data),t(W.data.data||[]),A(Z=>{var ve,oe;return{...Z,total:((ve=W.data.pagination)==null?void 0:ve.total)||0,pages:((oe=W.data.pagination)==null?void 0:oe.pages)||1}})}catch(v){console.error("Error fetching terms:",v),y({title:"Error",description:"Error al cargar tÃ©rminos y condiciones",status:"error",duration:3e3,isClosable:!0})}finally{a(!1)}},N=()=>{l(null),c(!0),x({version:"",title:"",content:"",effectiveDate:new Date().toISOString().split("T")[0]}),T()},$=v=>{l(v),c(!0),x({version:v.version,title:v.title,content:v.content,effectiveDate:v.effectiveDate.split("T")[0]}),T()},L=v=>{l(v),c(!1),x({version:v.version,title:v.title,content:v.content,effectiveDate:v.effectiveDate.split("T")[0]}),T()},g=async v=>{var Q,W;v.preventDefault();try{const Z=localStorage.getItem("token");i?(await os.put(`/api/terms-and-conditions/${i.id}`,d),y({title:"Ã‰xito",description:"TÃ©rminos y condiciones actualizados",status:"success",duration:3e3,isClosable:!0})):(await os.post("/api/terms-and-conditions",d),y({title:"Ã‰xito",description:"TÃ©rminos y condiciones creados",status:"success",duration:3e3,isClosable:!0})),k(),E()}catch(Z){console.error("Error saving terms:",Z),y({title:"Error",description:((W=(Q=Z.response)==null?void 0:Q.data)==null?void 0:W.message)||"Error al guardar tÃ©rminos",status:"error",duration:3e3,isClosable:!0})}},q=async v=>{try{const Q=localStorage.getItem("token");await os.patch(`/api/terms-and-conditions/${v.id}/toggle`,{}),y({title:"Ã‰xito",description:`TÃ©rminos ${v.isActive?"desactivados":"activados"}`,status:"success",duration:3e3,isClosable:!0}),E()}catch(Q){console.error("Error toggling status:",Q),y({title:"Error",description:"Error al cambiar estado",status:"error",duration:3e3,isClosable:!0})}},b=async v=>{var Q,W;if(window.confirm("Â¿EstÃ¡s seguro de eliminar estos tÃ©rminos y condiciones?"))try{const Z=localStorage.getItem("token");await os.delete(`/api/terms-and-conditions/${v.id}`),y({title:"Ã‰xito",description:"TÃ©rminos y condiciones eliminados",status:"success",duration:3e3,isClosable:!0}),E()}catch(Z){console.error("Error deleting terms:",Z),y({title:"Error",description:((W=(Q=Z.response)==null?void 0:Q.data)==null?void 0:W.message)||"Error al eliminar tÃ©rminos",status:"error",duration:3e3,isClosable:!0})}},ae=v=>new Date(v).toLocaleDateString("es-PE");return r?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsxs(_,{p:6,bg:w,borderRadius:"lg",boxShadow:"sm",children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:"GestiÃ³n de TÃ©rminos y Condiciones"}),e.jsx(O,{leftIcon:e.jsx(Mr,{}),colorScheme:"blue",onClick:N,children:"Crear Nuevos TÃ©rminos"})]}),e.jsx(h,{spacing:4,children:e.jsxs(U,{maxW:"200px",children:[e.jsx(G,{children:"Estado"}),e.jsxs(rs,{value:R,onChange:v=>f(v.target.value),children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"inactive",children:"Inactivos"})]})]})}),e.jsx(_,{overflowX:"auto",children:e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(ue,{children:"VersiÃ³n"}),e.jsx(ue,{children:"TÃ­tulo"}),e.jsx(ue,{children:"Estado"}),e.jsx(ue,{children:"Fecha Vigencia"}),e.jsx(ue,{children:"Creado"}),e.jsx(ue,{children:"Acciones"})]})}),e.jsx(nt,{children:s.map(v=>e.jsxs(fs,{children:[e.jsx(he,{fontWeight:"bold",children:v.version}),e.jsx(he,{maxW:"300px",isTruncated:!0,children:v.title}),e.jsx(he,{children:e.jsx(Ce,{colorScheme:v.isActive?"green":"red",variant:"subtle",children:v.isActive?"Activo":"Inactivo"})}),e.jsx(he,{children:ae(v.effectiveDate)}),e.jsx(he,{children:ae(v.createdAt)}),e.jsx(he,{children:e.jsxs(h,{spacing:2,children:[e.jsx(Oe,{label:"Ver",children:e.jsx(ke,{icon:e.jsx(Wr,{}),size:"sm",variant:"ghost",onClick:()=>L(v)})}),e.jsx(Oe,{label:"Editar",children:e.jsx(ke,{icon:e.jsx(Yt,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:()=>$(v)})}),e.jsx(Oe,{label:v.isActive?"Desactivar":"Activar",children:e.jsx(Cr,{isChecked:v.isActive,onChange:()=>q(v),colorScheme:"green"})}),!v.isActive&&e.jsx(Oe,{label:"Eliminar",children:e.jsx(ke,{icon:e.jsx($r,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>b(v)})})]})})]},v.id))})]})}),P.pages>1&&e.jsxs(h,{justify:"center",spacing:4,children:[e.jsx(O,{isDisabled:P.page===1,onClick:()=>A(v=>({...v,page:v.page-1})),children:"Anterior"}),e.jsxs(n,{children:["PÃ¡gina ",P.page," de ",P.pages]}),e.jsx(O,{isDisabled:P.page===P.pages,onClick:()=>A(v=>({...v,page:v.page+1})),children:"Siguiente"})]})]}),e.jsxs(Ke,{isOpen:p,onClose:k,size:"xl",children:[e.jsx(Ye,{}),e.jsxs(Ze,{maxW:"800px",children:[e.jsx(Xe,{children:o?"Editar TÃ©rminos y Condiciones":"Ver TÃ©rminos y Condiciones"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsx("form",{onSubmit:g,children:e.jsxs(u,{spacing:4,align:"stretch",children:[e.jsxs(h,{children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"VersiÃ³n"}),e.jsx(re,{value:d.version,onChange:v=>x(Q=>({...Q,version:v.target.value})),placeholder:"ej: 1.0, 2.0",isDisabled:!o})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Fecha de Vigencia"}),e.jsx(re,{type:"date",value:d.effectiveDate,onChange:v=>x(Q=>({...Q,effectiveDate:v.target.value})),isDisabled:!o})]})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"TÃ­tulo"}),e.jsx(re,{value:d.title,onChange:v=>x(Q=>({...Q,title:v.target.value})),placeholder:"TÃ­tulo de los tÃ©rminos y condiciones",isDisabled:!o})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Contenido"}),e.jsx(Ns,{value:d.content,onChange:v=>x(Q=>({...Q,content:v.target.value})),placeholder:"Contenido completo de los tÃ©rminos y condiciones...",rows:15,isDisabled:!o})]}),o&&e.jsxs(h,{justify:"flex-end",children:[e.jsx(O,{variant:"ghost",onClick:k,children:"Cancelar"}),e.jsx(O,{type:"submit",colorScheme:"blue",children:i?"Actualizar":"Crear"})]}),!o&&e.jsx(h,{justify:"flex-end",children:e.jsx(O,{onClick:k,children:"Cerrar"})})]})})})]})]})]})},Kl=()=>{const[s,t]=xi(),[r,a]=S.useState([]),[i,l]=S.useState(!0),{user:o}=Os(),[c,d]=S.useState(null),[x,P]=S.useState(!1),[A,R]=S.useState(!1),[f,p]=S.useState({username:"",email:"",password:"",role:"repartidor",isActive:!0,firstName:"",lastName:"",documentNumber:"",phone:"",address:"",district:"",reference:"",vehicleType:"",vehiclePlate:"",licenseNumber:"",insuranceNumber:"",emergencyContact:"",emergencyPhone:""}),[T,k]=S.useState(!1),[y,w]=S.useState({page:1,limit:10,total:0,pages:0}),[E,N]=S.useState("all"),{isOpen:$,onOpen:L,onClose:g}=Ge(),q=xs(),b=Me("white","gray.800");Me("gray.200","gray.600"),S.useEffect(()=>{const z=s.get("role");z&&z!=="all"&&N(z)},[s]),S.useEffect(()=>{ae()},[y.page,E]);const ae=async()=>{var z,X,Se;try{l(!0);const ie=localStorage.getItem("token");console.log("ðŸ”‘ Token para usuarios:",ie?"Presente":"Ausente"),console.log("ðŸ”‘ Token completo:",ie),ie&&!os.defaults.headers.common.Authorization&&(os.defaults.headers.common.Authorization=`Bearer ${ie}`,console.log("ðŸ”‘ Token configurado en axios")),console.log("ðŸ”‘ Header Authorization actual:",os.defaults.headers.common.Authorization),console.log("ðŸ”„ Llamando a /api/users/role con role:",E);let ne;if(E==="all"){console.log("ðŸ”„ Obteniendo usuarios de todos los roles...");const[Ie,fe,D]=await Promise.all([os.get("/api/users/role?role=admin"),os.get("/api/users/role?role=vendedor"),os.get("/api/users/role?role=repartidor")]);console.log("ðŸ“¦ Admin users:",Ie.data),console.log("ðŸ“¦ Vendedor users:",fe.data),console.log("ðŸ“¦ Repartidor users:",D.data),ne={data:{success:!0,data:[...Ie.data.success?Ie.data.data:[],...fe.data.success?fe.data.data:[],...D.data.success?D.data.data:[]]}}}else console.log("ðŸ”„ Obteniendo usuarios del rol:",E),ne=await os.get(`/api/users/role?role=${E}`);console.log("ðŸ“¦ Respuesta usuarios:",ne.data),ne.data.success?(a(ne.data.data||[]),w(Ie=>{var fe;return{...Ie,total:((fe=ne.data.data)==null?void 0:fe.length)||0,pages:1}})):(a([]),w(Ie=>({...Ie,total:0,pages:1})))}catch(ie){console.error("Error fetching users:",ie),console.error("Error details:",(z=ie.response)==null?void 0:z.data),console.error("Error status:",(X=ie.response)==null?void 0:X.status),console.error("Error headers:",(Se=ie.response)==null?void 0:Se.headers),q({title:"Error",description:"Error al cargar usuarios",status:"error",duration:3e3,isClosable:!0}),a([])}finally{l(!1)}},v=()=>{d(null),R(!0),P(!0),p({username:"",email:"",password:"",role:"repartidor",isActive:!0,firstName:"",lastName:"",documentNumber:"",phone:"",address:"",district:"",reference:"",vehicleType:"",vehiclePlate:"",licenseNumber:"",insuranceNumber:"",emergencyContact:"",emergencyPhone:""}),L()},Q=z=>{d(z),R(!1),P(!0),p({username:z.username,email:z.email,password:"",role:z.role,isActive:z.isActive,firstName:z.firstName||"",lastName:z.lastName||"",documentNumber:z.documentNumber||"",phone:z.phone||"",address:z.address||"",district:z.district||"",reference:z.reference||"",vehicleType:z.vehicleType||"",vehiclePlate:z.vehiclePlate||"",licenseNumber:z.licenseNumber||"",insuranceNumber:z.insuranceNumber||"",emergencyContact:z.emergencyContact||"",emergencyPhone:z.emergencyPhone||""}),L()},W=z=>{d(z),R(!1),P(!1),p({username:z.username,email:z.email,password:"",role:z.role,isActive:z.isActive,firstName:z.firstName||"",lastName:z.lastName||"",documentNumber:z.documentNumber||"",phone:z.phone||"",address:z.address||"",district:z.district||"",reference:z.reference||"",vehicleType:z.vehicleType||"",vehiclePlate:z.vehiclePlate||"",licenseNumber:z.licenseNumber||"",insuranceNumber:z.insuranceNumber||"",emergencyContact:z.emergencyContact||"",emergencyPhone:z.emergencyPhone||""}),L()},Z=async z=>{var X,Se;z.preventDefault();try{const ie=localStorage.getItem("token"),ne={username:f.username,email:f.email,role:f.role,isActive:f.isActive,firstName:f.firstName||"",lastName:f.lastName||"",phone:f.phone||"",address:f.address||"",district:f.district||"",reference:f.reference||""};(A||f.password)&&(ne.password=f.password),A?(await os.post("/api/users",ne),q({title:"Ã‰xito",description:"Usuario creado exitosamente",status:"success",duration:3e3,isClosable:!0})):(await os.put(`/api/users/${c.id}`,ne),q({title:"Ã‰xito",description:"Usuario actualizado exitosamente",status:"success",duration:3e3,isClosable:!0})),g(),ae()}catch(ie){console.error("Error saving user:",ie),q({title:"Error",description:((Se=(X=ie.response)==null?void 0:X.data)==null?void 0:Se.message)||"Error al guardar usuario",status:"error",duration:3e3,isClosable:!0})}},ve=async z=>{try{const X=localStorage.getItem("token");await os.patch(`/api/users/${z.id}/toggle-status`,{}),q({title:"Ã‰xito",description:`Usuario ${z.isActive?"desactivado":"activado"}`,status:"success",duration:3e3,isClosable:!0}),ae()}catch(X){console.error("Error toggling status:",X),q({title:"Error",description:"Error al cambiar estado del usuario",status:"error",duration:3e3,isClosable:!0})}},oe=async z=>{var X,Se;if(o&&o.id===z.id){q({title:"Error",description:"No puedes eliminarte a ti mismo",status:"error",duration:3e3,isClosable:!0});return}if(window.confirm(`Â¿EstÃ¡s seguro de eliminar al usuario "${z.username}"?`))try{const ie=localStorage.getItem("token");await os.delete(`/api/users/${z.id}`),q({title:"Ã‰xito",description:"Usuario eliminado exitosamente",status:"success",duration:3e3,isClosable:!0}),ae()}catch(ie){console.error("Error deleting user:",ie),q({title:"Error",description:((Se=(X=ie.response)==null?void 0:X.data)==null?void 0:Se.message)||"Error al eliminar usuario",status:"error",duration:3e3,isClosable:!0})}},pe=z=>{switch(z){case"admin":return"red";case"vendedor":return"blue";case"repartidor":return"green";default:return"gray"}},Le=z=>{switch(z){case"admin":return"Administrador";case"vendedor":return"Vendedor";case"repartidor":return"Repartidor";default:return z}};return i?e.jsx(ls,{h:"400px",children:e.jsx(vs,{size:"xl"})}):e.jsxs(_,{p:6,bg:b,borderRadius:"lg",boxShadow:"sm",children:[e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(h,{justify:"space-between",children:[e.jsx(n,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",children:"GestiÃ³n de Usuarios"}),e.jsx(O,{leftIcon:e.jsx(Mr,{}),colorScheme:"blue",onClick:v,children:"Crear Usuario"})]}),e.jsx(h,{spacing:4,children:e.jsxs(U,{maxW:"200px",children:[e.jsx(G,{children:"Rol"}),e.jsxs(rs,{value:E,onChange:z=>N(z.target.value),children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"admin",children:"Administrador"}),e.jsx("option",{value:"vendedor",children:"Vendedor"}),e.jsx("option",{value:"repartidor",children:"Repartidor"})]})]})}),e.jsx(_,{overflowX:"auto",children:e.jsxs(tt,{variant:"simple",children:[e.jsx(rt,{children:e.jsxs(fs,{children:[e.jsx(ue,{children:"Usuario"}),e.jsx(ue,{children:"Nombre"}),e.jsx(ue,{children:"Email"}),e.jsx(ue,{children:"Rol"}),e.jsx(ue,{children:"Estado"}),e.jsx(ue,{children:"Creado"}),e.jsx(ue,{children:"Acciones"})]})}),e.jsx(nt,{children:r.map(z=>e.jsxs(fs,{children:[e.jsx(he,{fontWeight:"bold",children:z.username}),e.jsx(he,{children:z.firstName&&z.lastName?`${z.firstName} ${z.lastName}`:z.firstName||z.lastName||"-"}),e.jsx(he,{children:z.email}),e.jsx(he,{children:e.jsx(Ce,{colorScheme:pe(z.role),variant:"subtle",children:Le(z.role)})}),e.jsx(he,{children:e.jsx(Ce,{colorScheme:z.isActive?"green":"red",variant:"subtle",children:z.isActive?"Activo":"Inactivo"})}),e.jsx(he,{children:new Date(z.createdAt).toLocaleDateString("es-PE")}),e.jsx(he,{children:e.jsxs(h,{spacing:2,children:[e.jsx(Oe,{label:"Ver",children:e.jsx(ke,{icon:e.jsx(Wr,{}),size:"sm",variant:"ghost",onClick:()=>W(z)})}),e.jsx(Oe,{label:"Editar",children:e.jsx(ke,{icon:e.jsx(Yt,{}),size:"sm",variant:"ghost",colorScheme:"blue",onClick:()=>Q(z)})}),e.jsx(Oe,{label:z.isActive?"Desactivar":"Activar",children:e.jsx(Cr,{isChecked:z.isActive,onChange:()=>ve(z),colorScheme:"green"})}),e.jsx(Oe,{label:o&&o.id===z.id?"No puedes eliminarte a ti mismo":"Eliminar",children:e.jsx(ke,{icon:e.jsx($r,{}),size:"sm",variant:"ghost",colorScheme:"red",isDisabled:o&&o.id===z.id,onClick:()=>oe(z)})})]})})]},z.id))})]})}),y.pages>1&&e.jsxs(h,{justify:"center",spacing:4,children:[e.jsx(O,{isDisabled:y.page===1,onClick:()=>w(z=>({...z,page:z.page-1})),children:"Anterior"}),e.jsxs(n,{children:["PÃ¡gina ",y.page," de ",y.pages]}),e.jsx(O,{isDisabled:y.page===y.pages,onClick:()=>w(z=>({...z,page:z.page+1})),children:"Siguiente"})]})]}),e.jsxs(Ke,{isOpen:$,onClose:g,size:"xl",children:[e.jsx(Ye,{}),e.jsxs(Ze,{maxW:"800px",maxH:"90vh",overflowY:"auto",children:[e.jsx(Xe,{children:A?"Crear Usuario":x?"Editar Usuario":"Ver Usuario"}),e.jsx(es,{}),e.jsx(Qe,{pb:6,children:e.jsx("form",{onSubmit:Z,children:e.jsxs(u,{spacing:6,align:"stretch",children:[e.jsxs(_,{children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",mb:4,color:"blue.600",children:"InformaciÃ³n BÃ¡sica"}),e.jsxs(u,{spacing:4,children:[e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Nombre de Usuario"}),e.jsx(re,{value:f.username,onChange:z=>p(X=>({...X,username:z.target.value})),placeholder:"Nombre de usuario",isDisabled:!x})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Email"}),e.jsx(re,{type:"email",value:f.email,onChange:z=>p(X=>({...X,email:z.target.value})),placeholder:"correo@ejemplo.com",isDisabled:!x})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Nombre"}),e.jsx(re,{value:f.firstName,onChange:z=>p(X=>({...X,firstName:z.target.value})),placeholder:"Nombre",isDisabled:!x})]}),e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Apellido"}),e.jsx(re,{value:f.lastName,onChange:z=>p(X=>({...X,lastName:z.target.value})),placeholder:"Apellido",isDisabled:!x})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(G,{children:"DNI"}),e.jsx(re,{value:f.documentNumber,onChange:z=>p(X=>({...X,documentNumber:z.target.value})),placeholder:"12345678",isDisabled:!x})]}),e.jsxs(U,{children:[e.jsx(G,{children:"TelÃ©fono"}),e.jsx(re,{value:f.phone,onChange:z=>p(X=>({...X,phone:z.target.value})),placeholder:"987654321",isDisabled:!x})]})]}),e.jsxs(U,{isRequired:A,children:[e.jsxs(G,{children:["ContraseÃ±a ",!A&&"(dejar vacÃ­o para mantener la actual)"]}),e.jsxs(Pt,{children:[e.jsx(re,{type:T?"text":"password",value:f.password,onChange:z=>p(X=>({...X,password:z.target.value})),placeholder:A?"ContraseÃ±a":"Nueva contraseÃ±a (opcional)",isDisabled:!x}),e.jsx($n,{children:e.jsx(ke,{"aria-label":T?"Ocultar contraseÃ±a":"Mostrar contraseÃ±a",icon:T?e.jsx(ea,{}):e.jsx(qs,{}),variant:"ghost",size:"sm",onClick:()=>k(!T),isDisabled:!x})})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{isRequired:!0,children:[e.jsx(G,{children:"Rol"}),e.jsxs(rs,{value:f.role,onChange:z=>p(X=>({...X,role:z.target.value})),isDisabled:!x,children:[e.jsx("option",{value:"repartidor",children:"Repartidor"}),e.jsx("option",{value:"vendedor",children:"Vendedor"}),e.jsx("option",{value:"admin",children:"Administrador"})]})]}),e.jsx(U,{children:e.jsxs(h,{justify:"space-between",children:[e.jsx(G,{mb:0,children:"Usuario Activo"}),e.jsx(Cr,{isChecked:f.isActive,onChange:z=>p(X=>({...X,isActive:z.target.checked})),isDisabled:!x,colorScheme:"green"})]})})]})]})]}),e.jsxs(_,{children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",mb:4,color:"blue.600",children:"DirecciÃ³n"}),e.jsxs(u,{spacing:4,children:[e.jsxs(U,{children:[e.jsx(G,{children:"DirecciÃ³n"}),e.jsx(re,{value:f.address,onChange:z=>p(X=>({...X,address:z.target.value})),placeholder:"Jr. Las Flores 123",isDisabled:!x})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(G,{children:"Distrito"}),e.jsx(re,{value:f.district,onChange:z=>p(X=>({...X,district:z.target.value})),placeholder:"CallerÃ­a",isDisabled:!x})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Referencia"}),e.jsx(re,{value:f.reference,onChange:z=>p(X=>({...X,reference:z.target.value})),placeholder:"Frente al parque",isDisabled:!x})]})]})]})]}),f.role==="repartidor"&&e.jsxs(_,{children:[e.jsx(n,{fontSize:"lg",fontWeight:"bold",mb:4,color:"green.600",children:"Datos de Repartidor"}),e.jsxs(u,{spacing:4,children:[e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(G,{children:"Tipo de VehÃ­culo"}),e.jsxs(rs,{value:f.vehicleType,onChange:z=>p(X=>({...X,vehicleType:z.target.value})),isDisabled:!x,children:[e.jsx("option",{value:"",children:"Seleccionar"}),e.jsx("option",{value:"motorcycle",children:"Motocicleta"}),e.jsx("option",{value:"bicycle",children:"Bicicleta"}),e.jsx("option",{value:"car",children:"Auto"}),e.jsx("option",{value:"truck",children:"CamiÃ³n"})]})]}),e.jsxs(U,{children:[e.jsx(G,{children:"Placa del VehÃ­culo"}),e.jsx(re,{value:f.vehiclePlate,onChange:z=>p(X=>({...X,vehiclePlate:z.target.value})),placeholder:"ABC-123",isDisabled:!x})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(G,{children:"NÃºmero de Licencia"}),e.jsx(re,{value:f.licenseNumber,onChange:z=>p(X=>({...X,licenseNumber:z.target.value})),placeholder:"12345678",isDisabled:!x})]}),e.jsxs(U,{children:[e.jsx(G,{children:"NÃºmero de Seguro"}),e.jsx(re,{value:f.insuranceNumber,onChange:z=>p(X=>({...X,insuranceNumber:z.target.value})),placeholder:"987654321",isDisabled:!x})]})]}),e.jsxs(h,{spacing:4,w:"full",children:[e.jsxs(U,{children:[e.jsx(G,{children:"Contacto de Emergencia"}),e.jsx(re,{value:f.emergencyContact,onChange:z=>p(X=>({...X,emergencyContact:z.target.value})),placeholder:"MarÃ­a GarcÃ­a",isDisabled:!x})]}),e.jsxs(U,{children:[e.jsx(G,{children:"TelÃ©fono de Emergencia"}),e.jsx(re,{value:f.emergencyPhone,onChange:z=>p(X=>({...X,emergencyPhone:z.target.value})),placeholder:"987654321",isDisabled:!x})]})]})]})]}),x&&e.jsxs(h,{justify:"flex-end",children:[e.jsx(O,{variant:"ghost",onClick:g,children:"Cancelar"}),e.jsx(O,{type:"submit",colorScheme:"blue",children:A?"Crear":"Actualizar"})]}),!x&&e.jsx(h,{justify:"flex-end",children:e.jsx(O,{onClick:g,children:"Cerrar"})})]})})})]})]})]})},Zl=()=>{const{token:s,checkAuth:t}=Os(),[r,a]=S.useState(!0);return S.useEffect(()=>{(async()=>{try{console.log("ðŸ”„ Iniciando verificaciÃ³n de autenticaciÃ³n...");const l=await t();console.log("âœ… VerificaciÃ³n completada, autenticado:",l)}catch(l){console.error("âŒ Error en verificaciÃ³n de autenticaciÃ³n:",l)}finally{a(!1)}})()},[t]),r?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Cargando..."})]}):e.jsxs(gi,{children:[e.jsx(is,{path:"/",element:e.jsx(Pl,{}),children:e.jsx(is,{index:!0,element:e.jsx(kl,{})})}),e.jsx(is,{path:"/guest-order",element:e.jsx(Ml,{})}),e.jsx(is,{path:"/receipt/:id",element:e.jsx(Bl,{})}),e.jsx(is,{path:"/track/:id",element:e.jsx(Vl,{})}),e.jsx(is,{path:"/delivery-login",element:e.jsx(Hl,{})}),e.jsxs(is,{path:"/dashboard",element:s?e.jsx(bo,{children:e.jsx(kn,{})}):e.jsx(cn,{to:"/",replace:!0}),children:[e.jsx(is,{index:!0,element:e.jsx(Is,{requiredRoles:["admin","vendedor"],children:e.jsx(Rl,{})})}),e.jsx(is,{path:"orders-management",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Ol,{})})}),e.jsx(is,{path:"delivery-fees",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx($l,{})})}),e.jsx(is,{path:"subscriptions",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Gl,{})})}),e.jsx(is,{path:"vales",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Yl,{})})}),e.jsx(is,{path:"collection-report",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Xl,{})})}),e.jsx(is,{path:"clients",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Ql,{})})}),e.jsx(is,{path:"terms-and-conditions",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Jl,{})})}),e.jsx(is,{path:"users-management",element:e.jsx(Is,{requiredRoles:["admin"],children:e.jsx(Kl,{})})})]}),e.jsx(is,{path:"/delivery-dashboard",element:s?e.jsx(kn,{}):e.jsx(cn,{to:"/delivery-login",replace:!0}),children:e.jsx(is,{index:!0,element:e.jsx(Is,{requiredRoles:["repartidor"],children:e.jsx(ql,{})})})}),e.jsx(is,{path:"*",element:e.jsx(yo,{type:"404"})})]})},$s={base:1,content:1,dropdown:100,sticky:200,banner:300,overlay:400,header:999,sidebar:1e3,modal:1300,popover:1400,tooltip:1500,notification:1600,toast:1700,skipLink:1800},ec=ci`
  0% { opacity: 0.8; transform: scale(1); }
  50% { opacity: 0.4; transform: scale(1.2); }
  100% { opacity: 0.8; transform: scale(1); }
`,sc=di({zIndices:$s,styles:{global:{".pulse-animation":{animation:`${ec} 2s infinite`}}},components:{Modal:{baseStyle:{overlay:{zIndex:$s.modal},dialogContainer:{zIndex:$s.modal}}},Menu:{baseStyle:{list:{zIndex:$s.dropdown}}},Popover:{baseStyle:{content:{zIndex:$s.popover}}},Tooltip:{baseStyle:{zIndex:$s.tooltip}},Drawer:{baseStyle:{overlay:{zIndex:$s.modal},dialogContainer:{zIndex:$s.modal}}}},colors:{brand:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1"}}});wr.createRoot(document.getElementById("root")).render(e.jsx(me.StrictMode,{children:e.jsx(ui,{theme:sc,children:e.jsxs(mi,{children:[e.jsx(Zl,{}),e.jsx(Ji,{position:"top-right",autoClose:3e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!1,pauseOnHover:!1,style:{zIndex:1700,fontSize:"14px",maxWidth:"90vw"},toastStyle:{fontSize:"14px",padding:"8px 12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",margin:"8px",maxWidth:"90vw"}})]})})}));
